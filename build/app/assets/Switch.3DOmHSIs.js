import{t as e,r as i,n as t,ah as o,bI as n,C as a,N as s,ak as l,j as r,bJ as d,o as c,u as h,bf as p,ba as b,h as f,a8 as m,bK as u,bL as w,d as g,A as x}from"./index.mlCxaiYE.js";import{a as k}from"./PopoverDisclosure.OO70kItq.js";const v=["input","select","button","textarea"];let $=[],y=!1;function useKeyDown(e,t,o){const n="function"==typeof(a=e)?a:"string"==typeof a?e=>e.key===a:a?e=>!0:e=>!1;var a;i.useEffect((()=>{const handler=e=>{n(e)&&t(e)};return $.push({callback:handler,options:o}),()=>{$=$.filter((e=>e.callback!==handler))}}),[t,n,o])}window.addEventListener("keydown",(i=>{var t;if(!y)for(const o of $.reverse()){if(!0===i.defaultPrevented)break;(!(t=i.target)||!t.tagName||-1===v.indexOf(t.tagName.toLowerCase())&&"textbox"!==t.attributes.getNamedItem("role")?.value&&"true"!==t.attributes.getNamedItem("contenteditable")?.value||o.options?.allowInInput||e(i))&&o.callback(i)}})),window.addEventListener("compositionstart",(()=>{y=!0})),window.addEventListener("compositionend",(()=>{y=!1}));const C=t(k).withConfig({componentId:"sc-h9s1cb-0"})(["z-index:",";"],o.modal),I=t.div.withConfig({componentId:"sc-h9s1cb-1"})(["display:",";animation:"," 200ms ease;transform-origin:75% 0;background:",";border-radius:6px;padding:",";max-height:75vh;box-shadow:",";",";",";"," ",";"],(e=>e.$flex?"flex":"block"),n,a("menuBackground"),(e=>e.$shrink?"6px 0":"12px 24px"),a("menuShadow"),(e=>e.$width&&`width: ${e.$width}px`),(e=>e.$minWidth&&`min-width: ${e.$minWidth}px`),(e=>e.$scrollable?"\n      overflow-x: hidden;\n      overflow-y: auto;\n    ":"\n      overflow: hidden;\n    "),s("mobile","tablet")`
    position: fixed;
    z-index: ${o.menu};

    // 50 is a magic number that positions us nicely under the top bar
    top: ${e=>"bottom"===e.$mobilePosition?"auto":"50px"};
    bottom: ${e=>"bottom"===e.$mobilePosition?"0":"auto"};
    left: 8px;
    right: 8px;
    width: auto;
  `),P=i.forwardRef((({children:e,shrink:i,width:t=380,minWidth:o,scrollable:n=!0,flex:a,mobilePosition:s,...c},h)=>{const p=l();return useKeyDown("Escape",(e=>{c.visible&&!1!==c.hideOnEsc&&(e.preventDefault(),c.hide())}),{allowInInput:!0}),p?r(d,{...c,modal:!0,children:r(I,{ref:h,$shrink:i,$scrollable:n,$flex:a,$mobilePosition:s,children:e})}):r(C,{...c,hideOnEsc:!1,hideOnClickOutside:!0,children:r(I,{ref:h,$shrink:i,$width:t,$minWidth:o,$scrollable:n,$flex:a,children:e})})}));const N=c((function ResolvedCollectionIcon({collection:e,color:i,expanded:t,size:o,className:n}){const{ui:a}=h();if(!e.icon||"collection"===e.icon){const s=e.color??p[0],l=i||("dark"===a.resolvedTheme&&"currentColor"!==s?b(s)>.09?s:"currentColor":s),d=e.isPrivate?f.PrivateCollectionIcon:f.CollectionIcon;return r(d,{color:l,expanded:t,size:o,className:n})}return r(m,{value:e.icon,color:i??e.color??void 0,size:o,initial:e.initial,className:n,forceColor:!!i})}));const E=t.div.withConfig({componentId:"sc-1if8kk3-0"})(["padding-bottom:8px;",""],u()),z=t(w).withConfig({componentId:"sc-1if8kk3-1"})(["padding-bottom:0;width:100%;"]),L=t.label.withConfig({componentId:"sc-1if8kk3-2"})(["display:flex;align-items:center;user-select:none;gap:8px;"," ",""],(e=>"left"===e.$labelPosition?"flex-direction: row-reverse;":""),(e=>e.disabled?"opacity: 0.75;":"")),D=t.label.withConfig({componentId:"sc-1if8kk3-3"})(["position:relative;display:inline-block;width:","px;height:","px;flex-shrink:0;"],(e=>e.width),(e=>e.height)),O=t.span.withConfig({componentId:"sc-1if8kk3-4"})(["position:absolute;cursor:var(--pointer);top:0;left:0;right:0;bottom:0;background-color:",";-webkit-transition:0.4s;transition:0.4s;border-radius:",'px;&:before{position:absolute;content:"";height:',"px;width:","px;left:4px;bottom:4px;background-color:white;border-radius:50%;-webkit-transition:0.4s;transition:0.4s;}"],(e=>e.theme.slate),(e=>e.height),(e=>e.height-8),(e=>e.height-8)),K=t.input.withConfig({componentId:"sc-1if8kk3-5"})(["opacity:0;width:0;height:0;visibility:hidden;&:disabled + ","{opacity:0.75;cursor:default;}&:checked + ","{background-color:",";}&:focus + ","{box-shadow:0 0 1px ",";}&:checked + ",":before{transform:translateX(","px);}"],O,O,a("accent"),O,a("accent"),O,(e=>e.width-e.height)),R=i.forwardRef((function Switch({width:e=32,height:i=18,labelPosition:t="left",label:o,disabled:n,className:a,note:s,...l},d){const c=g(D,{width:e,height:i,className:o?void 0:a,children:[r(K,{ref:d,type:"checkbox",width:e,height:i,disabled:n,...l}),r(O,{width:e,height:i})]});return o?g(E,{children:[g(L,{disabled:n,htmlFor:l.id,className:a,$labelPosition:t,children:[c,r(z,{children:o})]}),s&&r(x,{type:"secondary",size:"small",style:{paddingRight:"left"===t?e:0,paddingLeft:"right"===t?e:0},children:s})]}):c}));export{N as C,P,R as S,useKeyDown as u};
