{"version":3,"file":"Home.Jf5BZVdS.js","sources":["../../../app/components/Icons/LanguageIcon.tsx","../../../app/components/LanguagePrompt.tsx","../../../app/scenes/Home.tsx"],"sourcesContent":["import * as React from \"react\";\n\nexport function LanguageIcon({ className }: { className?: string }) {\n  return (\n    <svg\n      width=\"32\"\n      height=\"32\"\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M21 18H16L14 16V6C14 4.89543 14.8954 4 16 4H28C29.1046 4 30 4.89543 30 6V16C30 17.1046 29.1046 18 28 18H27L25.4142 19.5858C24.6332 20.3668 23.3668 20.3668 22.5858 19.5858L21 18ZM16 15.1716V6H28V16H27H26.1716L25.5858 16.5858L24 18.1716L22.4142 16.5858L21.8284 16H21H16.8284L16 15.1716Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M16 13H4C2.89543 13 2 13.8954 2 15V25C2 26.1046 2.89543 27 4 27H5L6.58579 28.5858C7.36684 29.3668 8.63316 29.3668 9.41421 28.5858L11 27H16C17.1046 27 18 26.1046 18 25V15C18 13.8954 17.1046 13 16 13ZM9 17L6 16.9681C6 16.9681 5 17.016 5 18C5 18.984 6 19 6 19H8.5H10C10 19 9.57627 20.1885 8.38983 21.0831C7.20339 21.9777 5.7197 23 5.7197 23C5.7197 23 4.99153 23.6054 5.5 24.5C6.00847 25.3946 7 24.8403 7 24.8403L9.74576 22.8722L11.9492 24.6614C11.9492 24.6614 12.6271 25.3771 13.3051 24.4825C13.9831 23.5879 13.3051 23.0512 13.3051 23.0512L11.1017 21.262C11.1017 21.262 11.5 21 12 20L12.5 19H14C14 19 15 19.0319 15 18C15 16.9681 14 16.9681 14 16.9681L11 17V16C11 16 11.0169 15 10 15C8.98305 15 9 16 9 16V17Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M23.6672 12.5221L23.5526 12.1816H23.1934H20.8818H20.5215L20.4075 12.5235L20.082 13.5H19.2196L21.2292 8.10156H21.8774L21.5587 9.06116L20.7633 11.4562L20.5449 12.1138H21.2378H22.8374H23.5327L23.3114 11.4546L22.5072 9.05959L22.1855 8.10156H22.768L24.7887 13.5H23.9964L23.6672 12.5221Z\"\n        fill=\"currentColor\"\n        stroke=\"currentColor\"\n      />\n    </svg>\n  );\n}\n","import { m } from \"framer-motion\";\nimport find from \"lodash/find\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { languages, languageOptions } from \"@shared/i18n\";\nimport ButtonLink from \"~/components/ButtonLink\";\nimport Flex from \"~/components/Flex\";\nimport env from \"~/env\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useStores from \"~/hooks/useStores\";\nimport { detectLanguage } from \"~/utils/language\";\nimport { LanguageIcon } from \"./Icons/LanguageIcon\";\nimport Text from \"./Text\";\n\nexport default function LanguagePrompt() {\n  const { ui } = useStores();\n  const { t } = useTranslation();\n  const user = useCurrentUser();\n  const language = detectLanguage();\n\n  if (\n    language === \"en_US\" ||\n    language === user.language ||\n    !languages.includes(language)\n  ) {\n    return null;\n  }\n\n  const option = find(languageOptions, (o) => o.value === language);\n  const optionLabel = option ? option.label : \"\";\n  const appName = env.APP_NAME;\n\n  return (\n    <Wrapper\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n      transition={{ duration: 0.2 }}\n    >\n      <Flex align=\"center\" gap={12}>\n        <LanguageIcon />\n        <span>\n          <Text>\n            {appName} is available in your language – {optionLabel}, would you\n            like to change?\n          </Text>\n          <br />\n          <Link\n            onClick={async () => {\n              ui.set({ languagePromptDismissed: true });\n              await user.save({ language });\n            }}\n          >\n            {t(\"Change Language\")}\n          </Link>{\" \"}\n          &middot;{\" \"}\n          <Link onClick={() => ui.set({ languagePromptDismissed: true })}>\n            {t(\"Dismiss\")}\n          </Link>\n        </span>\n      </Flex>\n    </Wrapper>\n  );\n}\n\nconst Wrapper = styled(m.p)`\n  color: ${(props) => props.theme.text};\n  border: 1px solid ${(props) => props.theme.divider};\n  padding: 20px;\n  margin-top: 12px;\n  border-radius: 8px;\n  position: relative;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\n  a {\n    color: ${(props) => props.theme.text};\n    font-weight: 500;\n  }\n\n  a:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst Link = styled(ButtonLink)`\n  cursor: var(--cursor-pointer);\n  color: ${(props) => props.theme.text};\n  font-weight: 500;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n","import { observer } from \"mobx-react\";\nimport { HomeIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport { Action } from \"~/components/Actions\";\nimport Empty from \"~/components/Empty\";\nimport Heading from \"~/components/Heading\";\nimport InputSearchPage from \"~/components/InputSearchPage\";\nimport LanguagePrompt from \"~/components/LanguagePrompt\";\nimport PaginatedDocumentList from \"~/components/PaginatedDocumentList\";\nimport PinnedDocuments from \"~/components/PinnedDocuments\";\nimport { ResizingHeightContainer } from \"~/components/ResizingHeightContainer\";\nimport Scene from \"~/components/Scene\";\nimport Tab from \"~/components/Tab\";\nimport Tabs from \"~/components/Tabs\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport { usePostLoginPath } from \"~/hooks/useLastVisitedPath\";\nimport { usePinnedDocuments } from \"~/hooks/usePinnedDocuments\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport useStores from \"~/hooks/useStores\";\nimport NewDocumentMenu from \"~/menus/NewDocumentMenu\";\n\nfunction Home() {\n  const { documents, ui } = useStores();\n  const team = useCurrentTeam();\n  const user = useCurrentUser();\n  const { t } = useTranslation();\n  const [spendPostLoginPath] = usePostLoginPath();\n  const userId = user?.id;\n  const { pins, count } = usePinnedDocuments(\"home\");\n  const can = usePolicy(team);\n\n  const postLoginPath = spendPostLoginPath();\n  if (postLoginPath) {\n    return <Redirect to={postLoginPath} />;\n  }\n\n  return (\n    <Scene\n      icon={<HomeIcon />}\n      title={t(\"Home\")}\n      left={\n        <InputSearchPage source=\"dashboard\" label={t(\"Search documents\")} />\n      }\n      actions={\n        <Action>\n          <NewDocumentMenu />\n        </Action>\n      }\n    >\n      <ResizingHeightContainer>\n        {!ui.languagePromptDismissed && <LanguagePrompt key=\"language\" />}\n      </ResizingHeightContainer>\n      <Heading>{t(\"Home\")}</Heading>\n      <PinnedDocuments\n        pins={pins}\n        canUpdate={can.update}\n        placeholderCount={count}\n      />\n      <Documents>\n        <Tabs>\n          <Tab to=\"/home\" exact>\n            {t(\"Recently viewed\")}\n          </Tab>\n          <Tab to=\"/home/recent\" exact>\n            {t(\"Recently updated\")}\n          </Tab>\n          <Tab to=\"/home/created\">{t(\"Created by me\")}</Tab>\n        </Tabs>\n        <Switch>\n          <Route path=\"/home/recent\">\n            <PaginatedDocumentList\n              documents={documents.recentlyUpdated}\n              fetch={documents.fetchRecentlyUpdated}\n              empty={<Empty>{t(\"Weird, this shouldn’t ever be empty\")}</Empty>}\n              showCollection\n            />\n          </Route>\n          <Route path=\"/home/created\">\n            <PaginatedDocumentList\n              key=\"created\"\n              documents={documents.createdByUser(userId)}\n              fetch={documents.fetchOwned}\n              options={{\n                userId,\n              }}\n              empty={\n                <Empty>{t(\"You haven’t created any documents yet\")}</Empty>\n              }\n              showCollection\n            />\n          </Route>\n          <Route path=\"/home\">\n            <PaginatedDocumentList\n              key=\"recent\"\n              documents={documents.recentlyViewed}\n              fetch={documents.fetchRecentlyViewed}\n              empty={\n                <Empty>\n                  {t(\n                    \"Documents you’ve recently viewed will be here for easy access\"\n                  )}\n                </Empty>\n              }\n              showCollection\n            />\n          </Route>\n        </Switch>\n      </Documents>\n    </Scene>\n  );\n}\n\nconst Documents = styled.div`\n  position: relative;\n  background: ${s(\"background\")};\n`;\n\nexport default observer(Home);\n"],"names":["LanguageIcon","className","jsxs","width","height","viewBox","fill","xmlns","children","jsx","fillRule","clipRule","d","stroke","LanguagePrompt","ui","useStores","t","useTranslation","user","useCurrentUser","language","detectLanguage","languages","includes","option","find","languageOptions","o","value","optionLabel","label","appName","env","APP_NAME","Wrapper","animate","opacity","y","exit","transition","duration","Flex","align","gap","Text","Link","onClick","async","set","languagePromptDismissed","save","styled","m","p","withConfig","componentId","props","theme","text","divider","ButtonLink","Documents","div","s","observer","Home","documents","team","useCurrentTeam","spendPostLoginPath","usePostLoginPath","userId","id","pins","count","usePinnedDocuments","can","usePolicy","postLoginPath","Redirect","to","Scene","icon","HomeIcon","title","left","InputSearchPage","source","actions","Action","NewDocumentMenu","ResizingHeightContainer","Heading","PinnedDocuments","canUpdate","update","placeholderCount","Tabs","Tab","exact","Switch","Route","path","PaginatedDocumentList","recentlyUpdated","fetch","fetchRecentlyUpdated","empty","Empty","showCollection","createdByUser","fetchOwned","options","recentlyViewed","fetchRecentlyViewed"],"mappings":"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"}