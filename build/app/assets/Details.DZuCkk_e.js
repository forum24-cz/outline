const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Chrome.7WZ-Pyv7.js","assets/index.mlCxaiYE.js","assets/Badge.sHfYRIgC.js","assets/Item.dGEOVRdT.js","assets/PlaceholderText.UNfhMHoO.js","assets/DocumentContext.hhTeDqBR.js","assets/Scene.tZk0YIWv.js","assets/LoadingIndicatorBar.mGaD64ZX.js","assets/Switch.3DOmHSIs.js","assets/PopoverDisclosure.OO70kItq.js","assets/InputSelectPermission.lb2lIKIy.js","assets/TeamLogo.qV1feKYB.js","assets/useBoolean.4JQO1FDN.js","assets/useCurrentUser.zlImhYTS.js","assets/Time.rp9cc_zo.js","assets/index.esm.XsAbwjVB.js","assets/useCurrentTeam.fRZpnoZU.js","assets/usePolicy.wYF8wJNp.js","assets/SharedLayoutContext.2BBc39h7.js","assets/cloneDeep.KovzE0Sn.js"])))=>i.map(i=>d[i]);
import{aM as e,a as t,u as a,r as o,b as n,j as i,h as r,Z as l,n as s,a0 as c,C as d,g as u,_ as m,d as p,I as h,bS as b,A as f,o as g,e as y,z as C,am as k,F as v,B as w,an as S,N as x,X as j,ct as T,ao as D,bA as L,cu as I,cv as A,bz as P,H as B,aq as _,cw as E}from"./index.mlCxaiYE.js";import{B as M}from"./ButtonLink.tgoiIjKJ.js";import{C as N,S as q}from"./Switch.3DOmHSIs.js";import{I as R}from"./InputSelectNew.MYEDp3D-.js";import{C as H}from"./InputSelectPermission.lb2lIKIy.js";import{Q as F,b as U,U as z,M as $}from"./DocumentContext.hhTeDqBR.js";import{S as O}from"./Scene.tZk0YIWv.js";import{u as V}from"./useCurrentTeam.fRZpnoZU.js";import{u as Y}from"./usePolicy.wYF8wJNp.js";import{u as Q}from"./index.esm.XsAbwjVB.js";import{I as X}from"./ImageInput.dfilRqQV.js";import{S as Z}from"./SettingRow.96ERny3f.js";import"./PopoverDisclosure.OO70kItq.js";import"./PlaceholderText.UNfhMHoO.js";import"./LoadingIndicatorBar.mGaD64ZX.js";import"./TeamLogo.qV1feKYB.js";import"./useBoolean.4JQO1FDN.js";import"./useCurrentUser.zlImhYTS.js";import"./Badge.sHfYRIgC.js";import"./Item.dGEOVRdT.js";import"./Time.rp9cc_zo.js";import"./SharedLayoutContext.2BBc39h7.js";import"./authenticated.03alztlO.js";import"./urls.doI9odX4.js";import"./Notice.4wB6_cwE.js";import"./routeHelpers.MPg4vHxP.js";var G={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isHexColor2(e){return(0,a.default)(e),o.test(e)};var a=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(F);var o=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;e.exports=t.default,e.exports.default=t.default}(G,G.exports);const J=e(G.exports);function isHexColor(e){return"string"==typeof e&&J(e)}const DefaultCollectionInputSelect=({onSelectCollection:e,defaultCollectionId:s})=>{const{t:c}=t(),{collections:d}=a(),[u,m]=o.useState(!1),[p,h]=o.useState();n.useEffect((()=>{!async function fetchData(){if(!d.isLoaded&&!u&&!p)try{m(!0),await d.fetchPage({limit:100})}catch(e){l.error(c("Collections could not be loaded, please reload the app")),h(e)}finally{m(!1)}}()}),[p,c,u,d]);const b=n.useMemo((()=>d.nonPrivate.reduce(((e,t)=>[...e,{type:"item",label:t.name,value:t.id,icon:i(N,{collection:t})}]),[{type:"item",label:c("Home"),value:"home",icon:i(r.HomeIcon,{})}])),[d.nonPrivate,c]);return u?null:i(R,{options:b,value:s??"home",onChange:e,ariaLabel:c("Default collection"),label:c("Start view"),hideLabel:!0,short:!0})},InputColor=({value:e,onChange:a,...n})=>{const{t:r}=t(),l=U({modal:!0,placement:"bottom-end"});return p(z,{children:[i(h,{value:e,onChange:e=>a(e.target.value.replace(/^#?/,"#")),placeholder:"#",maxLength:7,...n}),i($,{...l,children:t=>i(K,{"aria-label":r("Show menu"),...t,$background:e})}),i(H,{...l,"aria-label":r("Select a color"),children:i(o.Suspense,{fallback:i(b,{children:p(f,{children:[r("Loading"),"…"]})}),children:i(W,{disableAlpha:!0,color:e,onChange:e=>a(e.hex)})})})]})},K=s(c).withConfig({componentId:"sc-1kyykgs-0"})(["background:",";border:1px solid ",";border-radius:50%;position:absolute;bottom:20px;right:6px;"],(e=>e.$background),d("inputBorder")),W=s(u((()=>m((()=>import("./Chrome.7WZ-Pyv7.js").then((e=>e.C))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))))).withConfig({componentId:"sc-1kyykgs-1"})(["background:inherit !important;box-shadow:none !important;border:0 !important;border-radius:0 !important;user-select:none;input{user-select:text;color:"," !important;}"],d("text"));const ee=g((function TeamDelete({onSubmit:e}){const[n,r]=o.useState(!1),{auth:s}=a(),c=V({rejectOnEmpty:!1}),{t:d}=t(),{register:u,handleSubmit:m,formState:b}=Q(),g=o.useCallback((async e=>{e.preventDefault();try{await s.requestDeleteTeam(),r(!0)}catch(t){l.error(t.message)}}),[s]),S=o.useCallback((async t=>{try{await s.deleteTeam(t),await s.logout(),e()}catch(a){l.error(a.message)}}),[s,e]),x=u("code",{required:y.EMAIL_ENABLED}),j=y.APP_NAME,T=c?.name;return p("form",{onSubmit:m(S),children:[n?p(C,{children:[i(f,{as:"p",type:"secondary",children:i(k,{children:"A confirmation code has been sent to your email address, please enter the code below to permanently destroy this workspace."})}),i(h,{placeholder:d("Confirmation code"),autoComplete:"off",autoFocus:!0,maxLength:8,required:!0,...x})]}):i(C,{children:i(f,{as:"p",type:"secondary",children:p(k,{children:["Deleting the ",i("strong",{children:{workspaceName:T}})," workspace will destroy all collections, documents, users, and associated data. You will be immediately logged out of ",{appName:j},"."]})})}),i(v,{justify:"flex-end",children:y.EMAIL_ENABLED&&!n?p(w,{type:"submit",onClick:g,neutral:!0,children:[d("Continue"),"…"]}):i(w,{type:"submit",disabled:b.isSubmitting||!b.isValid,danger:!0,children:b.isSubmitting?`${d("Deleting")}…`:d("Delete workspace")})})]})})),te=s.div.withConfig({componentId:"sc-1q2ia7p-0"})(["position:sticky;bottom:0;width:100vw;padding:16px 12px;margin-left:-12px;background:",";@supports (backdrop-filter:blur(20px)){backdrop-filter:blur(20px);background:",";}",""],d("background"),(e=>S(.2,e.theme.background)),x("tablet")`
    width: auto;
  `);const ae=g((function Details(){const{dialogs:e,ui:n}=a(),{t:s}=t(),c=V(),d=j(),u=Y(c),m=o.useRef(null),[b,g]=o.useState(c.preferences?.customTheme?.accent),[y,v]=o.useState(c.preferences?.customTheme?.accentText),[S,x]=o.useState(c.name),[N,H]=o.useState(c.subdomain),[F,U]=o.useState(c.preferences?.publicBranding),[z,$]=o.useState(c.defaultCollectionId),Q=T({accent:b,accentText:y},isHexColor),[G,J]=o.useState(c.getPreference(D.TocPosition)),K=o.useMemo((()=>[{type:"item",label:s("Left"),value:L.Left},{type:"item",label:s("Right"),value:L.Right}]),[s]),W=o.useCallback((e=>{J(e)}),[]),ae=o.useCallback((async e=>{e&&e.preventDefault();try{await c.save({name:S,subdomain:N,defaultCollectionId:z,preferences:{...c.preferences,publicBranding:F,customTheme:Q,tocPosition:G}}),l.success(s("Settings saved"))}catch(t){l.error(t.message)}}),[c,S,N,z,F,Q,s]),oe=o.useCallback((e=>{x(e.target.value)}),[]),ne=o.useCallback((e=>{H(e.target.value.toLowerCase())}),[]),ie=o.useCallback((e=>{l.error(e||s("Unable to upload new logo"))}),[s]),re=o.useCallback((e=>{$("home"===e?null:e)}),[]),le=m.current?.checkValidity(),se=o.useMemo((()=>"light"===n.resolvedTheme?I(Q):A(Q)),[Q,n.resolvedTheme]);return i(P,{theme:se,children:p(O,{title:s("Details"),icon:i(r.TeamIcon,{}),children:[i(B,{children:s("Details")}),i(f,{as:"p",type:"secondary",children:i(k,{children:"These settings affect the way that your workspace appears to everyone on the team."})}),p("form",{onSubmit:ae,ref:m,children:[i(B,{as:"h2",children:s("Display")}),i(Z,{label:s("Logo"),name:"avatarUrl",description:s("The logo is displayed at the top left of the application."),children:i(X,{onSuccess:async e=>{await c.save({avatarUrl:e}),l.success(s("Logo updated"))},onError:ie,model:c,borderRadius:0})}),i(Z,{label:s("Name"),name:"name",description:s("The workspace name, usually the same as your company name."),children:i(h,{id:"name",autoComplete:"organization",value:S,onChange:oe,required:!0})}),p(Z,{label:s("Theme"),name:"accent",description:p(C,{children:[s("Customize the interface look and feel.")," ",b&&i(C,{children:i(M,{onClick:()=>{g(null),v(null)},children:s("Reset theme")})})]}),children:[i(InputColor,{id:"accent",value:b??d.accent,label:s("Accent color"),onChange:g,flex:!0}),i(InputColor,{id:"accentText",value:y??d.accentText,label:s("Accent text color"),onChange:v,flex:!0})]}),c.avatarUrl&&i(Z,{name:D.PublicBranding,label:s("Public branding"),description:s("Show your team’s logo on public pages like login and shared documents."),children:i(q,{id:D.PublicBranding,name:D.PublicBranding,checked:F,onChange:e=>U(e.target.checked)})}),i(Z,{border:!1,label:s("Table of contents position"),name:"tocPosition",description:s("The side to display the table of contents in relation to the main content."),children:i(R,{options:K,value:G,onChange:W,ariaLabel:s("Table of contents position"),label:s("Table of contents position"),hideLabel:!0})}),i(B,{as:"h2",children:s("Behavior")}),i(Z,{visible:_,label:s("Subdomain"),name:"subdomain",description:N?p(C,{children:[i(k,{children:"Your workspace will be accessible at"})," ",p("strong",{children:[N,".",E()]})]}):s("Choose a subdomain to enable a login page just for your team."),children:i(h,{id:"subdomain",value:N||"",onChange:ne,autoComplete:"off",minLength:4,maxLength:32})}),i(Z,{border:!1,label:s("Start view"),name:"defaultCollectionId",description:s("This is the screen that workspace members will first see when they sign in."),children:i(DefaultCollectionInputSelect,{onSelectCollection:re,defaultCollectionId:z})}),i(te,{children:i(w,{type:"submit",disabled:c.isSaving||!le,children:c.isSaving?`${s("Saving")}…`:s("Save")})}),u.delete&&p(C,{children:[i("p",{children:" "}),i(B,{as:"h2",children:s("Danger")}),i(Z,{name:"delete",border:!1,label:s("Delete workspace"),description:s("You can delete this entire workspace including collections, documents, and users."),children:i("span",{children:p(w,{onClick:()=>{e.openModal({title:s("Delete workspace"),content:i(ee,{onSubmit:e.closeAllModals})})},neutral:!0,children:[s("Delete workspace"),"…"]})})})]})]})]})})}));export{ae as default};
