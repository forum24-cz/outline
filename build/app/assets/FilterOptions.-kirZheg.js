import{n as e,I as t,O as o,C as n,ad as s,A as r,B as i,ae as a,a as l,r as c,d,j as h,af as u,z as f}from"./index.mlCxaiYE.js";import{M as p,C as b}from"./InputSelectPermission.lb2lIKIy.js";import{P as m}from"./Badge.sHfYRIgC.js";import{b as g,M as w}from"./DocumentContext.hhTeDqBR.js";const FilterOptions=({options:e,selectedKeys:t=[],defaultLabel:o="Filter options",className:n,onSelect:s,showFilter:r,fetchQuery:i,fetchQueryOptions:a})=>{const{t:I}=l(),j=c.useRef(null),E=c.useRef(null),L=g({modal:!1}),D=e.filter((e=>t.includes(e.key))),[F,z]=c.useState(""),B=D.length?D.map((e=>e.label)).join(", "):"",S=c.useCallback((e=>d(p,{onClick:()=>{s(e.key),L.hide()},selected:t.includes(e.key),...L,children:[e.icon,e.note?d(x,{children:[e.label,h(C,{children:e.note})]}):e.label]},e.key)),[L,s,t]),K=c.useMemo((()=>{const t=u(F.toLowerCase());return F?e.filter((e=>u(e.label).toLowerCase().includes(t))).sort(((e,o)=>{const n=u(e.label).toLowerCase().startsWith(t),s=u(o.label).toLowerCase().startsWith(t);return n&&!s?-1:!n&&s?1:0})):e}),[e,F]),M=c.useCallback((e=>{if(!e.nativeEvent.isComposing&&!e.shiftKey)switch(e.key){case"Escape":L.hide();break;case"Enter":1===K.length&&(e.preventDefault(),s(K[0].key),L.hide());break;case"ArrowDown":e.preventDefault(),E.current?.firstElementChild?.focus()}}),[K,L,s]),N=c.useCallback((e=>{j.current?.focus(),"Backspace"===e.key&&z((e=>e.slice(0,-1)))}),[]);c.useEffect((()=>{L.visible?j.current?.focus():z("")}),[L.visible]);const R=r||e.length>10;return d(f,{children:[h(w,{...L,children:e=>h(v,{...e,className:n,icon:D[0]?.key&&D[0]?.icon,neutral:!0,disclosure:!0,children:D.length?B:o})}),d(b,{"aria-label":o,minHeight:66,...L,children:[h(m,{listRef:E,options:{query:F,...a},items:K,fetch:i,renderItem:S,onEscape:N,heading:R?h(y,{}):void 0,empty:h(Empty,{})}),R&&h(k,{ref:j,value:F,onChange:e=>{z(e.target.value)},onKeyDown:M,placeholder:`${I("Filter")}â€¦`,autoFocus:!0})]})]})},Empty=()=>{const{t:e}=l();return d(f,{children:[h(y,{}),h(r,{size:"small",type:"tertiary",style:{marginLeft:6},children:e("No results")})]})},y=e.div.withConfig({componentId:"sc-b19bg4-0"})(["height:30px;"]),k=e(t).withConfig({componentId:"sc-b19bg4-1"})(["position:absolute;width:100%;border:none;border-top-left-radius:6px;border-top-right-radius:6px;overflow:hidden;margin:0;top:0;left:0;right:0;","{border:none;border-radius:0;border-bottom:1px solid ",";background:",";margin:0;}","{font-size:14px;}"],o,n("divider"),n("menuBackground"),s),C=e(r).withConfig({componentId:"sc-b19bg4-2"})(["display:block;margin:2px 0;line-height:1.2em;font-size:14px;font-weight:500;color:",";"],n("textTertiary")),x=e.div.withConfig({componentId:"sc-b19bg4-3"})(["font-weight:500;text-align:left;&:hover ","{color:",";}"],C,(e=>e.theme.white50)),v=e(i).withConfig({componentId:"sc-b19bg4-4"})(["box-shadow:none;text-transform:none;border-color:transparent;height:auto;&:hover{background:transparent;}","{line-height:28px;min-height:auto;}"],a);export{FilterOptions as F,v as S};
