import{a as e,j as t,aw as r,aM as n,n as o,dh as i,ak as f,r as s,cc as u,d as a,A as c,am as h,I as l,ao as p,B as d,Z as g,u as y,z as B,h as m,c1 as b,o as w,e as I,H as v}from"./index.mlCxaiYE.js";import{A as k}from"./Actions.u9jjnQ1W.js";import{i as A,B as S,P as U}from"./Badge.sHfYRIgC.js";import{S as O}from"./Scene.tZk0YIWv.js";import{u as L}from"./useBoolean.4JQO1FDN.js";import{u as C}from"./useCurrentTeam.fRZpnoZU.js";import{u as x}from"./usePolicy.wYF8wJNp.js";import{C as T,L as R}from"./Item.dGEOVRdT.js";import{u as N}from"./index.esm.XsAbwjVB.js";import"./PlaceholderText.UNfhMHoO.js";import"./useCurrentUser.zlImhYTS.js";function WebhookSubscriptionRevokeDialog({webhook:r,onSubmit:n}){const{t:o}=e();return t(T,{onSubmit:async()=>{await r.delete(),n()},submitText:o("Delete"),savingText:`${o("Deleting")}â€¦`,danger:!0,children:o("Are you sure you want to delete the {{ name }} webhook?",{name:r.name})})}for(var _={},M={exports:{}},P={exports:{}},j={},$={byteLength:function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n},toByteArray:function toByteArray(e){var t,r,n=getLens(e),o=n[0],i=n[1],f=new F(function _byteLength(e,t,r){return 3*(t+r)/4-r}(0,o,i)),s=0,u=i>0?o-4:o;for(r=0;r<u;r+=4)t=z[e.charCodeAt(r)]<<18|z[e.charCodeAt(r+1)]<<12|z[e.charCodeAt(r+2)]<<6|z[e.charCodeAt(r+3)],f[s++]=t>>16&255,f[s++]=t>>8&255,f[s++]=255&t;2===i&&(t=z[e.charCodeAt(r)]<<2|z[e.charCodeAt(r+1)]>>4,f[s++]=255&t);1===i&&(t=z[e.charCodeAt(r)]<<10|z[e.charCodeAt(r+1)]<<4|z[e.charCodeAt(r+2)]>>2,f[s++]=t>>8&255,f[s++]=255&t);return f},fromByteArray:function fromByteArray(e){for(var t,r=e.length,n=r%3,o=[],i=16383,f=0,s=r-n;f<s;f+=i)o.push(encodeChunk(e,f,f+i>s?s:f+i));1===n?(t=e[r-1],o.push(W[t>>2]+W[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(W[t>>10]+W[t>>4&63]+W[t<<2&63]+"="));return o.join("")}},W=[],z=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=0;q<64;++q)W[q]=D[q],z[D.charCodeAt(q)]=q;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function encodeChunk(e,t,r){for(var n,o,i=[],f=t;f<r;f+=3)n=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(255&e[f+2]),i.push(W[(o=n)>>18&63]+W[o>>12&63]+W[o>>6&63]+W[63&o]);return i.join("")}z["-".charCodeAt(0)]=62,z["_".charCodeAt(0)]=63;var V={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,n,o){var i,f,s=8*o-n-1,u=(1<<s)-1,a=u>>1,c=-7,h=r?o-1:0,l=r?-1:1,p=e[t+h];for(h+=l,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+h],h+=l,c-=8);for(f=i&(1<<-c)-1,i>>=-c,c+=n;c>0;f=256*f+e[t+h],h+=l,c-=8);if(0===i)i=1-a;else{if(i===u)return f?NaN:1/0*(p?-1:1);f+=Math.pow(2,n),i-=a}return(p?-1:1)*f*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var f,s,u,a=8*i-o-1,c=(1<<a)-1,h=c>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,f=c):(f=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-f))<1&&(f--,u*=2),(t+=f+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(f++,u/=2),f+h>=c?(s=0,f=c):f+h>=1?(s=(t*u-1)*Math.pow(2,o),f+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,o),f=0));o>=8;e[r+p]=255&s,p+=d,s/=256,o-=8);for(f=f<<o|s,a+=o;a>0;e[r+p]=255&f,p+=d,f/=256,a-=8);e[r+p-d]|=128*g}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
(function(e){const t=$,r=V,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=Buffer2,e.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer2.alloc(+e)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function createBuffer(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer2.prototype),t}function Buffer2(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,r)}function from(e,t,r){if("string"==typeof e)return function fromString(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Buffer2.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|byteLength2(e,t);let n=createBuffer(r);const o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return function fromArrayView(e){if(isInstance(e,Uint8Array)){const t=new Uint8Array(e);return fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength)}return fromArrayLike(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return fromArrayBuffer(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return Buffer2.from(n,t,r);const o=function fromObject(e){if(Buffer2.isBuffer(e)){const t=0|checked(e.length),r=createBuffer(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e);if("Buffer"===e.type&&Array.isArray(e.data))return fromArrayLike(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer2.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){const t=e.length<0?0:0|checked(e.length),r=createBuffer(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function fromArrayBuffer(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,Buffer2.prototype),n}function checked(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function byteLength2(e,t){if(Buffer2.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(o)return n?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),o=!0}}function slowToString(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),numberIsNaN(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=Buffer2.from(t,n)),Buffer2.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,o){let i,f=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;f=2,s/=2,u/=2,r/=2}function read(e,t){return 1===f?e[t]:e.readUInt16BE(t*f)}if(o){let n=-1;for(i=r;i<s;i++)if(read(e,i)===read(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===u)return n*f}else-1!==n&&(i-=i-n),n=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){let r=!0;for(let n=0;n<u;n++)if(read(e,i+n)!==read(t,n)){r=!1;break}if(r)return i}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let f;for(n>i/2&&(n=i/2),f=0;f<n;++f){const n=parseInt(t.substr(2*f,2),16);if(numberIsNaN(n))return f;e[r+f]=n}return f}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(function asciiToBytes(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(function utf16leToBytes(e,t){let r,n,o;const i=[];for(let f=0;f<e.length&&!((t-=2)<0);++f)r=e.charCodeAt(f),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function base64Slice(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function utf8Slice(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,f=t>239?4:t>223?3:t>191?2:1;if(o+f<=r){let r,n,s,u;switch(f){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(i=u));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,f=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=f}return function decodeCodePointsArray(e){const t=e.length;if(t<=i)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=i));return r}(n)}e.kMaxLength=o,Buffer2.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Buffer2.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer2.prototype,"parent",{enumerable:!0,get:function(){if(Buffer2.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer2.prototype,"offset",{enumerable:!0,get:function(){if(Buffer2.isBuffer(this))return this.byteOffset}}),Buffer2.poolSize=8192,Buffer2.from=function(e,t,r){return from(e,t,r)},Object.setPrototypeOf(Buffer2.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer2,Uint8Array),Buffer2.alloc=function(e,t,r){return function alloc(e,t,r){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof r?createBuffer(e).fill(t,r):createBuffer(e).fill(t):createBuffer(e)}(e,t,r)},Buffer2.allocUnsafe=function(e){return allocUnsafe(e)},Buffer2.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer2.isBuffer=function isBuffer(e){return null!=e&&!0===e._isBuffer&&e!==Buffer2.prototype},Buffer2.compare=function compare(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer2.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer2.from(t,t.offset,t.byteLength)),!Buffer2.isBuffer(e)||!Buffer2.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},Buffer2.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer2.concat=function concat(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer2.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=Buffer2.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(isInstance(t,Uint8Array))o+t.length>n.length?(Buffer2.isBuffer(t)||(t=Buffer2.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!Buffer2.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},Buffer2.byteLength=byteLength2,Buffer2.prototype._isBuffer=!0,Buffer2.prototype.swap16=function swap16(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer2.prototype.swap32=function swap32(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer2.prototype.swap64=function swap64(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer2.prototype.toString=function toString(){const e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer2.prototype.toLocaleString=Buffer2.prototype.toString,Buffer2.prototype.equals=function equals(e){if(!Buffer2.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer2.compare(this,e)},Buffer2.prototype.inspect=function inspect(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(Buffer2.prototype[n]=Buffer2.prototype.inspect),Buffer2.prototype.compare=function compare(e,t,r,n,o){if(isInstance(e,Uint8Array)&&(e=Buffer2.from(e,e.offset,e.byteLength)),!Buffer2.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),f=(r>>>=0)-(t>>>=0);const s=Math.min(i,f),u=this.slice(n,o),a=e.slice(t,r);for(let c=0;c<s;++c)if(u[c]!==a[c]){i=u[c],f=a[c];break}return i<f?-1:f<i?1:0},Buffer2.prototype.includes=function includes2(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer2.prototype.indexOf=function indexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer2.prototype.lastIndexOf=function lastIndexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer2.prototype.write=function write(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":case"latin1":case"binary":return asciiWrite(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer2.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const i=4096;function asciiSlice(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function latin1Slice(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function hexSlice(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=t;i<r;++i)o+=u[e[i]];return o}function utf16leSlice(e,t,r){const n=e.slice(t,r);let o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,o,i){if(!Buffer2.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(e,t,r,n,o){checkIntBI(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let f=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=f,f>>=8,e[r++]=f,f>>=8,e[r++]=f,f>>=8,e[r++]=f,r}function wrtBigUInt64BE(e,t,r,n,o){checkIntBI(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let f=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=f,f>>=8,e[r+2]=f,f>>=8,e[r+1]=f,f>>=8,e[r]=f,r+8}function checkIEEE754(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,o,i){return t=+t,n>>>=0,i||checkIEEE754(e,0,n,4),r.write(e,t,n,o,23,4),n+4}function writeDouble(e,t,n,o,i){return t=+t,n>>>=0,i||checkIEEE754(e,0,n,8),r.write(e,t,n,o,52,8),n+8}Buffer2.prototype.slice=function slice(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,Buffer2.prototype),n},Buffer2.prototype.readUintLE=Buffer2.prototype.readUIntLE=function readUIntLE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},Buffer2.prototype.readUintBE=Buffer2.prototype.readUIntBE=function readUIntBE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},Buffer2.prototype.readUint8=Buffer2.prototype.readUInt8=function readUInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer2.prototype.readUint16LE=Buffer2.prototype.readUInt16LE=function readUInt16LE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer2.prototype.readUint16BE=Buffer2.prototype.readUInt16BE=function readUInt16BE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer2.prototype.readUint32LE=Buffer2.prototype.readUInt32LE=function readUInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer2.prototype.readUint32BE=Buffer2.prototype.readUInt32BE=function readUInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer2.prototype.readBigUInt64LE=defineBigIntMethod((function readBigUInt64LE(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),Buffer2.prototype.readBigUInt64BE=defineBigIntMethod((function readBigUInt64BE(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),Buffer2.prototype.readIntLE=function readIntLE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},Buffer2.prototype.readIntBE=function readIntBE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},Buffer2.prototype.readInt8=function readInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer2.prototype.readInt16LE=function readInt16LE(e,t){e>>>=0,t||checkOffset(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer2.prototype.readInt16BE=function readInt16BE(e,t){e>>>=0,t||checkOffset(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer2.prototype.readInt32LE=function readInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer2.prototype.readInt32BE=function readInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer2.prototype.readBigInt64LE=defineBigIntMethod((function readBigInt64LE(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),Buffer2.prototype.readBigInt64BE=defineBigIntMethod((function readBigInt64BE(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),Buffer2.prototype.readFloatLE=function readFloatLE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),r.read(this,e,!0,23,4)},Buffer2.prototype.readFloatBE=function readFloatBE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),r.read(this,e,!1,23,4)},Buffer2.prototype.readDoubleLE=function readDoubleLE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),r.read(this,e,!0,52,8)},Buffer2.prototype.readDoubleBE=function readDoubleBE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),r.read(this,e,!1,52,8)},Buffer2.prototype.writeUintLE=Buffer2.prototype.writeUIntLE=function writeUIntLE(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},Buffer2.prototype.writeUintBE=Buffer2.prototype.writeUIntBE=function writeUIntBE(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},Buffer2.prototype.writeUint8=Buffer2.prototype.writeUInt8=function writeUInt8(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer2.prototype.writeUint16LE=Buffer2.prototype.writeUInt16LE=function writeUInt16LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer2.prototype.writeUint16BE=Buffer2.prototype.writeUInt16BE=function writeUInt16BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer2.prototype.writeUint32LE=Buffer2.prototype.writeUInt32LE=function writeUInt32LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer2.prototype.writeUint32BE=Buffer2.prototype.writeUInt32BE=function writeUInt32BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer2.prototype.writeBigUInt64LE=defineBigIntMethod((function writeBigUInt64LE(e,t=0){return wrtBigUInt64LE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer2.prototype.writeBigUInt64BE=defineBigIntMethod((function writeBigUInt64BE(e,t=0){return wrtBigUInt64BE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer2.prototype.writeIntLE=function writeIntLE(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}let o=0,i=1,f=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===f&&0!==this[t+o-1]&&(f=1),this[t+o]=(e/i|0)-f&255;return t+r},Buffer2.prototype.writeIntBE=function writeIntBE(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}let o=r-1,i=1,f=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===f&&0!==this[t+o+1]&&(f=1),this[t+o]=(e/i|0)-f&255;return t+r},Buffer2.prototype.writeInt8=function writeInt8(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer2.prototype.writeInt16LE=function writeInt16LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer2.prototype.writeInt16BE=function writeInt16BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer2.prototype.writeInt32LE=function writeInt32LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer2.prototype.writeInt32BE=function writeInt32BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer2.prototype.writeBigInt64LE=defineBigIntMethod((function writeBigInt64LE(e,t=0){return wrtBigUInt64LE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer2.prototype.writeBigInt64BE=defineBigIntMethod((function writeBigInt64BE(e,t=0){return wrtBigUInt64BE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer2.prototype.writeFloatLE=function writeFloatLE(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer2.prototype.writeFloatBE=function writeFloatBE(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer2.prototype.writeDoubleLE=function writeDoubleLE(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer2.prototype.writeDoubleBE=function writeDoubleBE(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer2.prototype.copy=function copy(e,t,r,n){if(!Buffer2.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},Buffer2.prototype.fill=function fill(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer2.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=Buffer2.isBuffer(e)?e:Buffer2.from(e,n),f=i.length;if(0===f)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%f]}return this};const f={};function E(e,t,r){f[e]=class NodeError extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function addNumericalSeparator(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function checkIntBI(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new f.ERR_OUT_OF_RANGE("value",o,e)}!function checkBounds(e,t,r){validateNumber(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||boundsError(t,e.length-(r+1))}(n,o,i)}function validateNumber(e,t){if("number"!=typeof e)throw new f.ERR_INVALID_ARG_TYPE(t,"number",e)}function boundsError(e,t,r){if(Math.floor(e)!==e)throw validateNumber(e,r),new f.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new f.ERR_BUFFER_OUT_OF_BOUNDS;throw new f.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}E("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),E("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),E("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=addNumericalSeparator(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=addNumericalSeparator(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n}),RangeError);const s=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let f=0;f<n;++f){if(r=e.charCodeAt(f),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(f+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function base64ToBytes(e){return t.toByteArray(function base64clean(e){if((e=(e=e.split("=")[0]).trim().replace(s,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}const u=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function defineBigIntMethod(e){return"undefined"==typeof BigInt?BufferBigIntNotDefined:e}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}})(j),
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
function(e,t){var r=j,n=r.Buffer;function copyProps(e,t){for(var r in e)t[r]=e[r]}function SafeBuffer(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(copyProps(r,t),t.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(n.prototype),copyProps(n,SafeBuffer),SafeBuffer.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},SafeBuffer.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof r?o.fill(t,r):o.fill(t):o.fill(0),o},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(P,P.exports);var Y=65536,G=4294967295;var J=P.exports.Buffer,X=r.crypto||r.msCrypto;X&&X.getRandomValues?M.exports=function randomBytes$1(e,t){if(e>G)throw new RangeError("requested too many random bytes");var r=J.allocUnsafe(e);if(e>0)if(e>Y)for(var n=0;n<e;n+=Y)X.getRandomValues(r.slice(n,n+Y));else X.getRandomValues(r);if("function"==typeof t)return process.nextTick((function(){t(null,r)}));return r}:M.exports=function oldBrowser(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};var Z=M.exports,H={exports:{}};!function(e){function Charset2(){this.chars=""}Charset2.prototype.setType=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.chars+=this.getCharacters(e[t]);else this.chars=this.getCharacters(e)},Charset2.prototype.getCharacters=function(e){var t="0123456789",r="abcdefghijklmnopqrstuvwxyz",n=r.toUpperCase();return"alphanumeric"===e?t+r+n:"numeric"===e?t:"alphabetic"===e?r+n:"hex"===e?t+"abcdef":"binary"===e?"01":"octal"===e?"01234567":e},Charset2.prototype.removeUnreadable=function(){this.chars=this.chars.replace(/[0OIl]/g,"")},Charset2.prototype.setcapitalization=function(e){"uppercase"===e?this.chars=this.chars.toUpperCase():"lowercase"===e&&(this.chars=this.chars.toLowerCase())},Charset2.prototype.removeDuplicates=function(){var e=this.chars.split("");e=[...new Set(e)],this.chars=e.join("")},e.exports=Charset2}(H);var K=Z,Q=H.exports;function safeRandomBytes(e){try{return K(e)}catch(t){return function unsafeRandomBytes(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(255*Math.random()));return{length:e,readUInt8:function(e){return t[e]}}}(e)}}function processString(e,t,r,n,o){for(var i=t,f=0;f<e.length&&i.length<n;f++){var s=e.readUInt8(f);s<o&&(i+=r.charAt(s%r.length))}return i}function getAsyncString(e,t,r,n,o){K(r,(function(i,f){i&&o(i);var s=processString(f,e,t,r,n);s.length<r?getAsyncString(s,t,r,n,o):o(null,s)}))}_.generate=function(e,t){var r,n=new Q,o="";"object"==typeof e?(r="number"==typeof e.length?e.length:32,e.charset?n.setType(e.charset):n.setType("alphanumeric"),e.capitalization&&n.setcapitalization(e.capitalization),e.readable&&n.removeUnreadable(),n.removeDuplicates()):"number"==typeof e?(r=e,n.setType("alphanumeric")):(r=32,n.setType("alphanumeric"));var i=256-256%n.chars.length;if(!t){for(;o.length<r;){o=processString(safeRandomBytes(Math.ceil(256*r/i)),o,n.chars,r,i)}return o}getAsyncString(o,n.chars,r,i,t)};const ee=n(_),te={users:["users.create","users.signin","users.update","users.suspend","users.activate","users.delete","users.invite","users.promote","users.demote"],documents:["documents.create","documents.publish","documents.unpublish","documents.delete","documents.permanent_delete","documents.archive","documents.unarchive","documents.restore","documents.move","documents.update","documents.title_change","documents.add_user","documents.remove_user","documents.add_group","documents.remove_group"],collections:["collections.create","collections.update","collections.delete","collections.add_user","collections.remove_user","collections.add_group","collections.remove_group","collections.move","collections.permission_changed"],comments:["comments.create","comments.update","comments.delete"],revisions:["revisions.create"],fileOperations:["fileOperations.create","fileOperations.update","fileOperations.delete"],groups:["groups.create","groups.update","groups.delete","groups.add_user","groups.remove_user"],integrations:["integrations.create","integrations.update"],shares:["shares.create","shares.update","shares.revoke"],teams:["teams.update"],pins:["pins.create","pins.update","pins.delete"],webhookSubscriptions:["webhookSubscriptions.create","webhookSubscriptions.delete","webhookSubscriptions.update"],views:["views.create"]},re=o.label.withConfig({componentId:"sc-8iwpz3-0"})(["display:flex;align-items:center;font-size:15px;padding:0.2em 0;"]),ne=o(re).withConfig({componentId:"sc-8iwpz3-1"})(["font-weight:500;font-size:1.2em;"]),oe=o(ne).withConfig({componentId:"sc-8iwpz3-2"})(["font-size:1.4em;"]),ie=o.span.withConfig({componentId:"sc-8iwpz3-3"})(["margin-left:0.5rem;"]),fe=o.fieldset.withConfig({componentId:"sc-8iwpz3-4"})(["padding:0;margin:0;border:none;",""],(({disabled:e})=>e&&"\n    opacity: 0.5;\n    ")),se=o.div.withConfig({componentId:"sc-8iwpz3-5"})(["display:grid;grid-template-columns:1fr 1fr;",""],(({isMobile:e})=>e&&"\n    grid-template-columns: 1fr;\n    ")),ue=o.div.withConfig({componentId:"sc-8iwpz3-6"})(["padding-bottom:2rem;",""],(({isMobile:e})=>e&&"\n    padding-bottom: 1rem;\n    ")),ae=o.div.withConfig({componentId:"sc-8iwpz3-7"})(["display:flex;flex-direction:column;margin-bottom:1em;"]);function WebhookSubscriptionForm({handleSubmit:r,webhookSubscription:n}){const{t:o}=e(),g=C(),{register:y,handleSubmit:B,formState:m,watch:b,setValue:w}=N({mode:"all",defaultValues:{events:n?[...n.events]:[],name:n?.name,url:n?.url,secret:n?n?.secret:`ol_whs_${ee.generate(32)}`}}),I=b("events"),v=i(I,(e=>!e.includes("."))),k=A(I,"*"),S=i(I,(e=>{const[t]=e.split(".");return 0===v.length||e===t||!v.includes(t)})),U=f();s.useEffect((()=>{k&&w("events",["*"])}),[k,w]),s.useEffect((()=>{u(I,S)||w("events",S)}),[I,S,w]);const O=o(n?"Update":"Create"),L=o(n?"Updating":"Creating");function EventCheckbox({label:e,value:r}){const n="*"===r?oe:Object.keys(te).includes(r)?ne:re;return a(n,{children:[t("input",{type:"checkbox",defaultValue:r,...y("events",{})}),t(ie,{children:e})]})}return a("form",{onSubmit:B(r),children:[t(c,{as:"p",type:"secondary",children:t(h,{children:"Provide a descriptive name for this webhook and the URL we should send a POST request to when matching events are created."})}),a(ae,{children:[t(l,{required:!0,autoFocus:!0,flex:!0,label:o("Name"),placeholder:o("A memorable identifer"),...y("name",{required:!0})}),t(l,{required:!0,autoFocus:!0,flex:!0,pattern:"https://.*",placeholder:"https://â€¦",label:o("URL"),...y("url",{required:!0})}),t(l,{flex:!0,spellCheck:!1,label:o("Signing secret"),...y("secret",{required:!1})})]}),t(c,{as:"p",type:"secondary",children:t(h,{children:"Subscribe to all events, groups, or individual events. We recommend only subscribing to the minimum amount of events that your application needs to function."})}),t(EventCheckbox,{label:o("All events"),value:"*"}),t(fe,{disabled:k,children:t(se,{isMobile:U,children:Object.entries(te).filter((([e])=>"comment"!==e||g.getPreference(p.Commenting))).map((([e,r],n)=>a(ue,{isMobile:U,children:[t(EventCheckbox,{label:o("All {{ groupName }} events",{groupName:e.replace(/s$/,"")}),value:e}),t(fe,{disabled:v.includes(e),children:r.map((e=>t(EventCheckbox,{label:e,value:e},e)))})]},n)))})}),t(d,{type:"submit",disabled:m.isSubmitting||!m.isValid,children:m.isSubmitting?`${L}â€¦`:O})]})}function WebhookSubscriptionEdit({onSubmit:r,webhookSubscription:n}){const{t:o}=e(),i=s.useCallback((async e=>{try{const t=Array.isArray(e.events)?e.events:[e.events],i={...e,events:t};await n.save(i),g.success(o("Webhook updated")),r()}catch(t){g.error(t.message)}}),[o,r,n]);return t(WebhookSubscriptionForm,{handleSubmit:i,webhookSubscription:n})}const WebhookSubscriptionListItem=({webhook:r})=>{const{t:n}=e(),{dialogs:o}=y(),[i,f,u]=L(),c=s.useCallback((()=>{o.openModal({title:n("Delete webhook"),content:t(WebhookSubscriptionRevokeDialog,{onSubmit:o.closeAllModals,webhook:r})})}),[n,o,r]);return t(R,{title:a(B,{children:[r.name,!r.enabled&&t(ce,{yellow:!0,children:n("Disabled")})]}),subtitle:a(B,{children:[n("Subscribed events"),": ",t("code",{children:r.events.join(", ")})]}),actions:a(B,{children:[t(d,{onClick:c,icon:t(m.TrashIcon,{}),neutral:!0,children:n("Delete")}),t(d,{icon:t(m.EditIcon,{}),onClick:f,neutral:!0,children:n("Edit")}),t(b,{title:n("Edit webhook"),onRequestClose:u,isOpen:i,children:t(WebhookSubscriptionEdit,{onSubmit:u,webhookSubscription:r})})]})},r.id)},ce=o(S).withConfig({componentId:"sc-1bvln6x-0"})(["position:absolute;"]);function WebhookSubscriptionNew({onSubmit:r}){const{webhookSubscriptions:n}=y(),{t:o}=e(),i=s.useCallback((async e=>{try{const t=Array.isArray(e.events)?e.events:[e.events],i={...e,events:t};await n.create(i),g.success(o("Webhook created")),r()}catch(t){g.error(t.message)}}),[o,r,n]);return t(WebhookSubscriptionForm,{handleSubmit:i})}const he=w((function Webhooks(){const r=C(),{t:n}=e(),{webhookSubscriptions:o}=y(),[i,f,s]=L(),u=x(r),l=I.APP_NAME;return a(O,{title:n("Webhooks"),icon:t(m.WebhooksIcon,{}),actions:t(B,{children:u.createWebhookSubscription&&t(k,{children:t(d,{type:"submit",value:`${n("New webhook")}â€¦`,onClick:f})})}),children:[t(v,{children:n("Webhooks")}),t(c,{as:"p",type:"secondary",children:a(h,{children:["Webhooks can be used to notify your application when events happen in"," ",{appName:l},". Events are sent as a https request with a JSON payload in near real-time."]})}),t(U,{fetch:o.fetchPage,items:o.enabled,heading:t("h2",{children:n("Active")}),renderItem:e=>t(WebhookSubscriptionListItem,{webhook:e},e.id)}),t(U,{items:o.disabled,heading:t("h2",{children:n("Inactive")}),renderItem:e=>t(WebhookSubscriptionListItem,{webhook:e},e.id)}),t(b,{title:n("Create a webhook"),onRequestClose:s,isOpen:i,children:t(WebhookSubscriptionNew,{onSubmit:s})})]})}));export{he as default};
