{"version":3,"file":"ordinal.5UP-l5Lb.js","sources":["../../../node_modules/internmap/src/index.js","../../../node_modules/d3-scale/src/ordinal.js"],"sourcesContent":["export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n"],"names":["InternMap","Map","constructor","entries","key","keyof","Object","defineProperties","this","_intern","value","_key","set","get","super","intern_get","has","intern_set","delete","intern_delete","valueOf","implicit","Symbol","ordinal","index","domain","range","unknown","scale","d","i","push","length","_","arguments","slice","Array","from","copy","initRange","apply"],"mappings":"uCAAO,MAAMA,kBAAkBC,IAC7B,WAAAC,CAAYC,EAASC,EAAMC,OAGrB,WADJC,OAAOC,iBAAiBC,KAAM,CAACC,QAAS,CAACC,MAAO,IAAIT,KAAQU,KAAM,CAACD,MAAON,KAC3D,MAAXD,EAAiB,IAAA,MAAYC,EAAKM,KAAUP,EAASK,KAAKI,IAAIR,EAAKM,EACxE,CACD,GAAAG,CAAIT,GACF,OAAOU,MAAMD,IAAIE,WAAWP,KAAMJ,GACnC,CACD,GAAAY,CAAIZ,GACF,OAAOU,MAAME,IAAID,WAAWP,KAAMJ,GACnC,CACD,GAAAQ,CAAIR,EAAKM,GACP,OAAOI,MAAMF,IA6BjB,SAASK,YAAWR,QAACA,EAASE,KAAAA,GAAOD,GAC7B,MAAAN,EAAMO,EAAKD,GACjB,OAAID,EAAQO,IAAIZ,GAAaK,EAAQI,IAAIT,IACjCK,EAAAG,IAAIR,EAAKM,GACVA,EACT,CAlCqBO,CAAWT,KAAMJ,GAAMM,EACzC,CACD,OAAON,GACL,OAAOU,MAAMI,OAiCjB,SAASC,eAAcV,QAACA,EAASE,KAAAA,GAAOD,GAChC,MAAAN,EAAMO,EAAKD,GACbD,EAAQO,IAAIZ,KACNM,EAAAD,EAAQI,IAAIT,GACpBK,EAAQS,OAAOd,IAEV,OAAAM,CACT,CAxCwBS,CAAcX,KAAMJ,GACzC,EAoBH,SAASW,YAAWN,QAACA,EAASE,KAAAA,GAAOD,GAC7B,MAAAN,EAAMO,EAAKD,GACjB,OAAOD,EAAQO,IAAIZ,GAAOK,EAAQI,IAAIT,GAAOM,CAC/C,CAkBA,SAASL,MAAMK,GACb,OAAiB,OAAVA,GAAmC,iBAAVA,EAAqBA,EAAMU,UAAYV,CACzE,CCzDO,MAAMW,EAAWC,OAAO,YAEhB,SAASC,UAClB,IAAAC,EAAQ,IAAIxB,UACZyB,EAAS,GACTC,EAAQ,GACRC,EAAUN,EAEd,SAASO,MAAMC,GACT,IAAAC,EAAIN,EAAMX,IAAIgB,GAClB,QAAU,IAANC,EAAiB,CACf,GAAAH,IAAYN,EAAiB,OAAAM,EACjCH,EAAMZ,IAAIiB,EAAGC,EAAIL,EAAOM,KAAKF,GAAK,EACnC,CACM,OAAAH,EAAMI,EAAIJ,EAAMM,OACxB,CA0BM,OAxBDJ,MAAAH,OAAS,SAASQ,GACtB,IAAKC,UAAUF,OAAQ,OAAOP,EAAOU,QACrCV,EAAS,GAAID,EAAQ,IAAIxB,UACzB,IAAA,MAAWU,KAASuB,EACdT,EAAMR,IAAIN,IACdc,EAAMZ,IAAIF,EAAOe,EAAOM,KAAKrB,GAAS,GAEjC,OAAAkB,KACX,EAEQA,MAAAF,MAAQ,SAASO,GACd,OAAAC,UAAUF,QAAUN,EAAQU,MAAMC,KAAKJ,GAAIL,OAASF,EAAMS,OACrE,EAEQP,MAAAD,QAAU,SAASM,GACvB,OAAOC,UAAUF,QAAUL,EAAUM,EAAGL,OAASD,CACrD,EAEEC,MAAMU,KAAO,WACX,OAAOf,QAAQE,EAAQC,GAAOC,QAAQA,EAC1C,EAEYY,EAAAC,MAAMZ,MAAOM,WAEhBN,KACT","x_google_ignoreList":[0,1]}