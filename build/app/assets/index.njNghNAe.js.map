{"version":3,"file":"index.njNghNAe.js","sources":["../../../app/editor/menus/block.tsx","../../../app/editor/components/BlockMenu.tsx","../../../app/editor/extensions/BlockMenu.tsx","../../../app/editor/components/FindAndReplace.tsx","../../../app/editor/extensions/FindAndReplace.tsx","../../../app/components/HoverPreview/Components.tsx","../../../app/components/HoverPreview/HoverPreviewDocument.tsx","../../../app/components/Icons/IssueStatusIcon.tsx","../../../app/components/HoverPreview/HoverPreviewIssue.tsx","../../../app/components/HoverPreview/HoverPreviewLink.tsx","../../../app/components/HoverPreview/HoverPreviewMention.tsx","../../../app/components/Icons/PullRequestIcon.tsx","../../../app/components/HoverPreview/HoverPreviewPullRequest.tsx","../../../app/components/HoverPreview/HoverPreview.tsx","../../../app/editor/extensions/HoverPreviews.tsx","../../../app/editor/extensions/index.ts"],"sourcesContent":["import {\n  BlockQuoteIcon,\n  BulletedListIcon,\n  CodeIcon,\n  Heading1Icon,\n  Heading2Icon,\n  Heading3Icon,\n  Heading4Icon,\n  HorizontalRuleIcon,\n  OrderedListIcon,\n  PageBreakIcon,\n  TableIcon,\n  TodoListIcon,\n  ImageIcon,\n  StarredIcon,\n  WarningIcon,\n  InfoIcon,\n  AttachmentIcon,\n  ClockIcon,\n  CalendarIcon,\n  MathIcon,\n  DoneIcon,\n  EmbedIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Image from \"@shared/editor/components/Img\";\nimport { MenuItem } from \"@shared/editor/types\";\nimport { metaDisplay } from \"@shared/utils/keyboard\";\nimport { Dictionary } from \"~/hooks/useDictionary\";\n\nconst Img = styled(Image)`\n  border-radius: 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px #fff;\n  margin: 4px;\n  width: 18px;\n  height: 18px;\n`;\n\nexport default function blockMenuItems(\n  dictionary: Dictionary,\n  documentRef: React.RefObject<HTMLDivElement>\n): MenuItem[] {\n  const documentWidth = documentRef.current?.clientWidth ?? 0;\n\n  return [\n    {\n      name: \"heading\",\n      title: dictionary.h1,\n      keywords: \"h1 heading1 title\",\n      icon: <Heading1Icon />,\n      shortcut: \"^ ⇧ 1\",\n      attrs: { level: 1 },\n    },\n    {\n      name: \"heading\",\n      title: dictionary.h2,\n      keywords: \"h2 heading2\",\n      icon: <Heading2Icon />,\n      shortcut: \"^ ⇧ 2\",\n      attrs: { level: 2 },\n    },\n    {\n      name: \"heading\",\n      title: dictionary.h3,\n      keywords: \"h3 heading3\",\n      icon: <Heading3Icon />,\n      shortcut: \"^ ⇧ 3\",\n      attrs: { level: 3 },\n    },\n    {\n      name: \"heading\",\n      title: dictionary.h4,\n      keywords: \"h4 heading4\",\n      icon: <Heading4Icon />,\n      shortcut: \"^ ⇧ 4\",\n      attrs: { level: 4 },\n    },\n    {\n      name: \"separator\",\n    },\n    {\n      name: \"checkbox_list\",\n      title: dictionary.checkboxList,\n      icon: <TodoListIcon />,\n      keywords: \"checklist checkbox task\",\n      shortcut: \"^ ⇧ 7\",\n    },\n    {\n      name: \"bullet_list\",\n      title: dictionary.bulletList,\n      icon: <BulletedListIcon />,\n      shortcut: \"^ ⇧ 8\",\n    },\n    {\n      name: \"ordered_list\",\n      title: dictionary.orderedList,\n      icon: <OrderedListIcon />,\n      shortcut: \"^ ⇧ 9\",\n    },\n    {\n      name: \"separator\",\n    },\n    {\n      name: \"image\",\n      title: dictionary.image,\n      icon: <ImageIcon />,\n      keywords: \"picture photo\",\n    },\n    {\n      name: \"video\",\n      title: dictionary.video,\n      icon: <EmbedIcon />,\n      keywords: \"mov avi upload player\",\n    },\n    {\n      name: \"attachment\",\n      title: dictionary.file,\n      icon: <AttachmentIcon />,\n      keywords: \"file upload attach\",\n    },\n    {\n      name: \"table\",\n      title: dictionary.table,\n      icon: <TableIcon />,\n      attrs: {\n        rowsCount: 3,\n        colsCount: 3,\n        colWidth: documentWidth / 3,\n      },\n    },\n    {\n      name: \"blockquote\",\n      title: dictionary.quote,\n      icon: <BlockQuoteIcon />,\n      keywords: \"blockquote pullquote\",\n      shortcut: `${metaDisplay} ]`,\n    },\n    {\n      name: \"code_block\",\n      title: dictionary.codeBlock,\n      icon: <CodeIcon />,\n      shortcut: \"^ ⇧ c\",\n      keywords: \"script\",\n    },\n    {\n      name: \"math_block\",\n      title: dictionary.mathBlock,\n      icon: <MathIcon />,\n      keywords: \"math katex latex\",\n    },\n    {\n      name: \"hr\",\n      title: dictionary.hr,\n      icon: <HorizontalRuleIcon />,\n      shortcut: `${metaDisplay} _`,\n      keywords: \"horizontal rule break line\",\n    },\n    {\n      name: \"hr\",\n      title: dictionary.pageBreak,\n      icon: <PageBreakIcon />,\n      keywords: \"page print break line\",\n      attrs: { markup: \"***\" },\n    },\n    {\n      name: \"date\",\n      title: dictionary.insertDate,\n      keywords: \"clock today\",\n      icon: <CalendarIcon />,\n    },\n    {\n      name: \"time\",\n      title: dictionary.insertTime,\n      keywords: \"clock now\",\n      icon: <ClockIcon />,\n    },\n    {\n      name: \"datetime\",\n      title: dictionary.insertDateTime,\n      keywords: \"clock today date\",\n      icon: <CalendarIcon />,\n    },\n    {\n      name: \"separator\",\n    },\n    {\n      name: \"container_notice\",\n      title: dictionary.infoNotice,\n      icon: <InfoIcon />,\n      keywords: \"notice card information\",\n      attrs: { style: \"info\" },\n    },\n    {\n      name: \"container_notice\",\n      title: dictionary.successNotice,\n      icon: <DoneIcon />,\n      keywords: \"notice card success\",\n      attrs: { style: \"success\" },\n    },\n    {\n      name: \"container_notice\",\n      title: dictionary.warningNotice,\n      icon: <WarningIcon />,\n      keywords: \"notice card error\",\n      attrs: { style: \"warning\" },\n    },\n    {\n      name: \"container_notice\",\n      title: dictionary.tipNotice,\n      icon: <StarredIcon />,\n      keywords: \"notice card suggestion\",\n      attrs: { style: \"tip\" },\n    },\n    {\n      name: \"separator\",\n    },\n    {\n      name: \"code_block\",\n      title: \"Mermaid Diagram\",\n      icon: <Img src=\"/images/mermaidjs.png\" alt=\"Mermaid Diagram\" />,\n      keywords: \"diagram flowchart\",\n      attrs: { language: \"mermaidjs\" },\n    },\n  ];\n}\n","import React from \"react\";\nimport useDictionary from \"~/hooks/useDictionary\";\nimport getMenuItems from \"../menus/block\";\nimport { useEditor } from \"./EditorContext\";\nimport SuggestionsMenu, {\n  Props as SuggestionsMenuProps,\n} from \"./SuggestionsMenu\";\nimport SuggestionsMenuItem from \"./SuggestionsMenuItem\";\n\ntype Props = Omit<SuggestionsMenuProps, \"renderMenuItem\" | \"items\"> &\n  Required<Pick<SuggestionsMenuProps, \"embeds\">>;\n\nfunction BlockMenu(props: Props) {\n  const dictionary = useDictionary();\n  const { elementRef } = useEditor();\n\n  return (\n    <SuggestionsMenu\n      {...props}\n      filterable\n      trigger=\"/\"\n      renderMenuItem={(item, _index, options) => (\n        <SuggestionsMenuItem\n          onClick={options.onClick}\n          selected={options.selected}\n          icon={item.icon}\n          title={item.title}\n          shortcut={item.shortcut}\n        />\n      )}\n      items={getMenuItems(dictionary, elementRef)}\n    />\n  );\n}\n\nexport default BlockMenu;\n","import { action } from \"mobx\";\nimport { PlusIcon } from \"outline-icons\";\nimport { Plugin } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { WidgetProps } from \"@shared/editor/lib/Extension\";\nimport { findParentNode } from \"@shared/editor/queries/findParentNode\";\nimport Suggestion from \"~/editor/extensions/Suggestion\";\nimport BlockMenu from \"../components/BlockMenu\";\n\nexport default class BlockMenuExtension extends Suggestion {\n  get defaultOptions() {\n    return {\n      trigger: \"/\",\n      allowSpaces: false,\n      requireSearchTerm: false,\n      enabledInCode: false,\n    };\n  }\n\n  get name() {\n    return \"block-menu\";\n  }\n\n  get plugins() {\n    const button = document.createElement(\"button\");\n    button.className = \"block-menu-trigger\";\n    button.type = \"button\";\n    ReactDOM.render(<PlusIcon />, button);\n\n    return [\n      ...super.plugins,\n      new Plugin({\n        props: {\n          decorations: (state) => {\n            const parent = findParentNode(\n              (node) => node.type.name === \"paragraph\"\n            )(state.selection);\n\n            if (!parent) {\n              return;\n            }\n\n            const isTopLevel = state.selection.$from.depth === 1;\n            if (!isTopLevel) {\n              return;\n            }\n\n            const decorations: Decoration[] = [];\n            const isEmptyNode = parent && parent.node.content.size === 0;\n            const isSlash = parent && parent.node.textContent === \"/\";\n\n            if (isEmptyNode) {\n              decorations.push(\n                Decoration.widget(\n                  parent.pos,\n                  () => {\n                    button.addEventListener(\n                      \"click\",\n                      action(() => {\n                        this.state.open = true;\n                      })\n                    );\n                    return button;\n                  },\n                  {\n                    key: \"block-trigger\",\n                  }\n                )\n              );\n\n              const isEmptyDoc = state.doc.textContent === \"\";\n              if (!isEmptyDoc) {\n                decorations.push(\n                  Decoration.node(\n                    parent.pos,\n                    parent.pos + parent.node.nodeSize,\n                    {\n                      class: \"placeholder\",\n                      \"data-empty-text\": this.options.dictionary.newLineEmpty,\n                    }\n                  )\n                );\n              }\n            } else if (isSlash) {\n              decorations.push(\n                Decoration.node(parent.pos, parent.pos + parent.node.nodeSize, {\n                  class: \"placeholder\",\n                  \"data-empty-text\": `  ${this.options.dictionary.newLineWithSlash}`,\n                })\n              );\n            }\n\n            return DecorationSet.create(state.doc, decorations);\n          },\n        },\n      }),\n    ];\n  }\n\n  private handleClose = action((insertNewLine: boolean) => {\n    const { view } = this.editor;\n\n    if (insertNewLine) {\n      const transaction = view.state.tr.split(view.state.selection.to);\n      view.dispatch(transaction);\n      view.focus();\n    }\n\n    this.state.open = false;\n  });\n\n  widget = ({ rtl }: WidgetProps) => {\n    const { props } = this.editor;\n\n    return (\n      <BlockMenu\n        rtl={rtl}\n        trigger={this.options.trigger}\n        isActive={this.state.open}\n        search={this.state.query}\n        onClose={this.handleClose}\n        uploadFile={props.uploadFile}\n        onFileUploadStart={props.onFileUploadStart}\n        onFileUploadStop={props.onFileUploadStop}\n        embeds={props.embeds}\n      />\n    );\n  };\n}\n","import {\n  CaretDownIcon,\n  CaretUpIcon,\n  CaseSensitiveIcon,\n  RegexIcon,\n  ReplaceIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { usePopoverState } from \"reakit/Popover\";\nimport styled, { useTheme } from \"styled-components\";\nimport { depths, s } from \"@shared/styles\";\nimport { altDisplay, isModKey, metaDisplay } from \"@shared/utils/keyboard\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport Input from \"~/components/Input\";\nimport NudeButton from \"~/components/NudeButton\";\nimport Popover from \"~/components/Popover\";\nimport { Portal } from \"~/components/Portal\";\nimport { ResizingHeightContainer } from \"~/components/ResizingHeightContainer\";\nimport Tooltip from \"~/components/Tooltip\";\nimport useKeyDown from \"~/hooks/useKeyDown\";\nimport useOnClickOutside from \"~/hooks/useOnClickOutside\";\nimport Desktop from \"~/utils/Desktop\";\nimport { useEditor } from \"./EditorContext\";\n\ntype KeyboardShortcutsProps = {\n  popover: ReturnType<typeof usePopoverState>;\n  handleOpen: ({ withReplace }: { withReplace: boolean }) => void;\n  handleCaseSensitive: () => void;\n  handleRegex: () => void;\n};\n\nfunction useKeyboardShortcuts({\n  popover,\n  handleOpen,\n  handleCaseSensitive,\n  handleRegex,\n}: KeyboardShortcutsProps) {\n  // Open popover\n  useKeyDown(\n    (ev) =>\n      isModKey(ev) &&\n      ev.code === \"KeyF\" &&\n      // Keyboard handler is through the AppMenu on Desktop v1.2.0+\n      !(Desktop.bridge && \"onFindInPage\" in Desktop.bridge),\n    (ev) => {\n      ev.preventDefault();\n      handleOpen({ withReplace: ev.altKey });\n    },\n    { allowInInput: true }\n  );\n\n  // Enable/disable case sensitive search\n  useKeyDown(\n    (ev) => isModKey(ev) && ev.altKey && ev.code === \"KeyC\" && popover.visible,\n    (ev) => {\n      ev.preventDefault();\n      handleCaseSensitive();\n    },\n    { allowInInput: true }\n  );\n\n  // Enable/disable regex search\n  useKeyDown(\n    (ev) => isModKey(ev) && ev.altKey && ev.code === \"KeyR\" && popover.visible,\n    (ev) => {\n      ev.preventDefault();\n      handleRegex();\n    },\n    { allowInInput: true }\n  );\n}\n\ntype Props = {\n  /** Whether the find and replace popover is open */\n  open: boolean;\n  /** Callback when the find and replace popover is opened */\n  onOpen: () => void;\n  /** Callback when the find and replace popover is closed */\n  onClose: () => void;\n  /** Whether the editor is in read-only mode */\n  readOnly?: boolean;\n  /** The current highlighted index in the search results */\n  currentIndex: number;\n  /** The total number of search results */\n  totalResults: number;\n};\n\nexport default function FindAndReplace({\n  readOnly,\n  open,\n  onOpen,\n  onClose,\n  currentIndex,\n  totalResults,\n}: Props) {\n  const editor = useEditor();\n  const finalFocusRef = React.useRef<HTMLElement>(\n    editor.view.dom.parentElement\n  );\n  const selectionRef = React.useRef<string | undefined>();\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const inputReplaceRef = React.useRef<HTMLInputElement>(null);\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const [showReplace, setShowReplace] = React.useState(false);\n  const [caseSensitive, setCaseSensitive] = React.useState(false);\n  const [regexEnabled, setRegex] = React.useState(false);\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n  const [replaceTerm, setReplaceTerm] = React.useState(\"\");\n  const popover = usePopoverState();\n  const { show } = popover;\n\n  React.useEffect(() => {\n    if (open) {\n      show();\n    }\n  }, [open]);\n\n  // Hooks for desktop app menu items\n  React.useEffect(() => {\n    if (!Desktop.bridge) {\n      return;\n    }\n    if (\"onFindInPage\" in Desktop.bridge) {\n      Desktop.bridge.onFindInPage(() => {\n        selectionRef.current = window.getSelection()?.toString();\n        show();\n      });\n    }\n    if (\"onReplaceInPage\" in Desktop.bridge) {\n      Desktop.bridge.onReplaceInPage(() => {\n        setShowReplace(true);\n        show();\n      });\n    }\n  }, [show]);\n\n  // Callbacks\n  const selectInputText = React.useCallback(() => {\n    inputRef.current?.focus();\n    inputRef.current?.setSelectionRange(0, inputRef.current?.value.length);\n  }, []);\n\n  const selectInputReplaceText = React.useCallback(() => {\n    setTimeout(() => {\n      inputReplaceRef.current?.focus();\n      inputReplaceRef.current?.setSelectionRange(\n        0,\n        inputReplaceRef.current?.value.length\n      );\n    }, 100);\n  }, []);\n\n  const handleOpen = React.useCallback(\n    ({ withReplace }: { withReplace: boolean }) => {\n      const shouldShowReplace = !readOnly && withReplace;\n\n      // If already open, switch focus to corresponding input text.\n      if (popover.visible) {\n        if (shouldShowReplace) {\n          setShowReplace(true);\n          selectInputReplaceText();\n        } else {\n          selectInputText();\n        }\n\n        return;\n      }\n\n      selectionRef.current = window.getSelection()?.toString();\n      popover.show();\n\n      if (shouldShowReplace) {\n        setShowReplace(true);\n      }\n    },\n    [popover, readOnly, selectInputText, selectInputReplaceText]\n  );\n\n  const handleMore = React.useCallback(() => {\n    setShowReplace((state) => !state);\n    setTimeout(() => inputReplaceRef.current?.focus(), 100);\n  }, []);\n\n  const handleCaseSensitive = React.useCallback(() => {\n    setCaseSensitive((state) => {\n      const isCaseSensitive = !state;\n\n      editor.commands.find({\n        text: searchTerm,\n        caseSensitive: isCaseSensitive,\n        regexEnabled,\n      });\n\n      return isCaseSensitive;\n    });\n  }, [regexEnabled, editor.commands, searchTerm]);\n\n  const handleRegex = React.useCallback(() => {\n    setRegex((state) => {\n      const isRegexEnabled = !state;\n\n      editor.commands.find({\n        text: searchTerm,\n        caseSensitive,\n        regexEnabled: isRegexEnabled,\n      });\n\n      return isRegexEnabled;\n    });\n  }, [caseSensitive, editor.commands, searchTerm]);\n\n  const handleKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLInputElement>) => {\n      function nextPrevious() {\n        if (ev.shiftKey) {\n          editor.commands.prevSearchMatch();\n        } else {\n          editor.commands.nextSearchMatch();\n        }\n      }\n\n      switch (ev.key) {\n        case \"Enter\": {\n          ev.preventDefault();\n          nextPrevious();\n          return;\n        }\n        case \"g\": {\n          if (ev.metaKey) {\n            ev.preventDefault();\n            nextPrevious();\n            selectInputText();\n          }\n          return;\n        }\n        case \"F3\": {\n          ev.preventDefault();\n          nextPrevious();\n          selectInputText();\n          return;\n        }\n      }\n    },\n    [editor.commands, selectInputText]\n  );\n\n  const handleReplace = React.useCallback(\n    (ev) => {\n      if (readOnly) {\n        return;\n      }\n      ev.preventDefault();\n      editor.commands.replace({ text: replaceTerm });\n    },\n    [editor.commands, readOnly, replaceTerm]\n  );\n\n  const handleReplaceAll = React.useCallback(\n    (ev) => {\n      if (readOnly) {\n        return;\n      }\n      ev.preventDefault();\n      editor.commands.replaceAll({ text: replaceTerm });\n    },\n    [editor.commands, readOnly, replaceTerm]\n  );\n\n  const handleChangeFind = React.useCallback(\n    (ev: React.ChangeEvent<HTMLInputElement>) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      setSearchTerm(ev.currentTarget.value);\n\n      editor.commands.find({\n        text: ev.currentTarget.value,\n        caseSensitive,\n        regexEnabled,\n      });\n    },\n    [caseSensitive, editor.commands, regexEnabled]\n  );\n\n  const handleReplaceKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLInputElement>) => {\n      if (ev.key === \"Enter\") {\n        ev.preventDefault();\n        handleReplace(ev);\n      }\n    },\n    [handleReplace]\n  );\n\n  useOnClickOutside(popover.unstable_referenceRef, popover.hide);\n\n  useKeyboardShortcuts({\n    popover,\n    handleOpen,\n    handleCaseSensitive,\n    handleRegex,\n  });\n\n  const style: React.CSSProperties = React.useMemo(\n    () => ({\n      position: \"fixed\",\n      left: \"initial\",\n      top: 60,\n      right: 16,\n      zIndex: depths.popover,\n    }),\n    []\n  );\n\n  React.useEffect(() => {\n    if (popover.visible) {\n      onOpen();\n      const startSearchText = selectionRef.current || searchTerm;\n\n      editor.commands.find({\n        text: startSearchText,\n        caseSensitive,\n        regexEnabled,\n      });\n\n      requestAnimationFrame(() => {\n        inputRef.current?.setSelectionRange(0, startSearchText.length);\n      });\n\n      if (selectionRef.current) {\n        setSearchTerm(selectionRef.current);\n      }\n    } else {\n      onClose();\n      setShowReplace(false);\n      editor.commands.clearSearch();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [popover.visible]);\n\n  const disabled = totalResults === 0;\n  const navigation = (\n    <>\n      <Tooltip\n        content={t(\"Previous match\")}\n        shortcut=\"Shift+Enter\"\n        placement=\"bottom\"\n      >\n        <ButtonLarge\n          disabled={disabled}\n          onClick={() => editor.commands.prevSearchMatch()}\n        >\n          <CaretUpIcon />\n        </ButtonLarge>\n      </Tooltip>\n      <Tooltip content={t(\"Next match\")} shortcut=\"Enter\" placement=\"bottom\">\n        <ButtonLarge\n          disabled={disabled}\n          onClick={() => editor.commands.nextSearchMatch()}\n        >\n          <CaretDownIcon />\n        </ButtonLarge>\n      </Tooltip>\n    </>\n  );\n\n  return (\n    <Portal>\n      <Popover\n        {...popover}\n        unstable_finalFocusRef={finalFocusRef}\n        style={style}\n        aria-label={t(\"Find and replace\")}\n        scrollable={false}\n        minWidth={420}\n        width={0}\n      >\n        <Content column>\n          <Flex gap={4}>\n            <StyledInput\n              ref={inputRef}\n              maxLength={255}\n              value={searchTerm}\n              placeholder={`${t(\"Find\")}…`}\n              onChange={handleChangeFind}\n              onKeyDown={handleKeyDown}\n            >\n              <SearchModifiers gap={8}>\n                <Tooltip\n                  content={t(\"Match case\")}\n                  shortcut={`${altDisplay}+${metaDisplay}+c`}\n                  placement=\"bottom\"\n                >\n                  <ButtonSmall onClick={handleCaseSensitive}>\n                    <CaseSensitiveIcon\n                      color={caseSensitive ? theme.accent : theme.textSecondary}\n                    />\n                  </ButtonSmall>\n                </Tooltip>\n                <Tooltip\n                  content={t(\"Enable regex\")}\n                  shortcut={`${altDisplay}+${metaDisplay}+r`}\n                  placement=\"bottom\"\n                >\n                  <ButtonSmall onClick={handleRegex}>\n                    <RegexIcon\n                      color={regexEnabled ? theme.accent : theme.textSecondary}\n                    />\n                  </ButtonSmall>\n                </Tooltip>\n              </SearchModifiers>\n            </StyledInput>\n            {navigation}\n            {!readOnly && (\n              <Tooltip\n                content={t(\"Replace options\")}\n                shortcut={`${altDisplay}+${metaDisplay}+f`}\n                placement=\"bottom\"\n              >\n                <ButtonLarge onClick={handleMore}>\n                  <ReplaceIcon color={theme.textSecondary} />\n                </ButtonLarge>\n              </Tooltip>\n            )}\n            <Results>\n              {totalResults > 0 ? currentIndex + 1 : 0} / {totalResults}\n            </Results>\n          </Flex>\n          <ResizingHeightContainer>\n            {showReplace && !readOnly && (\n              <Flex gap={8}>\n                <StyledInput\n                  maxLength={255}\n                  value={replaceTerm}\n                  ref={inputReplaceRef}\n                  placeholder={t(\"Replacement\")}\n                  onKeyDown={handleReplaceKeyDown}\n                  onRequestSubmit={handleReplaceAll}\n                  onChange={(ev) => setReplaceTerm(ev.currentTarget.value)}\n                />\n                <Tooltip\n                  content={t(\"Replace\")}\n                  shortcut=\"Enter\"\n                  placement=\"bottom\"\n                >\n                  <Button onClick={handleReplace} disabled={disabled} neutral>\n                    {t(\"Replace\")}\n                  </Button>\n                </Tooltip>\n                <Tooltip\n                  content={t(\"Replace all\")}\n                  shortcut={`${metaDisplay}+Enter`}\n                  placement=\"bottom\"\n                >\n                  <Button\n                    onClick={handleReplaceAll}\n                    disabled={disabled}\n                    neutral\n                  >\n                    {t(\"Replace all\")}\n                  </Button>\n                </Tooltip>\n              </Flex>\n            )}\n          </ResizingHeightContainer>\n        </Content>\n      </Popover>\n    </Portal>\n  );\n}\n\nconst SearchModifiers = styled(Flex)`\n  margin-right: 4px;\n`;\n\nconst StyledInput = styled(Input)`\n  width: 196px;\n  flex: 1;\n`;\n\nconst ButtonSmall = styled(NudeButton)`\n  &:hover,\n  &[aria-expanded=\"true\"] {\n    background: ${s(\"sidebarControlHoverBackground\")};\n  }\n\n  &:disabled {\n    color: ${s(\"textTertiary\")};\n    background: none;\n    cursor: default;\n  }\n`;\n\nconst ButtonLarge = styled(ButtonSmall)`\n  width: 32px;\n  height: 32px;\n`;\n\nconst Content = styled(Flex)`\n  padding: 8px 0;\n  margin-bottom: -16px;\n  position: static;\n`;\n\nconst Results = styled.span`\n  color: ${s(\"textSecondary\")};\n  font-size: 12px;\n  font-weight: 500;\n  font-variant-numeric: tabular-nums;\n  line-height: 32px;\n  min-width: 32px;\n  letter-spacing: -0.5px;\n  text-align: right;\n  user-select: none;\n`;\n","import deburr from \"lodash/deburr\";\nimport escapeRegExp from \"lodash/escapeRegExp\";\nimport { observable } from \"mobx\";\nimport { Node } from \"prosemirror-model\";\nimport { Command, Plugin, PluginKey } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport * as React from \"react\";\nimport scrollIntoView from \"scroll-into-view-if-needed\";\nimport Extension, { WidgetProps } from \"@shared/editor/lib/Extension\";\nimport FindAndReplace from \"../components/FindAndReplace\";\n\nconst pluginKey = new PluginKey(\"find-and-replace\");\n\nexport default class FindAndReplaceExtension extends Extension {\n  public get name() {\n    return \"find-and-replace\";\n  }\n\n  public get defaultOptions() {\n    return {\n      resultClassName: \"find-result\",\n      resultCurrentClassName: \"current-result\",\n      caseSensitive: false,\n      regexEnabled: false,\n    };\n  }\n\n  public commands() {\n    return {\n      /**\n       * Find all matching results in the document for the given options\n       *\n       * @param attrs.text The search query\n       * @param attrs.caseSensitive Whether the search should be case sensitive\n       * @param attrs.regexEnabled Whether the search should be a regex\n       *\n       * @returns A command that finds all matching results\n       */\n      find: (attrs: {\n        text: string;\n        caseSensitive?: boolean;\n        regexEnabled?: boolean;\n      }) => this.find(attrs.text, attrs.caseSensitive, attrs.regexEnabled),\n\n      /**\n       * Find and highlight the next matching result in the document\n       */\n      nextSearchMatch: () => this.goToMatch(1),\n\n      /**\n       * Find and highlight the previous matching result in the document\n       */\n      prevSearchMatch: () => this.goToMatch(-1),\n\n      /**\n       * Replace the current highlighted result with the given text\n       *\n       * @param attrs.text The text to replace the current result with\n       */\n      replace: (attrs: { text: string }) => this.replace(attrs.text),\n\n      /**\n       * Replace all matching results with the given text\n       *\n       * @param attrs.text The text to replace all results with\n       */\n      replaceAll: (attrs: { text: string }) => this.replaceAll(attrs.text),\n\n      /**\n       * Clear the current search\n       */\n      clearSearch: () => this.clear(),\n\n      /**\n       * Open the find and replace UI\n       */\n      openFindAndReplace: () => this.openFindAndReplace(),\n    };\n  }\n\n  private get decorations() {\n    return this.results.map((deco, index) => {\n      const decorationType =\n        deco.type === \"node\" ? Decoration.node : Decoration.inline;\n      return decorationType(deco.from, deco.to, {\n        class:\n          this.options.resultClassName +\n          (this.currentResultIndex === index\n            ? ` ${this.options.resultCurrentClassName}`\n            : \"\"),\n      });\n    });\n  }\n\n  public replace(replace: string): Command {\n    return (state, dispatch) => {\n      // Redo the search to ensure we have the latest results, the document may\n      // have changed underneath us since the last search.\n      this.search(state.doc);\n\n      const result = this.results[this.currentResultIndex];\n\n      if (!result) {\n        return false;\n      }\n\n      const { from, to } = result;\n      dispatch?.(state.tr.insertText(replace, from, to).setMeta(pluginKey, {}));\n\n      return true;\n    };\n  }\n\n  public replaceAll(replace: string): Command {\n    return (state, dispatch) => {\n      // Redo the search to ensure we have the latest results, the document may\n      // have changed underneath us since the last search.\n      this.search(state.doc);\n\n      const tr = state.tr;\n      let offset: number | undefined;\n\n      if (!this.results.length) {\n        return false;\n      }\n\n      this.results.forEach(({ from, to }, index) => {\n        tr.insertText(replace, from, to);\n        offset = this.rebaseNextResult(replace, index, offset);\n      });\n\n      dispatch?.(tr);\n      return true;\n    };\n  }\n\n  public find(\n    searchTerm: string,\n    caseSensitive = this.options.caseSensitive,\n    regexEnabled = this.options.regexEnabled\n  ): Command {\n    return (state, dispatch) => {\n      this.options.caseSensitive = caseSensitive;\n      this.options.regexEnabled = regexEnabled;\n      this.searchTerm = regexEnabled ? searchTerm : escapeRegExp(searchTerm);\n      this.currentResultIndex = 0;\n\n      dispatch?.(state.tr.setMeta(pluginKey, {}));\n      return true;\n    };\n  }\n\n  public clear(): Command {\n    return (state, dispatch) => {\n      this.searchTerm = \"\";\n      this.currentResultIndex = 0;\n\n      dispatch?.(state.tr.setMeta(pluginKey, {}));\n      return true;\n    };\n  }\n\n  public openFindAndReplace(): Command {\n    return (state, dispatch) => {\n      dispatch?.(state.tr.setMeta(pluginKey, { open: true }));\n      return true;\n    };\n  }\n\n  private get findRegExp() {\n    return RegExp(\n      this.searchTerm.replace(/\\\\+$/, \"\"),\n      !this.options.caseSensitive ? \"gui\" : \"gu\"\n    );\n  }\n\n  private goToMatch(direction: number): Command {\n    return (state, dispatch) => {\n      if (direction > 0) {\n        if (this.currentResultIndex >= this.results.length - 1) {\n          this.currentResultIndex = 0;\n        } else {\n          this.currentResultIndex += 1;\n        }\n      } else {\n        if (this.currentResultIndex === 0) {\n          this.currentResultIndex = this.results.length - 1;\n        } else {\n          this.currentResultIndex -= 1;\n        }\n      }\n\n      dispatch?.(state.tr.setMeta(pluginKey, {}));\n\n      const element = window.document.querySelector(\n        `.${this.options.resultCurrentClassName}`\n      );\n      if (element) {\n        scrollIntoView(element, {\n          scrollMode: \"if-needed\",\n          block: \"center\",\n        });\n      }\n      return true;\n    };\n  }\n\n  private rebaseNextResult(replace: string, index: number, lastOffset = 0) {\n    const nextIndex = index + 1;\n\n    if (!this.results[nextIndex]) {\n      return undefined;\n    }\n\n    const { from: currentFrom, to: currentTo } = this.results[index];\n    const offset = currentTo - currentFrom - replace.length + lastOffset;\n    const { from, to, type } = this.results[nextIndex];\n\n    this.results[nextIndex] = {\n      to: to - offset,\n      from: from - offset,\n      type,\n    };\n\n    return offset;\n  }\n\n  private search(doc: Node) {\n    this.results = [];\n    const mergedTextNodes: (\n      | {\n          text: string | undefined;\n          pos: number;\n          type: \"inline\";\n        }\n      | {\n          text: string | undefined;\n          pos: number;\n          type: \"node\";\n          nodeSize: number;\n        }\n    )[] = [];\n    let index = 0;\n\n    if (!this.searchTerm) {\n      return;\n    }\n\n    doc.descendants((node, pos) => {\n      if (node.isText) {\n        if (mergedTextNodes[index]) {\n          mergedTextNodes[index] = {\n            type: \"inline\",\n            text: mergedTextNodes[index].text + (node.text ?? \"\"),\n            pos: mergedTextNodes[index].pos,\n          };\n        } else {\n          mergedTextNodes[index] = {\n            type: \"inline\",\n            text: node.text,\n            pos,\n          };\n        }\n      } else if (node.type.name === \"mention\") {\n        mergedTextNodes[++index] = {\n          type: \"node\",\n          nodeSize: node.nodeSize,\n          text: node.attrs.label,\n          pos,\n        };\n        ++index;\n      } else {\n        ++index;\n      }\n    });\n\n    mergedTextNodes.forEach((node) => {\n      const { text = \"\", pos, type } = node;\n      try {\n        let m;\n        const search = this.findRegExp;\n\n        // We construct a string with the text stripped of diacritics plus the original text for\n        // search  allowing to search for diacritics-insensitive matches easily.\n        while ((m = search.exec(deburr(text) + text))) {\n          if (m[0] === \"\") {\n            break;\n          }\n\n          // Reconstruct the correct match position\n          const i = m.index >= text.length ? m.index - text.length : m.index;\n          const from = type === \"inline\" ? pos + i : pos;\n          const to = from + (type === \"inline\" ? m[0].length : node.nodeSize);\n\n          // Check if already exists in results, possible due to duplicated\n          // search string on L257\n          if (this.results.some((r) => r.from === from && r.to === to)) {\n            continue;\n          }\n\n          this.results.push({ from, to, type });\n        }\n      } catch (e) {\n        // Invalid RegExp\n      }\n    });\n  }\n\n  private createDeco(doc: Node) {\n    this.search(doc);\n    return this.decorations\n      ? DecorationSet.create(doc, this.decorations)\n      : DecorationSet.empty;\n  }\n\n  get allowInReadOnly() {\n    return true;\n  }\n\n  get focusAfterExecution() {\n    return false;\n  }\n\n  get plugins() {\n    return [\n      new Plugin({\n        key: pluginKey,\n        state: {\n          init: () => DecorationSet.empty,\n          apply: (tr, decorationSet) => {\n            const action = tr.getMeta(pluginKey);\n\n            if (action) {\n              if (action.open) {\n                this.open = true;\n              }\n              return this.createDeco(tr.doc);\n            }\n\n            if (tr.docChanged) {\n              return decorationSet.map(tr.mapping, tr.doc);\n            }\n\n            return decorationSet;\n          },\n        },\n        props: {\n          decorations(state) {\n            return this.getState(state);\n          },\n        },\n      }),\n    ];\n  }\n\n  public widget = ({ readOnly }: WidgetProps) => (\n    <FindAndReplace\n      currentIndex={this.currentResultIndex}\n      totalResults={this.results.length}\n      readOnly={readOnly}\n      open={this.open}\n      onOpen={() => {\n        this.open = true;\n      }}\n      onClose={() => {\n        this.open = false;\n      }}\n    />\n  );\n\n  @observable\n  private open = false;\n\n  @observable\n  private results: { from: number; to: number; type: \"inline\" | \"node\" }[] = [];\n\n  @observable\n  private currentResultIndex = 0;\n\n  private searchTerm = \"\";\n}\n","import { transparentize } from \"polished\";\nimport { Link } from \"react-router-dom\";\nimport styled, { css } from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport { getTextColor } from \"@shared/utils/color\";\nimport Text from \"~/components/Text\";\n\nexport const CARD_MARGIN = 10;\n\nconst NUMBER_OF_LINES = 10;\n\nconst sharedVars = css`\n  --line-height: 1.6em;\n`;\n\nconst StyledText = styled(Text)`\n  margin-bottom: 0;\n`;\n\nexport const Preview = styled(Link)`\n  cursor: ${(props: { as?: string }) =>\n    props.as === \"div\" ? \"default\" : \"var(--pointer)\"};\n  border-radius: 4px;\n  box-shadow: 0 30px 90px -20px rgba(0, 0, 0, 0.3),\n    0 0 1px 1px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  position: absolute;\n  width: 375px;\n`;\n\nexport const Title = styled(Text).attrs({ as: \"h2\", size: \"large\" })`\n  margin-bottom: 4px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 4px;\n`;\n\nexport const Info = styled(StyledText).attrs(() => ({\n  type: \"tertiary\",\n  size: \"xsmall\",\n}))`\n  white-space: nowrap;\n`;\n\nexport const Description = styled(StyledText)`\n  ${sharedVars}\n  margin-top: 0.5em;\n  line-height: var(--line-height);\n  max-height: calc(var(--line-height) * ${NUMBER_OF_LINES});\n  overflow: hidden;\n`;\n\nexport const Thumbnail = styled.img`\n  object-fit: cover;\n  height: 200px;\n  background: ${s(\"menuBackground\")};\n`;\n\nexport const Label = styled(Text).attrs({ size: \"xsmall\", weight: \"bold\" })<{\n  color?: string;\n}>`\n  background-color: ${(props) =>\n    props.color ?? props.theme.backgroundSecondary};\n  color: ${(props) =>\n    props.color ? getTextColor(props.color) : props.theme.text};\n  width: fit-content;\n  border-radius: 2em;\n  padding: 0 8px;\n  margin-right: 0.5em;\n  margin-top: 0.5em;\n`;\n\nexport const CardContent = styled.div`\n  overflow: hidden;\n  user-select: none;\n`;\n\n// &:after — gradient mask for overflow text\nexport const Card = styled.div<{ fadeOut?: boolean; $borderRadius?: string }>`\n  backdrop-filter: blur(10px);\n  background: ${s(\"menuBackground\")};\n  padding: 16px;\n  font-size: 0.9em;\n  position: relative;\n\n  .placeholder,\n  .heading-anchor {\n    display: none;\n  }\n\n  // fills the gap between the card and pointer to avoid a dead zone\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: -10px;\n    left: 0;\n    right: 0;\n    height: 10px;\n  }\n\n  ${(props) =>\n    props.fadeOut !== false\n      ? `&:after {\n          ${sharedVars}\n          content: \"\";\n          display: block;\n          position: absolute;\n          pointer-events: none;\n          background: linear-gradient(\n            90deg,\n            ${transparentize(1, props.theme.menuBackground)} 0%,\n            ${transparentize(1, props.theme.menuBackground)} 75%,\n            ${props.theme.menuBackground} 90%\n          );\n          bottom: 0;\n          left: 0;\n          right: 0;\n          height: var(--line-height);\n          border-bottom: 16px solid ${props.theme.menuBackground};\n          border-bottom-left-radius: 4px;\n          border-bottom-right-radius: 4px;\n        }`\n      : \"\"}\n`;\n","import * as React from \"react\";\nimport { richExtensions } from \"@shared/editor/nodes\";\nimport { UnfurlResourceType, UnfurlResponse } from \"@shared/types\";\nimport Editor from \"~/components/Editor\";\nimport Flex from \"~/components/Flex\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport {\n  Preview,\n  Title,\n  Info,\n  Card,\n  CardContent,\n  Description,\n} from \"./Components\";\n\ntype Props = Omit<UnfurlResponse[UnfurlResourceType.Document], \"type\">;\n\nconst HoverPreviewDocument = React.forwardRef(function _HoverPreviewDocument(\n  { url, id, title, summary, lastActivityByViewer }: Props,\n  ref: React.Ref<HTMLDivElement>\n) {\n  return (\n    <Preview to={url}>\n      <Card ref={ref}>\n        <CardContent>\n          <ErrorBoundary showTitle={false} reloadOnChunkMissing={false}>\n            <Flex column gap={2}>\n              <Title>{title}</Title>\n              <Info>{lastActivityByViewer}</Info>\n              <Description as=\"div\">\n                <React.Suspense fallback={<div />}>\n                  <Editor\n                    key={id}\n                    extensions={richExtensions}\n                    defaultValue={summary}\n                    embedsDisabled\n                    readOnly\n                  />\n                </React.Suspense>\n              </Description>\n            </Flex>\n          </ErrorBoundary>\n        </CardContent>\n      </Card>\n    </Preview>\n  );\n});\n\nexport default HoverPreviewDocument;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  status: string;\n  color: string;\n  size?: number;\n  className?: string;\n};\n\n/**\n * Issue status icon based on GitHub issue status, but can be used for any git-style integration.\n */\nexport function IssueStatusIcon({ size, ...rest }: Props) {\n  return (\n    <Icon size={size}>\n      <BaseIcon {...rest} />\n    </Icon>\n  );\n}\n\nconst Icon = styled.span<{ size?: number }>`\n  display: inline-flex;\n  flex-shrink: 0;\n  width: ${(props) => props.size ?? 24}px;\n  height: ${(props) => props.size ?? 24}px;\n  align-items: center;\n  justify-content: center;\n`;\n\nfunction BaseIcon(props: Props) {\n  switch (props.status) {\n    case \"open\":\n      return (\n        <svg\n          viewBox=\"0 0 16 16\"\n          width=\"16\"\n          height=\"16\"\n          fill={props.color}\n          className={props.className}\n        >\n          <path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\" />\n          <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z\" />\n        </svg>\n      );\n    case \"closed\":\n      return (\n        <svg\n          viewBox=\"0 0 16 16\"\n          width=\"16\"\n          height=\"16\"\n          fill={props.color}\n          className={props.className}\n        >\n          <path d=\"M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z\" />\n          <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z\" />\n        </svg>\n      );\n    case \"canceled\":\n      return (\n        <svg\n          viewBox=\"0 0 16 16\"\n          width=\"16\"\n          height=\"16\"\n          fill={props.color}\n          className={props.className}\n        >\n          <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm9.78-2.22-5.5 5.5a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l5.5-5.5a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z\" />\n        </svg>\n      );\n    default:\n      return null;\n  }\n}\n","import * as React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { UnfurlResourceType, UnfurlResponse } from \"@shared/types\";\nimport { Avatar } from \"~/components/Avatar\";\nimport Flex from \"~/components/Flex\";\nimport { IssueStatusIcon } from \"../Icons/IssueStatusIcon\";\nimport Text from \"../Text\";\nimport Time from \"../Time\";\nimport {\n  Preview,\n  Title,\n  Description,\n  Card,\n  CardContent,\n  Label,\n  Info,\n} from \"./Components\";\n\ntype Props = Omit<UnfurlResponse[UnfurlResourceType.Issue], \"type\">;\n\nconst HoverPreviewIssue = React.forwardRef(function _HoverPreviewIssue(\n  { url, id, title, description, author, labels, state, createdAt }: Props,\n  ref: React.Ref<HTMLDivElement>\n) {\n  const authorName = author.name;\n\n  return (\n    <Preview as=\"a\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n      <Flex column ref={ref}>\n        <Card fadeOut={false}>\n          <CardContent>\n            <Flex gap={2} column>\n              <Title>\n                <IssueStatusIcon status={state.name} color={state.color} />\n                <span>\n                  {title}&nbsp;<Text type=\"tertiary\">{id}</Text>\n                </span>\n              </Title>\n              <Flex align=\"center\" gap={4}>\n                <Avatar src={author.avatarUrl} />\n                <Info>\n                  <Trans>\n                    {{ authorName }} created{\" \"}\n                    <Time dateTime={createdAt} addSuffix />\n                  </Trans>\n                </Info>\n              </Flex>\n              <Description>{description}</Description>\n\n              <Flex wrap>\n                {labels.map((label, index) => (\n                  <Label key={index} color={label.color}>\n                    {label.name}\n                  </Label>\n                ))}\n              </Flex>\n            </Flex>\n          </CardContent>\n        </Card>\n      </Flex>\n    </Preview>\n  );\n});\n\nexport default HoverPreviewIssue;\n","import * as React from \"react\";\nimport Flex from \"~/components/Flex\";\nimport {\n  Preview,\n  Title,\n  Description,\n  Card,\n  CardContent,\n  Thumbnail,\n} from \"./Components\";\n\ntype Props = {\n  /** Link url */\n  url: string;\n  /** Title for the preview card */\n  title: string;\n  /** Url for thumbnail served by the link provider */\n  thumbnailUrl: string;\n  /** Some description about the link provider */\n  description: string;\n};\n\nconst HoverPreviewLink = React.forwardRef(function _HoverPreviewLink(\n  { url, thumbnailUrl, title, description }: Props,\n  ref: React.Ref<HTMLDivElement>\n) {\n  return (\n    <Preview as=\"a\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n      <Flex column ref={ref}>\n        {thumbnailUrl ? <Thumbnail src={thumbnailUrl} alt=\"\" /> : null}\n        <Card>\n          <CardContent>\n            <Flex column>\n              <Title>{title}</Title>\n              <Description>{description}</Description>\n            </Flex>\n          </CardContent>\n        </Card>\n      </Flex>\n    </Preview>\n  );\n});\n\nexport default HoverPreviewLink;\n","import * as React from \"react\";\nimport { UnfurlResourceType, UnfurlResponse } from \"@shared/types\";\nimport { Avatar, AvatarSize } from \"~/components/Avatar\";\nimport Flex from \"~/components/Flex\";\nimport { Preview, Title, Info, Card, CardContent } from \"./Components\";\n\ntype Props = Omit<UnfurlResponse[UnfurlResourceType.Mention], \"type\">;\n\nconst HoverPreviewMention = React.forwardRef(function _HoverPreviewMention(\n  { avatarUrl, name, lastActive, color, email }: Props,\n  ref: React.Ref<HTMLDivElement>\n) {\n  return (\n    <Preview as=\"div\">\n      <Card fadeOut={false} ref={ref}>\n        <CardContent>\n          <Flex gap={12}>\n            <Avatar\n              model={{\n                avatarUrl,\n                initial: name ? name[0] : \"?\",\n                color,\n              }}\n              size={AvatarSize.XLarge}\n            />\n            <Flex column gap={2} justify=\"center\">\n              <Title>{name}</Title>\n              {email && <Info>{email}</Info>}\n              <Info>{lastActive}</Info>\n            </Flex>\n          </Flex>\n        </CardContent>\n      </Card>\n    </Preview>\n  );\n});\n\nexport default HoverPreviewMention;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  status: string;\n  color: string;\n  size?: number;\n  className?: string;\n};\n\n/**\n * Issue status icon based on GitHub pull requests, but can be used for any git-style integration.\n */\nexport function PullRequestIcon({ size, ...rest }: Props) {\n  return (\n    <Icon size={size}>\n      <BaseIcon {...rest} />\n    </Icon>\n  );\n}\n\nconst Icon = styled.span<{ size?: number }>`\n  display: inline-flex;\n  flex-shrink: 0;\n  width: ${(props) => props.size ?? 24}px;\n  height: ${(props) => props.size ?? 24}px;\n  align-items: center;\n  justify-content: center;\n`;\n\nfunction BaseIcon(props: Props) {\n  switch (props.status) {\n    case \"open\":\n      return (\n        <svg\n          viewBox=\"0 0 16 16\"\n          width=\"16\"\n          height=\"16\"\n          fill={props.color}\n          className={props.className}\n        >\n          <path d=\"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\" />\n        </svg>\n      );\n    case \"merged\":\n      return (\n        <svg\n          viewBox=\"0 0 16 16\"\n          width=\"16\"\n          height=\"16\"\n          fill={props.color}\n          className={props.className}\n        >\n          <path d=\"M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM5 3.25a.75.75 0 1 0 0 .005V3.25Z\" />\n        </svg>\n      );\n    case \"closed\":\n      return (\n        <svg\n          viewBox=\"0 0 16 16\"\n          width=\"16\"\n          height=\"16\"\n          fill={props.color}\n          className={props.className}\n        >\n          <path d=\"M3.25 1A2.25 2.25 0 0 1 4 5.372v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.251 2.251 0 0 1 3.25 1Zm9.5 5.5a.75.75 0 0 1 .75.75v3.378a2.251 2.251 0 1 1-1.5 0V7.25a.75.75 0 0 1 .75-.75Zm-2.03-5.273a.75.75 0 0 1 1.06 0l.97.97.97-.97a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.97.97.97.97a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-.97-.97-.97.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l.97-.97-.97-.97a.75.75 0 0 1 0-1.06ZM2.5 3.25a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0ZM3.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm9.5 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z\" />\n        </svg>\n      );\n    default:\n      return null;\n  }\n}\n","import * as React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { UnfurlResourceType, UnfurlResponse } from \"@shared/types\";\nimport { Avatar } from \"~/components/Avatar\";\nimport Flex from \"~/components/Flex\";\nimport { PullRequestIcon } from \"../Icons/PullRequestIcon\";\nimport Text from \"../Text\";\nimport Time from \"../Time\";\nimport {\n  Preview,\n  Title,\n  Description,\n  Card,\n  CardContent,\n  Info,\n} from \"./Components\";\n\ntype Props = Omit<UnfurlResponse[UnfurlResourceType.PR], \"type\">;\n\nconst HoverPreviewPullRequest = React.forwardRef(\n  function _HoverPreviewPullRequest(\n    { url, title, id, description, author, state, createdAt }: Props,\n    ref: React.Ref<HTMLDivElement>\n  ) {\n    const authorName = author.name;\n\n    return (\n      <Preview as=\"a\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <Flex column ref={ref}>\n          <Card fadeOut={false}>\n            <CardContent>\n              <Flex gap={2} column>\n                <Title>\n                  <PullRequestIcon status={state.name} color={state.color} />\n                  <span>\n                    {title}&nbsp;<Text type=\"tertiary\">{id}</Text>\n                  </span>\n                </Title>\n                <Flex align=\"center\" gap={4}>\n                  <Avatar src={author.avatarUrl} />\n                  <Info>\n                    <Trans>\n                      {{ authorName }} opened{\" \"}\n                      <Time dateTime={createdAt} addSuffix />\n                    </Trans>\n                  </Info>\n                </Flex>\n                <Description>{description}</Description>\n              </Flex>\n            </CardContent>\n          </Card>\n        </Flex>\n      </Preview>\n    );\n  }\n);\n\nexport default HoverPreviewPullRequest;\n","import { m } from \"framer-motion\";\nimport * as React from \"react\";\nimport { Portal } from \"react-portal\";\nimport styled from \"styled-components\";\nimport { depths } from \"@shared/styles\";\nimport { UnfurlResourceType } from \"@shared/types\";\nimport useEventListener from \"~/hooks/useEventListener\";\nimport useKeyDown from \"~/hooks/useKeyDown\";\nimport useMobile from \"~/hooks/useMobile\";\nimport useOnClickOutside from \"~/hooks/useOnClickOutside\";\nimport LoadingIndicator from \"../LoadingIndicator\";\nimport { CARD_MARGIN } from \"./Components\";\nimport HoverPreviewDocument from \"./HoverPreviewDocument\";\nimport HoverPreviewIssue from \"./HoverPreviewIssue\";\nimport HoverPreviewLink from \"./HoverPreviewLink\";\nimport HoverPreviewMention from \"./HoverPreviewMention\";\nimport HoverPreviewPullRequest from \"./HoverPreviewPullRequest\";\n\nconst DELAY_CLOSE = 500;\nconst POINTER_HEIGHT = 22;\nconst POINTER_WIDTH = 22;\n\ntype Props = {\n  /** The HTML element that is being hovered over, or null if none. */\n  element: HTMLElement | null;\n  /** Data to be previewed */\n  data: Record<string, any> | null;\n  /** Whether the preview data is being loaded */\n  dataLoading: boolean;\n  /** A callback on close of the hover preview. */\n  onClose: () => void;\n};\n\nenum Direction {\n  UP,\n  DOWN,\n}\n\nfunction HoverPreviewDesktop({ element, data, dataLoading, onClose }: Props) {\n  const [isVisible, setVisible] = React.useState(false);\n  const timerClose = React.useRef<ReturnType<typeof setTimeout>>();\n  const cardRef = React.useRef<HTMLDivElement | null>(null);\n  const { cardLeft, cardTop, pointerLeft, pointerTop, pointerDir } =\n    useHoverPosition({\n      cardRef,\n      element,\n      isVisible,\n    });\n\n  const closePreview = React.useCallback(() => {\n    setVisible(false);\n    onClose();\n  }, [onClose]);\n\n  const stopCloseTimer = React.useCallback(() => {\n    if (timerClose.current) {\n      clearTimeout(timerClose.current);\n      timerClose.current = undefined;\n    }\n  }, []);\n\n  const startCloseTimer = React.useCallback(() => {\n    timerClose.current = setTimeout(closePreview, DELAY_CLOSE);\n  }, [closePreview]);\n\n  // Open and close the preview when the element changes.\n  React.useEffect(() => {\n    if (element && data && !dataLoading) {\n      setVisible(true);\n    } else {\n      startCloseTimer();\n    }\n  }, [startCloseTimer, element, data, dataLoading]);\n\n  // Close the preview on Escape, scroll, or click outside.\n  useOnClickOutside(cardRef, closePreview);\n  useKeyDown(\"Escape\", closePreview);\n  useEventListener(\"scroll\", closePreview, window, { capture: true });\n\n  // Ensure that the preview stays open while the user is hovering over the card.\n  React.useEffect(() => {\n    const card = cardRef.current;\n\n    if (isVisible) {\n      if (card) {\n        card.addEventListener(\"mouseenter\", stopCloseTimer);\n        card.addEventListener(\"mouseleave\", startCloseTimer);\n      }\n    }\n\n    return () => {\n      if (card) {\n        card.removeEventListener(\"mouseenter\", stopCloseTimer);\n        card.removeEventListener(\"mouseleave\", startCloseTimer);\n      }\n\n      stopCloseTimer();\n    };\n  }, [element, startCloseTimer, isVisible, stopCloseTimer]);\n\n  if (dataLoading) {\n    return <LoadingIndicator />;\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  return (\n    <Portal>\n      <Position top={cardTop} left={cardLeft} aria-hidden>\n        {isVisible ? (\n          <Animate\n            initial={{ opacity: 0, y: -20, pointerEvents: \"none\" }}\n            animate={{\n              opacity: 1,\n              y: 0,\n              transitionEnd: { pointerEvents: \"auto\" },\n            }}\n          >\n            {data.type === UnfurlResourceType.Mention ? (\n              <HoverPreviewMention\n                ref={cardRef}\n                name={data.name}\n                avatarUrl={data.avatarUrl}\n                color={data.color}\n                lastActive={data.lastActive}\n                email={data.email}\n              />\n            ) : data.type === UnfurlResourceType.Document ? (\n              <HoverPreviewDocument\n                ref={cardRef}\n                url={data.url}\n                id={data.id}\n                title={data.title}\n                summary={data.summary}\n                lastActivityByViewer={data.lastActivityByViewer}\n              />\n            ) : data.type === UnfurlResourceType.Issue ? (\n              <HoverPreviewIssue\n                ref={cardRef}\n                url={data.url}\n                id={data.id}\n                title={data.title}\n                description={data.description}\n                author={data.author}\n                labels={data.labels}\n                state={data.state}\n                createdAt={data.createdAt}\n              />\n            ) : data.type === UnfurlResourceType.PR ? (\n              <HoverPreviewPullRequest\n                ref={cardRef}\n                url={data.url}\n                id={data.id}\n                title={data.title}\n                description={data.description}\n                author={data.author}\n                createdAt={data.createdAt}\n                state={data.state}\n              />\n            ) : (\n              <HoverPreviewLink\n                ref={cardRef}\n                url={data.url}\n                thumbnailUrl={data.thumbnailUrl}\n                title={data.title}\n                description={data.description}\n              />\n            )}\n            <Pointer\n              top={pointerTop}\n              left={pointerLeft}\n              direction={pointerDir}\n            />\n          </Animate>\n        ) : null}\n      </Position>\n    </Portal>\n  );\n}\n\nfunction HoverPreview({ element, data, dataLoading, ...rest }: Props) {\n  const isMobile = useMobile();\n  if (isMobile) {\n    return null;\n  }\n\n  return (\n    <HoverPreviewDesktop\n      {...rest}\n      element={element}\n      data={data}\n      dataLoading={dataLoading}\n    />\n  );\n}\n\nfunction useHoverPosition({\n  cardRef,\n  element,\n  isVisible,\n}: {\n  cardRef: React.RefObject<HTMLDivElement>;\n  element: HTMLElement | null;\n  isVisible: boolean;\n}) {\n  const [cardLeft, setCardLeft] = React.useState(0);\n  const [cardTop, setCardTop] = React.useState(0);\n  const [pointerLeft, setPointerLeft] = React.useState(0);\n  const [pointerTop, setPointerTop] = React.useState(0);\n  const [pointerDir, setPointerDir] = React.useState(Direction.UP);\n\n  React.useLayoutEffect(() => {\n    if (isVisible && element && cardRef.current) {\n      const elem = element.getBoundingClientRect();\n      const card = cardRef.current.getBoundingClientRect();\n\n      let cTop = elem.bottom + window.scrollY + CARD_MARGIN;\n      let pTop = -POINTER_HEIGHT;\n      let pDir = Direction.UP;\n      if (cTop + card.height > window.innerHeight + window.scrollY) {\n        // shift card upwards if it goes out of screen\n        const bottom = elem.top + window.scrollY;\n        cTop = bottom - card.height;\n        // shift a little further to leave some margin between card and element boundary\n        cTop -= CARD_MARGIN;\n        // pointer should be shifted downwards to align with card's bottom\n        pTop = card.height;\n        pDir = Direction.DOWN;\n      }\n      setCardTop(cTop);\n      setPointerTop(pTop);\n      setPointerDir(pDir);\n\n      let cLeft = elem.left;\n      let pLeft = elem.width / 2;\n      if (cLeft + card.width > window.innerWidth) {\n        // shift card leftwards by the amount it went out of screen\n        let shiftBy = cLeft + card.width - window.innerWidth;\n        // shift a little further to leave some margin between card and window boundary\n        shiftBy += CARD_MARGIN;\n        cLeft -= shiftBy;\n\n        // shift pointer rightwards by same amount so as to position it back correctly\n        pLeft += shiftBy;\n      }\n      setCardLeft(cLeft);\n      setPointerLeft(pLeft);\n    }\n  }, [isVisible, cardRef, element]);\n\n  return { cardLeft, cardTop, pointerLeft, pointerTop, pointerDir };\n}\n\nconst Animate = styled(m.div)`\n  @media print {\n    display: none;\n  }\n`;\n\nconst Position = styled.div<{ fixed?: boolean; top?: number; left?: number }>`\n  position: ${({ fixed }) => (fixed ? \"fixed\" : \"absolute\")};\n  z-index: ${depths.hoverPreview};\n  display: flex;\n  max-height: 75%;\n\n  ${({ top }) => (top !== undefined ? `top: ${top}px` : \"\")};\n  ${({ left }) => (left !== undefined ? `left: ${left}px` : \"\")};\n`;\n\nconst Pointer = styled.div<{ top: number; left: number; direction: Direction }>`\n  top: ${(props) => props.top}px;\n  left: ${(props) => props.left}px;\n  width: ${POINTER_WIDTH}px;\n  height: ${POINTER_HEIGHT}px;\n  position: absolute;\n  transform: translateX(-50%);\n  pointer-events: none;\n\n  &:before,\n  &:after {\n    content: \"\";\n    display: inline-block;\n    position: absolute;\n    ${({ direction }) => (direction === Direction.UP ? \"bottom: 0\" : \"top: 0\")};\n    ${({ direction }) => (direction === Direction.UP ? \"right: 0\" : \"left: 0\")};\n  }\n\n  &:before {\n    border: 8px solid transparent;\n    ${({ direction, theme }) =>\n      direction === Direction.UP\n        ? `border-bottom-color: ${theme.menuBorder || \"rgba(0, 0, 0, 0.1)\"}`\n        : `border-top-color: ${theme.menuBorder || \"rgba(0, 0, 0, 0.1)\"}`};\n    ${({ direction }) =>\n      direction === Direction.UP ? \"right: -1px\" : \"left: -1px\"};\n  }\n\n  &:after {\n    border: 7px solid transparent;\n    ${({ direction, theme }) =>\n      direction === Direction.UP\n        ? `border-bottom-color: ${theme.menuBackground}`\n        : `border-top-color: ${theme.menuBackground}`};\n  }\n`;\n\nexport default HoverPreview;\n","import { action, observable } from \"mobx\";\nimport { Plugin } from \"prosemirror-state\";\nimport { EditorView } from \"prosemirror-view\";\nimport * as React from \"react\";\nimport Extension from \"@shared/editor/lib/Extension\";\nimport parseDocumentSlug from \"@shared/utils/parseDocumentSlug\";\nimport HoverPreview from \"~/components/HoverPreview\";\nimport env from \"~/env\";\nimport { client } from \"~/utils/ApiClient\";\n\ninterface HoverPreviewsOptions {\n  /** Delay before the target is considered \"hovered\" and callback is triggered. */\n  delay: number;\n}\n\nexport default class HoverPreviews extends Extension {\n  state: {\n    activeLinkElement: HTMLElement | null;\n    data: Record<string, any> | null;\n    dataLoading: boolean;\n  } = observable({\n    activeLinkElement: null,\n    data: null,\n    dataLoading: false,\n  });\n\n  get defaultOptions(): HoverPreviewsOptions {\n    return {\n      delay: 600,\n    };\n  }\n\n  get name() {\n    return \"hover-previews\";\n  }\n\n  get plugins() {\n    const isHoverTarget = (target: Element | null, view: EditorView) =>\n      target instanceof HTMLElement &&\n      this.editor.elementRef.current?.contains(target) &&\n      (!view.editable || (view.editable && !view.hasFocus()));\n\n    let hoveringTimeout: ReturnType<typeof setTimeout>;\n\n    return [\n      new Plugin({\n        props: {\n          handleDOMEvents: {\n            mouseover: (view: EditorView, event: MouseEvent) => {\n              const target = (event.target as HTMLElement)?.closest(\n                \".use-hover-preview\"\n              );\n              if (isHoverTarget(target, view)) {\n                hoveringTimeout = setTimeout(\n                  action(async () => {\n                    const element = target as HTMLElement;\n\n                    const url =\n                      element?.getAttribute(\"href\") || element?.dataset.url;\n                    const documentId = parseDocumentSlug(\n                      window.location.pathname\n                    );\n\n                    if (url) {\n                      this.state.dataLoading = true;\n                      try {\n                        const data = await client.post(\"/urls.unfurl\", {\n                          url: url.startsWith(\"/\") ? env.URL + url : url,\n                          documentId,\n                        });\n                        this.state.activeLinkElement = element;\n                        this.state.data = data;\n                      } catch (err) {\n                        this.state.activeLinkElement = null;\n                      } finally {\n                        this.state.dataLoading = false;\n                      }\n                    }\n                  }),\n                  this.options.delay\n                );\n              }\n              return false;\n            },\n            mouseout: action((view: EditorView, event: MouseEvent) => {\n              const target = (event.target as HTMLElement)?.closest(\n                \".use-hover-preview\"\n              );\n              if (isHoverTarget(target, view)) {\n                clearTimeout(hoveringTimeout);\n                this.state.activeLinkElement = null;\n              }\n              return false;\n            }),\n          },\n        },\n      }),\n    ];\n  }\n\n  widget = () => (\n    <HoverPreview\n      element={this.state.activeLinkElement}\n      data={this.state.data}\n      dataLoading={this.state.dataLoading}\n      onClose={action(() => {\n        this.state.activeLinkElement = null;\n      })}\n    />\n  );\n}\n","import Extension from \"@shared/editor/lib/Extension\";\nimport Mark from \"@shared/editor/marks/Mark\";\nimport Node from \"@shared/editor/nodes/Node\";\nimport BlockMenuExtension from \"~/editor/extensions/BlockMenu\";\nimport ClipboardTextSerializer from \"~/editor/extensions/ClipboardTextSerializer\";\nimport EmojiMenuExtension from \"~/editor/extensions/EmojiMenu\";\nimport FindAndReplaceExtension from \"~/editor/extensions/FindAndReplace\";\nimport HoverPreviewsExtension from \"~/editor/extensions/HoverPreviews\";\nimport Keys from \"~/editor/extensions/Keys\";\nimport MentionMenuExtension from \"~/editor/extensions/MentionMenu\";\nimport PasteHandler from \"~/editor/extensions/PasteHandler\";\nimport PreventTab from \"~/editor/extensions/PreventTab\";\nimport SmartText from \"~/editor/extensions/SmartText\";\n\ntype Nodes = (typeof Node | typeof Mark | typeof Extension)[];\n\nexport const withUIExtensions = (nodes: Nodes) => [\n  ...nodes,\n  SmartText,\n  PasteHandler,\n  ClipboardTextSerializer,\n  BlockMenuExtension,\n  EmojiMenuExtension,\n  MentionMenuExtension,\n  FindAndReplaceExtension,\n  HoverPreviewsExtension,\n  // Order these default key handlers last\n  PreventTab,\n  Keys,\n];\n"],"names":["Img","styled","Image","withConfig","componentId","blockMenuItems","dictionary","documentRef","documentWidth","current","clientWidth","name","title","h1","keywords","icon","Heading1Icon","shortcut","attrs","level","h2","Heading2Icon","h3","Heading3Icon","h4","Heading4Icon","checkboxList","TodoListIcon","bulletList","BulletedListIcon","orderedList","OrderedListIcon","image","ImageIcon","video","EmbedIcon","file","AttachmentIcon","table","TableIcon","rowsCount","colsCount","colWidth","quote","BlockQuoteIcon","metaDisplay","codeBlock","CodeIcon","mathBlock","MathIcon","hr","HorizontalRuleIcon","pageBreak","PageBreakIcon","markup","insertDate","CalendarIcon","insertTime","ClockIcon","insertDateTime","infoNotice","InfoIcon","style","successNotice","DoneIcon","warningNotice","WarningIcon","tipNotice","StarredIcon","src","alt","language","BlockMenu","props","useDictionary","elementRef","useEditor","SuggestionsMenu","filterable","trigger","renderMenuItem","item","_index","options","jsx","SuggestionsMenuItem","onClick","selected","items","getMenuItems","BlockMenuExtension","Suggestion","constructor","super","arguments","handleClose","action","insertNewLine","view","this","editor","transaction","state","tr","split","selection","to","dispatch","focus","open","widget","rtl","isActive","search","query","onClose","uploadFile","onFileUploadStart","onFileUploadStop","embeds","defaultOptions","allowSpaces","requireSearchTerm","enabledInCode","plugins","button","document","createElement","className","type","ReactDOM","render","PlusIcon","Plugin","decorations","parent","findParentNode","node","$from","depth","isEmptyNode","content","size","isSlash","textContent","push","Decoration","pos","addEventListener","key","doc","nodeSize","class","newLineEmpty","newLineWithSlash","DecorationSet","create","FindAndReplace","readOnly","onOpen","currentIndex","totalResults","finalFocusRef","React","dom","parentElement","selectionRef","inputRef","inputReplaceRef","t","useTranslation","theme","useTheme","showReplace","setShowReplace","caseSensitive","setCaseSensitive","regexEnabled","setRegex","searchTerm","setSearchTerm","replaceTerm","setReplaceTerm","popover","usePopoverState","show","Desktop","bridge","onFindInPage","window","getSelection","toString","onReplaceInPage","selectInputText","setSelectionRange","value","length","selectInputReplaceText","setTimeout","handleOpen","withReplace","shouldShowReplace","visible","handleMore","handleCaseSensitive","isCaseSensitive","commands","find","text","handleRegex","isRegexEnabled","handleKeyDown","ev","nextPrevious","shiftKey","prevSearchMatch","nextSearchMatch","preventDefault","metaKey","handleReplace","replace","handleReplaceAll","replaceAll","handleChangeFind","stopPropagation","currentTarget","handleReplaceKeyDown","unstable_referenceRef","hide","useKeyboardShortcuts","useKeyDown","isModKey","code","altKey","allowInInput","position","left","top","right","zIndex","depths","startSearchText","requestAnimationFrame","clearSearch","disabled","navigation","jsxs","Fragment","children","Tooltip","placement","ButtonLarge","CaretUpIcon","CaretDownIcon","Portal","Popover","unstable_finalFocusRef","scrollable","minWidth","width","Content","column","Flex","gap","StyledInput","ref","maxLength","placeholder","onChange","onKeyDown","SearchModifiers","altDisplay","ButtonSmall","CaseSensitiveIcon","color","accent","textSecondary","RegexIcon","ReplaceIcon","Results","ResizingHeightContainer","onRequestSubmit","Button","neutral","Input","NudeButton","s","span","pluginKey","PluginKey","FindAndReplaceExtension","Extension","currentResultIndex","results","resultClassName","resultCurrentClassName","goToMatch","clear","openFindAndReplace","map","deco","index","inline","from","result","insertText","setMeta","offset","forEach","rebaseNextResult","escapeRegExp","findRegExp","RegExp","direction","element","querySelector","scrollIntoView","scrollMode","block","lastOffset","nextIndex","undefined","currentFrom","currentTo","mergedTextNodes","descendants","isText","label","m","exec","deburr","i","some","r","e","createDeco","empty","allowInReadOnly","focusAfterExecution","init","apply","decorationSet","getMeta","docChanged","mapping","getState","observable","CARD_MARGIN","sharedVars","css","StyledText","Text","Preview","Link","as","Title","Info","Description","Thumbnail","img","Label","weight","backgroundSecondary","getTextColor","CardContent","div","Card","fadeOut","transparentize","menuBackground","HoverPreviewDocument","_HoverPreviewDocument","url","id","summary","lastActivityByViewer","ErrorBoundary","showTitle","reloadOnChunkMissing","React.Suspense","Suspense","fallback","Editor","extensions","richExtensions","defaultValue","embedsDisabled","IssueStatusIcon","rest","Icon","BaseIcon","status","viewBox","height","fill","d","HoverPreviewIssue","_HoverPreviewIssue","description","author","labels","createdAt","authorName","href","target","rel","align","Avatar","avatarUrl","Trans","Time","dateTime","addSuffix","wrap","HoverPreviewLink","_HoverPreviewLink","thumbnailUrl","HoverPreviewMention","_HoverPreviewMention","lastActive","email","model","initial","AvatarSize","XLarge","justify","PullRequestIcon","HoverPreviewPullRequest","_HoverPreviewPullRequest","HoverPreviewDesktop","data","dataLoading","isVisible","setVisible","timerClose","cardRef","cardLeft","cardTop","pointerLeft","pointerTop","pointerDir","useHoverPosition","setCardLeft","setCardTop","setPointerLeft","setPointerTop","setPointerDir","Direction","elem","getBoundingClientRect","card","cTop","bottom","scrollY","pTop","pDir","innerHeight","cLeft","pLeft","innerWidth","shiftBy","closePreview","stopCloseTimer","clearTimeout","startCloseTimer","useOnClickOutside","useEventListener","capture","removeEventListener","LoadingIndicator","Position","Animate","opacity","y","pointerEvents","animate","transitionEnd","UnfurlResourceType","Mention","Document","Issue","PR","Pointer","HoverPreview","useMobile","fixed","hoverPreview","menuBorder","HoverPreviews","activeLinkElement","delay","isHoverTarget","HTMLElement","contains","editable","hasFocus","hoveringTimeout","handleDOMEvents","mouseover","event","closest","async","getAttribute","dataset","documentId","parseDocumentSlug","location","pathname","client","post","startsWith","env","URL","err","mouseout","withUIExtensions","nodes","SmartText","PasteHandler","ClipboardTextSerializer","EmojiMenuExtension","MentionMenuExtension","HoverPreviewsExtension","PreventTab","Keys"],"mappings":"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"}