const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.w9hY2wRL.js","assets/index.mlCxaiYE.js","assets/useBoolean.4JQO1FDN.js","assets/Scene.tZk0YIWv.js","assets/InputSelectPermission.lb2lIKIy.js","assets/PopoverDisclosure.OO70kItq.js","assets/PlaceholderText.UNfhMHoO.js","assets/LoadingIndicatorBar.mGaD64ZX.js","assets/Switch.3DOmHSIs.js","assets/TeamLogo.qV1feKYB.js","assets/useCurrentUser.zlImhYTS.js","assets/Badge.sHfYRIgC.js","assets/Item.dGEOVRdT.js","assets/Time.rp9cc_zo.js","assets/index.esm.XsAbwjVB.js","assets/useCurrentTeam.fRZpnoZU.js","assets/usePolicy.wYF8wJNp.js","assets/SharedLayoutContext.2BBc39h7.js","assets/index.4lU6ZntV.js","assets/EmojiPanel.TJcM4M0j.js","assets/Emoji.r_ABO2XC.js","assets/PopoverButton.AWtPNgE3.js"])))=>i.map(i=>d[i]);
import{r as e,g8 as t,ca as n,g9 as o,ga as i,eZ as r,eY as a,eX as s,n as c,aI as l,j as d,bS as u,F as p,d as h,z as m,P as f,h as b,V as g,bs as v,v as x,g2 as y,c8 as w,c7 as k,Q as $,s as _,gb as C,eP as I,g3 as S,D as M,aq as D,e as P,u as z,a as E,k as T,H as R,E as L,am as A,B as j,C as N,ah as O,fg as B,aC as H,aD as F,M as W,t as U,av as V,N as q,o as K,bQ as G,bM as Z,bc as X,bb as Y,ft as Q,bN as J,cJ as ee,bP as te,bd as ne,aF as oe,aH as ie,X as re,aX as ae,L as se,T as ce,c5 as le,aP as de,bn as ue,a0 as pe,a1 as he,b as me,aY as fe,gc as be,fQ as ge,aM as ve,gd as xe,ge as ye,fM as we,az as ke,a2 as $e,ea as _e,an as Ce,gf as Ie,gg as Se,i as Me,gh as De,ee as Pe,bq as ze,gi as Ee,gj as Te,as as Re,at as Le,g as Ae,_ as je,b$ as Ne,c0 as Oe,gk as Be,gl as He,ej as Fe,gm as We,c2 as Ue,ek as Ve,bE as qe,cA as Ke,de as Ge,d8 as Ze,dd as Xe,c$ as Ye,gn as Qe,e0 as Je,bZ as et,aN as tt,co as nt,ci as ot,cp as it,go as rt,a4 as at,c as st,f$ as ct,al as lt,gp as dt,b2 as ut,gq as pt,d2 as ht,Z as mt,d4 as ft,d9 as bt,gr as gt,gs as vt,gt as xt,eU as yt,ef as wt,gu as kt,b6 as $t,bv as _t,bR as Ct,gv as It,a8 as St,gw as Mt,gx as Dt,bm as Pt,bj as zt,gy as Et,d_ as Tt,db as Rt,ff as Lt,gz as At,da as jt,eK as Nt,en as Ot,gA as Bt,cZ as Ht,A as Ft,gB as Wt,bK as Ut,aj as Vt,ec as qt,ak as Kt,aG as Gt,ag as Zt,aB as Xt,bi as Yt,I as Qt,cz as Jt,bB as en,bf as tn,gC as nn,c_ as on,Y as rn,ae as an,ad as sn,gD as cn,dD as ln,bl as dn,gE as un,a_ as pn,bT as hn,cd as mn,gF as fn,cX as bn,cx as gn,bk as vn,gG as xn,aR as yn,gH as wn,U as kn,gI as $n,a6 as _n,cW as Cn,a7 as In,cn as Sn,cm as Mn,dW as Dn,f8 as Pn,gJ as zn,f1 as En,gK as Tn,gL as Rn,ai as Ln,b4 as An,O as jn,gM as Nn,dh as On,g0 as Bn,cT as Hn,gN as Fn,ar as Wn,gO as Un,b9 as Vn,x as qn,p as Kn,eM as Gn,gP as Zn,ao as Xn,W as Yn,eD as Qn,eO as Jn,aQ as eo,fX as to,fi as no,dU as oo}from"./index.mlCxaiYE.js";import{P as io,r as ro}from"./PlaceholderText.UNfhMHoO.js";import{S as ao}from"./Scene.tZk0YIWv.js";import{a as so}from"./LoadingIndicatorBar.mGaD64ZX.js";import{u as co,P as lo,S as uo,C as po}from"./Switch.3DOmHSIs.js";import{h as ho,d as mo,i as fo,j as bo,k as go,C as vo,l as xo,M as yo,e as wo,S as ko,a as $o,m as _o,I as Co,g as Io}from"./InputSelectPermission.lb2lIKIy.js";import{a as So,A as Mo,T as Do}from"./TeamLogo.qV1feKYB.js";import{u as Po}from"./useCurrentUser.zlImhYTS.js";import{P as zo,a as Eo,A as To,t as Ro,i as Lo}from"./Badge.sHfYRIgC.js";import{e as Ao,C as jo,L as No}from"./Item.dGEOVRdT.js";import{T as Oo}from"./Time.rp9cc_zo.js";import{e as Bo,u as Ho,P as Fo}from"./PopoverDisclosure.OO70kItq.js";import{u as Wo,C as Uo}from"./index.esm.XsAbwjVB.js";import{u as Vo}from"./useBoolean.4JQO1FDN.js";import{u as qo}from"./useCurrentTeam.fRZpnoZU.js";import{u as Ko}from"./usePolicy.wYF8wJNp.js";import{a0 as Go,M as Zo,o as Xo,ac as Yo,a4 as Qo,B as Jo,l as ei,i as ti,ad as ni,J as oi,Q as ii,T as ri,ae as ai,q as si,C as ci,h as li,af as di,O as ui,R as pi,I as hi,u as mi,S as fi,y as bi}from"./SharedLayoutContext.2BBc39h7.js";var gi=Object.keys(o),vi=gi.length;var xi=e.createContext({});var yi=e.createContext(null),wi=Go?e.useLayoutEffect:e.useEffect;function useVisualElement(o,i,r,a){var s=e.useContext(Zo),c=e.useContext(t),l=function useVisualElementContext(){return e.useContext(xi).visualElement}(),d=e.useContext(Xo),u=function useLayoutId(t){var n=t.layoutId,o=e.useContext(yi);return o&&void 0!==n?o+"-"+n:n}(r),p=e.useRef(void 0);a||(a=c.renderer),!p.current&&a&&(p.current=a(o,{visualState:i,parent:l,props:n(n({},r),{layoutId:u}),presenceId:null==d?void 0:d.id,blockInitialAnimation:!1===(null==d?void 0:d.initial)}));var h=p.current;return wi((function(){h&&(h.setProps(n(n(n({},s),r),{layoutId:u})),h.isPresent=Yo(d),h.isPresenceRoot=!l||l.presenceId!==(null==d?void 0:d.id),h.syncRender())})),e.useEffect((function(){var e;h&&(null===(e=h.animationState)||void 0===e||e.animateChanges())})),wi((function(){return function(){return null==h?void 0:h.notifyUnmount()}}),[]),h}function useCreateMotionContext(t,n){var o=function getCurrentTreeVariants(e,t){if(Jo(e)){var n=e.initial,o=e.animate;return{initial:!1===n||ei(n)?n:void 0,animate:ei(o)?o:void 0}}return!1!==e.inherit?t:{}}(t,e.useContext(xi)),i=o.initial,r=o.animate;return e.useMemo((function(){return{initial:i,animate:r}}),n?[variantLabelsAsDependency(i),variantLabelsAsDependency(r)]:[])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}function createMotionComponent(r){var a=r.preloadedFeatures,s=r.createVisualElement,c=r.useRender,l=r.useVisualState,d=r.Component;return a&&i(a),e.forwardRef((function MotionComponent(i,r){var a=e.useContext(Zo).isStatic,u=null,p=useCreateMotionContext(i,a),h=l(i,a);return!a&&Go&&(p.visualElement=useVisualElement(d,h,i,s),u=function useFeatures(i,r,a){var s=[];if(e.useContext(t),!r)return null;for(var c=0;c<vi;c++){var l=gi[c],d=o[l],u=d.isEnabled,p=d.Component;u(i)&&p&&s.push(e.createElement(p,n({key:l},i,{visualElement:r})))}return s}(i,p.visualElement)),e.createElement(e.Fragment,null,e.createElement(xi.Provider,{value:p},c(d,i,function useMotionRef(t,n,o){return e.useCallback((function(e){var i;e&&(null===(i=t.mount)||void 0===i||i.call(t,e)),n&&(e?n.mount(e):n.unmount()),o&&("function"==typeof o?o(e):Qo(o)&&(o.current=e))}),[n])}(h,p.visualElement,r),h,a)),u)}))}var createHtmlRenderState=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function copyRawValuesOnly(e,t,n){for(var o in t)ti(t[o])||ni(o,n)||(e[o]=t[o])}function useStyle(t,o,i){var r={};return copyRawValuesOnly(r,t.style||{},t),Object.assign(r,function useInitialMotionValues(t,o,i){var r=t.transformTemplate;return e.useMemo((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};oi(e,o,void 0,void 0,{enableHardwareAcceleration:!i},r);var t=e.style;return n(n({},e.vars),t)}),[o])}(t,o,i)),t.transformValues&&(r=t.transformValues(r)),r}function useHTMLProps(e,t,n){var o={},i=useStyle(e,t,n);return Boolean(e.drag)&&(o.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),o.style=i,o}var ki=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","_layoutResetTransform","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function isValidMotionProp(e){return ki.has(e)}var shouldForward=function(e){return!isValidMotionProp(e)};try{var $i=require("@emotion/is-prop-valid").default;shouldForward=function(e){return e.startsWith("on")?!isValidMotionProp(e):$i(e)}}catch(Au){}var createSvgRenderState=function(){return n(n({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function useSVGProps(t,o){var i=e.useMemo((function(){var e=createSvgRenderState();return ii(e,o,void 0,void 0,{enableHardwareAcceleration:!1},t.transformTemplate),n(n({},e.attrs),{style:n({},e.style)})}),[o]);if(t.style){var r={};copyRawValuesOnly(r,t.style,t),i.style=n(n({},r),i.style)}return i}function createUseRender(t){void 0===t&&(t=!1);return function(o,i,r,a,s){var c=a.latestValues,l=(ri(o)?useSVGProps:useHTMLProps)(i,c,s),d=function filterProps(e,t,n){var o={};for(var i in e)(shouldForward(i)||!0===n&&isValidMotionProp(i)||!t&&!isValidMotionProp(i))&&(o[i]=e[i]);return o}(i,"string"==typeof o,t),u=n(n(n({},d),l),{ref:r});return e.createElement(o,u)}}function makeState(e,t,n,o){var i=e.scrapeMotionValuesFromProps,r=e.createRenderState,a=e.onMount,s={latestValues:makeLatestValues(t,n,o,i),renderState:r()};return a&&(s.mount=function(e){return a(t,e,s)}),s}var makeUseVisualState=function(t){return function(n,o){var i=e.useContext(xi),r=e.useContext(Xo);return o?makeState(t,n,i,r):si((function(){return makeState(t,n,i,r)}))}};function makeLatestValues(e,t,n,o){var i,a,s={},c=!1===(null==n?void 0:n.initial),l=o(e);for(var d in l)s[d]=(i=l[d],a=void 0,a=ti(i)?i.get():i,ai(a)?a.toValue():a);var u=e.initial,p=e.animate,h=Jo(e),m=ci(e);t&&m&&!h&&!1!==e.inherit&&(null!=u||(u=t.initial),null!=p||(p=t.animate));var f=c||!1===u?p:u;f&&"boolean"!=typeof f&&!li(f)&&(Array.isArray(f)?f:[f]).forEach((function(t){var n=di(e,t);if(n){var o=n.transitionEnd;n.transition;var i=r(n,["transitionEnd","transition"]);for(var a in i)s[a]=i[a];for(var a in o)s[a]=o[a]}}));return s}var _i={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:ui,createRenderState:createSvgRenderState,onMount:function(e,t,n){var o=n.renderState,i=n.latestValues;try{o.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(r){o.dimensions={x:0,y:0,width:0,height:0}}(function isPath(e){return"path"===e.tagName})(t)&&(o.totalPathLength=t.getTotalLength()),ii(o,i,void 0,void 0,{enableHardwareAcceleration:!1},e.transformTemplate),pi(t,o)}})};var Ci={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:hi,createRenderState:createHtmlRenderState})};var Ii=function createMotionProxy(e){function custom(t,n){return void 0===n&&(n={}),createMotionComponent(e(t,n))}var t=new Map;return new Proxy(custom,{get:function(e,n){return t.has(n)||t.set(n,custom(n)),t.get(n)}})}((function createDomMotionConfig(e,t,o,i){var r=t.forwardMotionProps,a=void 0!==r&&r,s=ri(e)?_i:Ci;return n(n({},s),{preloadedFeatures:o,useRender:createUseRender(a),createVisualElement:i,Component:e})}));var Si=0;function getPresenceId(){var e=Si;return Si++,e}var PresenceChild=function(t){var n=t.children,o=t.initial,i=t.isPresent,r=t.onExitComplete,a=t.custom,s=t.presenceAffectsLayout,c=si(newChildrenMap),l=si(getPresenceId),d=e.useMemo((function(){return{id:l,initial:o,isPresent:i,custom:a,onExitComplete:function(e){c.set(e,!0);var t=!0;c.forEach((function(e){e||(t=!1)})),t&&(null==r||r())},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}}),s?void 0:[i]);return e.useMemo((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[i]),e.useEffect((function(){!i&&!c.size&&(null==r||r())}),[i]),e.createElement(Xo.Provider,{value:d},n)};function newChildrenMap(){return new Map}function getChildKey(e){return e.key||""}var AnimatePresence=function(t){var n=t.children,o=t.custom,i=t.initial,r=void 0===i||i,c=t.onExitComplete,l=t.exitBeforeEnter,d=t.presenceAffectsLayout,u=void 0===d||d,p=function useForceUpdate(){var t=e.useRef(!1),n=a(e.useState(0),2),o=n[0],i=n[1];return mi((function(){return t.current=!0})),e.useCallback((function(){!t.current&&i(o+1)}),[o])}(),h=e.useContext(fi);bi(h)&&(p=h.forceUpdate);var m=e.useRef(!0),f=function onlyElements(t){var n=[];return e.Children.forEach(t,(function(t){e.isValidElement(t)&&n.push(t)})),n}(n),b=e.useRef(f),g=e.useRef(new Map).current,v=e.useRef(new Set).current;if(function updateChildLookup(e,t){e.forEach((function(e){var n=getChildKey(e);t.set(n,e)}))}(f,g),m.current)return m.current=!1,e.createElement(e.Fragment,null,f.map((function(t){return e.createElement(PresenceChild,{key:getChildKey(t),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:u},t)})));for(var x=s([],a(f)),y=b.current.map(getChildKey),w=f.map(getChildKey),k=y.length,$=0;$<k;$++){var _=y[$];-1===w.indexOf(_)?v.add(_):v.delete(_)}return l&&v.size&&(x=[]),v.forEach((function(t){if(-1===w.indexOf(t)){var n=g.get(t);if(n){var i=y.indexOf(t);x.splice(i,0,e.createElement(PresenceChild,{key:getChildKey(n),isPresent:!1,onExitComplete:function(){g.delete(t),v.delete(t);var e=b.current.findIndex((function(e){return e.key===t}));b.current.splice(e,1),v.size||(b.current=f,p(),c&&c())},custom:o,presenceAffectsLayout:u},n))}}})),x=x.map((function(t){var n=t.key;return v.has(n)?t:e.createElement(PresenceChild,{key:getChildKey(t),isPresent:!0,presenceAffectsLayout:u},t)})),b.current=x,e.createElement(e.Fragment,null,v.size?x:x.map((function(t){return e.cloneElement(t)})))};function PlaceholderDocument({includeTitle:e,delay:t=500}){const n=h(m,{children:[d(io,{delay:.2}),d(io,{delay:.4}),d(io,{delay:.6})]});return d(u,!1===e?{delay:t,children:d(l,{children:d(p,{column:!0,auto:!0,children:n})})}:{delay:t,children:d(Mi,{children:d(l,{children:h(p,{column:!0,auto:!0,children:[d(io,{height:34,maxWidth:70}),d(io,{delay:.2,maxWidth:40}),d("br",{}),n]})})})})}const Mi=c(l).withConfig({componentId:"sc-1jhdjoz-0"})(["display:block;margin:6vh 0;padding:12px 0;"]),CollectionSection=({t:e})=>e("Collection"),CollectionsSection=({t:e})=>e("Collections"),ActiveCollectionSection=({t:e,stores:t})=>{const n=t.collections.active;return`${e("Collection")} · ${n?.name}`};ActiveCollectionSection.priority=.8;const DeveloperSection=({t:e})=>e("Debug"),DocumentSection=({t:e})=>e("Document"),DocumentsSection=({t:e})=>e("Documents"),ActiveDocumentSection=({t:e,stores:t})=>{const n=t.documents.active;return`${e("Document")} · ${n?.titleWithDefault}`};ActiveDocumentSection.priority=.9;const RecentSection=({t:e})=>e("Recently viewed");RecentSection.priority=1;const RevisionSection=({t:e})=>e("Revision"),SettingsSection=({t:e})=>e("Settings"),NavigationSection=({t:e})=>e("Navigation"),NotificationSection=({t:e})=>e("Notification"),UserSection=({t:e})=>e("People");UserSection.priority=.5;const TeamSection=({t:e})=>e("Workspace"),RecentSearchesSection=({t:e})=>e("Recent searches");RecentSearchesSection.priority=-.1;const Di=f({name:({t:e})=>e("Home"),analyticsName:"Navigate to home",section:NavigationSection,shortcut:["d"],icon:d(b.HomeIcon,{}),perform:()=>g.push(v()),visible:({location:e})=>e.pathname!==v()}),navigateToRecentSearchQuery=e=>f({section:RecentSearchesSection,name:e.query,analyticsName:"Navigate to recent search query",icon:d(b.SearchIcon,{}),perform:()=>g.push(x({query:e.query}))}),Pi=f({name:({t:e})=>e("Drafts"),analyticsName:"Navigate to drafts",section:NavigationSection,icon:d(b.DraftsIcon,{}),perform:()=>g.push(y()),visible:({location:e})=>e.pathname!==y()}),zi=f({name:({t:e})=>e("Search"),analyticsName:"Navigate to search",section:NavigationSection,icon:d(b.SearchIcon,{}),perform:()=>g.push(x()),visible:({location:e})=>e.pathname!==x()}),Ei=f({name:({t:e})=>e("Archive"),analyticsName:"Navigate to archive",section:NavigationSection,shortcut:["g","a"],icon:d(b.ArchiveIcon,{}),perform:()=>g.push(w()),visible:({location:e})=>e.pathname!==w()}),Ti=f({name:({t:e})=>e("Trash"),analyticsName:"Navigate to trash",section:NavigationSection,icon:d(b.TrashIcon,{}),perform:()=>g.push(k()),visible:({location:e})=>e.pathname!==k()});f({name:({t:e})=>e("Settings"),analyticsName:"Navigate to settings",section:NavigationSection,shortcut:["g","s"],icon:d(b.SettingsIcon,{}),visible:()=>$.policies.abilities($.auth.team?.id||"").update,perform:()=>g.push(_())});const Ri=f({name:({t:e})=>e("Settings"),analyticsName:"Navigate to workspace settings",section:NavigationSection,icon:d(b.SettingsIcon,{}),visible:()=>$.policies.abilities($.auth.team?.id||"").update,perform:()=>g.push(_("details"))}),Li=f({name:({t:e})=>e("Profile"),analyticsName:"Navigate to profile settings",section:NavigationSection,iconInContextMenu:!1,icon:d(b.ProfileIcon,{}),perform:()=>g.push(_())}),Ai=f({name:({t:e})=>e("Templates"),analyticsName:"Navigate to template settings",section:NavigationSection,iconInContextMenu:!1,icon:d(b.ShapesIcon,{}),perform:()=>g.push(_("templates"))}),ji=f({name:({t:e})=>e("Notifications"),analyticsName:"Navigate to notification settings",section:NavigationSection,iconInContextMenu:!1,icon:d(b.EmailIcon,{}),perform:()=>g.push(_("notifications"))}),Ni=f({name:({t:e})=>e("Preferences"),analyticsName:"Navigate to account preferences",section:NavigationSection,iconInContextMenu:!1,icon:d(b.SettingsIcon,{}),perform:()=>g.push(_("preferences"))}),Oi=f({name:({t:e})=>e("Documentation"),analyticsName:"Open documentation",section:NavigationSection,iconInContextMenu:!1,icon:d(b.OpenIcon,{}),perform:()=>window.open(C.guide)}),Bi=f({name:({t:e})=>e("API documentation"),analyticsName:"Open API documentation",section:NavigationSection,iconInContextMenu:!1,icon:d(b.OpenIcon,{}),perform:()=>window.open(C.developers)}),Hi=f({name:({t:e})=>e("Toggle sidebar"),analyticsName:"Toggle sidebar",keywords:"hide show navigation",section:NavigationSection,perform:()=>$.ui.toggleCollapsedSidebar()}),Fi=f({name:({t:e})=>e("Send us feedback"),analyticsName:"Open feedback",section:NavigationSection,iconInContextMenu:!1,icon:d(b.EmailIcon,{}),perform:()=>window.open(C.contact)}),Wi=f({name:({t:e})=>e("Report a bug"),analyticsName:"Open bug report",section:NavigationSection,perform:()=>window.open(C.github)}),Ui=f({name:({t:e})=>e("Changelog"),analyticsName:"Open changelog",section:NavigationSection,iconInContextMenu:!1,icon:d(b.OpenIcon,{}),perform:()=>window.open(C.changelog)}),Vi=f({name:({t:e})=>e("Keyboard shortcuts"),analyticsName:"Open keyboard shortcuts",section:NavigationSection,shortcut:["?"],iconInContextMenu:!1,icon:d(b.KeyboardIcon,{}),perform:({t:e})=>{$.dialogs.openGuide({title:e("Keyboard shortcuts"),content:d(I,{})})}}),qi=f({name:({t:e})=>e("Download {{ platform }} app",{platform:S()?"macOS":"Windows"}),analyticsName:"Download app",section:NavigationSection,iconInContextMenu:!1,icon:d(b.BrowserIcon,{}),visible:()=>!M.isElectron()&&S()&&D,perform:()=>{window.open("https://desktop.getoutline.com")}}),Ki=f({name:({t:e})=>e("Log out"),analyticsName:"Log out",section:NavigationSection,icon:d(b.LogoutIcon,{}),perform:async()=>{await $.auth.logout(),P.OIDC_LOGOUT_URI&&setTimeout((()=>{window.location.replace(P.OIDC_LOGOUT_URI)}),200)}}),Gi=[Di,Pi,Ei,Ti,qi,Oi,Bi,Fi,Wi,Ui,Vi,Hi,Ki];function useActionContext(e){const t=z(),{t:n}=E(),o=T();return{isContextMenu:!1,isCommandBar:!1,isButton:!1,activeCollectionId:t.ui.activeCollectionId??void 0,activeDocumentId:t.ui.activeDocumentId,currentUserId:t.auth.user?.id,currentTeamId:t.auth.team?.id,...e,location:o,stores:t,t:n}}const Error404=()=>{const{t:e}=E(),t=useActionContext();return h(ao,{title:e("Not found"),children:[d(R,{children:e("Not found")}),h(p,{gap:20,style:{maxWidth:500},column:!0,children:[d(L,{size:"large",children:d(A,{children:"The page you’re looking for cannot be found. It might have been deleted or the link is incorrect."})}),h(p,{gap:8,children:[d(j,{action:Di,context:t,hideIcon:!0,children:e("Home")}),h(j,{action:zi,context:t,neutral:!0,children:[e("Search"),"…"]})]})]})]})},Zi="skip-nav";function SkipNavContent(){return d("div",{id:Zi})}function SkipNavLink(){return d(Xi,{href:`#${Zi}`,children:"Skip navigation"})}const Xi=c.a.withConfig({componentId:"sc-nnduan-0"})(["border:0;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;z-index:1;&:focus{padding:1rem;position:fixed;top:12px;left:12px;background:",";color:",";outline-color:",";z-index:",";width:auto;height:auto;clip:auto;}"],N("background"),N("text"),N("accent"),O.popover),Yi=class _Second{};Yi.ms=1e3;let Qi=Yi;const Ji=class _Minute{};Ji.ms=60*Qi.ms,Ji.seconds=60;let er=Ji;const tr=class _Hour{};tr.ms=60*er.ms,tr.seconds=60*er.seconds,tr.minutes=60;let nr=tr;const or=class _Day{};or.ms=24*nr.ms,or.seconds=24*nr.seconds,or.minutes=24*nr.minutes;const ir=["click","mousemove","keydown","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","focus"];function useIdle(t=3*er.ms,n=ir){const o=B(),[i,r]=e.useState(!1),a=e.useRef(),s=e.useCallback((()=>{a.current&&clearTimeout(a.current),a.current=setTimeout((()=>{o()&&r(!0)}),t)}),[o,t]);return e.useEffect((()=>{const e=H((()=>{o()&&(r(!1),s())}),1e3);return n.forEach((t=>window.addEventListener(t,e))),()=>{n.forEach((t=>window.removeEventListener(t,e)))}}),[n,o,s]),i}function usePageVisibility(){const[t,n]=e.useState(!0);return F("visibilitychange",(()=>n(!document.hidden)),document),t}let rr=!1;function useAutoRefresh(){const[t,n]=e.useState(0),o=usePageVisibility(),i=useIdle(15*er.ms);!function useInterval(t,n){const o=e.useRef();e.useEffect((()=>{o.current=t}),[t]),e.useEffect((()=>{if(null!==n){const e=setInterval((function tick(){o.current?.()}),n);return()=>clearInterval(e)}}),[n])}((()=>{if(n((e=>e+1)),t>=1440){if(o)return void W.debug("lifecycle","Skipping reload due to app visible");if(!i)return void W.debug("lifecycle","Skipping reload due to user activity");if(rr)return void W.warn("Attempted to reload twice");W.debug("lifecycle","Auto-reloading app…"),window.location.reload(),rr=!0}}),er.ms)}const ar=e.forwardRef((function Layout_({title:e,children:t,sidebar:n,sidebarRight:o},i){const{ui:r}=z(),a=!n||r.sidebarIsClosed;return useAutoRefresh(),co(".",(e=>{U(e)&&r.toggleCollapsedSidebar()})),h(sr,{column:!0,auto:!0,ref:i,children:[d(V,{children:d("title",{children:e||P.APP_NAME})}),d(SkipNavLink,{}),r.progressBarVisible&&d(so,{}),h(sr,{auto:!0,children:[d(ho,{children:n}),d(SkipNavContent,{}),d(cr,{auto:!0,justify:"center",$isResizing:r.sidebarIsResizing,$sidebarCollapsed:a,$hasSidebar:!!n,style:a?void 0:{marginLeft:`${r.sidebarWidth}px`},children:t}),o]})]})})),sr=c(p).withConfig({componentId:"sc-1hw3uqy-0"})(["background:",";position:relative;width:100%;min-height:100%;"],N("background")),cr=c(p).withConfig({componentId:"sc-1hw3uqy-1"})(["margin:0;transition:",";@media print{margin:0 !important;}"," ",";"],(e=>e.$isResizing?"none":"margin-left 100ms ease-out"),q("mobile","tablet")`
    margin-left: 0 !important;
  `,q("tablet")`
    ${e=>e.$hasSidebar&&e.$sidebarCollapsed&&`margin-left: ${e.theme.sidebarCollapsedWidth}px;`}
  `),lr=K(ar);function RegisterKeyDown({trigger:e,handler:t,options:n}){return co(e,t,n),null}var dr=function noop2(){},ur=ne({as:"button",memo:!0,useHook:Y({name:"MenuButton",compose:Bo,keys:fo,propsAreEqual:function propsAreEqual(e,t){e.unstable_popoverStyles,e.unstable_arrowStyles,e.currentId,e.unstable_moves;var n=Z(e,["unstable_popoverStyles","unstable_arrowStyles","currentId","unstable_moves"]);t.unstable_popoverStyles,t.unstable_arrowStyles,t.currentId,t.unstable_moves;var o=Z(t,["unstable_popoverStyles","unstable_arrowStyles","currentId","unstable_moves"]);return Bo.unstable_propsAreEqual(n,o)},useProps:function useProps(t,n){var o=n.ref,i=n.onClick,r=n.onKeyDown,a=n.onFocus,s=n.onMouseEnter,c=n.onMouseDown,l=Z(n,["ref","onClick","onKeyDown","onFocus","onMouseEnter","onMouseDown"]),d=e.useContext(Q),u=e.useRef(null),p=e.useRef(!1),h=t.placement.split("-")[0],m=!!d,f="menubar"===(null==d?void 0:d.role),b=t.disabled||l["aria-disabled"],g=J(i),v=J(r),x=J(a),y=J(s),w=J(c),k=e.useCallback((function(e){var n,o;if("Escape"===e.key)null===(o=t.hide)||void 0===o||o.call(t);else if(!b){var i,r=t.first&&function(){return setTimeout(t.first)},a=t.last&&function(){return setTimeout(t.last)},s={Enter:r," ":r,ArrowUp:("top"===h||"bottom"===h)&&a,ArrowRight:"right"===h&&r,ArrowDown:("bottom"===h||"top"===h)&&r,ArrowLeft:"left"===h&&r}[e.key];if(s)return e.preventDefault(),e.stopPropagation(),null===(i=t.show)||void 0===i||i.call(t),void s()}null===(n=v.current)||void 0===n||n.call(v,e)}),[b,t.hide,t.first,t.last,h,t.show]),$=e.useCallback((function(e){var n;if(null===(n=y.current)||void 0===n||n.call(y,e),!e.defaultPrevented&&d){var o=e.currentTarget;f?bo(d.children)&&o.focus():setTimeout((function(){var e;ee(o)&&(null===(e=t.show)||void 0===e||e.call(t))}),200)}}),[d,f,t.show]),_=e.useCallback((function(e){var t;p.current=!0,null===(t=w.current)||void 0===t||t.call(w,e)}),[]),C=e.useCallback((function(e){var n,o;(null===(n=x.current)||void 0===n||n.call(x,e),e.defaultPrevented)||(b||f&&!p.current&&(null===(o=t.show)||void 0===o||o.call(t)))}),[f,b,t.show]),I=e.useCallback((function(e){var n;if(null===(n=g.current)||void 0===n||n.call(g,e),!e.defaultPrevented){var o,i,r;if(m&&!f)null===(o=t.show)||void 0===o||o.call(t);else if(null===(i=t.toggle)||void 0===i||i.call(t),p.current&&!f&&!t.visible)null===(r=t.move)||void 0===r||r.call(t,null);p.current=!1}}),[m,f,t.show,t.toggle,t.visible,t.move]);return X({ref:te(u,o),"aria-haspopup":"menu",onKeyDown:k,onMouseEnter:$,onMouseDown:_,onFocus:C,onClick:I},l)},useComposeOptions:function useComposeOptions(e){return X(X({},e),{},{toggle:dr})}})});function useMenuState(t){void 0===t&&(t={});var n=e.useContext(Q),o=G(t),i=o.orientation,r=void 0===i?"vertical":i,a=o.gutter,s=void 0===a?0:a,c=Z(o,["orientation","gutter"]),l=c.placement||(n&&"vertical"===n.orientation?"right-start":"bottom-start"),d=function useMenuBarState(t){void 0===t&&(t={});var n=G(t),o=n.orientation,i=void 0===o?"horizontal":o,r=n.unstable_values,a=void 0===r?{}:r,s=Z(n,["orientation","unstable_values"]),c=e.useState(a),l=c[0],d=c[1],u=mo(X(X({},s),{},{orientation:i}));return X(X({},u),{},{unstable_values:l,unstable_setValue:e.useCallback((function(e,t){d((function(n){var o;return X(X({},n),{},((o={})[e]="function"==typeof t?t(n):t,o))}))}),[])})}(X(X({},c),{},{orientation:r})),u=Ho(X(X({},c),{},{placement:l,gutter:s}));return e.useEffect((function(){u.visible||d.reset()}),[u.visible,d.reset]),X(X({},d),u)}const pr=e.forwardRef((function ResizingHeightContainer_(t,n){const{hideOverflow:o,children:i,config:r={transition:{duration:.1,ease:"easeInOut"}},style:a}=t,s=e.useRef(null),{height:c}=oe(s);return d(Ii.div,{animate:{...r,height:Math.round(c)},style:{...a,overflow:o?"hidden":"inherit",position:"relative"},children:d("div",{ref:ie([s,n]),children:i})})})),hr=c.h3.withConfig({componentId:"sc-13i4p00-0"})(["font-size:11px;font-weight:600;text-transform:uppercase;color:",";letter-spacing:0.04em;margin:1em 12px 0.5em;"],N("sidebarText"));function MouseSafeArea(t){const{x:n=0,y:o=0,height:i=0,width:r=0}=t.parentRef.current?.getBoundingClientRect()||{},[a,s]=(()=>{const t=B(),[n,o]=e.useState([0,0]),i=e.useMemo((()=>H((e=>{t()&&o([e.clientX,e.clientY])}),200)),[t]);return F("mousemove",i),n})(),c={x:n,y:o,h:i,w:r,mouseX:a,mouseY:s};return d("div",{style:{position:"absolute",top:0,right:getRight(c),left:getLeft(c),height:i,width:getWidth(c),clipPath:getClipPath(c)}})}const getLeft=({x:e,mouseX:t})=>t>e?void 0:-Math.max(e-t,10)+"px",getRight=({x:e,w:t,mouseX:n})=>n>e?-Math.max(n-(e+t),10)+"px":void 0,getWidth=({x:e,w:t,mouseX:n})=>n>e?Math.max(n-(e+t),10)+"px":Math.max(e-n,10)+"px",getClipPath=({x:e,y:t,h:n,mouseX:o,mouseY:i})=>o>e?`polygon(0% 0%, 0% 100%, 100% ${100*(i-t)/n-10}%, 100% ${100*(i-t)/n+5}%)`:`polygon(100% 0%, 0% ${100*(i-t)/n-10}%, 0% ${100*(i-t)/n+5}%, 100% 100%)`,mr=c(b.ExpandedIcon).withConfig({componentId:"sc-1c4gs6k-0"})(["transform:rotate(270deg);position:absolute;right:8px;"]),fr=e.forwardRef((function _Template({templateItems:e,title:t,parentMenuState:n,...o},i){const{t:r}=E(),a=re(),s=useMenuState();return h(m,{children:[d(ur,{ref:i,...s,...o,children:e=>h(go,{disclosure:!0,...e,children:[t," ",d(mr,{color:a.textTertiary})]})}),h(vo,{...s,"aria-label":r("Submenu"),onClick:n.hide,parentMenuState:n,children:[d(MouseSafeArea,{parentRef:s.unstable_popoverRef}),d(Template,{...s,items:e})]})]})}));function Template({items:e,actions:t,context:n,showIcons:o,...i}){const r=useActionContext({isContextMenu:!0}),a=function filterTemplateItems(e){return e.filter((e=>!1!==e.visible)).reduce(((e,t)=>"separator"===t.type&&"separator"===e[e.length-1]?.type?e:[...e,t]),[]).filter(((e,t,n)=>"separator"!==e.type||0!==t&&t!==n.length-1))}(t?t.map((e=>"separator"===e.type||"heading"===e.type?e:ae(e,r))):e||[]),s=a.find((e=>"separator"!==e.type&&"heading"!==e.type&&!!e.icon));return d(m,{children:a.map(((e,t)=>{if(s&&"separator"!==e.type&&"heading"!==e.type&&!1!==o&&(e.icon=e.icon||d(xo,{"aria-hidden":!0})),"route"===e.type)return d(yo,{as:se,id:`${e.title}-${t}`,to:e.to,disabled:e.disabled,selected:e.selected,icon:!1!==o?e.icon:void 0,...i,children:e.title},t);if("link"===e.type)return d(yo,{id:`${e.title}-${t}`,href:e.href,disabled:e.disabled,selected:e.selected,level:e.level,target:e.href.startsWith("#")?void 0:"_blank",icon:!1!==o?e.icon:void 0,...i,children:e.title},t);if("button"===e.type){const n=d(yo,{as:"button",id:`${e.title}-${t}`,onClick:e.onClick,disabled:e.disabled,selected:e.selected,dangerous:e.dangerous,icon:!1!==o?e.icon:void 0,...i,children:e.title},t);return e.tooltip?d(ce,{content:e.tooltip,placement:"bottom",children:d("div",{children:n})}):d(m,{children:n})}if("submenu"===e.type)return d(wo,{as:fr,id:`${e.title}-${t}`,templateItems:e.items,parentMenuState:i,title:d(Title$3,{title:e.title,icon:!1!==o?e.icon:void 0}),...i},t);if("separator"===e.type)return d(ko,{},t);if("heading"===e.type)return d(hr,{children:e.title},t);return e}))})}function Title$3({title:e,icon:t}){return h(p,{align:"center",children:[t&&d(xo,{"aria-hidden":!0,children:t}),e]})}const br=e.memo(Template);function GroupAvatar({color:e,backgroundColor:t,size:n=So.Medium,className:o}){const i=re();return d(le,{color:e??i.text,size:n,className:o,children:d(b.GroupIcon,{color:t??i.background,size:.75*n})})}function separator(){return{type:"separator"}}const gr=f({name:({t:e})=>e("Dark"),analyticsName:"Change to dark theme",icon:d(b.MoonIcon,{}),iconInContextMenu:!1,keywords:"theme dark night",section:SettingsSection,selected:()=>"dark"===$.ui.theme,perform:()=>$.ui.setTheme(de.Dark)}),vr=f({name:({t:e})=>e("Light"),analyticsName:"Change to light theme",icon:d(b.SunIcon,{}),iconInContextMenu:!1,keywords:"theme light day",section:SettingsSection,selected:()=>"light"===$.ui.theme,perform:()=>$.ui.setTheme(de.Light)}),xr=f({name:({t:e})=>e("System"),analyticsName:"Change to system theme",icon:d(b.BrowserIcon,{}),iconInContextMenu:!1,keywords:"theme system default",section:SettingsSection,selected:()=>"system"===$.ui.theme,perform:()=>$.ui.setTheme(de.System)}),yr=f({name:({t:e,isContextMenu:t})=>e(t?"Appearance":"Change theme"),analyticsName:"Change theme",placeholder:({t:e})=>e("Change theme to"),icon:function _Icon(){return"light"===$.ui.resolvedTheme?d(b.SunIcon,{}):d(b.MoonIcon,{})},keywords:"appearance display",section:SettingsSection,children:[vr,gr,xr]}),wr=[yr],kr=K((({children:t})=>{const n=useMenuState({placement:"bottom-end",modal:!0}),{ui:o}=z(),{theme:i}=o,r=ue(i),{t:a}=E();e.useEffect((()=>{i!==r&&n.hide()}),[n,i,r]);const s=e.useMemo((()=>[Vi,Oi,Bi,{type:"separator"},Ui,Fi,Wi,yr,Li,Ni,{type:"separator"},Ki]),[]);return h(m,{children:[d(ur,{...n,children:t}),d(vo,{...n,"aria-label":a("Account"),children:d(br,{...n,items:void 0,actions:s})})]})})),$r=c.div.withConfig({componentId:"sc-glkm6c-0"})(["position:relative;"]),_r=c.div.withConfig({componentId:"sc-zco4jh-0"})(["position:absolute;width:8px;height:8px;border-radius:50%;background:",";top:0;right:0;"],N("accent")),Cr=K((()=>{const{notifications:e}=z(),t=e.approximateUnreadCount;return h($r,{style:{height:24},children:[d(b.SubscribeIcon,{}),t>0&&d(_r,{})]})})),Ir=f({name:({t:e})=>e("Mark notifications as read"),analyticsName:"Mark notifications as read",section:NotificationSection,icon:d(b.MarkAsReadIcon,{}),shortcut:["Shift+Escape"],perform:({stores:e})=>e.notifications.markAllAsRead(),visible:({stores:e})=>e.notifications.approximateUnreadCount>0}),Sr=f({name:({t:e})=>e("Archive all notifications"),analyticsName:"Mark notifications as archived",section:NotificationSection,icon:d(b.ArchiveIcon,{}),iconInContextMenu:!1,perform:({stores:e})=>e.notifications.markAllAsArchived(),visible:({stores:e})=>e.notifications.orderedData.length>0}),Mr=[Ir,Sr],NotificationMenu=()=>{const e=me.useRef(null),t=useMenuState(),n=useActionContext(),o=me.useMemo((()=>[ae(Sr,n),{type:"button",title:fe("Notification settings"),onClick:()=>be(ji,n)}]),[n]);return $o(e,(e=>{t.visible&&(e.stopPropagation(),e.preventDefault(),t.hide())}),{capture:!0}),h(m,{children:[d(ur,{...t,children:e=>d(Dr,{...e,children:d(b.MoreIcon,{})})}),d(vo,{...t,menuRef:e,"aria-label":fe("Notification"),children:d(br,{...t,items:o})})]})},Dr=c(pe).withConfig({componentId:"sc-1ay1wan-0"})(["color:",";&:",",&:active{color:",";background:",";}"],N("textSecondary"),he,N("text"),N("sidebarControlHoverBackground"));var Pr=xe,zr=ye,Er=we;const Tr=ve(ge((function(e,t){return Er(e)?Pr(e,zr(t,1,Er,!0)):[]})));ke(["from{opacity:0;}to{opacity:1;}"]);const Rr=ke(["0%{box-shadow:0 0 0 1px rgba(255,213,0,0.75)}50%{box-shadow:0 0 0 4px rgba(255,213,0,0.75)}100%{box-shadow:0 0 0 1px rgba(255,213,0,0.75)}"]),Lr=c.div.withConfig({componentId:"sc-1ggx691-0"})([""," "," "," "," "," ",""],(e=>$e(["flex-grow:",";justify-content:start;color:",";font-family:",";font-weight:",";font-size:1em;line-height:-0.011;width:100%;.mention{background:",";border-radius:8px;padding-top:1px;padding-bottom:1px;padding-left:4px;padding-right:6px;font-weight:500;font-size:0.9em;cursor:default;text-decoration:none !important;display:inline-flex;align-items:center;gap:4px;vertical-align:bottom;&:","{cursor:default;background:",';}&.mention-user::before{content:"@";}&.mention-document::before{content:"+";}}> div{background:transparent;}& *{box-sizing:content-box;}.ProseMirror{position:relative;outline:none;word-wrap:break-word;white-space:pre-wrap;white-space:break-spaces;padding:',";margin:",";& > .ProseMirror-yjs-cursor{display:none;}& > *{margin-top:.5em;margin-bottom:.5em;&:last-child{margin-bottom:0;}}& > :first-child,& > button:first-child + *{margin-top:0;}h1,h2,h3,h4,h5,h6{margin-top:1em;margin-bottom:0.25em;font-weight:600;cursor:text;& + p,& + .ProseMirror-widget + p{margin-top:0.25em;}&:not(.placeholder){&::before{display:none;font-family:",";color:",';font-size:13px;font-weight:500;line-height:0;margin-left:-24px;transition:opacity 150ms ease-in-out;opacity:0;width:24px;}&:dir(rtl)::before{margin-left:0;margin-right:-24px;}}&:hover,&:focus-within{.heading-actions{opacity:1;}}}h1{font-size:28px;}h2{font-size:22px;}h3{font-size:18px;}h4{font-size:16px;}h5{font-size:15px;}h6{font-size:15px;}.ProseMirror-yjs-selection{transition:background-color 500ms ease-in-out;}.ProseMirror-yjs-cursor{position:relative;margin-left:-1px;margin-right:-1px;border-left:1px solid black;border-right:1px solid black;height:1em;word-break:normal;&::after{content:"";display:block;position:absolute;left:-8px;right:-8px;top:0;bottom:0;}> div{opacity:0;transition:opacity 100ms ease-in-out;position:absolute;top:-1.8em;font-size:13px;background-color:rgb(250,129,0);font-style:normal;line-height:normal;user-select:none;white-space:nowrap;color:white;padding:2px 6px;font-weight:500;border-radius:4px;pointer-events:none;left:-1px;}&:hover{> div{opacity:1;}}}}&.show-cursor-names .ProseMirror-yjs-cursor > div{opacity:1;}pre{white-space:pre-wrap;}li{position:relative;}iframe.embed{width:100%;height:400px;border:1px solid ',";border-radius:6px;}.image,.video{line-height:0;text-align:center;max-width:100%;clear:both;position:relative;z-index:1;img,video{pointer-events:",";display:inline-block;max-width:100%;}video{pointer-events:initial;","}.ProseMirror-selectednode img{pointer-events:initial;}}.image.placeholder,.video.placeholder{position:relative;background:",";margin-bottom:calc(28px + 1.2em);img,video{opacity:0.5;}video{border-radius:8px;}}.file.placeholder{display:flex;align-items:center;background:",";box-shadow:0 0 0 1px ",";white-space:nowrap;border-radius:8px;padding:6px 8px;max-width:840px;cursor:default;margin-top:0.5em;margin-bottom:0.5em;.title,.subtitle{margin-left:8px;}.title{font-weight:600;font-size:14px;color:",";}.subtitle{font-size:13px;color:",";line-height:0;}span{font-family:",";}}.attachment-replacement-uploading{.widget{opacity:0.5;}}.image-replacement-uploading{img{opacity:0.5;}}.image-right-50{float:right;margin-left:2em;margin-bottom:1em;clear:initial;}.image-left-50{float:left;margin-right:2em;margin-bottom:1em;clear:initial;}.image-full-width{width:initial;max-width:100vw;clear:both;position:initial;transform:translateX(calc(50% + var(--container-width) * -0.5));img{max-width:100vw;max-height:min(450px,50vh);object-fit:cover;object-position:center;}}.","{transform:translateX(calc(50% + ","px + var(--container-width) * -0.5));.",",table{width:calc(var(--container-width) - ","px);}&.","::after{left:calc(var(--container-width) - ","px);}}.column-resize-handle{"," position:absolute;right:-1px;top:0;bottom:-1px;width:2px;z-index:20;background-color:",";pointer-events:none;}.resize-cursor{"," cursor:ew-resize;cursor:col-resize;}.ProseMirror-hideselection *::selection{background:transparent;}.ProseMirror-hideselection *::-moz-selection{background:transparent;}.ProseMirror-hideselection{caret-color:transparent;}.ProseMirror-selectednode{outline:2px solid ",';@media print{outline:none;}}li.ProseMirror-selectednode{outline:none;}li.ProseMirror-selectednode{&::after{content:"";position:absolute;left:-32px;right:-2px;top:-2px;bottom:-2px;border:2px solid ',";pointer-events:none;}&:dir(rtl)::after{left:-2px;right:-32px;}}img.ProseMirror-separator{display:inline;border:none !important;margin:0 !important;}.component-image + img.ProseMirror-separator,.component-image + img.ProseMirror-separator + br.ProseMirror-trailingBreak{display:none;}.","{border:0;display:block;font-style:italic;font-weight:normal;font-size:13px;color:",';padding:8px 0 4px;line-height:16px;text-align:center;min-height:1em;outline:none;background:none;resize:none;user-select:text;margin:0 auto !important;}.ProseMirror[contenteditable="false"]{.',"{pointer-events:none;}.",':empty{visibility:hidden;}}.heading-content{&::before{content:"​";display:inline;}}.heading-name{color:',';pointer-events:none;display:block;position:relative;top:-60px;visibility:hidden;&:hover{text-decoration:none;}}.heading-name:first-child,.heading-name:first-child + .ProseMirror-yjs-cursor,.heading-name:first-child + [role=button] + [role=button]{& + h1,& + h2,& + h3,& + h4{margin-top:0;}}a:first-child{h1,h2,h3,h4,h5,h6{margin-top:0;}}h1:not(.placeholder)::before{content:"H1";}h2:not(.placeholder)::before{content:"H2";}h3:not(.placeholder)::before{content:"H3";}h4:not(.placeholder)::before{content:"H4";}h5:not(.placeholder)::before{content:"H5";}h6:not(.placeholder)::before{content:"H6";}.ProseMirror[contenteditable="true"]:focus-within,.ProseMirror-focused{h1,h2,h3,h4,h5,h6{&:not(.placeholder):before{opacity:1;}}}.with-emoji{margin-',":-1em;}.heading-anchor,.heading-fold{display:inline-block;color:",";opacity:.75;cursor:var(--pointer);background:none;outline:none;border:0;margin:0;padding:0;text-align:start;font-weight:500;font-family:",";font-size:14px;line-height:0;width:12px;height:24px;&:focus,&:hover{opacity:1;}}.heading-anchor{box-sizing:border-box;}.heading-actions{opacity:0;user-select:none;background:",";margin-left:-26px;flex-direction:row;display:none;position:relative;top:-2px;width:26px;height:24px;&:dir(rtl){margin-left:0;margin-right:-26px;}&.collapsed{opacity:1;}&.collapsed .heading-anchor{opacity:0;}&.collapsed .heading-fold{opacity:1;}}h1,h2,h3,h4,h5,h6{&:hover{.heading-anchor{opacity:0.75 !important;}.heading-anchor:hover{opacity:1 !important;}}}.ProseMirror >{h1,h2,h3,h4,h5,h6{.heading-actions{display:inline-flex;}&:not(.placeholder)::before{display:",";}}}.heading-fold{display:inline-block;transform-origin:center;padding:0;&.collapsed{svg{transform:rotate(-90deg);pointer-events:none;}transition-delay:0.1s;opacity:1;}&:dir(rtl).collapsed svg{transform:rotate(90deg);}}.placeholder::before{display:block;opacity:0;transition:opacity 150ms ease-in-out;content:",";pointer-events:none;height:0;color:",";}.ProseMirror-focused .placeholder::before,.placeholder:nth-child(1)::before,.placeholder:nth-child(2)::before{opacity:1;}.",'{&:not([data-resolved]):not([data-draft]),&[data-draft][data-user-id="','"]{border-bottom:2px solid ',";transition:background 100ms ease-in-out;border-radius:2px;&:hover{"," background:",";}}}.notice-block{display:flex;align-items:center;background:",";border-left:4px solid ",";color:",";border-radius:4px;padding:8px 10px 8px 8px;margin:8px 0;a{color:",";text-decoration:underline;}p:first-child{margin-top:0;}p:last-child{margin-bottom:0;}}.notice-block .content{flex-grow:1;min-width:0;}.notice-block{.icon{width:24px;height:24px;align-self:flex-start;margin-right:4px;color:",";}&:dir(rtl) .icon{margin-right:0;margin-left:4px;}}.notice-block.tip{background:",";border-left:4px solid ",";color:",";.icon{color:",";}a{color:",";}}.notice-block.warning{background:",";border-left:4px solid ",";color:",";.icon{color:",";}a{color:",";}}.notice-block.success{background:",";border-left:4px solid ",";color:",";.icon{color:",";}a{color:",';}}blockquote{margin:0;padding:8px 10px 8px 1.5em;overflow:hidden;position:relative;&::before{content:"";display:inline-block;width:2px;border-radius:1px;position:absolute;margin-left:-1.5em;top:0;bottom:0;background:',";}&:dir(rtl)::before{margin-left:0;margin-right:-1.5em;}}b,strong{font-weight:600;}.template-placeholder{color:",";border-bottom:1px dotted ",";border-radius:2px;cursor:text;&:hover{border-bottom:1px dotted ",";}}p{margin:0;min-height:1.6em;}.heading-content a,p a{color:",";text-decoration:underline;text-decoration-color:",";text-decoration-thickness:1px;text-underline-offset:.15em;font-weight:500;&:hover{text-decoration:underline;text-decoration-color:",";text-decoration-thickness:1px;}}a{color:",";cursor:pointer;}.ProseMirror-focused{a{cursor:text;}}a:hover{text-decoration:",";}ul,ol{margin:0 0.1em 0 ",";padding:0 0 0 48px;&:has(p:dir(rtl)){direction:rtl;}&:has(p:dir(rtl)),&:dir(rtl){margin:0 "," 0 0.1em;padding:0 48px 0 0;}}ol ol{list-style:lower-alpha;}ol ol ol{list-style:lower-roman;}ul li,ol li{position:relative;white-space:initial;text-align:start;p{white-space:pre-wrap;}> div{width:100%;}}ul.checkbox_list{padding:0;margin-left:-24px;margin-right:0;& > li{display:flex;list-style:none;padding-left:24px;padding-right:0;}&:has(p:dir(rtl)){margin-left:0;margin-right:-24px;& > li{padding-left:0;padding-right:24px;}}}ul.checkbox_list > li.checked > div > p{color:",';}ul li,ol li{&::before{background:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iOCIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iOCIgeT0iMTEiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+CjxyZWN0IHg9IjgiIHk9IjE1IiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iMTMiIHk9IjExIiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iMTUiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+Cjwvc3ZnPgo=") no-repeat;background-position:0 2px;content:"";display:',";cursor:grab;width:24px;height:24px;position:absolute;left:-40px;opacity:0;transition:opacity 200ms ease-in-out;}&:dir(rtl)::before{left:auto;right:-40px;}}ul li[draggable=true]::before,ol li[draggable=true]::before{cursor:grabbing;}ul > li.counter-2,ol li.counter-2{&::before{left:-50px;}&:dir(rtl)::before{left:auto;right:-50px;}}ul > li.hovering::before,ol li.hovering::before{opacity:0.5;}ul li.ProseMirror-selectednode::after,ol li.ProseMirror-selectednode::after{display:none;}ul.checkbox_list > li{&::before{left:0;}&:dir(rtl)::before{left:auto;right:0;}}ul.checkbox_list{.checkbox{display:inline-block;cursor:var(--pointer);pointer-events:",";opacity:",";width:14px;height:14px;position:relative;top:1px;transition:transform 100ms ease-in-out;opacity:.8;margin:0 0.5em 0 0;background-image:"," &[aria-checked=true]{opacity:1;background-image:",';}&:active{transform:scale(0.9);}}&:has(p:dir(rtl)){.checkbox{margin:0 0 0 0.5em;}}}li p:first-child{margin:0;word-break:break-word;}hr{position:relative;height:1em;border:0;}hr::before{content:"";display:block;position:absolute;border-top:1px solid ',";top:0.5em;left:0;right:0;}hr.page-break{page-break-after:always;}hr.page-break::before{border-top:1px dashed ",";}.math-inline .math-src .ProseMirror,code{border-radius:4px;border:1px solid ",";background:",";padding:3px 4px;color:",";font-family:",";font-size:90%;}mark{border-radius:1px;padding:2px 0;color:",";a{color:",";}}.external-link{cursor:pointer;display:inline-block;position:relative;top:2px;width:16px;height:16px;}.code-block{position:relative;}.code-block[data-language=mermaidjs]{margin:0.75em 0;"," &:not(.code-active){height:",";margin:-0.75em 0;overflow:hidden;position:",';}}.ProseMirror[contenteditable="false"] .code-block[data-language=mermaidjs]{height:0;overflow:hidden;margin:-0.5em 0 0 0;}.code-block.with-line-numbers{pre{padding-left:calc(var(--line-number-gutter-width,0) * 1em + 1.5em);}&::after{content:attr(data-line-numbers);position:absolute;padding-left:0.5em;left:1px;top:calc(1px + 0.75em);width:calc(var(--line-number-gutter-width,0) * 1em + .25em);word-break:break-all;white-space:break-spaces;font-family:',";font-size:13px;line-height:1.4em;color:",";background:",";text-align:right;font-variant-numeric:tabular-nums;user-select:none;}}.mermaid-diagram-wrapper{display:flex;align-items:center;justify-content:center;margin:0.75em 0;min-height:1.6em;background:",";border-radius:6px;border:1px solid ",";padding:8px;user-select:none;cursor:default;*{font-family:",";}&.empty{font-family:",";font-size:14px;color:",";}&.parse-error{font-family:",";font-size:14px;color:",";}}pre{display:block;overflow-x:auto;padding:0.75em 1em;line-height:1.4em;position:relative;background:",";border-radius:4px;border:1px solid ",";margin:.5em 0;-webkit-font-smoothing:initial;font-family:",";font-size:13px;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;color:",";code{font-size:13px;background:none;padding:0;border:0;}}table{width:100%;border-collapse:collapse;border-radius:4px;margin-top:1em;box-sizing:border-box;*{box-sizing:border-box;}tr{position:relative;border-bottom:1px solid ",";}td,th{position:relative;vertical-align:top;border:1px solid ",";position:relative;padding:4px 8px;text-align:start;min-width:100px;font-weight:normal;}th{background:",";color:",";font-weight:500;}td .component-embed{padding:4px 0;}.selectedCell{background:",";background-clip:padding-box;}.",",.",",.",",.",",.","{@media print{display:none;}}.",",.","{display:block;position:absolute;background:",";cursor:var(--pointer);&:hover::after{width:16px;height:16px;z-index:20;background-color:",';background-size:16px 16px;background-position:50% 50%;background-image:url("data:image/svg+xml;base64,','")}&::before{content:"";display:block;cursor:var(--pointer);position:absolute;width:24px;height:24px;}}.','{bottom:-1px;left:-16px;width:0;height:2px;&::after{content:"";position:absolute;bottom:-1px;left:-10px;width:4px;height:4px;display:',";border-radius:100%;background-color:",";}&:hover{width:calc(var(--table-width) - ","px);}&:hover::after{bottom:-7.5px;left:-16px;}&::before{bottom:-12px;left:-18px;}&.first{bottom:auto;top:-1px;&::before{bottom:auto;top:-12px;}}}.",'{top:-16px;right:-1px;width:2px;height:0;&::after{content:"";position:absolute;top:-10px;right:-1px;width:4px;height:4px;display:',";border-radius:100%;background-color:",";}&:hover{height:calc(var(--table-height) - ","px + 6px);}&:hover::after{top:-16px;right:-7px;}&::before{top:-16px;right:-12px;}&.first{right:auto;left:-1px;&::before{right:auto;left:-12px;}}}.",'{&::after{content:"";cursor:var(--pointer);position:absolute;top:-16px;left:0;width:100%;height:12px;background:',";display:",";}&:hover::after{background:",";}&.first::after{border-top-left-radius:3px;border-bottom-left-radius:3px;}&.last::after{border-top-right-radius:3px;border-bottom-right-radius:3px;}&.selected::after{background:",";}}.",'{&::after{content:"";cursor:var(--pointer);position:absolute;left:-16px;top:0;height:100%;width:12px;background:',";border-color:",";display:",";}&:hover::after{background:",";}&.first::after{border-top-left-radius:3px;border-top-right-radius:3px;}&.last::after{border-bottom-left-radius:3px;border-bottom-right-radius:3px;}&.selected::after{background:",";}}.",'{&::after{content:"";cursor:var(--pointer);background:',";width:13px;height:13px;border-radius:13px;border:2px solid ",";position:absolute;top:-18px;left:-18px;display:",";z-index:10;}&:hover::after{background:",";}&.selected::after{background:",";}}}.","{position:relative;}.","{position:relative;margin:-1em ","px -0.5em;scrollbar-width:thin;scrollbar-color:transparent transparent;overflow-y:hidden;overflow-x:auto;padding-top:1em;padding-bottom:.5em;padding-left:","px;padding-right:","px;transition:border 250ms ease-in-out 0s;&:hover{scrollbar-color:"," ",";}& ::-webkit-scrollbar{height:14px;background-color:transparent;}&:hover ::-webkit-scrollbar{background-color:",";}& ::-webkit-scrollbar-thumb{background-color:transparent;border:3px solid transparent;border-radius:7px;}&:hover ::-webkit-scrollbar-thumb{background-color:",";border-color:",";}}.","::before,.",'::after{content:"";position:absolute;top:1px;bottom:0;left:-1em;width:32px;z-index:20;transition:box-shadow 250ms ease-in-out;border:0px solid transparent;pointer-events:none;}.',"::before{left:-","px;right:auto;box-shadow:16px 0 16px -16px inset rgba(0,0,0,",");border-left:","px solid ",";}.","::after{right:-","px;left:auto;box-shadow:-16px 0 16px -16px inset rgba(0,0,0,",");border-right:","px solid ",";}.block-menu-trigger{opacity:0;pointer-events:none;display:",";width:24px;height:24px;color:",";background:none;position:absolute;transition:color 150ms cubic-bezier(0.175,0.885,0.32,1.275),opacity 150ms ease-in-out;outline:none;border:0;padding:0;margin-top:1px;margin-",":-28px;border-radius:4px;&:hover,&:focus{cursor:var(--pointer);color:",";background:",';}}.ProseMirror[contenteditable="true"]:focus-within,.ProseMirror-focused .block-menu-trigger,.block-menu-trigger:active,.block-menu-trigger:focus{opacity:1;pointer-events:initial;}.ProseMirror-gapcursor{display:none;pointer-events:none;position:absolute;}.ProseMirror-gapcursor::after{content:"";display:block;position:absolute;top:-2px;width:20px;border-top:1px solid ',";animation:ProseMirror-cursor-blink 1.1s steps(2,start) infinite;}.folded-content,.folded-content + .mermaid-diagram-wrapper{display:none;user-select:none;}@keyframes ProseMirror-cursor-blink{to{visibility:hidden;}}.ProseMirror-focused .ProseMirror-gapcursor{display:block;}del{color:",";text-decoration:strikethrough;}ins[data-operation-index]{color:",";background-color:",";text-decoration:none;}del[data-operation-index]{color:",";background-color:",";text-decoration:none;img{opacity:.5;}}@media print{.placeholder::before,.block-menu-trigger,.heading-actions,button.show-source-button,h1:not(.placeholder)::before,h2:not(.placeholder)::before,h3:not(.placeholder)::before,h4:not(.placeholder)::before,h5:not(.placeholder)::before,h6:not(.placeholder)::before{display:none;}.image{page-break-inside:avoid;}.",'{border:0;background:none;}.page-break{opacity:0;}pre{overflow-x:hidden;white-space:pre-wrap;}em,blockquote{font-family:"SF Pro Text",',";}}"],e.grow?1:0,e.theme.text,e.theme.fontFamily,e.theme.fontWeightRegular,e.theme.mentionBackground,he,e.theme.mentionHoverBackground,e.editorStyle?.padding??"initial",e.editorStyle?.margin??"initial",e.theme.fontFamilyMono,e.theme.textSecondary,e.theme.embedBorder,e.readOnly?"initial":"none",Se,e.theme.background,e.theme.background,e.theme.divider,e.theme.text,e.theme.textTertiary,e.theme.fontFamilyMono,_e.tableFullWidth,_e.padding,_e.tableScrollable,2*_e.padding,_e.tableShadowRight,3*_e.padding,e.readOnly?"display: none;":"",e.theme.text,e.readOnly?"pointer-events: none;":"",e.readOnly?"transparent":e.theme.selected,e.theme.selected,_e.imageCaption,e.theme.textSecondary,_e.imageCaption,_e.imageCaption,e.theme.text,e.rtl?"right":"left",e.theme.text,e.theme.fontFamilyMono,e.theme.background,e.readOnly?"none":"inline-block",e.readOnly?"":"attr(data-empty-text)",e.theme.placeholder,_e.comment,e.userId??"",e.theme.commentMarkBackground,e.readOnly?"cursor: var(--pointer);":"",e.theme.commentMarkBackground,Ce(.9,e.theme.noticeInfoBackground),e.theme.noticeInfoBackground,e.theme.noticeInfoText,e.theme.noticeInfoText,e.theme.noticeInfoBackground,Ce(.9,e.theme.noticeTipBackground),e.theme.noticeTipBackground,e.theme.noticeTipText,e.theme.noticeTipBackground,e.theme.noticeTipText,Ce(.9,e.theme.noticeWarningBackground),e.theme.noticeWarningBackground,e.theme.noticeWarningText,e.theme.noticeWarningBackground,e.theme.noticeWarningText,Ce(.9,e.theme.noticeSuccessBackground),e.theme.noticeSuccessBackground,e.theme.noticeSuccessText,e.theme.noticeSuccessBackground,e.theme.noticeSuccessText,e.theme.quote,e.theme.placeholder,e.theme.placeholder,e.readOnly?e.theme.placeholder:e.theme.textSecondary,e.theme.text,Ie(.5,e.theme.text),e.theme.text,e.theme.link,e.readOnly?"underline":"none",e.staticHTML?"0":"-26px",e.staticHTML?"0":"-26px",e.theme.textTertiary,e.readOnly?"none":"inline-block",e.readOnly&&!e.readOnlyWriteCheckboxes?"none":"initial",e.readOnly&&!e.readOnlyWriteCheckboxes?.75:1,`url("data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3 0C1.34315 0 0 1.34315 0 3V11C0 12.6569 1.34315 14 3 14H11C12.6569 14 14 12.6569 14 11V3C14 1.34315 12.6569 0 11 0H3ZM3 2C2.44772 2 2 2.44772 2 3V11C2 11.5523 2.44772 12 3 12H11C11.5523 12 12 11.5523 12 11V3C12 2.44772 11.5523 2 11 2H3Z' fill='${e.theme.text.replace("#","%23")}' /%3E%3C/svg%3E%0A");`,`url(\n            "data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3 0C1.34315 0 0 1.34315 0 3V11C0 12.6569 1.34315 14 3 14H11C12.6569 14 14 12.6569 14 11V3C14 1.34315 12.6569 0 11 0H3ZM4.26825 5.85982L5.95873 7.88839L9.70003 2.9C10.0314 2.45817 10.6582 2.36863 11.1 2.7C11.5419 3.03137 11.6314 3.65817 11.3 4.1L6.80002 10.1C6.41275 10.6164 5.64501 10.636 5.2318 10.1402L2.7318 7.14018C2.37824 6.71591 2.43556 6.08534 2.85984 5.73178C3.28412 5.37821 3.91468 5.43554 4.26825 5.85982Z' fill='${e.theme.accent.replace("#","%23")}' /%3E%3C/svg%3E%0A"\n        )`,e.theme.horizontalRule,e.theme.horizontalRule,e.theme.codeBorder,e.theme.codeBackground,e.theme.codeString,e.theme.fontFamilyMono,e.theme.text,e.theme.text,!e.staticHTML&&$e(["pre{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-20px;overflow:hidden;}"]),e.staticHTML||e.readOnly?"auto":"0",e.staticHTML||e.readOnly?"relative":"absolute",e.theme.fontFamilyMono,e.theme.textTertiary,e.theme.codeBackground,e.theme.codeBackground,e.theme.codeBorder,e.theme.fontFamily,e.theme.fontFamilyMono,e.theme.placeholder,e.theme.fontFamilyMono,e.theme.brand.red,e.theme.codeBackground,e.theme.codeBorder,e.theme.fontFamilyMono,e.theme.code,e.theme.divider,e.theme.divider,Ce(.75,e.theme.divider),e.theme.textSecondary,e.readOnly?"inherit":e.theme.tableSelectedBackground,_e.tableAddRow,_e.tableAddColumn,_e.tableGrip,_e.tableGripColumn,_e.tableGripRow,_e.tableAddRow,_e.tableAddColumn,e.theme.accent,e.theme.accent,btoa('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 5C11.4477 5 11 5.44772 11 6V11H6C5.44772 11 5 11.4477 5 12C5 12.5523 5.44772 13 6 13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V13H18C18.5523 13 19 12.5523 19 12C19 11.4477 18.5523 11 18 11H13V6C13 5.44772 12.5523 5 12 5Z" fill="white"/></svg>'),_e.tableAddRow,e.readOnly?"none":"block",e.theme.divider,1.5*_e.padding,_e.tableAddColumn,e.readOnly?"none":"block",e.theme.divider,_e.padding,_e.tableGripColumn,e.theme.divider,e.readOnly?"none":"block",e.theme.text,e.theme.tableSelected,_e.tableGripRow,e.theme.divider,e.theme.background,e.readOnly?"none":"block",e.theme.text,e.theme.tableSelected,_e.tableGrip,e.theme.divider,e.theme.background,e.readOnly?"none":"block",e.theme.text,e.theme.tableSelected,_e.table,_e.tableScrollable,-_e.padding,_e.padding,_e.padding,e.theme.scrollbarThumb,e.theme.scrollbarBackground,e.theme.scrollbarBackground,e.theme.scrollbarThumb,e.theme.scrollbarBackground,_e.tableShadowLeft,_e.tableShadowRight,_e.tableShadowLeft,_e.padding,e.theme.isDark?1:.25,_e.padding,e.theme.background,_e.tableShadowRight,_e.padding,e.theme.isDark?1:.25,_e.padding,e.theme.background,e.readOnly?"none":"inline",e.theme.textSecondary,e.rtl?"right":"left",e.theme.text,e.theme.backgroundSecondary,e.theme.cursor,e.theme.slate,e.theme.textDiffInserted,e.theme.textDiffInsertedBackground,e.theme.textDiffDeleted,e.theme.textDiffDeletedBackground,_e.comment,e.theme.fontFamily)),(e=>$e([".math-node{min-width:1em;min-height:1em;font-size:0.95em;font-family:",';cursor:auto;white-space:pre-wrap;overflow-x:auto;overflow-y:none;}.math-node.empty-math .math-render::before{content:"Empty math";color:',';font-size:14px;}.math-node .math-render.parse-error::before{content:"(math error)";color:',";cursor:help;}.math-node.ProseMirror-selectednode{outline:none;}.math-node .math-src{display:none;color:",";tab-size:4;}.math-node.ProseMirror-selectednode .math-src{display:inline;}.math-node.ProseMirror-selectednode .math-render{display:none;}math-inline{display:inline;white-space:nowrap;}math-inline .math-render{display:inline-block;font-size:0.85em;}math-inline .math-src .ProseMirror{display:inline;margin:0px 3px;}math-block{display:block;}math-block .math-render{display:block;}math-block.ProseMirror-selectednode,math-block.empty-math{border-radius:4px;border:1px solid ",";background:",";padding:0.75em 1em;font-family:",";font-size:90%;}math-block.empty-math{text-align:center;}math-block .math-src .ProseMirror{width:100%;display:block;}math-block .katex-display{margin:0;}.katex-html *::selection{background-color:none !important;}.math-node.math-select .math-render{background-color:#c0c0c0ff;}math-inline.math-select .math-render{padding-top:2px;}"],e.theme.fontFamilyMono,e.theme.placeholder,e.theme.brand.red,e.theme.codeStatement,e.theme.codeBorder,e.theme.codeBackground,e.theme.fontFamilyMono)),(()=>$e([".no-cursor{caret-color:transparent;}div:focus .fake-cursor,span:focus .fake-cursor{margin-right:-1px;border-left-width:1px;border-left-style:solid;animation:ProseMirror-cursor-blink 1.1s steps(2,start) infinite;position:relative;z-index:1;}"])),(e=>$e([".token.comment,.token.prolog,.token.doctype,.token.cdata{color:",";}.token.punctuation{color:",";}.token.namespace{opacity:0.7;}.token.operator,.token.boolean,.token.number{color:",";}.token.property{color:",";}.token.tag{color:",";}.token.string{color:",";}.token.selector{color:",";}.token.attr-name{color:",";}.token.entity,.token.url,.language-css .token.string,.style .token.string{color:",";}.token.attr-value,.token.keyword,.token.control,.token.directive,.token.unit{color:",";}.token.function,.token.class-name-definition{color:",";}.token.class-name{color:",";}.token.statement,.token.regex,.token.atrule{color:",";}.token.placeholder,.token.variable{color:",";}.token.deleted{text-decoration:line-through;}.token.inserted{border-bottom:1px dotted ",";text-decoration:none;}.token.italic{font-style:italic;}.token.important,.token.bold{font-weight:bold;}.token.important{color:",";}.token.entity{cursor:help;}"],e.theme.codeComment,e.theme.codePunctuation,e.theme.codeNumber,e.theme.codeProperty,e.theme.codeTag,e.theme.codeString,e.theme.codeSelector,e.theme.codeAttr,e.theme.codeEntity,e.theme.codeKeyword,e.theme.codeFunction,e.theme.codeClassName,e.theme.codeStatement,e.theme.codePlaceholder,e.theme.codeInserted,e.theme.codeImportant)),(()=>$e([".find-result:not(:has(.mention)),.find-result .mention{background:rgba(255,213,0,0.25);}.find-result.current-result:not(:has(.mention)),.find-result.current-result .mention{background:rgba(255,213,0,0.75);animation:"," 150ms 1;}}"],Rr)),(e=>$e([".attachment{display:block;color:"," !important;box-shadow:0 0 0 1px ",";white-space:nowrap;border-radius:8px;padding:6px 8px;}.image > img{width:auto;height:auto;}"],e.theme.text,e.theme.divider))),Ar=c.div.withConfig({componentId:"sc-y3lu1x-0"})(["min-height:",";flex-grow:100;cursor:text;"],(e=>e.minHeight||"50vh"));function useDictionary(){const{t:t}=E();return e.useMemo((()=>({addColumnAfter:t("Add column after"),addColumnBefore:t("Add column before"),addRowAfter:t("Add row after"),addRowBefore:t("Add row before"),alignCenter:t("Align center"),alignLeft:t("Align left"),alignRight:t("Align right"),alignDefaultWidth:t("Default width"),alignFullWidth:t("Full width"),bulletList:t("Bulleted list"),checkboxList:t("Todo list"),codeBlock:t("Code block"),codeCopied:t("Copied to clipboard"),codeInline:t("Code"),comment:t("Comment"),copy:t("Copy"),createLink:t("Create link"),createLinkError:t("Sorry, an error occurred creating the link"),createNewDoc:t("Create a new doc"),createNewChildDoc:t("Create a new child doc"),deleteColumn:t("Delete"),deleteRow:t("Delete"),deleteTable:t("Delete table"),deleteAttachment:t("Delete file"),download:t("Download"),downloadAttachment:t("Download file"),replaceAttachment:t("Replace file"),deleteImage:t("Delete image"),downloadImage:t("Download image"),replaceImage:t("Replace image"),em:t("Italic"),embedInvalidLink:t("Sorry, that link won’t work for this embed type"),file:t("File attachment"),enterLink:`${t("Enter a link")}…`,h1:t("Big heading"),h2:t("Medium heading"),h3:t("Small heading"),h4:t("Extra small heading"),heading:t("Heading"),hr:t("Divider"),image:t("Image"),fileUploadError:t("Sorry, an error occurred uploading the file"),imageCaptionPlaceholder:t("Write a caption"),info:t("Info"),infoNotice:t("Info notice"),link:t("Link"),linkCopied:t("Link copied to clipboard"),mark:t("Highlight"),newLineEmpty:`${t("Type '/' to insert")}…`,newLineWithSlash:`${t("Keep typing to filter")}…`,noResults:t("No results"),openLink:t("Open link"),goToLink:t("Go to link"),openLinkError:t("Sorry, that type of link is not supported"),orderedList:t("Ordered list"),pageBreak:t("Page break"),pasteLink:`${t("Paste a link")}…`,pasteLinkWithTitle:e=>t("Paste a {{service}} link…",{service:e}),placeholder:t("Placeholder"),quote:t("Quote"),removeLink:t("Remove link"),searchOrPasteLink:`${t("Search or paste a link")}…`,strikethrough:t("Strikethrough"),strong:t("Bold"),subheading:t("Subheading"),sortAsc:t("Sort ascending"),sortDesc:t("Sort descending"),table:t("Table"),exportAsCSV:t("Export as CSV"),toggleHeader:t("Toggle header"),mathInline:t("Math inline (LaTeX)"),mathBlock:t("Math block (LaTeX)"),tip:t("Tip"),tipNotice:t("Tip notice"),warning:t("Warning"),warningNotice:t("Warning notice"),success:t("Success"),successNotice:t("Success notice"),insertDate:t("Current date"),insertTime:t("Current time"),insertDateTime:t("Current date and time"),indent:t("Indent"),outdent:t("Outdent"),video:t("Video"),untitled:t("Untitled"),none:t("None")})),[t])}const jr=Ae((()=>je((()=>import("./index.w9hY2wRL.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))));const Nr=K(e.forwardRef((function Editor(t,n){const{id:o,shareId:i,onChange:r,onCreateCommentMark:a,onDeleteCommentMark:s}=t,{comments:c}=z(),l=useDictionary(),u=function useEmbeds(t=!1){const{integrations:n}=z();return e.useEffect((()=>{n.isLoaded||n.isFetching||!t||async function fetchEmbedIntegrations(){try{await n.fetchPage({limit:100,type:Le.Embed})}catch(e){W.error("Failed to fetch embed integrations",e)}}()}),[n,t]),e.useMemo((()=>Te.map((e=>{const t=Re(n.orderedData,(t=>t.service===e.name));return t?.settings&&(e.settings=t.settings),e}))),[n.orderedData])}(!i),p=e.useRef(),f=Po({rejectOnEmpty:!1})?.preferences,b=e.useRef(),g=e.useCallback((async e=>{const t={documentId:o,preset:Ne.DocumentAttachment};return(e instanceof File?await Oe(e,t):await Be(e,t)).url}),[o]),{handleClickLink:v}=function useEditorClickHandlers({shareId:t}){const n=Me(),{documents:o}=z();return{handleClickLink:e.useCallback(((e,i)=>{if(De(e))return void(window.location.href=e);let r=e;if(Pe(e)){if("/"!==e[0])try{const t=new URL(e);r=t.pathname+t.hash}catch(a){r=e}if(r.startsWith("/api/"))return void window.open(e,"_blank");if(t&&r.includes("/doc/")&&!r.includes(t)&&(r=ze(t,r)),Ee(r)){const e=o.getByUrl(r);e&&(r=e.path)}if(!t&&r.startsWith("/s/"))return void window.open(e,"_blank");i&&(U(i)||i.shiftKey)?window.open(r,"_blank"):n.push(r,{sidebarContext:"collections"})}else window.open(e,"_blank")}),[n,t])}}({shareId:i}),x=e.useCallback((()=>{p?.current?.focusAtEnd()}),[p]),y=e.useCallback((e=>{e.preventDefault(),e.stopPropagation();const n=He(e),o=p?.current?.view;if(!o)return;const i=Fe.near(o.state.doc.resolve(o.state.doc.nodeSize-2)).from;if(0===n.length){const t=e.dataTransfer.getData("text/html")||e.dataTransfer.getData("text/plain"),n=(new DOMParser).parseFromString(t,"text/html");return void o.dispatch(o.state.tr.insert(i,We.fromSchema(o.state.schema).parse(n)))}const r=n.some((e=>!Ue.imageContentTypes.includes(e.type)));return Ve(o,e,i,n,{uploadFile:g,onFileUploadStart:t.onFileUploadStart,onFileUploadStop:t.onFileUploadStop,dictionary:l,isAttachment:r})}),[p,t.onFileUploadStart,t.onFileUploadStop,l,g]),w=e.useCallback((e=>{e.stopPropagation(),e.preventDefault()}),[]),k=e.useCallback((()=>{if(a&&s&&p.current){const e=p.current.getComments(),t=c.orderedData.map((e=>e.id)),n=e?.map((e=>e.id));Tr(n,b.current??[],t).forEach((t=>{const n=e.find((e=>e.id===t));n&&a(n.id,n.userId)}));Tr(b.current??[],n??[]).forEach((e=>{s(e)})),b.current=n}}),[a,s,c.orderedData]),$=e.useCallback((e=>{r?.(e),k()}),[r,k]),_=e.useCallback((e=>{e&&k()}),[k]),C=e.useMemo((()=>{if(t.readOnly&&"object"==typeof t.value)return qe.getPlainParagraphs(t.value)}),[t.readOnly,t.value]);return d(Ke,{component:"div",reloadOnChunkMissing:!0,children:h(m,{children:[C?d(Lr,{rtl:"rtl"===t.dir,grow:t.grow,style:t.style,editorStyle:t.editorStyle,children:d("div",{className:"ProseMirror",children:C.map(((e,t)=>d("p",{dir:"auto",children:e.content?.map((e=>e.text))},t)))})}):d(jr,{ref:ie([n,p,_]),uploadFile:g,embeds:u,userPreferences:f,dictionary:l,...t,onClickLink:v,onChange:$,placeholder:t.placeholder||"",defaultValue:t.defaultValue||""},t.extensions?.length||0),t.editorStyle?.paddingBottom&&!t.readOnly&&d(Ar,{onClick:t.readOnly?void 0:x,onDrop:t.readOnly?void 0:y,onDragOver:t.readOnly?void 0:w,minHeight:t.editorStyle.paddingBottom})]})})})));class ClipboardTextSerializer extends Ge{get name(){return"clipboardTextSerializer"}get plugins(){const e=this.editor.extensions.serializer();return[new Ze({key:new Xe("clipboardTextSerializer"),props:{clipboardTextSerializer:t=>t.content.childCount>1||t.content.content.some((e=>e.content.content.length>1))?e.serialize(t.content,{softBreak:!0}):t.content.content.map((e=>qe.toPlainText(e,this.editor.schema))).join("")}})]}}class SuggestionsMenuPlugin extends Ze{constructor(e,t,n){super({props:{handleKeyDown:(e,o)=>("Backspace"===o.key&&setTimeout((()=>{const{pos:o}=e.state.selection.$from;return this.execute(e,o,o,n,Ye(((e,n)=>(n?t.query=n[1]:t.open=!1,null))))})),("Enter"===o.key||"ArrowUp"===o.key||"ArrowDown"===o.key||"Tab"===o.key)&&t.open)}})}execute(e,t,n,o,i){if(e.composing)return!1;const r=e.state,a=r.doc.resolve(t);if(a.parent.type.spec.code)return!1;const s=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"￼"),c=o.exec(s);return!!i(r,c,c?t-c[0].length:t,n)}}class Suggestion extends Ge{constructor(e){super(e),this.inputRules=e=>[new Qe(this.openRegex,Ye(((e,t)=>{const{parent:n}=e.selection.$from;return!t||"paragraph"!==n.type.name&&"heading"!==n.type.name||Je(e)&&!this.options.enabledInCode||(t[0].length<=2&&(this.state.open=!0),this.state.query=t[1]),null})))],this.state=et({open:!1,query:""}),this.openRegex=new RegExp(`(?:^|\\s|\\()${tt(this.options.trigger)}([\\p{L}/\\p{M}\\d${this.options.allowSpaces?"\\s{1}":""}\\.\\-–_]+)${this.options.requireSearchTerm?"":"?"}$`,"u")}get plugins(){return[new SuggestionsMenuPlugin(this.options,this.state,this.openRegex)]}keys(){return{Space:Ye((()=>(this.state.open&&!this.options.allowSpaces&&(this.state.open=!1),!1)))}}}function $parcel$interopDefault(e){return e&&e.__esModule?e.default:e}function $c770c458706daa72$export$2e2bcd8739ae039(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Or,Br,Hr,Fr,Wr,Ur,Vr={},qr=[],Kr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function $fb96b826c0c5f37a$var$a(e,t){for(var n in t)e[n]=t[n];return e}function $fb96b826c0c5f37a$var$h(e){var t=e.parentNode;t&&t.removeChild(e)}function $fb96b826c0c5f37a$export$c8a8987d4410bf2d(e,t,n){var o,i,r,a={};for(r in t)"key"==r?o=t[r]:"ref"==r?i=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?Or.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===a[r]&&(a[r]=e.defaultProps[r]);return $fb96b826c0c5f37a$var$y(e,a,o,i,null)}function $fb96b826c0c5f37a$var$y(e,t,n,o,i){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++Hr:i};return null==i&&null!=Br.vnode&&Br.vnode(r),r}function $fb96b826c0c5f37a$export$ffb0004e005737fa(e){return e.children}function $fb96b826c0c5f37a$export$16fa2f45be04daa8(e,t){this.props=e,this.context=t}function $fb96b826c0c5f37a$var$k(e,t){if(null==t)return e.__?$fb96b826c0c5f37a$var$k(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?$fb96b826c0c5f37a$var$k(e):null}function $fb96b826c0c5f37a$var$b(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return $fb96b826c0c5f37a$var$b(e)}}function $fb96b826c0c5f37a$var$m(e){(!e.__d&&(e.__d=!0)&&Fr.push(e)&&!$fb96b826c0c5f37a$var$g.__r++||Ur!==Br.debounceRendering)&&((Ur=Br.debounceRendering)||Wr)($fb96b826c0c5f37a$var$g)}function $fb96b826c0c5f37a$var$g(){for(var e;$fb96b826c0c5f37a$var$g.__r=Fr.length;)e=Fr.sort((function(e,t){return e.__v.__b-t.__v.__b})),Fr=[],e.some((function(e){var t,n,o,i,r,a;e.__d&&(r=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],(o=$fb96b826c0c5f37a$var$a({},i)).__v=i.__v+1,$fb96b826c0c5f37a$var$j(a,i,o,t.__n,void 0!==a.ownerSVGElement,null!=i.__h?[r]:null,n,null==r?$fb96b826c0c5f37a$var$k(i):r,i.__h),$fb96b826c0c5f37a$var$z(n,i),i.__e!=r&&$fb96b826c0c5f37a$var$b(i)))}))}function $fb96b826c0c5f37a$var$w(e,t,n,o,i,r,a,s,c,l){var d,u,p,h,m,f,b,g=o&&o.__k||qr,v=g.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(h=n.__k[d]=null==(h=t[d])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h||"bigint"==typeof h?$fb96b826c0c5f37a$var$y(null,h,null,null,h):Array.isArray(h)?$fb96b826c0c5f37a$var$y($fb96b826c0c5f37a$export$ffb0004e005737fa,{children:h},null,null,null):h.__b>0?$fb96b826c0c5f37a$var$y(h.type,h.props,h.key,null,h.__v):h)){if(h.__=n,h.__b=n.__b+1,null===(p=g[d])||p&&h.key==p.key&&h.type===p.type)g[d]=void 0;else for(u=0;u<v;u++){if((p=g[u])&&h.key==p.key&&h.type===p.type){g[u]=void 0;break}p=null}$fb96b826c0c5f37a$var$j(e,h,p=p||Vr,i,r,a,s,c,l),m=h.__e,(u=h.ref)&&p.ref!=u&&(b||(b=[]),p.ref&&b.push(p.ref,null,h),b.push(u,h.__c||m,h)),null!=m?(null==f&&(f=m),"function"==typeof h.type&&h.__k===p.__k?h.__d=c=$fb96b826c0c5f37a$var$x(h,c,e):c=$fb96b826c0c5f37a$var$P(e,h,p,g,m,c),"function"==typeof n.type&&(n.__d=c)):c&&p.__e==c&&c.parentNode!=e&&(c=$fb96b826c0c5f37a$var$k(p))}for(n.__e=f,d=v;d--;)null!=g[d]&&("function"==typeof n.type&&null!=g[d].__e&&g[d].__e==n.__d&&(n.__d=$fb96b826c0c5f37a$var$k(o,d+1)),$fb96b826c0c5f37a$var$N(g[d],g[d]));if(b)for(d=0;d<b.length;d++)$fb96b826c0c5f37a$var$M(b[d],b[++d],b[++d])}function $fb96b826c0c5f37a$var$x(e,t,n){for(var o,i=e.__k,r=0;i&&r<i.length;r++)(o=i[r])&&(o.__=e,t="function"==typeof o.type?$fb96b826c0c5f37a$var$x(o,t,n):$fb96b826c0c5f37a$var$P(n,o,o,i,o.__e,t));return t}function $fb96b826c0c5f37a$export$47e4c5b300681277(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){$fb96b826c0c5f37a$export$47e4c5b300681277(e,t)})):t.push(e)),t}function $fb96b826c0c5f37a$var$P(e,t,n,o,i,r){var a,s,c;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||i!=r||null==i.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(i),a=null;else{for(s=r,c=0;(s=s.nextSibling)&&c<o.length;c+=2)if(s==i)break e;e.insertBefore(i,r),a=r}return void 0!==a?a:i.nextSibling}function $fb96b826c0c5f37a$var$$(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||Kr.test(t)?n:n+"px"}function $fb96b826c0c5f37a$var$H(e,t,n,o,i){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||$fb96b826c0c5f37a$var$$(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||$fb96b826c0c5f37a$var$$(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o||e.addEventListener(t,r?$fb96b826c0c5f37a$var$T:$fb96b826c0c5f37a$var$I,r):e.removeEventListener(t,r?$fb96b826c0c5f37a$var$T:$fb96b826c0c5f37a$var$I,r);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(a){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function $fb96b826c0c5f37a$var$I(e){this.l[e.type+!1](Br.event?Br.event(e):e)}function $fb96b826c0c5f37a$var$T(e){this.l[e.type+!0](Br.event?Br.event(e):e)}function $fb96b826c0c5f37a$var$j(e,t,n,o,i,r,a,s,c){var l,d,u,p,h,m,f,b,g,v,x,y=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,s=t.__e=n.__e,t.__h=null,r=[s]),(l=Br.__b)&&l(t);try{e:if("function"==typeof y){if(b=t.props,g=(l=y.contextType)&&o[l.__c],v=l?g?g.props.value:l.__:o,n.__c?f=(d=t.__c=n.__c).__=d.__E:("prototype"in y&&y.prototype.render?t.__c=d=new y(b,v):(t.__c=d=new $fb96b826c0c5f37a$export$16fa2f45be04daa8(b,v),d.constructor=y,d.render=$fb96b826c0c5f37a$var$O),g&&g.sub(d),d.props=b,d.state||(d.state={}),d.context=v,d.__n=o,u=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=y.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=$fb96b826c0c5f37a$var$a({},d.__s)),$fb96b826c0c5f37a$var$a(d.__s,y.getDerivedStateFromProps(b,d.__s))),p=d.props,h=d.state,u)null==y.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==y.getDerivedStateFromProps&&b!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,v),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,v)||t.__v===n.__v){d.props=b,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,v),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(p,h,m)}))}d.context=v,d.props=b,d.state=d.__s,(l=Br.__r)&&l(t),d.__d=!1,d.__v=t,d.__P=e,l=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(o=$fb96b826c0c5f37a$var$a($fb96b826c0c5f37a$var$a({},o),d.getChildContext())),u||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(p,h)),x=null!=l&&l.type===$fb96b826c0c5f37a$export$ffb0004e005737fa&&null==l.key?l.props.children:l,$fb96b826c0c5f37a$var$w(e,Array.isArray(x)?x:[x],t,n,o,i,r,a,s,c),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),f&&(d.__E=d.__=null),d.__e=!1}else null==r&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function $fb96b826c0c5f37a$var$L(e,t,n,o,i,r,a,s){var c,l,d,u=n.props,p=t.props,h=t.type,m=0;if("svg"===h&&(i=!0),null!=r)for(;m<r.length;m++)if((c=r[m])&&"setAttribute"in c==!!h&&(h?c.localName===h:3===c.nodeType)){e=c,r[m]=null;break}if(null==e){if(null===h)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,p.is&&p),r=null,s=!1}if(null===h)u===p||s&&e.data===p||(e.data=p);else{if(r=r&&Or.call(e.childNodes),l=(u=n.props||Vr).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!s){if(null!=r)for(u={},m=0;m<e.attributes.length;m++)u[e.attributes[m].name]=e.attributes[m].value;(d||l)&&(d&&(l&&d.__html==l.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function $fb96b826c0c5f37a$var$C(e,t,n,o,i){var r;for(r in n)"children"===r||"key"===r||r in t||$fb96b826c0c5f37a$var$H(e,r,null,n[r],o);for(r in t)i&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||$fb96b826c0c5f37a$var$H(e,r,t[r],n[r],o)}(e,p,u,i,s),d)t.__k=[];else if(m=t.props.children,$fb96b826c0c5f37a$var$w(e,Array.isArray(m)?m:[m],t,n,o,i&&"foreignObject"!==h,r,a,r?r[0]:n.__k&&$fb96b826c0c5f37a$var$k(n,0),s),null!=r)for(m=r.length;m--;)null!=r[m]&&$fb96b826c0c5f37a$var$h(r[m]);s||("value"in p&&void 0!==(m=p.value)&&(m!==u.value||m!==e.value||"progress"===h&&!m)&&$fb96b826c0c5f37a$var$H(e,"value",m,u.value,!1),"checked"in p&&void 0!==(m=p.checked)&&m!==e.checked&&$fb96b826c0c5f37a$var$H(e,"checked",m,u.checked,!1))}return e}(n.__e,t,n,o,i,r,a,c);(l=Br.diffed)&&l(t)}catch(w){t.__v=null,(c||null!=r)&&(t.__e=s,t.__h=!!c,r[r.indexOf(s)]=null),Br.__e(w,t,n)}}function $fb96b826c0c5f37a$var$z(e,t){Br.__c&&Br.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(n){Br.__e(n,t.__v)}}))}function $fb96b826c0c5f37a$var$M(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(o){Br.__e(o,n)}}function $fb96b826c0c5f37a$var$N(e,t,n){var o,i;if(Br.unmount&&Br.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||$fb96b826c0c5f37a$var$M(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){Br.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&$fb96b826c0c5f37a$var$N(o[i],t,"function"!=typeof e.type);n||null==e.__e||$fb96b826c0c5f37a$var$h(e.__e),e.__e=e.__d=void 0}function $fb96b826c0c5f37a$var$O(e,t,n){return this.constructor(e,n)}function $fb96b826c0c5f37a$export$b3890eb0ae9dca99(e,t,n){var o,i,r;Br.__&&Br.__(e,t),i=(o="function"==typeof n)?null:n&&n.__k||t.__k,r=[],$fb96b826c0c5f37a$var$j(t,e=(!o&&n||t).__k=$fb96b826c0c5f37a$export$c8a8987d4410bf2d($fb96b826c0c5f37a$export$ffb0004e005737fa,null,[e]),i||Vr,Vr,void 0!==t.ownerSVGElement,!o&&n?[n]:i?null:t.firstChild?Or.call(t.childNodes):null,r,!o&&n?n:i?i.__e:t.firstChild,o),$fb96b826c0c5f37a$var$z(r,e)}Or=qr.slice,Br={__e:function(e,t){for(var n,o,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(r){e=r}throw e}},Hr=0,$fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=$fb96b826c0c5f37a$var$a({},this.state),"function"==typeof e&&(e=e($fb96b826c0c5f37a$var$a({},n),this.props)),e&&$fb96b826c0c5f37a$var$a(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),$fb96b826c0c5f37a$var$m(this))},$fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),$fb96b826c0c5f37a$var$m(this))},$fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype.render=$fb96b826c0c5f37a$export$ffb0004e005737fa,Fr=[],Wr="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$fb96b826c0c5f37a$var$g.__r=0;var Gr=0;function $bd9dd35321b03dd4$export$34b9dba7ce09269b(e,t,n,o,i){var r,a,s={};for(a in t)"ref"==a?r=t[a]:s[a]=t[a];var c={type:e,props:s,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Gr,__source:o,__self:i};if("function"==typeof e&&(r=e.defaultProps))for(a in r)void 0===s[a]&&(s[a]=r[a]);return Br.vnode&&Br.vnode(c),c}var Zr={set:function $f72b75cf796873c7$var$set(e,t){try{window.localStorage[`emoji-mart.${e}`]=JSON.stringify(t)}catch(n){}},get:function $f72b75cf796873c7$var$get(e){try{const t=window.localStorage[`emoji-mart.${e}`];if(t)return JSON.parse(t)}catch(t){}}};const Xr=new Map,Yr=[{v:15,emoji:"🫨"},{v:14,emoji:"🫠"},{v:13.1,emoji:"😶‍🌫️"},{v:13,emoji:"🥸"},{v:12.1,emoji:"🧑‍🦰"},{v:12,emoji:"🥱"},{v:11,emoji:"🥰"},{v:5,emoji:"🤩"},{v:4,emoji:"👱‍♀️"},{v:3,emoji:"🤣"},{v:2,emoji:"👋🏻"},{v:1,emoji:"🙃"}];function $c84d045dcc34faf5$var$isSupported(e){if(Xr.has(e))return Xr.get(e);const t=Qr(e);return Xr.set(e,t),t}const Qr=(()=>{let e=null;try{navigator.userAgent.includes("jsdom")||(e=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}))}catch{}if(!e)return()=>!1;const t=20,n=Math.floor(12.5);return e.font=n+"px Arial, Sans-Serif",e.textBaseline="top",e.canvas.width=40,e.canvas.height=25,n=>{e.clearRect(0,0,40,25),e.fillStyle="#FF0000",e.fillText(n,0,22),e.fillStyle="#0000FF",e.fillText(n,t,22);const o=e.getImageData(0,0,t,25).data,i=o.length;let r=0;for(;r<i&&!o[r+3];r+=4);if(r>=i)return!1;const a=t+r/4%t,s=Math.floor(r/4/t),c=e.getImageData(a,s,1,1).data;return o[r]===c[0]&&o[r+2]===c[2]&&!(e.measureText(n).width>=t)}})();var Jr={latestVersion:function $c84d045dcc34faf5$var$latestVersion(){for(const{v:e,emoji:t}of Yr)if($c84d045dcc34faf5$var$isSupported(t))return e},noCountryFlags:function $c84d045dcc34faf5$var$noCountryFlags(){return!$c84d045dcc34faf5$var$isSupported("🇨🇦")}};const ea=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","scream","disappointed","unamused","weary","sob","sunglasses","heart"];let ta=null;var na,oa={add:function $b22cfd0a55410b4f$var$add(e){ta||(ta=Zr.get("frequently")||{});const t=e.id||e;t&&(ta[t]||(ta[t]=0),ta[t]+=1,Zr.set("last",t),Zr.set("frequently",ta))},get:function $b22cfd0a55410b4f$var$get({maxFrequentRows:e,perLine:t}){if(!e)return[];ta||(ta=Zr.get("frequently"));let n=[];if(!ta){ta={};for(let e in ea.slice(0,t)){const o=ea[e];ta[o]=t-e,n.push(o)}return n}const o=e*t,i=Zr.get("last");for(let r in ta)n.push(r);if(n.sort(((e,t)=>{const n=ta[t],o=ta[e];return n==o?e.localeCompare(t):n-o})),n.length>o){const e=n.slice(o);n=n.slice(0,o);for(let t of e)t!=i&&delete ta[t];i&&-1==n.indexOf(i)&&(delete ta[n[n.length-1]],n.splice(-1,1,i)),Zr.set("frequently",ta)}return n},DEFAULTS:ea};na=JSON.parse('{"search":"Search","search_no_results_1":"Oh no!","search_no_results_2":"That emoji couldn’t be found","pick":"Pick an emoji…","add_custom":"Add custom emoji","categories":{"activity":"Activity","custom":"Custom","flags":"Flags","foods":"Food & Drink","frequent":"Frequently used","nature":"Animals & Nature","objects":"Objects","people":"Smileys & People","places":"Travel & Places","search":"Search Results","symbols":"Symbols"},"skins":{"1":"Default","2":"Light","3":"Medium-Light","4":"Medium","5":"Medium-Dark","6":"Dark","choose":"Choose default skin tone"}}');var ia={autoFocus:{value:!1},dynamicWidth:{value:!1},emojiButtonColors:{value:null},emojiButtonRadius:{value:"100%"},emojiButtonSize:{value:36},emojiSize:{value:24},emojiVersion:{value:15,choices:[1,2,3,4,5,11,12,12.1,13,13.1,14,15]},exceptEmojis:{value:[]},icons:{value:"auto",choices:["auto","outline","solid"]},locale:{value:"en",choices:["en","ar","be","cs","de","es","fa","fi","fr","hi","it","ja","ko","nl","pl","pt","ru","sa","tr","uk","vi","zh"]},maxFrequentRows:{value:4},navPosition:{value:"top",choices:["top","bottom","none"]},noCountryFlags:{value:!1},noResultsEmoji:{value:null},perLine:{value:9},previewEmoji:{value:null},previewPosition:{value:"bottom",choices:["top","bottom","none"]},searchPosition:{value:"sticky",choices:["sticky","static","none"]},set:{value:"native",choices:["native","apple","facebook","google","twitter"]},skin:{value:1,choices:[1,2,3,4,5,6]},skinTonePosition:{value:"preview",choices:["preview","search","none"]},theme:{value:"auto",choices:["auto","light","dark"]},categories:null,categoryIcons:null,custom:null,data:null,i18n:null,getImageURL:null,getSpritesheetURL:null,onAddCustomEmoji:null,onClickOutside:null,onEmojiSelect:null,stickySearch:{deprecated:!0,value:!0}};let ra=null,aa=null;const sa={};async function $7adb23b0109cc36a$var$fetchJSON(e){if(sa[e])return sa[e];const t=await fetch(e),n=await t.json();return sa[e]=n,n}let ca=null,la=null,da=!1;function $7adb23b0109cc36a$export$2cd8252107eb640b(e,{caller:t}={}){return ca||(ca=new Promise((e=>{la=e}))),e?async function $7adb23b0109cc36a$var$_init(e){da=!0;let{emojiVersion:t,set:n,locale:o}=e;if(t||(t=ia.emojiVersion.value),n||(n=ia.set.value),o||(o=ia.locale.value),aa)aa.categories=aa.categories.filter((e=>!!!e.name));else{aa=("function"==typeof e.data?await e.data():e.data)||await $7adb23b0109cc36a$var$fetchJSON(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/sets/${t}/${n}.json`),aa.emoticons={},aa.natives={},aa.categories.unshift({id:"frequent",emojis:[]});for(const e in aa.aliases){const t=aa.aliases[e],n=aa.emojis[t];n&&(n.aliases||(n.aliases=[]),n.aliases.push(e))}aa.originalCategories=aa.categories}if(ra=("function"==typeof e.i18n?await e.i18n():e.i18n)||("en"==o?$parcel$interopDefault(na):await $7adb23b0109cc36a$var$fetchJSON(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/i18n/${o}.json`)),e.custom)for(let c in e.custom){c=parseInt(c);const t=e.custom[c],n=e.custom[c-1];if(t.emojis&&t.emojis.length){t.id||(t.id=`custom_${c+1}`),t.name||(t.name=ra.categories.custom),n&&!t.icon&&(t.target=n.target||n),aa.categories.push(t);for(const e of t.emojis)aa.emojis[e.id]=e}}e.categories&&(aa.categories=aa.originalCategories.filter((t=>-1!=e.categories.indexOf(t.id))).sort(((t,n)=>e.categories.indexOf(t.id)-e.categories.indexOf(n.id))));let i=null,r=null;"native"==n&&(i=Jr.latestVersion(),r=e.noCountryFlags||Jr.noCountryFlags());let a=aa.categories.length,s=!1;for(;a--;){const t=aa.categories[a];if("frequent"==t.id){let{maxFrequentRows:n,perLine:o}=e;n=n>=0?n:ia.maxFrequentRows.value,o||(o=ia.perLine.value),t.emojis=oa.get({maxFrequentRows:n,perLine:o})}if(!t.emojis||!t.emojis.length){aa.categories.splice(a,1);continue}const{categoryIcons:n}=e;if(n){const e=n[t.id];e&&!t.icon&&(t.icon=e)}let o=t.emojis.length;for(;o--;){const n=t.emojis[o],a=n.id?n:aa.emojis[n],ignore=()=>{t.emojis.splice(o,1)};if(!a||e.exceptEmojis&&e.exceptEmojis.includes(a.id))ignore();else if(i&&a.version>i)ignore();else if(!r||"flags"!=t.id||ha.includes(a.id)){if(!a.search){if(s=!0,a.search=","+[[a.id,!1],[a.name,!0],[a.keywords,!1],[a.emoticons,!1]].map((([e,t])=>{if(e)return(Array.isArray(e)?e:[e]).map((e=>(t?e.split(/[-|_|\s]+/):[e]).map((e=>e.toLowerCase())))).flat()})).flat().filter((e=>e&&e.trim())).join(","),a.emoticons)for(const t of a.emoticons)aa.emoticons[t]||(aa.emoticons[t]=a.id);let e=0;for(const t of a.skins){if(!t)continue;e++;const{native:n}=t;n&&(aa.natives[n]=a.id,a.search+=`,${n}`);const o=1==e?"":`:skin-tone-${e}:`;t.shortcodes=`:${a.id}:${o}`}}}else ignore()}}s&&pa.reset();la()}(e):t&&!da&&console.warn(`\`${t}\` requires data to be initialized first. Promise will be pending until \`init\` is called.`),ca}function $7adb23b0109cc36a$export$75fe5f91d452f94b(e,t,n){e||(e={});const o={};for(let i in t)o[i]=$7adb23b0109cc36a$export$88c9ddb45cea7241(i,e,t,n);return o}function $7adb23b0109cc36a$export$88c9ddb45cea7241(e,t,n,o){const i=n[e];let r=o&&o.getAttribute(e)||(null!=t[e]&&null!=t[e]?t[e]:null);return i?(null!=r&&i.value&&typeof i.value!=typeof r&&(r="boolean"==typeof i.value?"false"!=r:i.value.constructor(r)),i.transform&&r&&(r=i.transform(r)),(null==r||i.choices&&-1==i.choices.indexOf(r))&&(r=i.value),r):r}let ua=null;var pa={search:async function $c4d155af13ad4d4b$var$search(e,{maxResults:t,caller:n}={}){if(!e||!e.trim().length)return null;t||(t=90),await $7adb23b0109cc36a$export$2cd8252107eb640b(null,{caller:n||"SearchIndex.search"});const o=e.toLowerCase().replace(/(\w)-/,"$1 ").split(/[\s|,]+/).filter(((e,t,n)=>e.trim()&&n.indexOf(e)==t));if(!o.length)return;let i,r,a=ua||(ua=Object.values(aa.emojis));for(const s of o){if(!a.length)break;i=[],r={};for(const e of a){if(!e.search)continue;const t=e.search.indexOf(`,${s}`);-1!=t&&(i.push(e),r[e.id]||(r[e.id]=0),r[e.id]+=e.id==s?0:t+1)}a=i}return i.length<2||(i.sort(((e,t)=>{const n=r[e.id],o=r[t.id];return n==o?e.id.localeCompare(t.id):n-o})),i.length>t&&(i=i.slice(0,t))),i},get:function $c4d155af13ad4d4b$var$get(e){return e.id?e:aa.emojis[e]||aa.emojis[aa.aliases[e]]||aa.emojis[aa.natives[e]]},reset:function $c4d155af13ad4d4b$var$reset(){ua=null},SHORTCODES_REGEX:/^(?:\:([^\:]+)\:)(?:\:skin-tone-(\d)\:)?$/};const ha=["checkered_flag","crossed_flags","pirate_flag","rainbow-flag","transgender_flag","triangular_flag_on_post","waving_black_flag","waving_white_flag"];var ma={categories:{activity:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113"})}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M16.17 337.5c0 44.98 7.565 83.54 13.98 107.9C35.22 464.3 50.46 496 174.9 496c9.566 0 19.59-.4707 29.84-1.271L17.33 307.3C16.53 317.6 16.17 327.7 16.17 337.5zM495.8 174.5c0-44.98-7.565-83.53-13.98-107.9c-4.688-17.54-18.34-31.23-36.04-35.95C435.5 27.91 392.9 16 337 16c-9.564 0-19.59 .4707-29.84 1.271l187.5 187.5C495.5 194.4 495.8 184.3 495.8 174.5zM26.77 248.8l236.3 236.3c142-36.1 203.9-150.4 222.2-221.1L248.9 26.87C106.9 62.96 45.07 177.2 26.77 248.8zM256 335.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L164.7 283.3C161.6 280.2 160 276.1 160 271.1c0-8.529 6.865-16 16-16c4.095 0 8.189 1.562 11.31 4.688l64.01 64C254.4 327.8 256 331.9 256 335.1zM304 287.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L212.7 235.3C209.6 232.2 208 228.1 208 223.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01C302.5 279.8 304 283.9 304 287.1zM256 175.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01c3.125 3.125 4.688 7.219 4.688 11.31c0 9.133-7.468 16-16 16c-4.094 0-8.189-1.562-11.31-4.688l-64.01-64.01C257.6 184.2 256 180.1 256 175.1z"})})},custom:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M417.1 368c-5.937 10.27-16.69 16-27.75 16c-5.422 0-10.92-1.375-15.97-4.281L256 311.4V448c0 17.67-14.33 32-31.1 32S192 465.7 192 448V311.4l-118.3 68.29C68.67 382.6 63.17 384 57.75 384c-11.06 0-21.81-5.734-27.75-16c-8.828-15.31-3.594-34.88 11.72-43.72L159.1 256L41.72 187.7C26.41 178.9 21.17 159.3 29.1 144C36.63 132.5 49.26 126.7 61.65 128.2C65.78 128.7 69.88 130.1 73.72 132.3L192 200.6V64c0-17.67 14.33-32 32-32S256 46.33 256 64v136.6l118.3-68.29c3.838-2.213 7.939-3.539 12.07-4.051C398.7 126.7 411.4 132.5 417.1 144c8.828 15.31 3.594 34.88-11.72 43.72L288 256l118.3 68.28C421.6 333.1 426.8 352.7 417.1 368z"})}),flags:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z"})}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"})})},foods:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9"})}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M481.9 270.1C490.9 279.1 496 291.3 496 304C496 316.7 490.9 328.9 481.9 337.9C472.9 346.9 460.7 352 448 352H64C51.27 352 39.06 346.9 30.06 337.9C21.06 328.9 16 316.7 16 304C16 291.3 21.06 279.1 30.06 270.1C39.06 261.1 51.27 256 64 256H448C460.7 256 472.9 261.1 481.9 270.1zM475.3 388.7C478.3 391.7 480 395.8 480 400V416C480 432.1 473.3 449.3 461.3 461.3C449.3 473.3 432.1 480 416 480H96C79.03 480 62.75 473.3 50.75 461.3C38.74 449.3 32 432.1 32 416V400C32 395.8 33.69 391.7 36.69 388.7C39.69 385.7 43.76 384 48 384H464C468.2 384 472.3 385.7 475.3 388.7zM50.39 220.8C45.93 218.6 42.03 215.5 38.97 211.6C35.91 207.7 33.79 203.2 32.75 198.4C31.71 193.5 31.8 188.5 32.99 183.7C54.98 97.02 146.5 32 256 32C365.5 32 457 97.02 479 183.7C480.2 188.5 480.3 193.5 479.2 198.4C478.2 203.2 476.1 207.7 473 211.6C469.1 215.5 466.1 218.6 461.6 220.8C457.2 222.9 452.3 224 447.3 224H64.67C59.73 224 54.84 222.9 50.39 220.8zM372.7 116.7C369.7 119.7 368 123.8 368 128C368 131.2 368.9 134.3 370.7 136.9C372.5 139.5 374.1 141.6 377.9 142.8C380.8 143.1 384 144.3 387.1 143.7C390.2 143.1 393.1 141.6 395.3 139.3C397.6 137.1 399.1 134.2 399.7 131.1C400.3 128 399.1 124.8 398.8 121.9C397.6 118.1 395.5 116.5 392.9 114.7C390.3 112.9 387.2 111.1 384 111.1C379.8 111.1 375.7 113.7 372.7 116.7V116.7zM244.7 84.69C241.7 87.69 240 91.76 240 96C240 99.16 240.9 102.3 242.7 104.9C244.5 107.5 246.1 109.6 249.9 110.8C252.8 111.1 256 112.3 259.1 111.7C262.2 111.1 265.1 109.6 267.3 107.3C269.6 105.1 271.1 102.2 271.7 99.12C272.3 96.02 271.1 92.8 270.8 89.88C269.6 86.95 267.5 84.45 264.9 82.7C262.3 80.94 259.2 79.1 256 79.1C251.8 79.1 247.7 81.69 244.7 84.69V84.69zM116.7 116.7C113.7 119.7 112 123.8 112 128C112 131.2 112.9 134.3 114.7 136.9C116.5 139.5 118.1 141.6 121.9 142.8C124.8 143.1 128 144.3 131.1 143.7C134.2 143.1 137.1 141.6 139.3 139.3C141.6 137.1 143.1 134.2 143.7 131.1C144.3 128 143.1 124.8 142.8 121.9C141.6 118.1 139.5 116.5 136.9 114.7C134.3 112.9 131.2 111.1 128 111.1C123.8 111.1 119.7 113.7 116.7 116.7L116.7 116.7z"})})},frequent:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M13 4h-2l-.001 7H9v2h2v2h2v-2h4v-2h-4z"}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"})]}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"})})},nature:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8"}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235"})]}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M332.7 19.85C334.6 8.395 344.5 0 356.1 0C363.6 0 370.6 3.52 375.1 9.502L392 32H444.1C456.8 32 469.1 37.06 478.1 46.06L496 64H552C565.3 64 576 74.75 576 88V112C576 156.2 540.2 192 496 192H426.7L421.6 222.5L309.6 158.5L332.7 19.85zM448 64C439.2 64 432 71.16 432 80C432 88.84 439.2 96 448 96C456.8 96 464 88.84 464 80C464 71.16 456.8 64 448 64zM416 256.1V480C416 497.7 401.7 512 384 512H352C334.3 512 320 497.7 320 480V364.8C295.1 377.1 268.8 384 240 384C211.2 384 184 377.1 160 364.8V480C160 497.7 145.7 512 128 512H96C78.33 512 64 497.7 64 480V249.8C35.23 238.9 12.64 214.5 4.836 183.3L.9558 167.8C-3.331 150.6 7.094 133.2 24.24 128.1C41.38 124.7 58.76 135.1 63.05 152.2L66.93 167.8C70.49 182 83.29 191.1 97.97 191.1H303.8L416 256.1z"})})},objects:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z"}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789"})]}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"})})},people:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0"})]}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256 432C332.1 432 396.2 382 415.2 314.1C419.1 300.4 407.8 288 393.6 288H118.4C104.2 288 92.92 300.4 96.76 314.1C115.8 382 179.9 432 256 432V432zM176.4 160C158.7 160 144.4 174.3 144.4 192C144.4 209.7 158.7 224 176.4 224C194 224 208.4 209.7 208.4 192C208.4 174.3 194 160 176.4 160zM336.4 224C354 224 368.4 209.7 368.4 192C368.4 174.3 354 160 336.4 160C318.7 160 304.4 174.3 304.4 192C304.4 209.7 318.7 224 336.4 224z"})})},places:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5"}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z"})]}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M39.61 196.8L74.8 96.29C88.27 57.78 124.6 32 165.4 32H346.6C387.4 32 423.7 57.78 437.2 96.29L472.4 196.8C495.6 206.4 512 229.3 512 256V448C512 465.7 497.7 480 480 480H448C430.3 480 416 465.7 416 448V400H96V448C96 465.7 81.67 480 64 480H32C14.33 480 0 465.7 0 448V256C0 229.3 16.36 206.4 39.61 196.8V196.8zM109.1 192H402.9L376.8 117.4C372.3 104.6 360.2 96 346.6 96H165.4C151.8 96 139.7 104.6 135.2 117.4L109.1 192zM96 256C78.33 256 64 270.3 64 288C64 305.7 78.33 320 96 320C113.7 320 128 305.7 128 288C128 270.3 113.7 256 96 256zM416 320C433.7 320 448 305.7 448 288C448 270.3 433.7 256 416 256C398.3 256 384 270.3 384 288C384 305.7 398.3 320 416 320z"})})},symbols:{outline:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76"})}),solid:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"})})}},search:{loupe:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})}),delete:$bd9dd35321b03dd4$export$34b9dba7ce09269b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"})})}};function $254755d3f438722f$export$2e2bcd8739ae039(e){let{id:t,skin:n,emoji:o}=e;if(e.shortcodes){const o=e.shortcodes.match(pa.SHORTCODES_REGEX);o&&(t=o[1],o[2]&&(n=o[2]))}if(o||(o=pa.get(t||e.native)),!o)return e.fallback;const i=o.skins[n-1]||o.skins[0],r=i.src||("native"==e.set||e.spritesheet?void 0:"function"==typeof e.getImageURL?e.getImageURL(e.set,i.unified):`https://cdn.jsdelivr.net/npm/emoji-datasource-${e.set}@15.0.1/img/${e.set}/64/${i.unified}.png`),a="function"==typeof e.getSpritesheetURL?e.getSpritesheetURL(e.set):`https://cdn.jsdelivr.net/npm/emoji-datasource-${e.set}@15.0.1/img/${e.set}/sheets-256/64.png`;return $bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{class:"emoji-mart-emoji","data-emoji-set":e.set,children:r?$bd9dd35321b03dd4$export$34b9dba7ce09269b("img",{style:{maxWidth:e.size||"1em",maxHeight:e.size||"1em",display:"inline-block"},alt:i.native||i.shortcodes,src:r}):"native"==e.set?$bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{style:{fontSize:e.size,fontFamily:'"EmojiMart", "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "Android Emoji"'},children:i.native}):$bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{style:{display:"block",width:e.size,height:e.size,backgroundImage:`url(${a})`,backgroundSize:`${100*aa.sheet.cols}% ${100*aa.sheet.rows}%`,backgroundPosition:`${100/(aa.sheet.cols-1)*i.x}% ${100/(aa.sheet.rows-1)*i.y}%`}})})}const fa="undefined"!=typeof window&&window.HTMLElement?window.HTMLElement:Object;class $6f57cc9cd54c5aaa$export$2e2bcd8739ae039 extends fa{static get observedAttributes(){return Object.keys(this.Props)}update(e={}){for(let t in e)this.attributeChangedCallback(t,null,e[t])}attributeChangedCallback(e,t,n){if(!this.component)return;const o=$7adb23b0109cc36a$export$88c9ddb45cea7241(e,{[e]:n},this.constructor.Props,this);this.component.componentWillReceiveProps?this.component.componentWillReceiveProps({[e]:o}):(this.component.props[e]=o,this.component.forceUpdate())}disconnectedCallback(){this.disconnected=!0,this.component&&this.component.unregister&&this.component.unregister()}constructor(e={}){if(super(),this.props=e,e.parent||e.ref){let t=null;const n=e.parent||(t=e.ref&&e.ref.current);t&&(t.innerHTML=""),n&&n.appendChild(this)}}}class $26f27c338a96b1a6$export$2e2bcd8739ae039 extends $6f57cc9cd54c5aaa$export$2e2bcd8739ae039{setShadow(){this.attachShadow({mode:"open"})}injectStyles(e){if(!e)return;const t=document.createElement("style");t.textContent=e,this.shadowRoot.insertBefore(t,this.shadowRoot.firstChild)}constructor(e,{styles:t}={}){super(e),this.setShadow(),this.injectStyles(t)}}var ba={fallback:"",id:"",native:"",shortcodes:"",size:{value:"",transform:e=>/\D/.test(e)?e:`${e}px`},set:ia.set,skin:ia.skin};class $331b4160623139bf$export$2e2bcd8739ae039 extends $6f57cc9cd54c5aaa$export$2e2bcd8739ae039{async connectedCallback(){const e=$7adb23b0109cc36a$export$75fe5f91d452f94b(this.props,ba,this);e.element=this,e.ref=e=>{this.component=e},await $7adb23b0109cc36a$export$2cd8252107eb640b(),this.disconnected||$fb96b826c0c5f37a$export$b3890eb0ae9dca99($bd9dd35321b03dd4$export$34b9dba7ce09269b($254755d3f438722f$export$2e2bcd8739ae039,{...e}),this)}constructor(e){super(e)}}$c770c458706daa72$export$2e2bcd8739ae039($331b4160623139bf$export$2e2bcd8739ae039,"Props",ba),"undefined"==typeof customElements||customElements.get("em-emoji")||customElements.define("em-emoji",$331b4160623139bf$export$2e2bcd8739ae039);var ga,va=[],xa=Br.__b,ya=Br.__r,wa=Br.diffed,ka=Br.__c,$a=Br.unmount;function $1a9a8ef576b7773d$var$x(){var e;for(va.sort((function(e,t){return e.__v.__b-t.__v.__b}));e=va.pop();)if(e.__P)try{e.__H.__h.forEach($1a9a8ef576b7773d$var$g),e.__H.__h.forEach($1a9a8ef576b7773d$var$j),e.__H.__h=[]}catch(t){e.__H.__h=[],Br.__e(t,e.__v)}}Br.__b=function(e){xa&&xa(e)},Br.__r=function(e){ya&&ya(e);var t=e.__c.__H;t&&(t.__h.forEach($1a9a8ef576b7773d$var$g),t.__h.forEach($1a9a8ef576b7773d$var$j),t.__h=[])},Br.diffed=function(e){wa&&wa(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==va.push(t)&&ga===Br.requestAnimationFrame||((ga=Br.requestAnimationFrame)||function(e){var t,u5=function(){clearTimeout(n),_a&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(u5,100);_a&&(t=requestAnimationFrame(u5))})($1a9a8ef576b7773d$var$x))},Br.__c=function(e,t){t.some((function(e){try{e.__h.forEach($1a9a8ef576b7773d$var$g),e.__h=e.__h.filter((function(e){return!e.__||$1a9a8ef576b7773d$var$j(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Br.__e(n,e.__v)}})),ka&&ka(e,t)},Br.unmount=function(e){$a&&$a(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{$1a9a8ef576b7773d$var$g(e)}catch(n){t=n}})),t&&Br.__e(t,n.__v))};var _a="function"==typeof requestAnimationFrame;function $1a9a8ef576b7773d$var$g(e){var t=e.__c;"function"==typeof t&&(e.__c=void 0,t())}function $1a9a8ef576b7773d$var$j(e){e.__c=e.__()}function $dc040a17866866fa$var$C(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var o in t)if("__source"!==o&&e[o]!==t[o])return!0;return!1}function $dc040a17866866fa$export$221d75b3f55bb0bd(e){this.props=e}($dc040a17866866fa$export$221d75b3f55bb0bd.prototype=new $fb96b826c0c5f37a$export$16fa2f45be04daa8).isPureReactComponent=!0,$dc040a17866866fa$export$221d75b3f55bb0bd.prototype.shouldComponentUpdate=function(e,t){return $dc040a17866866fa$var$C(this.props,e)||$dc040a17866866fa$var$C(this.state,t)};var Ca=Br.__b;Br.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ca&&Ca(e)};var Ia=Br.__e;Br.__e=function(e,t,n){if(e.then)for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t);Ia(e,t,n)};var Sa=Br.unmount;function $dc040a17866866fa$export$74bf444e3cd11ea5(){this.__u=0,this.t=null,this.__b=null}function $dc040a17866866fa$var$U(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function $dc040a17866866fa$export$998bcd577473dd93(){this.u=null,this.o=null}Br.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Sa&&Sa(e)},($dc040a17866866fa$export$74bf444e3cd11ea5.prototype=new $fb96b826c0c5f37a$export$16fa2f45be04daa8).__c=function(e,t){var n=t.__c,o=this;null==o.t&&(o.t=[]),o.t.push(n);var i=$dc040a17866866fa$var$U(o.__v),r=!1,i1=function(){r||(r=!0,n.__R=null,i?i(l1):l1())};n.__R=i1;var l1=function(){if(! --o.__u){if(o.state.__e){var e=o.state.__e;o.__v.__k[0]=function n22(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return n22(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}(e,e.__c.__P,e.__c.__O)}var t;for(o.setState({__e:o.__b=null});t=o.t.pop();)t.forceUpdate()}},a=!0===t.__h;o.__u++||a||o.setState({__e:o.__b=o.__v.__k[0]}),e.then(i1,i1)},$dc040a17866866fa$export$74bf444e3cd11ea5.prototype.componentWillUnmount=function(){this.t=[]},$dc040a17866866fa$export$74bf444e3cd11ea5.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=function n24(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=function $dc040a17866866fa$var$S(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return n24(e,t,n)}))),e}(this.__b,n,o.__O=o.__P)}this.__b=null}var i=t.__e&&$fb96b826c0c5f37a$export$c8a8987d4410bf2d($fb96b826c0c5f37a$export$ffb0004e005737fa,null,e.fallback);return i&&(i.__h=null),[$fb96b826c0c5f37a$export$c8a8987d4410bf2d($fb96b826c0c5f37a$export$ffb0004e005737fa,null,t.__e?null:e.children),i]};var $dc040a17866866fa$var$T=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};($dc040a17866866fa$export$998bcd577473dd93.prototype=new $fb96b826c0c5f37a$export$16fa2f45be04daa8).__e=function(e){var t=this,n=$dc040a17866866fa$var$U(t.__v),o=t.o.get(e);return o[0]++,function(i){var o2=function(){t.props.revealOrder?(o.push(i),$dc040a17866866fa$var$T(t,e,o)):i()};n?n(o2):o2()}},$dc040a17866866fa$export$998bcd577473dd93.prototype.render=function(e){this.u=null,this.o=new Map;var t=$fb96b826c0c5f37a$export$47e4c5b300681277(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},$dc040a17866866fa$export$998bcd577473dd93.prototype.componentDidUpdate=$dc040a17866866fa$export$998bcd577473dd93.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){$dc040a17866866fa$var$T(e,n,t)}))};var Ma="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Da=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Pa="undefined"!=typeof document;$fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty($fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var za=Br.event;function $dc040a17866866fa$var$Z(){}function $dc040a17866866fa$var$Y(){return this.cancelBubble}function $dc040a17866866fa$var$q(){return this.defaultPrevented}Br.event=function(e){return za&&(e=za(e)),e.persist=$dc040a17866866fa$var$Z,e.isPropagationStopped=$dc040a17866866fa$var$Y,e.isDefaultPrevented=$dc040a17866866fa$var$q,e.nativeEvent=e};var Ea={configurable:!0,get:function(){return this.class}},Ta=Br.vnode;Br.vnode=function(e){var t,n=e.type,o=e.props,i=o;if("string"==typeof n){var r=-1===n.indexOf("-");for(var a in i={},o){var s=o[a];Pa&&"children"===a&&"noscript"===n||"value"===a&&"defaultValue"in o&&null==s||("defaultValue"===a&&"value"in o&&null==o.value?a="value":"download"===a&&!0===s?s="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+n)&&(t=o.type,!("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t))?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(a)?a=a.toLowerCase():r&&Da.test(a)?a=a.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===s&&(s=void 0),i[a]=s)}"select"==n&&i.multiple&&Array.isArray(i.value)&&(i.value=$fb96b826c0c5f37a$export$47e4c5b300681277(o.children).forEach((function(e){e.props.selected=-1!=i.value.indexOf(e.props.value)}))),"select"==n&&null!=i.defaultValue&&(i.value=$fb96b826c0c5f37a$export$47e4c5b300681277(o.children).forEach((function(e){e.props.selected=i.multiple?-1!=i.defaultValue.indexOf(e.props.value):i.defaultValue==e.props.value}))),e.props=i,o.class!=o.className&&(Ea.enumerable="className"in o,null!=o.className&&(i.class=o.className),Object.defineProperty(i,"className",Ea))}e.$$typeof=Ma,Ta&&Ta(e)};var Ra=Br.__r;Br.__r=function(e){Ra&&Ra(e),e.__c};const La={light:"outline",dark:"solid"};class $ec8c39fdad15601a$export$2e2bcd8739ae039 extends $dc040a17866866fa$export$221d75b3f55bb0bd{renderIcon(e){const{icon:t}=e;if(t){if(t.svg)return $bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{class:"flex",dangerouslySetInnerHTML:{__html:t.svg}});if(t.src)return $bd9dd35321b03dd4$export$34b9dba7ce09269b("img",{src:t.src})}const n=ma.categories[e.id]||ma.categories.custom;return n["auto"==this.props.icons?La[this.props.theme]:this.props.icons]||n}render(){let e=null;return $bd9dd35321b03dd4$export$34b9dba7ce09269b("nav",{id:"nav",class:"padding","data-position":this.props.position,dir:this.props.dir,children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"flex relative",children:[this.categories.map(((t,n)=>{const o=t.name||ra.categories[t.id],i=!this.props.unfocused&&t.id==this.state.categoryId;return i&&(e=n),$bd9dd35321b03dd4$export$34b9dba7ce09269b("button",{"aria-label":o,"aria-selected":i||void 0,title:o,type:"button",class:"flex flex-grow flex-center",onMouseDown:e=>e.preventDefault(),onClick:()=>{this.props.onClick({category:t,i:n})},children:this.renderIcon(t)})})),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"bar",style:{width:100/this.categories.length+"%",opacity:null==e?0:1,transform:"rtl"===this.props.dir?`scaleX(-1) translateX(${100*e}%)`:`translateX(${100*e}%)`}})]})})}constructor(){super(),this.categories=aa.categories.filter((e=>!e.target)),this.state={categoryId:this.categories[0].id}}}class $e0d4dda61265ff1e$export$2e2bcd8739ae039 extends $dc040a17866866fa$export$221d75b3f55bb0bd{shouldComponentUpdate(e){for(let t in e)if("children"!=t&&e[t]!=this.props[t])return!0;return!1}render(){return this.props.children}}const Aa=10;class $89bd6bb200cc8fef$export$2e2bcd8739ae039 extends $fb96b826c0c5f37a$export$16fa2f45be04daa8{getInitialState(e=this.props){return{skin:Zr.get("skin")||e.skin,theme:this.initTheme(e.theme)}}componentWillMount(){this.dir=ra.rtl?"rtl":"ltr",this.refs={menu:{current:null},navigation:{current:null},scroll:{current:null},search:{current:null},searchInput:{current:null},skinToneButton:{current:null},skinToneRadio:{current:null}},this.initGrid(),0==this.props.stickySearch&&"sticky"==this.props.searchPosition&&(console.warn("[EmojiMart] Deprecation warning: `stickySearch` has been renamed `searchPosition`."),this.props.searchPosition="static")}componentDidMount(){if(this.register(),this.shadowRoot=this.base.parentNode,this.props.autoFocus){const{searchInput:e}=this.refs;e.current&&e.current.focus()}}componentWillReceiveProps(e){this.nextState||(this.nextState={});for(const t in e)this.nextState[t]=e[t];clearTimeout(this.nextStateTimer),this.nextStateTimer=setTimeout((()=>{let e=!1;for(const n in this.nextState)this.props[n]=this.nextState[n],"custom"!==n&&"categories"!==n||(e=!0);delete this.nextState;const t=this.getInitialState();if(e)return this.reset(t);this.setState(t)}))}componentWillUnmount(){this.unregister()}async reset(e={}){await $7adb23b0109cc36a$export$2cd8252107eb640b(this.props),this.initGrid(),this.unobserve(),this.setState(e,(()=>{this.observeCategories(),this.observeRows()}))}register(){document.addEventListener("click",this.handleClickOutside),this.observe()}unregister(){document.removeEventListener("click",this.handleClickOutside),this.darkMedia?.removeEventListener("change",this.darkMediaCallback),this.unobserve()}observe(){this.observeCategories(),this.observeRows()}unobserve({except:e=[]}={}){Array.isArray(e)||(e=[e]);for(const t of this.observers)e.includes(t)||t.disconnect();this.observers=[].concat(e)}initGrid(){const{categories:e}=aa;this.refs.categories=new Map;const t=aa.categories.map((e=>e.id)).join(",");this.navKey&&this.navKey!=t&&this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0),this.navKey=t,this.grid=[],this.grid.setsize=0;const addRow=(e,t)=>{const n=[];n.__categoryId=t.id,n.__index=e.length,this.grid.push(n);const o=this.grid.length-1,i=o%Aa?{}:{current:null};return i.index=o,i.posinset=this.grid.setsize+1,e.push(i),n};for(let n of e){const e=[];let t=addRow(e,n);for(let o of n.emojis)t.length==this.getPerLine()&&(t=addRow(e,n)),this.grid.setsize+=1,t.push(o);this.refs.categories.set(n.id,{root:{current:null},rows:e})}}initTheme(e){if("auto"!=e)return e;if(!this.darkMedia){if(this.darkMedia=matchMedia("(prefers-color-scheme: dark)"),this.darkMedia.media.match(/^not/))return"light";this.darkMedia.addEventListener("change",this.darkMediaCallback)}return this.darkMedia.matches?"dark":"light"}initDynamicPerLine(e=this.props){if(!e.dynamicWidth)return;const{element:t,emojiButtonSize:n}=e,calculatePerLine=()=>{const{width:e}=t.getBoundingClientRect();return Math.floor(e/n)},o=new ResizeObserver((()=>{this.unobserve({except:o}),this.setState({perLine:calculatePerLine()},(()=>{this.initGrid(),this.forceUpdate((()=>{this.observeCategories(),this.observeRows()}))}))}));return o.observe(t),this.observers.push(o),calculatePerLine()}getPerLine(){return this.state.perLine||this.props.perLine}getEmojiByPos([e,t]){const n=this.state.searchResults||this.grid,o=n[e]&&n[e][t];if(o)return pa.get(o)}observeCategories(){const e=this.refs.navigation.current;if(!e)return;const t=new Map,n={root:this.refs.scroll.current,threshold:[0,1]},o=new IntersectionObserver((n=>{for(const e of n){const n=e.target.dataset.id;t.set(n,e.intersectionRatio)}const o=[...t];for(const[t,r]of o)if(r){(i=t)!=e.state.categoryId&&e.setState({categoryId:i});break}var i}),n);for(const{root:i}of this.refs.categories.values())o.observe(i.current);this.observers.push(o)}observeRows(){const e={...this.state.visibleRows},t=new IntersectionObserver((t=>{for(const n of t){const t=parseInt(n.target.dataset.index);n.isIntersecting?e[t]=!0:delete e[t]}this.setState({visibleRows:e})}),{root:this.refs.scroll.current,rootMargin:`${this.props.emojiButtonSize*(Aa+5)}px 0px ${this.props.emojiButtonSize*Aa}px`});for(const{rows:n}of this.refs.categories.values())for(const e of n)e.current&&t.observe(e.current);this.observers.push(t)}preventDefault(e){e.preventDefault()}unfocusSearch(){const e=this.refs.searchInput.current;e&&e.blur()}navigate({e:e,input:t,left:n,right:o,up:i,down:r}){const a=this.state.searchResults||this.grid;if(!a.length)return;let[s,c]=this.state.pos;const l=(()=>{if(0==s&&0==c&&!e.repeat&&(n||i))return null;if(-1==s)return e.repeat||!o&&!r||t.selectionStart!=t.value.length?null:[0,0];if(n||o){let e=a[s];const t=n?-1:1;if(c+=t,!e[c]){if(s+=t,e=a[s],!e)return s=n?0:a.length-1,c=n?0:a[s].length-1,[s,c];c=n?e.length-1:0}return[s,c]}if(i||r){s+=i?-1:1;const e=a[s];return e?(e[c]||(c=e.length-1),[s,c]):(s=i?0:a.length-1,c=i?0:a[s].length-1,[s,c])}})();l?(e.preventDefault(),this.setState({pos:l,keyboard:!0},(()=>{this.scrollTo({row:l[0]})}))):this.state.pos[0]>-1&&this.setState({pos:[-1,-1]})}scrollTo({categoryId:e,row:t}){const n=this.state.searchResults||this.grid;if(!n.length)return;const o=this.refs.scroll.current,i=o.getBoundingClientRect();let r=0;if(t>=0&&(e=n[t].__categoryId),e){r=(this.refs[e]||this.refs.categories.get(e).root).current.getBoundingClientRect().top-(i.top-o.scrollTop)+1}if(t>=0)if(t){const e=r+n[t].__index*this.props.emojiButtonSize,a=e+this.props.emojiButtonSize+.88*this.props.emojiButtonSize;if(e<o.scrollTop)r=e;else{if(!(a>o.scrollTop+i.height))return;r=a-i.height}}else r=0;this.ignoreMouse(),o.scrollTop=r}ignoreMouse(){this.mouseIsIgnored=!0,clearTimeout(this.ignoreMouseTimer),this.ignoreMouseTimer=setTimeout((()=>{delete this.mouseIsIgnored}),100)}handleEmojiOver(e){this.mouseIsIgnored||this.state.showSkins||this.setState({pos:e||[-1,-1],keyboard:!1})}handleEmojiClick({e:e,emoji:t,pos:n}){if(this.props.onEmojiSelect&&(!t&&n&&(t=this.getEmojiByPos(n)),t)){const n=function $693b183b0a78708f$export$d10ac59fbe52a745(e,{skinIndex:t=0}={}){const n=e.skins[t]||(t=0,e.skins[t]),o={id:e.id,name:e.name,native:n.native,unified:n.unified,keywords:e.keywords,shortcodes:n.shortcodes||e.shortcodes};return e.skins.length>1&&(o.skin=t+1),n.src&&(o.src=n.src),e.aliases&&e.aliases.length&&(o.aliases=e.aliases),e.emoticons&&e.emoticons.length&&(o.emoticons=e.emoticons),o}(t,{skinIndex:this.state.skin-1});this.props.maxFrequentRows&&oa.add(n,this.props),this.props.onEmojiSelect(n,e)}}closeSkins(){this.state.showSkins&&(this.setState({showSkins:null,tempSkin:null}),this.base.removeEventListener("click",this.handleBaseClick),this.base.removeEventListener("keydown",this.handleBaseKeydown))}handleSkinMouseOver(e){this.setState({tempSkin:e})}handleSkinClick(e){this.ignoreMouse(),this.closeSkins(),this.setState({skin:e,tempSkin:null}),Zr.set("skin",e)}renderNav(){return $bd9dd35321b03dd4$export$34b9dba7ce09269b($ec8c39fdad15601a$export$2e2bcd8739ae039,{ref:this.refs.navigation,icons:this.props.icons,theme:this.state.theme,dir:this.dir,unfocused:!!this.state.searchResults,position:this.props.navPosition,onClick:this.handleCategoryClick},this.navKey)}renderPreview(){const e=this.getEmojiByPos(this.state.pos),t=this.state.searchResults&&!this.state.searchResults.length;return $bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{id:"preview",class:"flex flex-middle",dir:this.dir,"data-position":this.props.previewPosition,children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"flex flex-middle flex-grow",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"flex flex-auto flex-middle flex-center",style:{height:this.props.emojiButtonSize,fontSize:this.props.emojiButtonSize},children:$bd9dd35321b03dd4$export$34b9dba7ce09269b($254755d3f438722f$export$2e2bcd8739ae039,{emoji:e,id:t?this.props.noResultsEmoji||"cry":this.props.previewEmoji||("top"==this.props.previewPosition?"point_down":"point_up"),set:this.props.set,size:this.props.emojiButtonSize,skin:this.state.tempSkin||this.state.skin,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:`margin-${this.dir[0]}`,children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",e||t?{class:`padding-${this.dir[2]} align-${this.dir[0]}`,children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"preview-title ellipsis",children:e?e.name:ra.search_no_results_1}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"preview-subtitle ellipsis color-c",children:e?e.skins[0].shortcodes:ra.search_no_results_2})]}:{class:"preview-placeholder color-c",children:ra.pick})})]}),!e&&"preview"==this.props.skinTonePosition&&this.renderSkinToneButton()]})}renderEmojiButton(e,{pos:t,posinset:n,grid:o}){const i=this.props.emojiButtonSize,r=this.state.tempSkin||this.state.skin,a=(e.skins[r-1]||e.skins[0]).native,s=function $693b183b0a78708f$export$9cb4719e2e525b7a(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,n)=>e==t[n]))}(this.state.pos,t),c=t.concat(e.id).join("");return $bd9dd35321b03dd4$export$34b9dba7ce09269b($e0d4dda61265ff1e$export$2e2bcd8739ae039,{selected:s,skin:r,size:i,children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("button",{"aria-label":a,"aria-selected":s||void 0,"aria-posinset":n,"aria-setsize":o.setsize,"data-keyboard":this.state.keyboard,title:"none"==this.props.previewPosition?e.name:void 0,type:"button",class:"flex flex-center flex-middle",tabindex:"-1",onClick:t=>this.handleEmojiClick({e:t,emoji:e}),onMouseEnter:()=>this.handleEmojiOver(t),onMouseLeave:()=>this.handleEmojiOver(),style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize,fontSize:this.props.emojiSize,lineHeight:0},children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{"aria-hidden":"true",class:"background",style:{borderRadius:this.props.emojiButtonRadius,backgroundColor:this.props.emojiButtonColors?this.props.emojiButtonColors[(n-1)%this.props.emojiButtonColors.length]:void 0}}),$bd9dd35321b03dd4$export$34b9dba7ce09269b($254755d3f438722f$export$2e2bcd8739ae039,{emoji:e,set:this.props.set,size:this.props.emojiSize,skin:r,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})]})},c)}renderSearch(){const e="none"==this.props.previewPosition||"search"==this.props.skinTonePosition;return $bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"spacer"}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"flex flex-middle",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"search relative flex-grow",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("input",{type:"search",ref:this.refs.searchInput,placeholder:ra.search,onClick:this.handleSearchClick,onInput:this.handleSearchInput,onKeyDown:this.handleSearchKeyDown,autoComplete:"off"}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{class:"icon loupe flex",children:ma.search.loupe}),this.state.searchResults&&$bd9dd35321b03dd4$export$34b9dba7ce09269b("button",{title:"Clear","aria-label":"Clear",type:"button",class:"icon delete flex",onClick:this.clearSearch,onMouseDown:this.preventDefault,children:ma.search.delete})]}),e&&this.renderSkinToneButton()]})]})}renderSearchResults(){const{searchResults:e}=this.state;return e?$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"category",ref:this.refs.search,children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:`sticky padding-small align-${this.dir[0]}`,children:ra.categories.search}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{children:e.length?e.map(((t,n)=>$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"flex",children:t.map(((t,o)=>this.renderEmojiButton(t,{pos:[n,o],posinset:n*this.props.perLine+o+1,grid:e})))}))):$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:`padding-small align-${this.dir[0]}`,children:this.props.onAddCustomEmoji&&$bd9dd35321b03dd4$export$34b9dba7ce09269b("a",{onClick:this.props.onAddCustomEmoji,children:ra.add_custom})})})]}):null}renderCategories(){const{categories:e}=aa,t=!!this.state.searchResults,n=this.getPerLine();return $bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{style:{visibility:t?"hidden":void 0,display:t?"none":void 0,height:"100%"},children:e.map((e=>{const{root:t,rows:o}=this.refs.categories.get(e.id);return $bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{"data-id":e.target?e.target.id:e.id,class:"category",ref:t,children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:`sticky padding-small align-${this.dir[0]}`,children:e.name||ra.categories[e.id]}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"relative",style:{height:o.length*this.props.emojiButtonSize},children:o.map(((t,o)=>{const i=t.index-t.index%Aa,r=this.state.visibleRows[i],a="current"in t?t:void 0;if(!r&&!a)return null;const s=o*n,c=s+n,l=e.emojis.slice(s,c);return l.length<n&&l.push(...new Array(n-l.length)),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{"data-index":t.index,ref:a,class:"flex row",style:{top:o*this.props.emojiButtonSize},children:r&&l.map(((e,n)=>{if(!e)return $bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize}});const o=pa.get(e);return this.renderEmojiButton(o,{pos:[t.index,n],posinset:t.posinset+n,grid:this.grid})}))},t.index)}))})]})}))})}renderSkinToneButton(){return"none"==this.props.skinTonePosition?null:$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"flex flex-auto flex-center flex-middle",style:{position:"relative",width:this.props.emojiButtonSize,height:this.props.emojiButtonSize},children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("button",{type:"button",ref:this.refs.skinToneButton,class:"skin-tone-button flex flex-auto flex-center flex-middle","aria-selected":this.state.showSkins?"":void 0,"aria-label":ra.skins.choose,title:ra.skins.choose,onClick:this.openSkins,style:{width:this.props.emojiSize,height:this.props.emojiSize},children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{class:`skin-tone skin-tone-${this.state.skin}`})})})}renderLiveRegion(){const e=this.getEmojiByPos(this.state.pos);return $bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{"aria-live":"polite",class:"sr-only",children:e?e.name:""})}renderSkins(){const e=this.refs.skinToneButton.current.getBoundingClientRect(),t=this.base.getBoundingClientRect(),n={};return"ltr"==this.dir?n.right=t.right-e.right-3:n.left=e.left-t.left-3,"bottom"==this.props.previewPosition&&"preview"==this.props.skinTonePosition?n.bottom=t.bottom-e.top+6:(n.top=e.bottom-t.top+3,n.bottom="auto"),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{ref:this.refs.menu,role:"radiogroup",dir:this.dir,"aria-label":ra.skins.choose,class:"menu hidden","data-position":n.top?"top":"bottom",style:n,children:[...Array(6).keys()].map((e=>{const t=e+1,n=this.state.skin==t;return $bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("input",{type:"radio",name:"skin-tone",value:t,"aria-label":ra.skins[t],ref:n?this.refs.skinToneRadio:null,defaultChecked:n,onChange:()=>this.handleSkinMouseOver(t),onKeyDown:e=>{"Enter"!=e.code&&"Space"!=e.code&&"Tab"!=e.code||(e.preventDefault(),this.handleSkinClick(t))}}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("button",{"aria-hidden":"true",tabindex:"-1",onClick:()=>this.handleSkinClick(t),onMouseEnter:()=>this.handleSkinMouseOver(t),onMouseLeave:()=>this.handleSkinMouseOver(),class:"option flex flex-grow flex-middle",children:[$bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{class:`skin-tone skin-tone-${t}`}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("span",{class:"margin-small-lr",children:ra.skins[t]})]})]})}))})}render(){const e=this.props.perLine*this.props.emojiButtonSize;return $bd9dd35321b03dd4$export$34b9dba7ce09269b("section",{id:"root",class:"flex flex-column",dir:this.dir,style:{width:this.props.dynamicWidth?"100%":`calc(${e}px + (var(--padding) + var(--sidebar-width)))`},"data-emoji-set":this.props.set,"data-theme":this.state.theme,"data-menu":this.state.showSkins?"":void 0,children:["top"==this.props.previewPosition&&this.renderPreview(),"top"==this.props.navPosition&&this.renderNav(),"sticky"==this.props.searchPosition&&$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{class:"padding-lr",children:this.renderSearch()}),$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{ref:this.refs.scroll,class:"scroll flex-grow padding-lr",children:$bd9dd35321b03dd4$export$34b9dba7ce09269b("div",{style:{width:this.props.dynamicWidth?"100%":e,height:"100%"},children:["static"==this.props.searchPosition&&this.renderSearch(),this.renderSearchResults(),this.renderCategories()]})}),"bottom"==this.props.navPosition&&this.renderNav(),"bottom"==this.props.previewPosition&&this.renderPreview(),this.state.showSkins&&this.renderSkins(),this.renderLiveRegion()]})}constructor(e){super(),$c770c458706daa72$export$2e2bcd8739ae039(this,"darkMediaCallback",(()=>{"auto"==this.props.theme&&this.setState({theme:this.darkMedia.matches?"dark":"light"})})),$c770c458706daa72$export$2e2bcd8739ae039(this,"handleClickOutside",(e=>{const{element:t}=this.props;e.target!=t&&(this.state.showSkins&&this.closeSkins(),this.props.onClickOutside&&this.props.onClickOutside(e))})),$c770c458706daa72$export$2e2bcd8739ae039(this,"handleBaseClick",(e=>{this.state.showSkins&&(e.target.closest(".menu")||(e.preventDefault(),e.stopImmediatePropagation(),this.closeSkins()))})),$c770c458706daa72$export$2e2bcd8739ae039(this,"handleBaseKeydown",(e=>{this.state.showSkins&&"Escape"==e.key&&(e.preventDefault(),e.stopImmediatePropagation(),this.closeSkins())})),$c770c458706daa72$export$2e2bcd8739ae039(this,"handleSearchClick",(()=>{this.getEmojiByPos(this.state.pos)&&this.setState({pos:[-1,-1]})})),$c770c458706daa72$export$2e2bcd8739ae039(this,"handleSearchInput",(async()=>{const e=this.refs.searchInput.current;if(!e)return;const{value:t}=e,n=await pa.search(t),afterRender=()=>{this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0)};if(!n)return this.setState({searchResults:n,pos:[-1,-1]},afterRender);const o=e.selectionStart==e.value.length?[0,0]:[-1,-1],i=[];i.setsize=n.length;let r=null;for(let a of n)i.length&&r.length!=this.getPerLine()||(r=[],r.__categoryId="search",r.__index=i.length,i.push(r)),r.push(a);this.ignoreMouse(),this.setState({searchResults:i,pos:o},afterRender)})),$c770c458706daa72$export$2e2bcd8739ae039(this,"handleSearchKeyDown",(e=>{const t=e.currentTarget;switch(e.stopImmediatePropagation(),e.key){case"ArrowLeft":this.navigate({e:e,input:t,left:!0});break;case"ArrowRight":this.navigate({e:e,input:t,right:!0});break;case"ArrowUp":this.navigate({e:e,input:t,up:!0});break;case"ArrowDown":this.navigate({e:e,input:t,down:!0});break;case"Enter":e.preventDefault(),this.handleEmojiClick({e:e,pos:this.state.pos});break;case"Escape":e.preventDefault(),this.state.searchResults?this.clearSearch():this.unfocusSearch()}})),$c770c458706daa72$export$2e2bcd8739ae039(this,"clearSearch",(()=>{const e=this.refs.searchInput.current;e&&(e.value="",e.focus(),this.handleSearchInput())})),$c770c458706daa72$export$2e2bcd8739ae039(this,"handleCategoryClick",(({category:e,i:t})=>{this.scrollTo(0==t?{row:-1}:{categoryId:e.id})})),$c770c458706daa72$export$2e2bcd8739ae039(this,"openSkins",(e=>{const{currentTarget:t}=e,n=t.getBoundingClientRect();this.setState({showSkins:n},(async()=>{await async function $693b183b0a78708f$export$e772c8ff12451969(e=1){for(let t in[...Array(e).keys()])await new Promise(requestAnimationFrame)}(2);const e=this.refs.menu.current;e&&(e.classList.remove("hidden"),this.refs.skinToneRadio.current.focus(),this.base.addEventListener("click",this.handleBaseClick,!0),this.base.addEventListener("keydown",this.handleBaseKeydown,!0))}))})),this.observers=[],this.state={pos:[-1,-1],perLine:this.initDynamicPerLine(e),visibleRows:{0:!0},...this.getInitialState(e)}}}class $efa000751917694d$export$2e2bcd8739ae039 extends $26f27c338a96b1a6$export$2e2bcd8739ae039{async connectedCallback(){const e=$7adb23b0109cc36a$export$75fe5f91d452f94b(this.props,ia,this);e.element=this,e.ref=e=>{this.component=e},await $7adb23b0109cc36a$export$2cd8252107eb640b(e),this.disconnected||$fb96b826c0c5f37a$export$b3890eb0ae9dca99($bd9dd35321b03dd4$export$34b9dba7ce09269b($89bd6bb200cc8fef$export$2e2bcd8739ae039,{...e}),this.shadowRoot)}constructor(e){super(e,{styles:$parcel$interopDefault(ja)})}}$c770c458706daa72$export$2e2bcd8739ae039($efa000751917694d$export$2e2bcd8739ae039,"Props",ia),"undefined"==typeof customElements||customElements.get("em-emoji-picker")||customElements.define("em-emoji-picker",$efa000751917694d$export$2e2bcd8739ae039);var ja={};ja=':host {\n  width: min-content;\n  height: 435px;\n  min-height: 230px;\n  border-radius: var(--border-radius);\n  box-shadow: var(--shadow);\n  --border-radius: 10px;\n  --category-icon-size: 18px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;\n  --font-size: 15px;\n  --preview-placeholder-size: 21px;\n  --preview-title-size: 1.1em;\n  --preview-subtitle-size: .9em;\n  --shadow-color: 0deg 0% 0%;\n  --shadow: .3px .5px 2.7px hsl(var(--shadow-color) / .14), .4px .8px 1px -3.2px hsl(var(--shadow-color) / .14), 1px 2px 2.5px -4.5px hsl(var(--shadow-color) / .14);\n  display: flex;\n}\n\n[data-theme="light"] {\n  --em-rgb-color: var(--rgb-color, 34, 36, 39);\n  --em-rgb-accent: var(--rgb-accent, 34, 102, 237);\n  --em-rgb-background: var(--rgb-background, 255, 255, 255);\n  --em-rgb-input: var(--rgb-input, 255, 255, 255);\n  --em-color-border: var(--color-border, rgba(0, 0, 0, .05));\n  --em-color-border-over: var(--color-border-over, rgba(0, 0, 0, .1));\n}\n\n[data-theme="dark"] {\n  --em-rgb-color: var(--rgb-color, 222, 222, 221);\n  --em-rgb-accent: var(--rgb-accent, 58, 130, 247);\n  --em-rgb-background: var(--rgb-background, 21, 22, 23);\n  --em-rgb-input: var(--rgb-input, 0, 0, 0);\n  --em-color-border: var(--color-border, rgba(255, 255, 255, .1));\n  --em-color-border-over: var(--color-border-over, rgba(255, 255, 255, .2));\n}\n\n#root {\n  --color-a: rgb(var(--em-rgb-color));\n  --color-b: rgba(var(--em-rgb-color), .65);\n  --color-c: rgba(var(--em-rgb-color), .45);\n  --padding: 12px;\n  --padding-small: calc(var(--padding) / 2);\n  --sidebar-width: 16px;\n  --duration: 225ms;\n  --duration-fast: 125ms;\n  --duration-instant: 50ms;\n  --easing: cubic-bezier(.4, 0, .2, 1);\n  width: 100%;\n  text-align: left;\n  border-radius: var(--border-radius);\n  background-color: rgb(var(--em-rgb-background));\n  position: relative;\n}\n\n@media (prefers-reduced-motion) {\n  #root {\n    --duration: 0;\n    --duration-fast: 0;\n    --duration-instant: 0;\n  }\n}\n\n#root[data-menu] button {\n  cursor: auto;\n}\n\n#root[data-menu] .menu button {\n  cursor: pointer;\n}\n\n:host, #root, input, button {\n  color: rgb(var(--em-rgb-color));\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  line-height: normal;\n}\n\n*, :before, :after {\n  box-sizing: border-box;\n  min-width: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.relative {\n  position: relative;\n}\n\n.flex {\n  display: flex;\n}\n\n.flex-auto {\n  flex: none;\n}\n\n.flex-center {\n  justify-content: center;\n}\n\n.flex-column {\n  flex-direction: column;\n}\n\n.flex-grow {\n  flex: auto;\n}\n\n.flex-middle {\n  align-items: center;\n}\n\n.flex-wrap {\n  flex-wrap: wrap;\n}\n\n.padding {\n  padding: var(--padding);\n}\n\n.padding-t {\n  padding-top: var(--padding);\n}\n\n.padding-lr {\n  padding-left: var(--padding);\n  padding-right: var(--padding);\n}\n\n.padding-r {\n  padding-right: var(--padding);\n}\n\n.padding-small {\n  padding: var(--padding-small);\n}\n\n.padding-small-b {\n  padding-bottom: var(--padding-small);\n}\n\n.padding-small-lr {\n  padding-left: var(--padding-small);\n  padding-right: var(--padding-small);\n}\n\n.margin {\n  margin: var(--padding);\n}\n\n.margin-r {\n  margin-right: var(--padding);\n}\n\n.margin-l {\n  margin-left: var(--padding);\n}\n\n.margin-small-l {\n  margin-left: var(--padding-small);\n}\n\n.margin-small-lr {\n  margin-left: var(--padding-small);\n  margin-right: var(--padding-small);\n}\n\n.align-l {\n  text-align: left;\n}\n\n.align-r {\n  text-align: right;\n}\n\n.color-a {\n  color: var(--color-a);\n}\n\n.color-b {\n  color: var(--color-b);\n}\n\n.color-c {\n  color: var(--color-c);\n}\n\n.ellipsis {\n  white-space: nowrap;\n  max-width: 100%;\n  width: auto;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.sr-only {\n  width: 1px;\n  height: 1px;\n  position: absolute;\n  top: auto;\n  left: -10000px;\n  overflow: hidden;\n}\n\na {\n  cursor: pointer;\n  color: rgb(var(--em-rgb-accent));\n}\n\na:hover {\n  text-decoration: underline;\n}\n\n.spacer {\n  height: 10px;\n}\n\n[dir="rtl"] .scroll {\n  padding-left: 0;\n  padding-right: var(--padding);\n}\n\n.scroll {\n  padding-right: 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n.scroll::-webkit-scrollbar {\n  width: var(--sidebar-width);\n  height: var(--sidebar-width);\n}\n\n.scroll::-webkit-scrollbar-track {\n  border: 0;\n}\n\n.scroll::-webkit-scrollbar-button {\n  width: 0;\n  height: 0;\n  display: none;\n}\n\n.scroll::-webkit-scrollbar-corner {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.scroll::-webkit-scrollbar-thumb {\n  min-height: 20%;\n  min-height: 65px;\n  border: 4px solid rgb(var(--em-rgb-background));\n  border-radius: 8px;\n}\n\n.scroll::-webkit-scrollbar-thumb:hover {\n  background-color: var(--em-color-border-over) !important;\n}\n\n.scroll:hover::-webkit-scrollbar-thumb {\n  background-color: var(--em-color-border);\n}\n\n.sticky {\n  z-index: 1;\n  background-color: rgba(var(--em-rgb-background), .9);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  font-weight: 500;\n  position: sticky;\n  top: -1px;\n}\n\n[dir="rtl"] .search input[type="search"] {\n  padding: 10px 2.2em 10px 2em;\n}\n\n[dir="rtl"] .search .loupe {\n  left: auto;\n  right: .7em;\n}\n\n[dir="rtl"] .search .delete {\n  left: .7em;\n  right: auto;\n}\n\n.search {\n  z-index: 2;\n  position: relative;\n}\n\n.search input, .search button {\n  font-size: calc(var(--font-size)  - 1px);\n}\n\n.search input[type="search"] {\n  width: 100%;\n  background-color: var(--em-color-border);\n  transition-duration: var(--duration);\n  transition-property: background-color, box-shadow;\n  transition-timing-function: var(--easing);\n  border: 0;\n  border-radius: 10px;\n  outline: 0;\n  padding: 10px 2em 10px 2.2em;\n  display: block;\n}\n\n.search input[type="search"]::-ms-input-placeholder {\n  color: inherit;\n  opacity: .6;\n}\n\n.search input[type="search"]::placeholder {\n  color: inherit;\n  opacity: .6;\n}\n\n.search input[type="search"], .search input[type="search"]::-webkit-search-decoration, .search input[type="search"]::-webkit-search-cancel-button, .search input[type="search"]::-webkit-search-results-button, .search input[type="search"]::-webkit-search-results-decoration {\n  -webkit-appearance: none;\n  -ms-appearance: none;\n  appearance: none;\n}\n\n.search input[type="search"]:focus {\n  background-color: rgb(var(--em-rgb-input));\n  box-shadow: inset 0 0 0 1px rgb(var(--em-rgb-accent)), 0 1px 3px rgba(65, 69, 73, .2);\n}\n\n.search .icon {\n  z-index: 1;\n  color: rgba(var(--em-rgb-color), .7);\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.search .loupe {\n  pointer-events: none;\n  left: .7em;\n}\n\n.search .delete {\n  right: .7em;\n}\n\nsvg {\n  fill: currentColor;\n  width: 1em;\n  height: 1em;\n}\n\nbutton {\n  -webkit-appearance: none;\n  -ms-appearance: none;\n  appearance: none;\n  cursor: pointer;\n  color: currentColor;\n  background-color: rgba(0, 0, 0, 0);\n  border: 0;\n}\n\n#nav {\n  z-index: 2;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  padding-right: var(--sidebar-width);\n  position: relative;\n}\n\n#nav button {\n  color: var(--color-b);\n  transition: color var(--duration) var(--easing);\n}\n\n#nav button:hover {\n  color: var(--color-a);\n}\n\n#nav svg, #nav img {\n  width: var(--category-icon-size);\n  height: var(--category-icon-size);\n}\n\n#nav[dir="rtl"] .bar {\n  left: auto;\n  right: 0;\n}\n\n#nav .bar {\n  width: 100%;\n  height: 3px;\n  background-color: rgb(var(--em-rgb-accent));\n  transition: transform var(--duration) var(--easing);\n  border-radius: 3px 3px 0 0;\n  position: absolute;\n  bottom: -12px;\n  left: 0;\n}\n\n#nav button[aria-selected] {\n  color: rgb(var(--em-rgb-accent));\n}\n\n#preview {\n  z-index: 2;\n  padding: calc(var(--padding)  + 4px) var(--padding);\n  padding-right: var(--sidebar-width);\n  position: relative;\n}\n\n#preview .preview-placeholder {\n  font-size: var(--preview-placeholder-size);\n}\n\n#preview .preview-title {\n  font-size: var(--preview-title-size);\n}\n\n#preview .preview-subtitle {\n  font-size: var(--preview-subtitle-size);\n}\n\n#nav:before, #preview:before {\n  content: "";\n  height: 2px;\n  position: absolute;\n  left: 0;\n  right: 0;\n}\n\n#nav[data-position="top"]:before, #preview[data-position="top"]:before {\n  background: linear-gradient(to bottom, var(--em-color-border), transparent);\n  top: 100%;\n}\n\n#nav[data-position="bottom"]:before, #preview[data-position="bottom"]:before {\n  background: linear-gradient(to top, var(--em-color-border), transparent);\n  bottom: 100%;\n}\n\n.category:last-child {\n  min-height: calc(100% + 1px);\n}\n\n.category button {\n  font-family: -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;\n  position: relative;\n}\n\n.category button > * {\n  position: relative;\n}\n\n.category button .background {\n  opacity: 0;\n  background-color: var(--em-color-border);\n  transition: opacity var(--duration-fast) var(--easing) var(--duration-instant);\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.category button:hover .background {\n  transition-duration: var(--duration-instant);\n  transition-delay: 0s;\n}\n\n.category button[aria-selected] .background {\n  opacity: 1;\n}\n\n.category button[data-keyboard] .background {\n  transition: none;\n}\n\n.row {\n  width: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.skin-tone-button {\n  border: 1px solid rgba(0, 0, 0, 0);\n  border-radius: 100%;\n}\n\n.skin-tone-button:hover {\n  border-color: var(--em-color-border);\n}\n\n.skin-tone-button:active .skin-tone {\n  transform: scale(.85) !important;\n}\n\n.skin-tone-button .skin-tone {\n  transition: transform var(--duration) var(--easing);\n}\n\n.skin-tone-button[aria-selected] {\n  background-color: var(--em-color-border);\n  border-top-color: rgba(0, 0, 0, .05);\n  border-bottom-color: rgba(0, 0, 0, 0);\n  border-left-width: 0;\n  border-right-width: 0;\n}\n\n.skin-tone-button[aria-selected] .skin-tone {\n  transform: scale(.9);\n}\n\n.menu {\n  z-index: 2;\n  white-space: nowrap;\n  border: 1px solid var(--em-color-border);\n  background-color: rgba(var(--em-rgb-background), .9);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  transition-property: opacity, transform;\n  transition-duration: var(--duration);\n  transition-timing-function: var(--easing);\n  border-radius: 10px;\n  padding: 4px;\n  position: absolute;\n  box-shadow: 1px 1px 5px rgba(0, 0, 0, .05);\n}\n\n.menu.hidden {\n  opacity: 0;\n}\n\n.menu[data-position="bottom"] {\n  transform-origin: 100% 100%;\n}\n\n.menu[data-position="bottom"].hidden {\n  transform: scale(.9)rotate(-3deg)translateY(5%);\n}\n\n.menu[data-position="top"] {\n  transform-origin: 100% 0;\n}\n\n.menu[data-position="top"].hidden {\n  transform: scale(.9)rotate(3deg)translateY(-5%);\n}\n\n.menu input[type="radio"] {\n  clip: rect(0 0 0 0);\n  width: 1px;\n  height: 1px;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  overflow: hidden;\n}\n\n.menu input[type="radio"]:checked + .option {\n  box-shadow: 0 0 0 2px rgb(var(--em-rgb-accent));\n}\n\n.option {\n  width: 100%;\n  border-radius: 6px;\n  padding: 4px 6px;\n}\n\n.option:hover {\n  color: #fff;\n  background-color: rgb(var(--em-rgb-accent));\n}\n\n.skin-tone {\n  width: 16px;\n  height: 16px;\n  border-radius: 100%;\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n}\n\n.skin-tone:after {\n  content: "";\n  mix-blend-mode: overlay;\n  background: linear-gradient(rgba(255, 255, 255, .2), rgba(0, 0, 0, 0));\n  border: 1px solid rgba(0, 0, 0, .8);\n  border-radius: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  box-shadow: inset 0 -2px 3px #000, inset 0 1px 2px #fff;\n}\n\n.skin-tone-1 {\n  background-color: #ffc93a;\n}\n\n.skin-tone-2 {\n  background-color: #ffdab7;\n}\n\n.skin-tone-3 {\n  background-color: #e7b98f;\n}\n\n.skin-tone-4 {\n  background-color: #c88c61;\n}\n\n.skin-tone-5 {\n  background-color: #a46134;\n}\n\n.skin-tone-6 {\n  background-color: #5d4437;\n}\n\n[data-index] {\n  justify-content: space-between;\n}\n\n[data-emoji-set="twitter"] .skin-tone:after {\n  box-shadow: none;\n  border-color: rgba(0, 0, 0, .5);\n}\n\n[data-emoji-set="twitter"] .skin-tone-1 {\n  background-color: #fade72;\n}\n\n[data-emoji-set="twitter"] .skin-tone-2 {\n  background-color: #f3dfd0;\n}\n\n[data-emoji-set="twitter"] .skin-tone-3 {\n  background-color: #eed3a8;\n}\n\n[data-emoji-set="twitter"] .skin-tone-4 {\n  background-color: #cfad8d;\n}\n\n[data-emoji-set="twitter"] .skin-tone-5 {\n  background-color: #a8805d;\n}\n\n[data-emoji-set="twitter"] .skin-tone-6 {\n  background-color: #765542;\n}\n\n[data-emoji-set="google"] .skin-tone:after {\n  box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, .4);\n}\n\n[data-emoji-set="google"] .skin-tone-1 {\n  background-color: #f5c748;\n}\n\n[data-emoji-set="google"] .skin-tone-2 {\n  background-color: #f1d5aa;\n}\n\n[data-emoji-set="google"] .skin-tone-3 {\n  background-color: #d4b48d;\n}\n\n[data-emoji-set="google"] .skin-tone-4 {\n  background-color: #aa876b;\n}\n\n[data-emoji-set="google"] .skin-tone-5 {\n  background-color: #916544;\n}\n\n[data-emoji-set="google"] .skin-tone-6 {\n  background-color: #61493f;\n}\n\n[data-emoji-set="facebook"] .skin-tone:after {\n  border-color: rgba(0, 0, 0, .4);\n  box-shadow: inset 0 -2px 3px #000, inset 0 1px 4px #fff;\n}\n\n[data-emoji-set="facebook"] .skin-tone-1 {\n  background-color: #f5c748;\n}\n\n[data-emoji-set="facebook"] .skin-tone-2 {\n  background-color: #f1d5aa;\n}\n\n[data-emoji-set="facebook"] .skin-tone-3 {\n  background-color: #d4b48d;\n}\n\n[data-emoji-set="facebook"] .skin-tone-4 {\n  background-color: #aa876b;\n}\n\n[data-emoji-set="facebook"] .skin-tone-5 {\n  background-color: #916544;\n}\n\n[data-emoji-set="facebook"] .skin-tone-6 {\n  background-color: #61493f;\n}\n\n';class Helper{static getDescendantProperty(e,t,n=[]){let o,i,r,a,s,c;if(t){if(r=t.indexOf("."),-1===r?o=t:(o=t.slice(0,r),i=t.slice(r+1)),a=e[o],null!=a)if(i||"string"!=typeof a&&"number"!=typeof a)if("[object Array]"===Object.prototype.toString.call(a))for(s=0,c=a.length;s<c;s++)Helper.getDescendantProperty(a[s],i,n);else i&&Helper.getDescendantProperty(a,i,n);else n.push(a)}else n.push(e);return n}}class FuzzySearch{constructor(e=[],t=[],n={}){Array.isArray(t)||(n=t,t=[]),this.haystack=e,this.keys=t,this.options=Object.assign({caseSensitive:!1,sort:!1},n)}search(e=""){if(""===e)return this.haystack;const t=[];for(let n=0;n<this.haystack.length;n++){const o=this.haystack[n];if(0===this.keys.length){const n=FuzzySearch.isMatch(o,e,this.options.caseSensitive);n&&t.push({item:o,score:n})}else for(let n=0;n<this.keys.length;n++){const i=Helper.getDescendantProperty(o,this.keys[n]);let r=!1;for(let n=0;n<i.length;n++){const a=FuzzySearch.isMatch(i[n],e,this.options.caseSensitive);if(a){r=!0,t.push({item:o,score:a});break}}if(r)break}}return this.options.sort&&t.sort(((e,t)=>e.score-t.score)),t.map((e=>e.item))}static isMatch(e,t,n){e=String(e),t=String(t),n||(e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase());const o=FuzzySearch.nearestIndexesFor(e,t);return!!o&&(e===t?1:o.length>1?o[o.length-1]-o[0]+2:2+o[0])}static nearestIndexesFor(e,t){const n=t.split("");let o=[];return FuzzySearch.indexesOfFirstLetter(e,t).forEach(((t,i)=>{let r=t+1;o[i]=[t];for(let a=1;a<n.length;a++){const t=n[a];if(r=e.indexOf(t,r),-1===r){o[i]=!1;break}o[i].push(r),r++}})),o=o.filter((e=>!1!==e)),!!o.length&&o.sort(((e,t)=>1===e.length?e[0]-t[0]:(e=e[e.length-1]-e[0])-(t=t[t.length-1]-t[0])))[0]}static indexesOfFirstLetter(e,t){const n=t[0];return e.split("").map(((e,t)=>e===n&&t)).filter((e=>!1!==e))}}$7adb23b0109cc36a$export$2cd8252107eb640b({data:rt});const Na=aa,Oa=(()=>{const e="🇺🇸";let t=null;try{if(t=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}),!t)return!1;const n=25,o=20,i=Math.floor(n/2);t.font=i+"px Arial, Sans-Serif",t.textBaseline="top",t.canvas.width=2*o,t.canvas.height=n,t.fillStyle="#FF0000",t.fillText(e,0,22),t.fillStyle="#0000FF",t.fillText(e,o,22);const r=t.getImageData(0,0,o,n).data,a=r.length;let s=0;for(;s<a&&!r[s+3];s+=4);if(s>=a)return!1;const c=o+s/4%o,l=Math.floor(s/4/o),d=t.getImageData(c,l,1,1).data;if(r[s]!==d[0]||r[s+2]!==d[2])return!1;if(t.measureText(e).width>=o)return!1}catch{return!1}return!0})(),Ba=Na.categories.filter((({id:e})=>e===nt.Flags.toLowerCase())).map((({emojis:e})=>e))[0]??[],Ha=Oa?Na.categories:Na.categories.filter((({id:e})=>ot(e)!==nt.Flags)),Fa=Oa?Na.emojis:Object.fromEntries(Object.entries(Na.emojis).filter((([e])=>!Ba.includes(e)))),Wa=new FuzzySearch(Object.values(Fa),["search"],{caseSensitive:!1,sort:!0}),Ua={"1f3fb":it.Light,"1f3fc":it.MediumLight,"1f3fd":it.Medium,"1f3fe":it.MediumDark,"1f3ff":it.Dark},Va=Object.entries(Fa).reduce(((e,[t,n])=>(e[t]=(({id:e,name:t,skins:n})=>n.reduce(((n,o)=>{const i=o.unified.split("-")[1];return n[Ua[i]??it.Default]={id:e,name:t,value:o.native},n}),{}))({id:t,name:n.name,skins:n.skins}),e)),{}),qa=Ha.reduce(((e,{id:t,emojis:n})=>{const o=ot(t),i=nt[o];return i?(e[i]=n,e):e}),{}),getEmojis=({ids:e,skinTone:t})=>e.map((e=>Va[e][t]??Va[e][it.Default])),getEmojisWithCategory=({skinTone:e})=>Object.keys(qa).reduce(((t,n)=>{const o=qa[n].map((t=>Va[t][e]??Va[t][it.Default]));return t[n]=o,t}),{}),getEmojiVariants=({id:e})=>Va[e],search=({query:e,skinTone:t})=>{const n=e.toLowerCase(),o=t??it.Default,i=Wa.search(n).map((e=>Va[e.id][o]??Va[e.id][it.Default]));return at(i,(t=>{const o=t.name.toLowerCase();return e===o?-1:o.startsWith(n)?0:1}))},getEmojiId=e=>Wa.search(e)[0]?.id;var Ka=!("undefined"==typeof window||!window.document||!window.document.createElement),Ga=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var Za=function(){function Portal2(){return function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Portal2),function _possibleConstructorReturn$1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Portal2.__proto__||Object.getPrototypeOf(Portal2)).apply(this,arguments))}return function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Portal2,me.Component),Ga(Portal2,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function render(){return Ka?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),st.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),Portal2}();Za.propTypes={children:ct.node.isRequired,node:ct.any};const Xa=Za;var Ya=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var Qa=function(){function Portal2(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Portal2),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Portal2.__proto__||Object.getPrototypeOf(Portal2)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Portal2,me.Component),Ya(Portal2,[{key:"componentDidMount",value:function componentDidMount(){this.renderPortal()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.renderPortal()}},{key:"componentWillUnmount",value:function componentWillUnmount(){st.unmountComponentAtNode(this.defaultNode||this.props.node),this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null,this.portal=null}},{key:"renderPortal",value:function renderPortal(e){this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode));var t=this.props.children;"function"==typeof this.props.children.type&&(t=me.cloneElement(this.props.children)),this.portal=st.unstable_renderSubtreeIntoContainer(this,t,this.props.node||this.defaultNode)}},{key:"render",value:function render(){return null}}]),Portal2}();const Ja=Qa;Qa.propTypes={children:ct.node.isRequired,node:ct.any};const es=st.createPortal?Xa:Ja,ts=e.createContext(void 0);function Portal(t){const n=e.useContext(ts);return d(es,{node:n,children:t.children})}function SuggestionsMenuItem({selected:t,disabled:n,onClick:o,onPointerMove:i,title:r,subtitle:a,shortcut:s,icon:c}){const l=e.useContext(ts),u=e.useCallback((e=>{t&&e&&Ao(e,{scrollMode:"if-needed",block:"nearest",boundary:e=>e!==l})}),[t,l]);return h(yo,{ref:u,active:t,onClick:n?void 0:o,onPointerMove:n?void 0:i,icon:c,children:[r,a&&h(ns,{$active:t,children:["· ",a]}),s&&d(os,{$active:t,children:s})]})}const ns=c.span.withConfig({componentId:"sc-txs71t-0"})(["color:",";"],(e=>e.$active?Ce(.35,e.theme.accentText):e.theme.textTertiary)),os=c.span.withConfig({componentId:"sc-txs71t-1"})(["color:",";flex-grow:1;text-align:right;"],(e=>e.$active?Ce(.35,e.theme.accentText):e.theme.textTertiary)),is=c.span.withConfig({componentId:"sc-14f3q2j-0"})(["font-size:16px;line-height:1.6em;"]);function EmojiMenuItem({emoji:e,...t}){return d(SuggestionsMenuItem,{...t,icon:d(is,{className:"emoji",children:e})})}function filterExcessSeparators(e){return e.reduce(((e,t)=>"separator"===t.name&&"separator"===e[e.length-1]?.name?e:[...e,t]),[]).filter(((e,t,n)=>"separator"!==e.name||0!==t&&t!==n.length-1))}const rs=e.createContext({}),useEditor=()=>e.useContext(rs),as=c.input.withConfig({componentId:"sc-hglrnz-0"})(["font-size:15px;background:",";color:",";border-radius:2px;padding:3px 8px;border:0;margin:0;outline:none;flex-grow:1;min-width:0;&::placeholder{color:",";}@media (hover:none) and (pointer:coarse){font-size:16px;}"],N("inputBorder"),N("text"),(e=>Ce(.5,e.theme.text))),ss={top:0,bottom:void 0,left:-1e4,right:void 0,isAbove:!1};function SuggestionsMenu(t){const{view:n,commands:o,props:i}=useEditor(),r=useDictionary(),{t:a}=E(),s=e.useRef(!1),c=e.useRef({clientX:0,clientY:0}),l=e.useRef(null),u=e.useRef(null),[p,f]=e.useState(ss),[b,g]=e.useState(),[v,x]=e.useState(0);e.useEffect((()=>{t.isActive&&(s.current=!0)}),[t.isActive]);const y=e.useCallback((e=>{if(!e.isActive)return ss;const{selection:t}=n.state,o=l.current,i=o?o.offsetWidth:0,r=o?o.offsetHeight:0,{top:a,bottom:s,right:c,left:d}=(()=>{let e,o;try{e=n.coordsAtPos(t.from),o=n.coordsAtPos(t.to,-1)}catch(i){return W.warn("Unable to calculate caret position",i),{top:0,bottom:0,left:0,right:0}}return{top:Math.min(e.top,o.top),bottom:Math.max(e.bottom,o.bottom),left:Math.min(e.left,o.left),right:Math.max(e.right,o.right)}})(),u=o?.offsetParent?o.offsetParent.getBoundingClientRect():{width:0,height:0,top:0,left:0};let p=Math.min(d-u.left,window.innerWidth-u.left-i-12);return e.rtl&&(p=c-i),a-r>12?{left:p,top:void 0,bottom:u.bottom-a,right:void 0,isAbove:!1}:{left:p,top:s-u.top,bottom:void 0,right:void 0,isAbove:!0}}),[n]),w=e.useCallback((()=>{const{state:e,dispatch:o}=n,i=e.doc.cut(e.selection.from-(t.search??"").length-t.trigger.length,e.selection.from).textContent.startsWith(t.trigger);(t.search||i)&&o(e.tr.insertText("",Math.max(0,e.selection.from-(t.search??"").length-(i?t.trigger.length:0)),e.selection.to))}),[t.search,t.trigger,n]);e.useEffect((()=>{t.isActive&&(l.current&&l.current.scroll({top:0}),f(y(t)),x(0),g(void 0))}),[y,t.isActive]),e.useEffect((()=>{x(0)}),[t.search]);const k=e.useCallback((e=>{w();const i=e.name?o[e.name]:void 0,r="function"==typeof e.attrs?e.attrs(n.state):e.attrs;if("noop"===e.name||(i?i(r):o[`create${ot(e.name)}`](r)),"appendSpace"in e){const{dispatch:e}=n;e(n.state.tr.insertText(" "))}t.onClose()}),[o,w,t,n]),$=e.useCallback((e=>{switch(t.onSelect?.(e),e.name){case"link":return k({...e,name:"mention"}),void i.onCreateLink?.({title:e.attrs.label,id:e.attrs.modelId});case"image":return triggerFilePick(Ue.imageContentTypes.join(", "));case"video":return triggerFilePick("video/*");case"attachment":return triggerFilePick("*");case"embed":return triggerLinkInput(e);default:k(e)}}),[i,t,k]),_=e.useCallback((()=>{t.onClose(),n.focus()}),[t,n]),triggerFilePick=e=>{u.current&&(e&&(u.current.accept=e),u.current.click())},triggerLinkInput=e=>{g(e)},C=e.useMemo((()=>{const{embeds:e=[],search:n="",uploadFile:i,filterable:r=!0}=t;let a=[...t.items];const s=[];for(const t of e)t.title&&!1!==t.visible&&s.push(new dt({...t,name:"embed"}));s.length&&(a=a.concat({name:"separator"},s));const c=n.toLowerCase(),l=a.filter((e=>"separator"===e.name||!1!==e.visible&&(!(e.name&&!o[e.name]&&!o[`create${ot(e.name)}`]&&"noop"!==e.name)&&(!(!i&&"image"===e.name)&&(n?r?(e.name||"").toLocaleLowerCase().includes(c)||(e.title||"").toLocaleLowerCase().includes(c)||(e.keywords||"").toLocaleLowerCase().includes(c):e:!e.defaultHidden)))));return filterExcessSeparators(ut(l.map((e=>({item:e,section:"section"in e&&e.section&&"priority"in e.section?e.section.priority??0:0,priority:"priority"in e?e.priority:0,score:c&&e.title?pt(e.title,c):0}))),["section","priority","score"],["desc","desc","desc"]).map((({item:e})=>e)))}),[o,t]);e.useEffect((()=>{const handleMouseDown=e=>{l.current&&!l.current.contains(e.target)&&t.onClose()},handleKeyDown=e=>{if(!e.isComposing&&t.isActive){if("Enter"===e.key){e.preventDefault();const n=C[v];n?$(n):t.onClose(!0)}if("ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey||e.ctrlKey&&"p"===e.key)if(e.preventDefault(),e.stopPropagation(),C.length){const e=v-1,t=C[e];x(Math.max(0,"separator"===t?.name?e-1:e))}else _();if("ArrowDown"===e.key||"Tab"===e.key&&!e.shiftKey||e.ctrlKey&&"n"===e.key)if(e.preventDefault(),e.stopPropagation(),C.length){const e=C.length-1,t=v+1,n=C[t];x(Math.min("separator"===n?.name?t+1:t,e))}else _();"Escape"===e.key&&(e.preventDefault(),_())}};return window.addEventListener("mousedown",handleMouseDown),window.addEventListener("keydown",handleKeyDown,{capture:!0}),()=>{window.removeEventListener("mousedown",handleMouseDown),window.removeEventListener("keydown",handleKeyDown,{capture:!0})}}),[_,C,$,t,v]);const{isActive:I,uploadFile:S}=t,M=C;let D;return d(Portal,{children:d(hs,{active:I,ref:l,hiddenScrollbars:!0,...p,children:(I||s.current)&&h(m,{children:[b?d(cs,{children:d(ls,{type:"text",placeholder:"placeholder"in b?b.placeholder:b.title?r.pasteLinkWithTitle(b.title):r.pasteLink,onKeyDown:e=>{if(!e.nativeEvent.isComposing&&t.isActive&&b){if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=e.currentTarget.value;if(!("matcher"in b&&b.matcher(t)))return void mt.error(r.embedInvalidLink);k({name:"embed",attrs:{href:t}})}"Escape"===e.key&&(t.onClose(),n.focus())}},onPaste:e=>{if(!t.isActive)return;if(!b)return;const n=e.clipboardData.getData("text/plain");"matcher"in b&&b.matcher(n)&&(e.preventDefault(),e.stopPropagation(),k({name:"embed",attrs:{href:n}}))},autoFocus:!0})}):h(ds,{children:[M.map(((e,n)=>{if("separator"===e.name)return d(us,{children:d("hr",{})},n);if(!e.title)return null;const o="section"in e?e.section?.({t:a}):void 0,i=h(m,{children:[o!==D&&d(hr,{children:o},o),d(us,{onPointerMove:e=>{v===n||c.current.clientX===e.clientX&&c.current.clientY===e.clientY||x(n),c.current={clientX:e.clientX,clientY:e.clientY}},onPointerDown:()=>{v!==n&&x(n)},children:t.renderMenuItem(e,n,{selected:n===v,onClick:()=>$(e)})},n)]});return D=o,i})),0===M.length&&d(us,{children:d(ps,{children:r.noResults})})]}),S&&d(ht,{children:h("label",{children:[d(A,{children:"Import document"}),d("input",{type:"file",ref:u,onChange:async e=>{n.focus();const{uploadFile:o,onFileUploadStart:i,onFileUploadStop:a}=t,s=ft(e),c=bt((e=>!!e))(n.state.selection);if(w(),!o)throw new Error("uploadFile prop is required to replace files");c&&await Ve(n,e,c.pos,s,{uploadFile:o,onFileUploadStart:i,onFileUploadStop:a,dictionary:r,isAttachment:"*"===u.current?.accept}),u.current&&(u.current.value=""),t.onClose()},multiple:!0})]})})]})})})}const cs=c.div.withConfig({componentId:"sc-1rktse6-0"})(["margin:8px;"]),ls=c(as).withConfig({componentId:"sc-1rktse6-1"})(["height:32px;width:100%;color:",";"],N("textSecondary")),ds=c.ol.withConfig({componentId:"sc-1rktse6-2"})(["list-style:none;text-align:left;height:100%;padding:6px;margin:0;"]),us=c.li.withConfig({componentId:"sc-1rktse6-3"})(["padding:0;margin:0;"]),ps=c.div.withConfig({componentId:"sc-1rktse6-4"})(["display:flex;align-items:center;color:",";font-weight:500;font-size:14px;height:32px;padding:0 16px;"],N("textSecondary")),hs=c(lt).withConfig({componentId:"sc-1rktse6-5"})(["color:",";font-family:",";position:absolute;z-index:",";",";",";left:","px;background:",";border-radius:6px;box-shadow:rgba(0,0,0,0.05) 0px 0px 0px 1px,rgba(0,0,0,0.08) 0px 4px 8px,rgba(0,0,0,0.08) 0px 2px 4px;opacity:0;transform:scale(0.95);transition:opacity 150ms cubic-bezier(0.175,0.885,0.32,1.275),transform 150ms cubic-bezier(0.175,0.885,0.32,1.275);transition-delay:150ms;line-height:0;box-sizing:border-box;pointer-events:none;white-space:nowrap;width:280px;height:auto;max-height:324px;*{box-sizing:border-box;}hr{border:0;height:0;border-top:1px solid ",";}",";@media print{display:none;}"],N("textSecondary"),N("fontFamily"),O.editorToolbar,(e=>void 0!==e.top&&`top: ${e.top}px`),(e=>void 0!==e.bottom&&`bottom: ${e.bottom}px`),(e=>e.left),N("menuBackground"),N("divider"),(({active:e,isAbove:t})=>e&&`\n    transform: translateY(${t?"6px":"-6px"}) scale(1);\n    pointer-events: all;\n    opacity: 1;\n  `)),EmojiMenu=e=>{const{search:t=""}=e,n=me.useMemo((()=>search({query:t}).map((e=>{const t=gt(vt[e.id]||e.id),n=e.value;return{name:"emoji",title:n,description:ot(e.name.toLowerCase()),emoji:n,attrs:{markup:t,"data-name":t}}})).slice(0,15)),[t]);return d(SuggestionsMenu,{...e,filterable:!1,renderMenuItem:(e,t,n)=>d(EmojiMenuItem,{onClick:n.onClick,selected:n.selected,title:e.description,emoji:e.emoji}),items:n})},ms=["fr"];class EmojiMenuExtension extends Suggestion{constructor(){super(...arguments),this.widget=({rtl:e})=>d(EmojiMenu,{rtl:e,trigger:this.options.trigger,isActive:this.state.open,search:this.state.query,onClose:Ye((()=>{this.state.open=!1}))})}get defaultOptions(){return{trigger:":",allowSpaces:!1,requireSearchTerm:!!xt&&ms.includes(window.navigator.language.slice(0,2)),enabledInCode:!1}}get name(){return"emoji-menu"}}class Keys extends Ge{get name(){return"keys"}keys(){const onCancel=()=>!!this.editor.props.onCancel&&(this.editor.props.onCancel(),!0);return{"Mod-Escape":onCancel,"Shift-Escape":onCancel,"Mod-s":()=>!!this.editor.props.onSave&&(this.editor.props.onSave({done:!1}),!0),"Mod-Enter":e=>!(Je(e)||!this.editor.props.onSave)&&(this.editor.props.onSave({done:!0}),!0),Escape:()=>(this.editor.view.dom.blur(),!0)}}get plugins(){return[new Ze({props:{handleKeyDown:(e,t)=>{if(e.state.selection instanceof yt){if("ArrowUp"===t.key){const t=wt.atStart(e.state.doc);return e.dispatch(e.state.tr.setSelection(t)),!0}if("ArrowDown"===t.key){const t=wt.atEnd(e.state.doc);return e.dispatch(e.state.tr.setSelection(t)),!0}}return e.state.selection instanceof kt&&"Enter"===t.key&&(e.dispatch(e.state.tr.insert(e.state.selection.from,e.state.schema.nodes.paragraph.create({}))),e.dispatch(e.state.tr.setSelection(Fe.near(e.state.doc.resolve(e.state.selection.from),-1))),!0)}}})]}}var fs={exports:{}};!function(e,t){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function assertString2(e){if(!("string"==typeof e||e instanceof String)){var t=_typeof(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default}(fs,fs.exports);var bs,gs,vs=fs.exports,xs={exports:{}};bs=xs,gs=xs.exports,Object.defineProperty(gs,"__esModule",{value:!0}),gs.default=function merge2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},bs.exports=gs.default,bs.exports.default=gs.default;var ys=xs.exports,ws={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isByteLength2(e,t){var o,i;(0,n.default)(e),"object"===_typeof(t)?(o=t.min||0,i=t.max):(o=arguments[1],i=arguments[2]);var r=encodeURI(e).split(/%..|./).length-1;return r>=o&&(void 0===i||r<=i)};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(vs);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default}(ws,ws.exports);var ks=ws.exports,$s={exports:{}},_s={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isFQDN2(e,t){(0,n.default)(e),(t=(0,o.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var r=e.split("."),a=r[r.length-1];if(t.require_tld){if(r.length<2)return!1;if(!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a))return!1;if(/\s/.test(a))return!1}if(!t.allow_numeric_tld&&/^\d+$/.test(a))return!1;return r.every((function(e){return!(e.length>63&&!t.ignore_max_length)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!t.allow_underscores&&/_/.test(e)))))}))};var n=_interopRequireDefault(vs),o=_interopRequireDefault(ys);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};e.exports=t.default,e.exports.default=t.default}(_s,_s.exports);var Cs=_s.exports,Is={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isIP2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,n.default)(e),!(t=String(t)))return isIP2(e,4)||isIP2(e,6);if("4"===t)return r.test(e);if("6"===t)return s.test(e);return!1};var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(vs);var o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(o,"[.]){3}").concat(o),r=new RegExp("^".concat(i,"$")),a="(?:[0-9a-fA-F]{1,4})",s=new RegExp("^("+"(?:".concat(a,":){7}(?:").concat(a,"|:)|")+"(?:".concat(a,":){6}(?:").concat(i,"|:").concat(a,"|:)|")+"(?:".concat(a,":){5}(?::").concat(i,"|(:").concat(a,"){1,2}|:)|")+"(?:".concat(a,":){4}(?:(:").concat(a,"){0,1}:").concat(i,"|(:").concat(a,"){1,3}|:)|")+"(?:".concat(a,":){3}(?:(:").concat(a,"){0,2}:").concat(i,"|(:").concat(a,"){1,4}|:)|")+"(?:".concat(a,":){2}(?:(:").concat(a,"){0,3}:").concat(i,"|(:").concat(a,"){1,5}|:)|")+"(?:".concat(a,":){1}(?:(:").concat(a,"){0,4}:").concat(i,"|(:").concat(a,"){1,6}|:)|")+"(?::((?::".concat(a,"){0,5}:").concat(i,"|(?::").concat(a,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default}(Is,Is.exports);var Ss=Is.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isEmail2(e,t){if((0,n.default)(e),(t=(0,a.default)(t,s)).require_display_name||t.allow_display_name){var f=e.match(c);if(f){var b=f[1];if(e=e.replace(b,"").replace(/(^<|>$)/g,""),b.endsWith(" ")&&(b=b.slice(0,-1)),!function validateDisplayName(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(!(t.split('"').length===t.split('\\"').length))return!1}return!0}(b))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>m)return!1;var g=e.split("@"),v=g.pop(),x=v.toLowerCase();if(t.host_blacklist.includes(x))return!1;if(t.host_whitelist.length>0&&!t.host_whitelist.includes(x))return!1;var y=g.join("@");if(t.domain_specific_validation&&("gmail.com"===x||"googlemail.com"===x)){var w=(y=y.toLowerCase()).split("+")[0];if(!(0,o.default)(w.replace(/\./g,""),{min:6,max:30}))return!1;for(var k=w.split("."),$=0;$<k.length;$++)if(!d.test(k[$]))return!1}if(!(!1!==t.ignore_max_length||(0,o.default)(y,{max:64})&&(0,o.default)(v,{max:254})))return!1;if(!(0,i.default)(v,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!(0,r.default)(v)){if(!v.startsWith("[")||!v.endsWith("]"))return!1;var _=v.slice(1,-1);if(0===_.length||!(0,r.default)(_))return!1}}if('"'===y[0])return y=y.slice(1,y.length-1),t.allow_utf8_local_part?h.test(y):u.test(y);for(var C=t.allow_utf8_local_part?p:l,I=y.split("."),S=0;S<I.length;S++)if(!C.test(I[S]))return!1;if(t.blacklisted_chars&&-1!==y.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))return!1;return!0};var n=_interopRequireDefault(vs),o=_interopRequireDefault(ks),i=_interopRequireDefault(Cs),r=_interopRequireDefault(Ss),a=_interopRequireDefault(ys);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},c=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,l=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,u=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,m=254;e.exports=t.default,e.exports.default=t.default}($s,$s.exports);const Ms=ve($s.exports);function isEmail(e,t){return"string"==typeof e&&Ms(e,t)}function parseDocumentSlug(e){let t;"/"===e[0]&&(e=`${$t.URL}${e}`);try{t=new URL(e).pathname}catch(i){return}const n=t.split("/"),o=n.indexOf("doc");return n[o+1]??void 0}function useRequest(t,n=!1){const o=B(),[i,r]=e.useState(),[a,s]=e.useState(!1),[c,l]=e.useState(!1),[d,u]=e.useState(),p=e.useCallback((async()=>{s(!0);try{const e=await t();return o()&&(r(e),u(void 0),l(!0)),e}catch(e){o()&&u(e)}finally{o()&&s(!1)}}),[t,o]);return e.useEffect((()=>{n&&p()}),[p,n]),{data:i,loading:a,loaded:c,error:d,request:p}}const Ds=K((function MentionMenu({search:t,isActive:n,...o}){const[i,r]=e.useState(!1),[a,s]=e.useState([]),{t:c}=E(),{auth:l,documents:u,users:h,collections:m}=z(),f=l.currentUserId,g=parseDocumentSlug(T().pathname),v=t?25:5,{loading:x,request:y}=useRequest(e.useCallback((async()=>{const e=await _t.post("/suggestions.mention",{query:t});e.data.documents.map(u.add),e.data.users.map(h.add),e.data.collections.map(m.add)}),[t,u,h]));e.useEffect((()=>{n&&y()}),[y,n]),e.useEffect((()=>{if(f&&!x){const e=h.findByQuery(t,{maxResults:v}).map((e=>({name:"mention",icon:d(p,{align:"center",justify:"center",style:{width:24,height:24},children:d(Mo,{model:e,alt:c("Profile picture"),size:So.Small})}),title:e.name,section:UserSection,appendSpace:!0,attrs:{id:Ct(),type:It.User,modelId:e.id,actorId:f,label:e.name}}))).concat(u.findByQuery(t,{maxResults:v}).map((e=>({name:"mention",icon:e.icon?d(St,{value:e.icon,color:e.color??void 0}):d(b.DocumentIcon,{}),title:e.title,subtitle:e.collection?.name,section:DocumentsSection,appendSpace:!0,attrs:{id:Ct(),type:It.Document,modelId:e.id,actorId:f,label:e.title}})))).concat(m.findByQuery(t,{maxResults:v}).map((e=>({name:"mention",icon:e.icon?d(St,{value:e.icon,color:e.color??void 0}):d(b.CollectionIcon,{}),title:e.name,section:CollectionsSection,appendSpace:!0,attrs:{id:Ct(),type:It.Collection,modelId:e.id,actorId:f,label:e.name}})))).concat([{name:"link",icon:d(b.PlusIcon,{}),title:t?.trim(),section:DocumentsSection,subtitle:c("Create a new doc"),visible:!!t&&!isEmail(t),priority:-1,appendSpace:!0,attrs:{id:Ct(),type:It.Document,modelId:Ct(),actorId:f,label:t}}]);s(e),r(!0)}}),[c,f,x,t,h,u,v]);const w=e.useCallback((async e=>{if(e.attrs.type===It.Document||e.attrs.type===It.Collection)return;if(!g)return;if(!(await _t.post("/documents.users",{id:g,userId:e.attrs.modelId})).data.length){const t=h.get(e.attrs.modelId);mt.message(c("{{ userName }} won't be notified, as they do not have access to this document",{userName:e.attrs.label}),{icon:d(Mo,{model:t,size:So.Toast}),duration:1e4})}}),[c,h,g]);return i?d(SuggestionsMenu,{...o,isActive:n,filterable:!1,search:t,onSelect:w,renderMenuItem:(e,t,n)=>d(SuggestionsMenuItem,{onClick:n.onClick,selected:n.selected,subtitle:e.subtitle,title:e.title,icon:e.icon}),items:a}):null}));class MentionMenuExtension extends Suggestion{constructor(){super(...arguments),this.widget=({rtl:e})=>d(Ds,{rtl:e,trigger:this.options.trigger,isActive:this.state.open,search:this.state.query,onClose:Ye((()=>{this.state.open=!1}))})}get defaultOptions(){return{trigger:"@",allowSpaces:!0,requireSearchTerm:!1,enabledInCode:!1}}get name(){return"mention-menu"}}function isMarkdown(e){let t=0;const n=e.split("\n").length,o=Math.min(3,Math.floor(n/5)),i=e.match(/^```/gm);i&&i.length>1&&(t+=i.length);const r=e.match(/\$(.+)\$/g);r&&r.length>0&&(t+=r.length);const a=e.match(/\[[^]+\]\(https?:\/\/\S+\)/gm);a&&(t+=2*a.length);const s=e.match(/\[[^]+\]\(\/\S+\)/gm);s&&(t+=2*s.length);const c=e.match(/^#{1,6}\s+\S+/gm);c&&(t+=c.length);const l=e.match(/^[-*]\s\S+/gm);l&&(t+=l.length);const d=e.match(/\|\s?[:-]+\s?\|/gm);return d&&(t+=d.length),t>o}function normalizePastedMarkdown(e){const t=/^\s?(\[(X|\s|_|-)\]\s(.*)?)/gim;for(;e.match(t);)e=e.replace(t,(e=>`- ${e.trim()}`));return e=(e=e.replace(/\n{3,}/g,"\n\n\\\n")).replace(/\b\n\b/g,"\n\n")}const PasteMenu=({embeds:e,...t})=>{const{t:n}=E(),o=me.useMemo((()=>{for(const n of e){if(n.matcher(t.pastedText))return n}}),[e,t.pastedText]),i=me.useMemo((()=>[{name:"noop",title:n("Keep as link"),icon:d(b.LinkIcon,{})},{name:"embed",title:n("Embed"),icon:o?.icon,keywords:o?.keywords}]),[o,n]);return d(SuggestionsMenu,{...t,trigger:"",filterable:!1,renderMenuItem:(e,n,o)=>d(SuggestionsMenuItem,{onClick:()=>{t.onSelect?.(e)},selected:o.selected,title:e.title,icon:e.icon}),items:i})};class PasteHandler extends Ge{constructor(){super(...arguments),this.state=et({open:!1,query:"",pastedText:""}),this.key=new Xe(this.name),this.shiftKey=!1,this.showPasteMenu=Ye((e=>{this.state.pastedText=e,this.state.open=!0})),this.hidePasteMenu=Ye((()=>{this.state.open=!1})),this.insertEmbed=()=>{const{view:e}=this.editor,{state:t}=e,n=this.findPlaceholder(t,this.state.pastedText);if(n){const o=t.tr.deleteRange(n[0],n[1]);e.dispatch(o.setSelection(Fe.near(o.doc.resolve(n[0]))))}this.editor.commands.embed({href:this.state.pastedText})},this.removePlaceholder=()=>{const{view:e}=this.editor,{state:t}=e;this.findPlaceholder(t,this.state.pastedText)&&e.dispatch(t.tr.setMeta(this.key,{remove:{id:this.state.pastedText}}))},this.findPlaceholder=(e,t)=>{const n=this.key.getState(e),o=n?.find(void 0,void 0,(e=>e.id===t));return o?.length?[o[0].from,o[0].to]:null},this.handleSelect=e=>{switch(e.name){case"noop":this.hidePasteMenu(),this.removePlaceholder();break;case"embed":this.hidePasteMenu(),this.insertEmbed()}},this.widget=({rtl:e})=>d(PasteMenu,{rtl:e,embeds:this.editor.props.embeds,pastedText:this.state.pastedText,isActive:this.state.open,search:this.state.query,onClose:this.hidePasteMenu,onSelect:this.handleSelect})}get name(){return"paste-handler"}get plugins(){return[new Ze({key:this.key,props:{transformPastedHTML:e=>(isDropboxPaper(e)&&(e=e.replace(/<div><br><\/div>/gi,"<p></p>")),e),handleDOMEvents:{keydown:(e,t)=>("Shift"===t.key&&(this.shiftKey=!0),!1),keyup:(e,t)=>("Shift"===t.key&&(this.shiftKey=!1),!1)},handlePaste:(e,t)=>{if(!e.editable||!t.clipboardData)return!1;const{state:n,dispatch:o}=e,i=function parseSingleIframeSrc(e){try{const t=(new DOMParser).parseFromString(e,"text/html");if(1===t.body.children.length&&"IFRAME"===t.body.firstElementChild?.tagName){const e=t.body.firstElementChild.getAttribute("src");if(e)return e}}catch(t){}return}(t.clipboardData.getData("text/plain")),r=i&&!Je(n)?i:t.clipboardData.getData("text/plain"),a=t.clipboardData.getData("text/html"),s=t.clipboardData.getData("vscode-editor-data");if(Je(n))return t.preventDefault(),e.dispatch(n.tr.insertText(r)),!0;const c=s?JSON.parse(s):void 0,l=c?.mode,d=!!n.schema.nodes.code_block,u=!!n.schema.marks.code_inline;if(!this.shiftKey){if(a?.includes("data-pm-slice"))return!1;if(Mt(r)){if(!n.selection.empty)return Dt(this.editor.schema.marks.link,{href:r})(n,o),!0;const t=r.includes("#");if(Ee(r)){const o=parseDocumentSlug(r);o&&$.documents.fetch(o).then((o=>{if(!e.isDestroyed&&o)if(n.schema.nodes.mention&&!t)e.dispatch(e.state.tr.replaceWith(n.selection.from,n.selection.to,n.schema.nodes.mention.create({type:It.Document,modelId:o.id,label:o.titleWithDefault,id:Ct()})));else{const{hash:e}=new URL(r),t=`${Pt(o.icon)===zt.Emoji?o.icon+" ":""}${o.titleWithDefault}`;this.insertLink(`${o.path}${e}`,t)}})).catch((()=>{e.isDestroyed||this.insertLink(r)}))}else if(Et(r)){const o=function parseCollectionSlug(e){let t;"/"===e[0]&&(e=`${$t.URL}${e}`);try{t=new URL(e).pathname}catch(i){return}const n=t.split("/"),o=n.indexOf("collection");return n[o+1]??void 0}(r);o&&$.collections.fetch(o).then((o=>{if(!e.isDestroyed&&o)if(n.schema.nodes.mention&&!t)e.dispatch(e.state.tr.replaceWith(n.selection.from,n.selection.to,n.schema.nodes.mention.create({type:It.Collection,modelId:o.id,label:o.name,id:Ct()})));else{const{hash:e}=new URL(r),t=`${Pt(o.icon)===zt.Emoji?o.icon+" ":""}${o.name}`;this.insertLink(`${o.path}${e}`,t)}})).catch((()=>{e.isDestroyed||this.insertLink(r)}))}else this.insertLink(r);return!0}if(l&&"markdown"!==l){if(r.includes("\n")&&d)return t.preventDefault(),e.dispatch(n.tr.replaceSelectionWith(n.schema.nodes.code_block.create({language:Object.keys(Tt).includes(c.mode)?c.mode:null})).insertText(r)),!0;if(u)return t.preventDefault(),e.dispatch(n.tr.insertText(r,n.selection.from,n.selection.to).addMark(n.selection.from,n.selection.to+r.length,n.schema.marks.code_inline.create())),!0}}if(isMarkdown(r)&&!isDropboxPaper(a)&&!function isContainingImage(e){return e?.includes("<img")}(a)||"markdown"===l||this.shiftKey||!a){t.preventDefault();const n=this.editor.pasteParser.parse(normalizePastedMarkdown(r));if(!n)return!1;const o=n.slice(0),i=e.state.tr;let a=e.state.selection.from;const s=function sliceSingleNode(e){return 0===e.openStart&&0===e.openEnd&&1===e.content.childCount?e.content.firstChild:null}(o);return s?.type===this.editor.schema.nodes.paragraph?s.forEach((e=>{i.insert(a,e),a+=e.nodeSize})):s?i.replaceSelectionWith(s,this.shiftKey):i.replaceSelection(o),e.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}return!1}},state:{init:()=>Rt.empty,apply:(e,t)=>{let n=e.mapping;const o=e.getMeta(this.key),i=t.find().length;if(o?.add){const{from:t,to:n,id:i}=o.add,r=[jt.inline(t,n,{class:"paste-placeholder"},{id:i})];return Rt.create(e.doc,r)}if(i&&(Lt(e)||o))try{n=At(e.before,e.doc,{complexSteps:!0,wordDiffs:!1,simplifyDiff:!0}).mapping}catch(r){console.warn("Failed to recreate transform: ",r)}if(t=t.map(n,e.doc),o?.remove){const{id:e}=o.remove,n=t.find(void 0,void 0,(t=>t.id===e));return t.remove(n)}return t}}})]}insertLink(e,t){const{view:n}=this.editor,{state:o}=n,{from:i}=o.selection,r=i+(t??e).length,a=n.state.tr.insertText(t??e,o.selection.from,o.selection.to).addMark(i,r,o.schema.marks.link.create({href:e})).setMeta(this.key,{add:{from:i,to:r,id:e}});n.dispatch(a),this.showPasteMenu(e)}keys(){return{Backspace:()=>(this.hidePasteMenu(),!1),"Mod-z":()=>(this.hidePasteMenu(),!1)}}}function isDropboxPaper(e){return e?.includes("usually-unique-id")}class PreventTab extends Ge{get name(){return"preventTab"}keys(){return{Tab:()=>!0,"Shift-Tab":()=>!0}}}class InputRule extends Qe{constructor(e,t){super(e,((e,n,o,i)=>{if(Je(e))return null;if(n[1]){const e=n[0].lastIndexOf(n[1]);t+=n[0].slice(e+n[1].length);const r=(o+=e)-i;r>0&&(t=n[0].slice(e-r,e)+t,o=i)}return e.tr.insertText(t,o,i)}))}}const Ps=new InputRule(/->$/,"→"),zs=new InputRule(/--$/,"—"),Es=new InputRule(/(?:^|\s)(1\/2)$/,"½"),Ts=new InputRule(/(?:^|\s)(3\/4)$/,"¾"),Rs=new InputRule(/\(c\)$/,"©️"),Ls=new InputRule(/\(r\)$/,"®️"),As=new InputRule(/\(tm\)$/,"™️"),js=new InputRule(/\.\.\.$/,"…"),Ns=new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),Os=new InputRule(/^(?!.*`)[\s\S]*(")$/,"”"),Bs=new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),Hs=new InputRule(/^(?!.*`)[\s\S]*(')$/,"’");class SmartText extends Ge{get name(){return"smart_text"}inputRules(){return this.options.userPreferences?.enableSmartText??1?[Ps,zs,Es,Ts,Rs,Ls,As,js,Ns,Os,Bs,Hs]:[]}}const Fs=[...Nt(Ot),Bt,SmartText,PasteHandler,ClipboardTextSerializer,EmojiMenuExtension,MentionMenuExtension,PreventTab,Keys],Ws=K(e.forwardRef(((e,t)=>{const n=Po({rejectOnEmpty:!1});return d(Nr,{extensions:Fs,userId:n?.id,...e,ref:t})}))),Us=c.div.withConfig({componentId:"sc-z7f3mi-0"})(["width:8px;height:8px;background:",";border-radius:8px;align-self:center;position:absolute;right:4px;"],N("accent"));const Vs=c(se).withConfig({componentId:"sc-h35671-0"})(["display:block;margin:0 8px;cursor:var(--pointer);"]),qs=c(Ws).withConfig({componentId:"sc-h35671-1"})(["font-size:0.9em;margin-top:4px;",""],Ht(3)),Ks=c(Mo).withConfig({componentId:"sc-h35671-2"})(["margin-top:4px;"]),Gs=c(p).withConfig({componentId:"sc-h35671-3"})(["position:relative;padding:8px 12px;padding-right:40px;border-radius:4px;&:",",&:active{background:",";}"],he,N("listItemHoverBackground")),Zs=K((function NotificationListItem({notification:e,onNavigate:t}){const{t:n}=E(),{collections:o}=z(),i=e.document?.collectionId,r=i?o.get(i):void 0;return d(Vs,{to:e.path??"",onClick:n=>{if(n.altKey)return n.preventDefault(),n.stopPropagation(),void e.toggleRead();e.markAsRead(),t()},children:h(Gs,{gap:8,$unread:!e.viewedAt,children:[d(Ks,{model:e.actor,size:So.Large}),h(p,{column:!0,children:[h(Ft,{as:"div",size:"small",children:[d(Ft,{weight:"bold",children:e.actor?.name??n("Unknown")})," ",e.eventText(n)," ",d(Ft,{weight:"bold",children:e.subject})]}),h(Ft,{type:"tertiary",size:"xsmall",children:[d(Oo,{dateTime:e.createdAt,addSuffix:!0})," ",r&&h(m,{children:["· ",r.name]})]}),e.comment&&d(qs,{defaultValue:Wt(e.comment.data)})]}),e.viewedAt?null:d(Us,{style:{right:20}})]})})}));const Xs=c(L).withConfig({componentId:"sc-z7ryqb-0"})(["display:flex;align-items:center;justify-content:center;min-height:200px;"]),Ys=c(pe).withConfig({componentId:"sc-z7ryqb-1"})(["color:",";&:",",&:active{color:",";background:",";}"],N("textSecondary"),he,N("text"),N("sidebarControlHoverBackground")),Qs=c(p).withConfig({componentId:"sc-z7ryqb-2"})(["padding:8px 12px 12px;min-height:44px;","{opacity:0.75;transition:opacity 250ms ease-in-out;}&:",",&:focus-within{","{opacity:1;}}"],Ys,he,Ys),Js=K(e.forwardRef((function Notifications$1({onRequestClose:t,isOpen:n},o){const i=useActionContext(),{notifications:r}=z(),{t:a}=E(),s=0===r.orderedData.length;return e.useEffect((()=>{M.bridge&&"setNotificationCount"in M.bridge&&M.bridge.setNotificationCount(r.approximateUnreadCount),"setAppBadge"in navigator&&(r.approximateUnreadCount?navigator.setAppBadge(r.approximateUnreadCount):navigator.clearAppBadge())}),[r.approximateUnreadCount]),d(Ke,{children:h(p,{style:{width:"100%"},column:!0,children:[h(Qs,{justify:"space-between",children:[d(Ft,{weight:"bold",as:"span",children:a("Notifications")}),h(p,{gap:8,children:[r.approximateUnreadCount>0&&d(ce,{content:a("Mark all as read"),children:d(Ys,{action:Ir,context:i,children:d(b.MarkAsReadIcon,{})})}),d(NotificationMenu,{})]})]}),d(e.Suspense,{fallback:null,children:d(lt,{ref:o,flex:!0,topShadow:!0,children:d(zo,{fetch:r.fetchPage,options:{archived:!1},items:n?r.orderedData:void 0,renderItem:e=>d(Zs,{notification:e,onNavigate:t},e.id)})})}),s&&h(Xs,{children:[a("You're all caught up"),"."]})]})})}))),ec=c(lo).withConfig({componentId:"sc-1ez7nly-0"})(["z-index:",";"],O.menu),tc=K((({children:t})=>{const{t:n}=E(),o=e.useRef(null),i=Ho({gutter:0,placement:"top-start",unstable_fixed:!0});return e.useEffect((()=>{i.visible&&o.current&&(o.current.scrollTop=0)}),[i.visible]),h(m,{children:[d(Fo,{...i,children:t}),d(ec,{...i,scrollable:!1,mobilePosition:"bottom","aria-label":n("Notifications"),unstable_initialFocusRef:o,shrink:!0,flex:!0,children:d(Js,{onRequestClose:i.hide,isOpen:i.visible,ref:o})})]})})),nc=c.div.withConfig({componentId:"sc-1x5qpj4-0"})(["position:absolute;top:0;bottom:0;right:",";left:",";width:2px;cursor:col-resize;"," &:hover{transition-delay:500ms;transition:background 250ms ease-in-out;background:",';}&:after{content:"";position:absolute;top:0;bottom:0;right:-4px;width:10px;',"}"],(e=>"right"!==e.dir?"-1px":"auto"),(e=>"right"===e.dir?"-1px":"auto"),Ut(),N("sidebarActiveBackground"),Ut()),oc=e.forwardRef((function _SidebarButton({position:e="top",showMoreMenu:t,image:n,title:o,children:i,...r},a){return h(rc,{justify:"space-between",align:"center",shrink:!1,$position:e,children:[h(cc,{...r,$position:e,as:"button",ref:a,role:"button",children:[h(sc,{gap:8,align:"center",children:[n,o&&d(ac,{children:o})]}),t&&d(ic,{})]}),i]})})),ic=c(b.MoreIcon).withConfig({componentId:"sc-1z06wfn-0"})(["flex-shrink:0;"]),rc=c(p).withConfig({componentId:"sc-1z06wfn-1"})(["overflow:hidden;padding-top:","px;",""],(e=>"top"===e.$position&&M.hasInsetTitlebar()?36:0),Vt()),ac=c(Ft).withConfig({componentId:"sc-1z06wfn-2"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),sc=c(p).withConfig({componentId:"sc-1z06wfn-3"})(["flex-shrink:1;flex-grow:1;"]),cc=c(p).withConfig({componentId:"sc-1z06wfn-4"})(["flex:1;color:",";align-items:center;padding:4px;font-size:15px;font-weight:500;border-radius:4px;border:0;margin:","px 0;background:none;flex-shrink:0;-webkit-appearance:none;text-decoration:none;text-align:left;user-select:none;cursor:var(--pointer);position:relative;"," ",' &:active,&:hover,&[aria-expanded="true"]{color:',";background:",";}&:last-child{margin-right:8px;}&:first-child{margin-left:8px;}"],N("textTertiary"),(e=>"top"===e.$position?16:8),Ut(),qt(4),N("sidebarText"),N("sidebarActiveBackground")),lc=c(oc).withConfig({componentId:"sc-1qrp9t2-0"})(["opacity:0;transition:opacity 100ms ease-in-out;&:",",&:active{opacity:1;}"],he),dc=e.forwardRef((function _Sidebar({children:t,hidden:n=!1,className:o},i){const[r,a]=e.useState(!1),s=re(),{ui:c}=z(),l=T(),u=ue(l),{isMenuOpen:p}=_o(),m=Po({rejectOnEmpty:!1}),f=Kt(),b=c.sidebarWidth,g=c.sidebarIsClosed&&!p,v=s.sidebarMaxWidth,x=s.sidebarMinWidth+16,[y,w]=e.useState(0),[k,$]=e.useState(!1),[_,C]=e.useState(!1),[I,S]=e.useState(!1),[M,D]=e.useState(!1),P=b<x,E=e.useCallback((e=>{e.preventDefault();const t=Math.min(e.pageX-y,v),n=t<x/2;c.set({sidebarWidth:n?s.sidebarCollapsedWidth:t})}),[c,s,y,x,v]),R=e.useCallback((()=>{if(S(!1),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),P){b<x/2?(C(!1),a(!0),c.collapseSidebar()):(c.set({sidebarWidth:x}),C(!0))}else c.set({sidebarWidth:b})}),[c,P,x,b]),L=e.useCallback((()=>{$(!1)}),[]),A=e.useCallback((e=>{e.preventDefault(),document.hasFocus()&&(w(e.pageX-b),S(!0),C(!1))}),[b]),j=e.useCallback((()=>{c.sidebarIsClosed&&($(document.hasFocus()),D(!0))}),[c.sidebarIsClosed]),N=e.useCallback((e=>{M&&$(document.hasFocus()&&e.pageX<b&&e.pageY<window.innerHeight&&e.pageY>0)}),[b,M]);e.useEffect((()=>{c.sidebarIsClosed&&($(!1),D(!1))}),[c.sidebarIsClosed]),e.useEffect((()=>{_&&setTimeout((()=>C(!1)),250)}),[_]),e.useEffect((()=>{r&&setTimeout((()=>{c.set({sidebarWidth:x}),a(!1)}),250)}),[c,x,r]),e.useEffect((()=>(I?(document.body.style.cursor="col-resize",document.addEventListener("mousemove",E),document.addEventListener("mouseup",R)):document.body.style.cursor="initial",window.addEventListener("blur",L),()=>{window.removeEventListener("blur",L),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",R)})),[I,E,L,R]);const O=e.useCallback((()=>{c.set({sidebarWidth:s.sidebarWidth})}),[c,s.sidebarWidth]);e.useEffect((()=>{c.setSidebarResizing(I)}),[c,I]),e.useEffect((()=>{l!==u&&c.hideMobileSidebar()}),[c,l,u]);const B=e.useMemo((()=>({width:`${b}px`})),[b]);return h(Gt,{children:[h(pc,{id:"sidebar",ref:i,style:B,$hidden:n,$isHovering:k,$isAnimating:_,$isSmallerThanMinimum:P,$mobileSidebarVisible:c.mobileSidebarVisible,$collapsed:g,$isMobile:f,className:o,onPointerDown:j,onPointerMove:j,onPointerLeave:N,column:!0,children:[t,m&&d(kr,{children:e=>d(oc,{...e,showMoreMenu:!0,title:m.name,position:"bottom",image:d(Mo,{alt:m.name,model:m,size:24,style:{marginLeft:4}}),children:d(Notifications,{})})}),d(nc,{onMouseDown:A,onDoubleClick:c.sidebarIsClosed?void 0:O})]}),c.mobileSidebarVisible&&d(uc,{onClick:c.toggleMobileSidebar})]})})),Notifications=()=>d(tc,{children:e=>d(oc,{...e,position:"bottom",image:d(Cr,{})})}),uc=c.a.withConfig({componentId:"sc-11150g7-0"})(["animation:"," 250ms ease-in-out;position:fixed;top:0;left:0;bottom:0;right:0;cursor:default;z-index:",";background:",";"],Zt,O.mobileSidebar-1,N("backdrop")),hoverStyles=e=>`\n  transform: none;\n  box-shadow: ${e.$collapsed?"rgba(0, 0, 0, 0.2) 1px 0 4px":e.$isSmallerThanMinimum?"rgba(0, 0, 0, 0.1) inset -1px 0 2px":"none"};\n\n  ${lc} {\n    opacity: 1;\n  }\n`,pc=c(p).withConfig({componentId:"sc-11150g7-1"})(["position:fixed;top:0;bottom:0;width:100%;background:",";transition:box-shadow 150ms ease-in-out,transform 150ms ease-out,",";transform:translateX( "," );z-index:",";max-width:80%;min-width:280px;"," @media print{display:none;transform:none;}& > div{transition:opacity 150ms ease-in-out;opacity:",";}",";"],N("sidebarBackground"),(e=>e.$isAnimating?",width 250ms ease-out":""),(e=>e.$mobileSidebarVisible?0:"-100%"),O.mobileSidebar,Xt(),(e=>e.$hidden?"0":e.$isHovering?"1":e.$isMobile?e.$mobileSidebarVisible?"1":"0":e.$collapsed?"0":"1"),q("tablet")`
    z-index: ${O.sidebar};
    margin: 0;
    min-width: 0;
    transform: translateX(${e=>e.$collapsed?`calc(-100% + ${M.hasInsetTitlebar()?8:16}px)`:0});

    ${e=>e.$isHovering&&$e(hoverStyles)}

    &:hover {
      ${lc} {
        opacity: 1;
      }
    }

    &:focus-within {
      ${hoverStyles}

      & > div {
        opacity: 1;
      }
    }
  `),hc=K(dc);function OverflowMenuButton({className:e,...t}){return d(ur,{...t,children:t=>d(pe,{className:e,...t,children:d(b.MoreIcon,{})})})}const mc=e.lazy((()=>je((()=>import("./index.4lU6ZntV.js")),__vite__mapDeps([18,1,8,5,4,19,20,21,6,3,7,9,2,10,11,12,13,14,15,16,17])))),fc=K((function CollectionForm_({handleSubmit:t,collection:n}){const o=qo(),{t:i}=E(),[r,a]=Vo(!1),s=e.useMemo((()=>n?.color??ro(tn)),[n?.color]),c=d(St,{value:"collection",color:s}),{register:l,handleSubmit:u,formState:m,watch:f,control:b,setValue:g,setFocus:v}=Wo({mode:"all",defaultValues:{name:n?.name??"",icon:n?.icon,sharing:n?.sharing??!0,permission:n?.permission,color:s}}),x=f();e.useEffect((()=>{r||n||g("icon",Yt.findIconByKeyword(x.name)??x.icon??"collection")}),[n,r,g,x.name,x.icon]),e.useEffect((()=>{setTimeout((()=>v("name",{shouldSelect:!0})),100)}),[v]);const y=e.useCallback(((e,t)=>{e!==x.icon&&v("name"),g("icon",e),g("color",t)}),[v,g,x.icon]);return h("form",{onSubmit:u(t),children:[h(Ft,{as:"p",children:[d(A,{children:"Collections are used to group documents and choose permissions"}),"."]}),d(p,{gap:8,children:d(Qt,{type:"text",placeholder:i("Name"),...l("name",{required:!0,maxLength:Jt.maxNameLength}),prefix:d(e.Suspense,{fallback:c,children:d(bc,{icon:x.icon,color:x.color??s,initial:x.name[0],popoverPosition:"right",onOpen:a,onChange:y})}),autoComplete:"off",autoFocus:!0,flex:!0})}),!n&&d(Uo,{control:b,name:"permission",render:({field:e})=>d(Co,{ref:e.ref,value:e.value,onChange:t=>{e.onChange(t===en?null:t)},note:i("The default access for workspace members, you can share with more users or groups later.")})}),o.sharing&&d(uo,{id:"sharing",label:i("Public document sharing"),note:i("Allow documents within this collection to be shared publicly on the internet."),...l("sharing")}),d(p,{justify:"flex-end",children:d(j,{type:"submit",disabled:m.isSubmitting||!m.isValid,children:n?m.isSubmitting?`${i("Saving")}…`:i("Save"):m.isSubmitting?`${i("Creating")}…`:i("Create")})})]})})),bc=c(mc).withConfig({componentId:"sc-8m9n3n-0"})(["margin-left:4px;margin-right:4px;"]),gc=K((function CollectionEdit_({collectionId:t,onSubmit:n}){const{collections:o}=z(),i=o.get(t),r=e.useCallback((async e=>{try{await(i?.save(e)),n?.()}catch(t){mt.error(t.message)}}),[i,n]);return d(fc,{collection:i,handleSubmit:r})})),vc=K((function CollectionNew_({onSubmit:t}){const{collections:n}=z(),o=e.useCallback((async e=>{try{const o=await n.save(e);nn((()=>{o.documents=[]})),t?.(),g.push(o.path)}catch(o){mt.error(o.message)}}),[n,t]);return d(fc,{handleSubmit:o})}));const xc=K((function CollectionDeleteDialog({collection:e,onSubmit:t}){const n=qo(),{ui:o}=z(),i=Me(),{t:r}=E();return d(jo,{onSubmit:async()=>{e.id===o.activeCollectionId&&i.push(v()),await e.delete(),t(),mt.success(r("Collection deleted"))},submitText:r("I’m sure – Delete"),savingText:`${r("Deleting")}…`,danger:!0,children:h(m,{children:[d(Ft,{as:"p",type:"secondary",children:d(A,{defaults:"Are you sure about that? Deleting the <em>{{collectionName}}</em> collection is permanent and cannot be restored, however all published documents within will be moved to the trash.",values:{collectionName:e.name},components:{em:d("strong",{})}})}),n.defaultCollectionId===e.id?d(Ft,{as:"p",type:"secondary",children:d(A,{defaults:"Also, <em>{{collectionName}}</em> is being used as the start view – deleting it will reset the start view to the Home page.",values:{collectionName:e.name},components:{em:d("strong",{})}})}):null]})})})),yc=c.div.withConfig({componentId:"sc-kycvpb-0"})(["",":",",",'[aria-expanded="true"]{background:',";}"],pe,he,pe,(e=>on(.05,e.theme.buttonNeutralBackground))),wc=c.div.withConfig({componentId:"sc-kycvpb-1"})(["border-top:1px dashed ",";margin:8px 0;"],N("divider")),kc=c(p).withConfig({componentId:"sc-kycvpb-2"})(["position:sticky;z-index:1;top:0;background:",";color:",";border-bottom:1px solid ",';padding:0 24px 12px;margin-top:0;margin-left:-24px;margin-right:-24px;margin-bottom:12px;cursor:text;&:before{content:"";position:absolute;left:0;right:0;top:-20px;height:20px;background:',";}"],N("menuBackground"),N("textTertiary"),N("inputBorder"),N("menuBackground")),$c={initial:{opacity:0,width:0,marginRight:0},animate:{opacity:1,width:"auto",marginRight:8,transition:{type:"spring",duration:.2,bounce:0}},exit:{opacity:0,width:0,marginRight:0}};const _c=e.forwardRef((function CopyToClipboard(t,n){const{text:o,onCopy:i,children:r,...a}=t,s=e.useCallback((t=>{const n=e.Children.only(r);rn(o,{debug:"production"!==P.ENVIRONMENT,format:"text/plain"}),i?.(),n&&n.props&&"function"==typeof n.props.onClick?n.props.onClick(t):(t.preventDefault(),t.stopPropagation())}),[r,i,o]),c=e.Children.only(r);return c?e.cloneElement(c,{...a,ref:"ref"in c?ie([c.ref,n]):n,onClick:s}):null}));function CopyLinkButton({url:t,onCopy:n}){const{t:o}=E(),i=e.useRef(),r=e.useCallback((()=>(n(),i.current=setTimeout((()=>{mt.message(o("Link copied to clipboard"))}),100),()=>{i.current&&clearTimeout(i.current)})),[n,o]);return d(ce,{content:o("Copy link"),placement:"top",children:d(_c,{text:t,onCopy:r,children:d(pe,{type:"button",children:d(b.LinkIcon,{size:20})})})})}const Cc=c(j).withConfig({componentId:"sc-1bsxa1i-0"})(["font-size:13px;height:26px;","{padding:0 6px;line-height:26px;min-height:26px;}"],an);function InputMemberPermissionSelect(e){const{value:t,onChange:n,...o}=e,{t:i}=E();return d(Ic,{label:i("Permissions"),options:e.permissions,ariaLabel:i("Permissions"),onChange:n,value:t||en,labelHidden:!0,nude:!0,...o})}const Ic=c(Io).withConfig({componentId:"sc-fks7fs-0"})(["margin:0;font-size:14px;border-color:transparent;box-shadow:none;color:",";select{margin:0;}"],N("textSecondary"));function PermissionAction({permission:e,permissions:t,action:n,onChange:o}){const{t:i}=E(),r=useActionContext();return d(l,{timing:"150ms",children:h(p,{gap:4,children:[d(Sc,{permissions:t,onChange:o,value:e,labelHidden:!0,nude:!0}),d(Cc,{action:n,context:r,children:i("Add")})]})},"invite")}const Sc=c(InputMemberPermissionSelect).withConfig({componentId:"sc-1w3k9q1-0"})(["font-size:13px;height:26px;","{line-height:26px;min-height:26px;}"],an),Mc=e.forwardRef((function _SearchInput({onChange:t,onClick:n,onKeyDown:o,query:i,back:r,action:a},s){const{t:c}=E(),l=e.useRef(null),u=Kt(),m=e.useCallback((e=>{e.target.closest("button")||(l.current?.focus(),n(e))}),[n]);return u?h(p,{align:"center",style:{marginBottom:12},auto:!0,children:[r,d(Qt,{placeholder:`${c("Add or invite")}…`,value:i,onChange:t,onClick:n,onKeyDown:o,autoFocus:!0,margin:0,flex:!0,children:a},"input")]}):d(kc,{align:"center",onClick:m,children:h(AnimatePresence,{initial:!1,children:[r,d(sn,{ref:ie([l,s]),placeholder:`${c("Add or invite")}…`,value:i,onChange:t,onClick:n,onKeyDown:o,style:{padding:"6px 0"}},"input"),a]})})}));var Dc=function copyArray$1(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},Pc=cn,zc=ye,Ec=Dc,Tc=ln;const Rc=ve((function concat(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Pc(Tc(n)?Ec(n):[n],zc(t,1))})),useMaxHeight=({elementRef:t,maxViewportPercentage:n=90,margin:o=16})=>{const[i,r]=e.useState(10),{height:a}=dn(),s=e.useCallback((()=>{if(t?.current){const e=a/100*n-o;r(Math.min(e,t?.current?a-t.current.getBoundingClientRect().top-o:0))}else r(0)}),[t,a,o,n]);return e.useLayoutEffect(s,[s]),{maxHeight:i,calcMaxHeight:s}},Lc=c(b.PlusIcon).withConfig({componentId:"sc-1okjutx-0"})(["opacity:0;"]),Ac=c(No).attrs({small:!0,border:!1}).withConfig({componentId:"sc-1okjutx-1"})(["margin:0 -16px;padding:6px 16px;border-radius:8px;&:"," ",",&:focus ",",&:focus-within ","{opacity:1;}"],he,Lc,Lc,Lc),jc=K(e.forwardRef((function _Suggestions({document:t,collection:n,query:o,pendingIds:i,addPendingId:r,removePendingId:a,onEscape:s},c){const l=e.useRef(!1),{users:u,groups:p}=z(),{t:f}=E(),b=Po(),g=e.useRef(null),{maxHeight:v}=useMaxHeight({elementRef:g,maxViewportPercentage:70}),x=un((e=>{u.fetchPage({query:e}),p.fetchPage({query:e})}),250,void 0,{leading:!0}),y=e.useCallback((e=>({id:e,name:e,avatarUrl:"",color:pn(e),initial:e[0].toUpperCase(),email:f("Invite to workspace")})),[f]),w=e.useMemo((()=>{const e=(t?u.notInDocument(t.id,o):n?u.notInCollection(n.id,o):u.activeOrInvited).filter((e=>!e.isSuspended&&e.id!==b.id));return isEmail(o)&&e.push(y(o)),[...t?p.notInDocument(t.id,o):n?p.notInCollection(n.id,o):[],...e]}),[y,u,u.activeOrInvited,p,p.orderedData,t?.id,t?.members,n?.id,b.id,o,f]),k=e.useMemo((()=>i.map((e=>isEmail(e)?y(e):u.get(e)??p.get(e))).filter(Boolean)),[u,p,y,i]);function getListItemProps(e){return e instanceof hn?{title:e.name,subtitle:f("{{ count }} member",{count:e.memberCount}),image:d(GroupAvatar,{group:e})}:{title:e.name,subtitle:e.email?e.email:e.isViewer?f("Viewer"):f("Editor"),image:d(Mo,{model:e,size:So.Medium})}}e.useEffect((()=>{x(o)}),[o,x]);const $=0===w.length,_=w.filter((e=>!i.includes(e.id)));return u.isFetching&&$&&l.current?d(Eo,{}):(l.current=!1,d(Fc,{ref:g,hiddenScrollbars:!0,style:{maxHeight:v},children:d(To,{ref:c,onEscape:s,"aria-label":f("Suggestions for invitation"),items:Rc(k,_),children:()=>[...k.map((t=>e.createElement(Bc,{keyboardNavigation:!0,...getListItemProps(t),key:t.id,onClick:()=>a(t.id),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),a(t.id))},actions:h(m,{children:[d(Nc,{}),d(Oc,{})]})}))),k.length>0&&(_.length>0||$)&&d(Hc,{}),..._.map((t=>e.createElement(Ac,{keyboardNavigation:!0,...getListItemProps(t),key:t.id,onClick:()=>r(t.id),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),r(t.id))},actions:d(Lc,{})}))),$&&d(L,{style:{marginTop:22},children:f("No matches")})]})}))}))),Nc=c(b.CheckmarkIcon).withConfig({componentId:"sc-ed9g54-0"})(["color:",";"],N("accent")),Oc=c(b.CloseIcon).withConfig({componentId:"sc-ed9g54-1"})(["display:none;"]),Bc=c(Ac).withConfig({componentId:"sc-ed9g54-2"})(["&:","{","{display:none;}","{display:block;}}"],he,Nc,Oc),Hc=c.div.withConfig({componentId:"sc-ed9g54-3"})(["border-top:1px dashed ",";margin:12px 0;"],N("divider")),Fc=c(lt).withConfig({componentId:"sc-ed9g54-4"})(["padding:12px 24px;margin:-12px -24px;"]);function Placeholder({count:e=1}){return d(l,{children:Ro(e,(e=>d(Ac,{image:d(io,{width:So.Medium,height:So.Medium}),title:d(io,{maxWidth:50,minWidth:30,height:14,style:{marginTop:4,marginBottom:4}}),subtitle:d(io,{maxWidth:75,minWidth:50,height:12,style:{marginBottom:4}})},e)))})}const Wc=K((({collection:t,invitedInSession:n})=>{const{memberships:o,groupMemberships:i}=z(),r=Ko(t),{t:a}=E(),s=re(),c=t.id,{request:l,loading:u}=useRequest(e.useCallback((()=>o.fetchAll({id:c})),[o,c])),{request:p,loading:f}=useRequest(e.useCallback((()=>i.fetchAll({collectionId:c})),[i,c])),g=i.inCollection(c),v=o.inCollection(c),x=!(g.length>0||v.length>0)&&(u||f);e.useEffect((()=>{l(),p()}),[l,p]);const y=e.useRef(null),{maxHeight:w,calcMaxHeight:k}=useMaxHeight({elementRef:y,maxViewportPercentage:70});e.useEffect((()=>{k()}));const $=e.useMemo((()=>[{label:a("View only"),value:mn.Read},{label:a("Can edit"),value:mn.ReadWrite},{label:a("Manage"),value:mn.Admin},{divider:!0,label:a("Remove"),value:en}]),[a]);return d(Uc,{ref:y,hiddenScrollbars:!0,style:{maxHeight:w},children:x?d(Placeholder,{count:2}):h(m,{children:[d(Ac,{image:d(le,{color:s.accent,size:So.Medium,children:d(b.UserIcon,{color:s.accentText,size:16})}),title:a("All members"),subtitle:a("Everyone in the workspace"),actions:d("div",{style:{marginRight:-8},children:d(Co,{style:{margin:0},onChange:e=>{t.save({permission:e===en?null:e})},disabled:!r.update,value:t?.permission,labelHidden:!0,nude:!0})})}),g.filter((e=>e.group)).sort(((e,t)=>((n.includes(e.group.id)?"_":"")+e.group.name).localeCompare(t.group.name))).map((e=>d(Ac,{image:d(GroupAvatar,{group:e.group,backgroundColor:s.modalBackground}),title:e.group.name,subtitle:a("{{ count }} member",{count:e.group.memberCount}),actions:d("div",{style:{marginRight:-8},children:d(InputMemberPermissionSelect,{style:{margin:0},permissions:$,onChange:async n=>{try{n===en?await i.delete({collectionId:t.id,groupId:e.groupId}):await i.create({collectionId:t.id,groupId:e.groupId,permission:n})}catch(o){return mt.error(o.message),!1}return!0},disabled:!r.update,value:e.permission,labelHidden:!0,nude:!0})})},e.id))),v.filter((e=>e.user)).sort(((e,t)=>((n.includes(e.user.id)?"_":"")+e.user.name).localeCompare(t.user.name))).map((e=>d(Ac,{image:d(Mo,{model:e.user,size:So.Medium}),title:e.user.name,subtitle:e.user.email,actions:d("div",{style:{marginRight:-8},children:d(InputMemberPermissionSelect,{style:{margin:0},permissions:$,onChange:async n=>{try{n===en?await o.delete({collectionId:t.id,userId:e.userId}):await o.create({collectionId:t.id,userId:e.userId,permission:n})}catch(i){return mt.error(i.message),!1}return!0},disabled:!r.update,value:e.permission,labelHidden:!0,nude:!0})})},e.id)))]})})})),Uc=c(lt).withConfig({componentId:"sc-4dhz9t-0"})(["padding:12px 24px;margin:-12px -24px;"]);const Vc=K((function SharePopover$2({collection:t,visible:n,onRequestClose:o}){const i=qo(),{groupMemberships:r,users:a,groups:s,memberships:c}=z(),{t:l}=E(),u=Ko(t),[p,g]=e.useState(""),[v,x,y]=Vo(),[w,k]=e.useState(n),[$,_]=e.useState([]),[C,I]=e.useState([]),[S,M]=e.useState(mn.Read),D=ue($),P=e.useRef(null),T=e.useRef(null);co("Escape",(e=>{n&&(e.preventDefault(),e.stopImmediatePropagation(),v?y():o())}),{allowInInput:!0}),e.useEffect((()=>{n&&(_([]),y())}),[y,n]),e.useEffect((()=>{v||g("")}),[v]),e.useEffect((()=>{n&&k(!0)}),[n]),e.useEffect((()=>{if(D&&$.length>D.length)g(""),T.current?.focus();else if(D&&$.length<D.length){const e=P.current?.firstElementChild;e&&e.focus()}}),[$,D]);const R=e.useCallback((e=>{x(),g(e.target.value)}),[x,g]),L=e.useCallback((e=>{_((t=>[...t,e]))}),[_]),A=e.useCallback((e=>{_((t=>t.filter((t=>t!==e))))}),[_]),j=e.useCallback((e=>{if(!e.nativeEvent.isComposing&&"ArrowDown"===e.key&&!e.shiftKey){if(e.preventDefault(),e.currentTarget.value){const t=e.currentTarget.value.length;if((e.currentTarget.selectionStart||0)<t)return e.currentTarget.selectionStart=t,void(e.currentTarget.selectionEnd=t)}const t=P.current?.firstElementChild;t&&t.focus()}}),[]),N=e.useCallback((()=>T.current?.focus()),[]),O=e.useMemo((()=>f({name:l("Invite"),section:UserSection,perform:async()=>{const e=await Promise.all($.map((async e=>{let n,o;if(isEmail(e)){n=(await a.invite([{email:e,name:e,role:i.defaultUserRole}]))[0]}else n=a.get(e),o=s.get(e);return n?(await c.create({collectionId:t.id,userId:n.id,permission:S}),n):o?(await r.create({collectionId:t.id,groupId:o.id,permission:S}),o):void 0}))),n=e.filter((e=>e instanceof fn)),o=e.filter((e=>e instanceof hn));if(1===n.length&&1===e.length){const e=n[0];mt.message(l("{{ userName }} was added to the collection",{userName:e.name}),{icon:d(Mo,{model:e,size:So.Toast})})}else if(1===o.length&&1===e.length){const e=o[0];mt.success(l("{{ userName }} was added to the collection",{userName:e.name}))}else 0===o.length?mt.success(l("{{ count }} people added to the collection",{count:n.length})):mt.success(l("{{ count }} people and {{ count2 }} groups added to the collection",{count:n.length,count2:o.length}));I((e=>[...e,...$])),_([]),y()}})),[t.id,r,s,y,c,$,S,l,i.defaultUserRole,a]),B=e.useMemo((()=>[{label:l("View only"),value:mn.Read},{label:l("Can edit"),value:mn.ReadWrite},{label:l("Manage"),value:mn.Admin}]),[l]);if(!w)return null;const H=d(m,{children:v&&d(pe,{as:Ii.button,...$c,onClick:e=>{e.preventDefault(),e.stopPropagation(),y()},children:d(b.BackIcon,{})},"back")}),F=v?$.length?d(PermissionAction,{permission:S,permissions:B,action:O,onChange:e=>M(e)},"invite"):null:d(CopyLinkButton,{url:bn(gn(t.path)),onCopy:o},"copy-link");return h(yc,{children:[u.update&&d(Mc,{ref:T,onChange:R,onClick:x,onKeyDown:j,query:p,back:H,action:F}),v&&d(jc,{ref:P,query:p,collection:t,pendingIds:$,addPendingId:L,removePendingId:A,onEscape:N}),d("div",{style:{display:v?"none":"block"},children:d(Wc,{collection:t,invitedInSession:C})})]})}));function getHeaderExpandedKey(e){return`sidebar-header-${e}`}const Header=({id:t,title:n,children:o})=>{const[i,r]=e.useState(!0),[a,s]=vn(getHeaderExpandedKey(t??""),!0);e.useEffect((()=>{a||r(!1)}),[a]);const c=e.useCallback((()=>{s(!a)}),[a,s]);return h(m,{children:[d(Xc,{children:h(Gc,{onClick:c,disabled:!t,children:[n,t&&d(Zc,{expanded:a,size:20})]})}),a&&(i?o:d(Kc,{children:o}))]})},qc=ke(["from{opacity:0;transform:translateY(-8px);}to{opacity:1;transform:translateY(0px);}"]),Kc=c.span.withConfig({componentId:"sc-gu36x3-0"})(["animation:"," 100ms ease-in-out;"],qc),Gc=c.button.withConfig({componentId:"sc-gu36x3-1"})(["display:inline-flex;align-items:center;font-size:13px;font-weight:600;user-select:none;color:",";letter-spacing:0.03em;margin:0;padding:4px 2px 4px 12px;height:22px;border:0;background:none;border-radius:4px;-webkit-appearance:none;transition:all 100ms ease;"," &:not(:disabled):hover,&:not(:disabled):active{color:",";cursor:var(--pointer);}"],N("textTertiary"),Ut(),N("textSecondary")),Zc=c(b.CollapsedIcon).withConfig({componentId:"sc-gu36x3-2"})(["transition:opacity 100ms ease,transform 100ms ease,fill 50ms !important;",";opacity:0;"],(({expanded:e})=>!e&&"transform: rotate(-90deg);")),Xc=c.h3.withConfig({componentId:"sc-gu36x3-3"})(["margin:0;&:hover{","{opacity:1;}}"],Zc),ColorCollectionIcon=({collection:e})=>d(po,{collection:e}),Yc=f({name:({t:e})=>e("Open collection"),analyticsName:"Open collection",section:CollectionSection,shortcut:["o","c"],icon:d(b.CollectionIcon,{}),children:({stores:e})=>e.collections.orderedData.map((e=>({id:e.path,name:e.name,icon:d(ColorCollectionIcon,{collection:e}),section:CollectionSection,perform:()=>g.push(e.path)})))}),Qc=f({name:({t:e})=>e("New collection"),analyticsName:"New collection",section:CollectionSection,icon:d(b.PlusIcon,{}),keywords:"create",visible:({stores:e})=>e.policies.abilities(e.auth.team?.id||"").createCollection,perform:({t:e,event:t,stores:n})=>{t?.preventDefault(),t?.stopPropagation(),n.dialogs.openModal({title:e("Create a collection"),content:d(vc,{onSubmit:n.dialogs.closeAllModals})})}}),Jc=f({name:({t:e,isContextMenu:t})=>t?`${e("Edit")}…`:e("Edit collection"),analyticsName:"Edit collection",section:ActiveCollectionSection,icon:d(b.EditIcon,{}),visible:({activeCollectionId:e,stores:t})=>!!e&&t.policies.abilities(e).update,perform:({t:e,activeCollectionId:t,stores:n})=>{t&&n.dialogs.openModal({title:e("Edit collection"),content:d(gc,{onSubmit:n.dialogs.closeAllModals,collectionId:t})})}}),el=f({name:({t:e,isContextMenu:t})=>t?`${e("Permissions")}…`:e("Collection permissions"),analyticsName:"Collection permissions",section:ActiveCollectionSection,icon:d(b.PadlockIcon,{}),visible:({activeCollectionId:e,stores:t})=>!!e&&t.policies.abilities(e).update,perform:({t:e,activeCollectionId:t,stores:n})=>{if(!t)return;const o=n.collections.get(t);o&&n.dialogs.openModal({title:e("Share this collection"),style:{marginBottom:-12},content:d(Vc,{collection:o,onRequestClose:n.dialogs.closeAllModals,visible:!0})})}}),tl=f({name:({t:e})=>e("Search in collection"),analyticsName:"Search collection",section:ActiveCollectionSection,icon:d(b.SearchIcon,{}),visible:({activeCollectionId:e,stores:t})=>{if(!e)return!1;const n=t.collections.get(e);return!!n?.isActive&&t.policies.abilities(e).readDocument},perform:({activeCollectionId:e})=>{g.push(x({collectionId:e}))}}),nl=f({name:({t:e})=>e("Star"),analyticsName:"Star collection",section:ActiveCollectionSection,icon:d(b.StarredIcon,{}),keywords:"favorite bookmark",visible:({activeCollectionId:e,stores:t})=>{if(!e)return!1;const n=t.collections.get(e);return!n?.isStarred&&t.policies.abilities(e).star},perform:async({activeCollectionId:e,stores:t})=>{if(!e)return;const n=t.collections.get(e);await(n?.star()),xn(getHeaderExpandedKey("starred"),!0)}}),ol=f({name:({t:e})=>e("Unstar"),analyticsName:"Unstar collection",section:ActiveCollectionSection,icon:d(b.UnstarredIcon,{}),keywords:"unfavorite unbookmark",visible:({activeCollectionId:e,stores:t})=>{if(!e)return!1;const n=t.collections.get(e);return!!n?.isStarred&&t.policies.abilities(e).unstar},perform:async({activeCollectionId:e,stores:t})=>{if(!e)return;const n=t.collections.get(e);await(n?.unstar())}}),il=f({name:({t:e})=>e("Subscribe"),analyticsName:"Subscribe to collection",section:ActiveCollectionSection,icon:d(b.SubscribeIcon,{}),visible:({activeCollectionId:e,stores:t})=>{if(!e)return!1;const n=t.collections.get(e);return!n?.isSubscribed&&t.policies.abilities(e).subscribe},perform:async({activeCollectionId:e,stores:t,t:n})=>{if(!e)return;const o=t.collections.get(e);await(o?.subscribe()),mt.success(n("Subscribed to document notifications"))}}),rl=f({name:({t:e})=>e("Unsubscribe"),analyticsName:"Unsubscribe from collection",section:ActiveCollectionSection,icon:d(b.UnsubscribeIcon,{}),visible:({activeCollectionId:e,stores:t})=>{if(!e)return!1;const n=t.collections.get(e);return!!n?.isSubscribed&&t.policies.abilities(e).unsubscribe},perform:async({activeCollectionId:e,currentUserId:t,stores:n,t:o})=>{if(!e||!t)return;const i=n.collections.get(e);await(i?.unsubscribe()),mt.success(o("Unsubscribed from document notifications"))}}),al=f({name:({t:e})=>`${e("Archive")}…`,analyticsName:"Archive collection",section:CollectionSection,icon:d(b.ArchiveIcon,{}),visible:({activeCollectionId:e,stores:t})=>!!e&&!!t.policies.abilities(e).archive,perform:async({activeCollectionId:e,stores:t,t:n})=>{const{dialogs:o,collections:i}=t;if(!e)return;const r=i.get(e);r&&o.openModal({title:n("Archive collection"),content:d(jo,{onSubmit:async()=>{await r.archive(),mt.success(n("Collection archived"))},submitText:n("Archive"),savingText:`${n("Archiving")}…`,children:n("Archiving this collection will also archive all documents within it. Documents from the collection will no longer be visible in search results.")})})}}),sl=f({name:({t:e})=>e("Restore"),analyticsName:"Restore collection",section:CollectionSection,icon:d(b.RestoreIcon,{}),visible:({activeCollectionId:e,stores:t})=>!!e&&!!t.policies.abilities(e).restore,perform:async({activeCollectionId:e,stores:t,t:n})=>{if(!e)return;const o=t.collections.get(e);o&&(await o.restore(),mt.success(n("Collection restored")))}}),cl=f({name:({t:e})=>`${e("Delete")}…`,analyticsName:"Delete collection",section:ActiveCollectionSection,dangerous:!0,icon:d(b.TrashIcon,{}),visible:({activeCollectionId:e,stores:t})=>!!e&&t.policies.abilities(e).delete,perform:({activeCollectionId:e,t:t,stores:n})=>{if(!e)return;const o=n.collections.get(e);o&&n.dialogs.openModal({title:t("Delete collection"),content:d(xc,{collection:o,onSubmit:n.dialogs.closeAllModals})})}}),ll=f({name:({t:e})=>e("New template"),analyticsName:"New template",section:ActiveCollectionSection,icon:d(b.ShapesIcon,{}),keywords:"new create template",visible:({activeCollectionId:e,stores:t})=>!(!e||!t.policies.abilities(e).createDocument),perform:({activeCollectionId:e,event:t})=>{e&&(t?.preventDefault(),t?.stopPropagation(),g.push(yn(e)))}}),dl=[Yc,Qc,nl,ol,il,rl,cl],ul=e.createContext(void 0),useSidebarContext=()=>e.useContext(ul),groupSidebarContext=e=>`group-${e}`,starredSidebarContext=e=>`starred-${e}`,determineSidebarContext=({document:e,user:t,currentContext:n})=>{const o=e.isStarred||!!e.collection?.isStarred,i=!n||n.startsWith("starred");if(o&&i){const t=n===starredSidebarContext(e.collectionId??"");return e.isStarred&&!t?starredSidebarContext(e.id):starredSidebarContext(e.collectionId)}if(e.collection)return e.collection.isArchived?"archive":"collections";if(t.documentMemberships.find((t=>t.documentId===e.id)))return"shared";{const n=t.groupsWithDocumentMemberships.find((t=>!!t.documentMemberships.find((t=>t.documentId===e.id))));return groupSidebarContext(n?.id??"")}};const pl=c(pe).withConfig({componentId:"sc-155oapf-0"})(["position:absolute;left:-24px;flex-shrink:0;color:",";&:hover{color:",";background:",";}",""],N("textSecondary"),N("text"),N("sidebarControlHoverBackground"),(e=>e.$root&&$e(["opacity:0;left:-18px;&:hover{opacity:1;background:none;}"]))),hl=c(b.CollapsedIcon).withConfig({componentId:"sc-155oapf-1"})(["transition:opacity 100ms ease,transform 100ms ease,fill 50ms !important;",";"],(e=>!e.expanded&&"transform: rotate(-90deg);")),ml=c((function Disclosure({onClick:e,root:t,expanded:n,...o}){const{t:i}=E();return d(pl,{size:20,onClick:e,$root:t,"aria-label":i(n?"Collapse":"Expand"),...o,children:d(hl,{expanded:n,size:20})})})).withConfig({componentId:"sc-155oapf-2"})([""]),fl={fontWeight:600};const bl=c.span.withConfig({componentId:"sc-tyaw0p-0"})(["display:flex;align-items:start;position:relative;width:100%;","{margin-top:2px;margin-left:2px;}"],ml),gl=c.span.withConfig({componentId:"sc-tyaw0p-1"})(["margin-left:-4px;margin-right:4px;height:24px;overflow:hidden;flex-shrink:0;"]),vl=c(_n).withConfig({componentId:"sc-tyaw0p-2"})(["display:inline-flex;visibility:",";position:absolute;top:4px;right:4px;gap:4px;color:",";transition:opacity 50ms;height:24px;svg{color:",";fill:currentColor;opacity:0.5;}&:hover{visibility:visible;svg{opacity:0.75;}}"],(e=>e.showActions?"visible":"hidden"),N("textTertiary"),N("textSecondary")),xl=c((({"aria-current":t="page",activeClassName:n="active",activeStyle:o,className:i,exact:r,isActive:a,location:s,strict:c,replace:l,style:u,scrollIntoViewIfNeeded:p,onClick:h,onBeforeClick:m,to:f,...b})=>{const v=e.useRef(null),x=e.useContext(wn),[y,w]=e.useState(void 0),k=s||x.location,$=((e,t)=>"string"==typeof e?$n(e,null,void 0,t):e)(((e,t)=>"function"==typeof e?e(t):e)(f,k),k),{pathname:_}=$,C=_?kn(k.pathname,{path:_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),exact:r,strict:c}):null,I=y??!!(a?a(C,k):C),S=I?((...e)=>e.filter((e=>e)).join(" "))(i,n):i,M=I?{...u,...o}:u;e.useLayoutEffect((()=>{I&&v.current&&!1!==p&&Ao(v.current,{scrollMode:"if-needed",behavior:"auto",boundary:e=>"sidebar"!==e.id})}),[v,p,I]);const D=e.useCallback((e=>!(0!==e.button||e.defaultPrevented||b.target||e.altKey||e.metaKey||e.ctrlKey||I)),[b.target,I]),P=e.useCallback((()=>{l?g.replace(f):g.push(f)}),[f,l]),z=e.useCallback((e=>{h?.(e),D(e)&&(e.stopPropagation(),e.preventDefault(),e.currentTarget.focus(),w(!0),requestAnimationFrame((()=>{requestAnimationFrame(P),e.currentTarget?.blur()})))}),[h,P,D]);return e.useEffect((()=>{w(void 0)}),[k]),d(se,{ref:v,onClick:z,onKeyDown:e=>{["Enter"," "].includes(e.key)&&(P(),e.currentTarget?.blur())},"aria-current":I&&t||void 0,className:S,style:M,to:$,replace:l,...b},I?"active":"inactive")})).withConfig({componentId:"sc-tyaw0p-3"})(["display:flex;position:relative;text-overflow:ellipsis;font-weight:475;padding:6px 16px;border-radius:4px;min-height:32px;user-select:none;background:",";color:",";font-size:16px;cursor:var(--pointer);overflow:hidden;"," "," "," svg{"," transition:fill 50ms;}&:hover svg{display:inline;}& + ","{background:",";",'{background:transparent;&:hover,&[aria-expanded="true"]{background:',';}}}&[aria-current="page"] + ',"{background:",";}"," @media (hover:hover){&:hover + ",",&:active + ","{visibility:visible;svg{opacity:0.75;}}&:hover{color:",";}}&:hover{","{opacity:1;}}"],(e=>e.$isActiveDrop?e.theme.slateDark:"inherit"),(e=>e.$isActiveDrop?e.theme.white:e.theme.sidebarText),Ut(),(e=>e.$disabled&&$e(["pointer-events:none;opacity:0.75;"])),(e=>e.$isDraft&&$e(['&:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;border-radius:4px;border:1.5px dashed ',";}"],e.theme.sidebarDraftBorder)),(e=>e.$isActiveDrop?`fill: ${e.theme.white};`:""),vl,N("sidebarBackground"),pe,N("sidebarControlHoverBackground"),vl,N("sidebarActiveBackground"),q("tablet")`
    padding: 4px 8px 4px 16px;
    font-size: 14px;
  `,vl,vl,(e=>e.$isActiveDrop?e.theme.white:e.theme.text),ml),yl=c.div.withConfig({componentId:"sc-tyaw0p-4"})(["position:relative;width:100%;max-height:4.8em;line-height:24px;*{unicode-bidi:plaintext;}"]),wl=e.forwardRef((function SidebarLink({icon:t,onClick:n,onClickIntent:o,to:i,label:r,active:a,isActiveDrop:s,isDraft:c,menu:l,showActions:u,exact:p,href:f,depth:b,className:g,expanded:v,onDisclosureClick:x,disabled:y,unreadBadge:w,...k},$){const _=e.useRef(),C=re(),I=e.useMemo((()=>({paddingLeft:16*(b||0)+12+"px"})),[b]),S=e.useMemo((()=>({color:C.text,background:C.sidebarActiveBackground,...I})),[C.text,C.sidebarActiveBackground,I]),M=e.useCallback((()=>{_.current&&clearTimeout(_.current),o&&(_.current=window.setTimeout(o,100))}),[o]),D=e.useCallback((()=>{_.current&&clearTimeout(_.current)}),[]);return Cn((()=>{_.current&&clearTimeout(_.current)})),h(m,{children:[d(xl,{$isActiveDrop:s,$isDraft:c,$disabled:y,activeStyle:s?fl:S,style:a?S:I,onClick:n,onMouseEnter:M,onMouseLeave:D,exact:!1!==p,to:i,as:i?void 0:f?"a":"div",href:f,className:g,ref:$,...k,children:h(bl,{children:[void 0!==v&&d(ml,{expanded:v,onClick:x,root:0===b,tabIndex:-1}),t&&d(gl,{children:t}),d(yl,{children:r}),w&&d(Us,{})]})}),l&&d(vl,{showActions:u,children:l})]})}));const kl=K((function DocumentDelete({document:t,onSubmit:n}){const{t:o}=E(),{ui:i,documents:r,collections:a}=z(),s=Me(),[c,l]=e.useState(!1),[u,m]=e.useState(!1),f=!t.isDraft&&!t.isArchived&&!t.template,b=t.collectionId?a.get(t.collectionId):void 0,g=b?b.getChildrenForDocument(t.id).length:0,v=e.useCallback((async e=>{e.preventDefault(),l(!0);try{if(await t.delete(),i.activeDocumentId===t.id){if(t.parentDocumentId){const e=r.get(t.parentDocumentId);if(e)return s.push(In(e)),void n()}const e=t.template?_("templates"):gn(b?.path||"/");s.push(e)}n()}catch(o){mt.error(o.message)}finally{l(!1)}}),[n,i,t,r,s,b]),x=e.useCallback((async e=>{e.preventDefault(),m(!0);try{await t.archive(),n()}catch(o){mt.error(o.message)}finally{m(!1)}}),[n,t]);return h("form",{onSubmit:v,children:[d(Ft,{as:"p",type:"secondary",children:t.isTemplate?d(A,{defaults:"Are you sure you want to delete the <em>{{ documentTitle }}</em> template?",values:{documentTitle:t.titleWithDefault},components:{em:d("strong",{})}}):d(A,g<1?{defaults:"Are you sure about that? Deleting the <em>{{ documentTitle }}</em> document will delete all of its history</em>.",values:{documentTitle:t.titleWithDefault},components:{em:d("strong",{})}}:{count:g,defaults:"Are you sure about that? Deleting the <em>{{ documentTitle }}</em> document will delete all of its history and <em>{{ any }} nested document</em>.",values:{documentTitle:t.titleWithDefault,any:g},components:{em:d("strong",{})}})}),f&&d(Ft,{as:"p",type:"secondary",children:h(A,{children:["If you’d like the option of referencing or restoring the"," ",{noun:t.noun}," ","in the future, consider archiving it instead."]})}),h(p,{justify:"flex-end",gap:8,children:[f&&d(j,{type:"button",onClick:x,neutral:!0,children:u?`${o("Archiving")}…`:o("Archive")}),d(j,{type:"submit",danger:!0,children:c?`${o("Deleting")}…`:o("I’m sure – Delete")})]})]})}));var $l=function baseClamp$1(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},_l=Sn;var Cl=Sn,Il=function toLength$1(e){return e?$l(_l(e),0,4294967295):0};var Sl=function baseFill$1(e,t,n,o){var i=e.length;for((n=Cl(n))<0&&(n=-n>i?0:i+n),(o=void 0===o||o>i?i:Cl(o))<0&&(o+=i),o=n>o?0:Il(o);n<o;)e[n++]=t;return e},Ml=Mn;const Dl=ve((function fill(e,t,n,o){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Ml(e,t,n)&&(n=0,o=i),Sl(e,t,n,o)):[]}));var Pl=Pn,zl=Dn,El=zn,Tl=ln;var Rl=function map(e,t){return(Tl(e)?Pl:El)(e,zl(t))};const Ll=ve(Rl);let Al;Al="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;let jl=null,Nl=null;const Ol=Al.clearTimeout,Bl=Al.setTimeout,Hl=Al.cancelAnimationFrame||Al.mozCancelAnimationFrame||Al.webkitCancelAnimationFrame,Fl=Al.requestAnimationFrame||Al.mozRequestAnimationFrame||Al.webkitRequestAnimationFrame;function createDetectElementResize(e){let t,n,o,i,r,a,s;const c="undefined"!=typeof document&&document.attachEvent;if(!c){a=function(e){const t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,i=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},r=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},s=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;a(this),this.__resizeRAF__&&jl(this.__resizeRAF__),this.__resizeRAF__=Nl((function animationFrame(){r(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function forEachResizeListener(n){n.call(t,e)})))}))};let e=!1,c="";o="animationstart";const l="Webkit Moz O ms".split(" ");let d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),u="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let n=0;n<l.length;n++)if(void 0!==t.style[l[n]+"AnimationName"]){u=l[n],c="-"+u.toLowerCase()+"-",o=d[n],e=!0;break}}n="resizeanim",t="@"+c+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=c+"animation: 1ms "+n+"; "}return{addResizeListener:function(r,l){if(c)r.attachEvent("onresize",l);else{if(!r.__resizeTriggers__){const c=r.ownerDocument,l=Al.getComputedStyle(r);l&&"static"===l.position&&(r.style.position="relative"),function(n){if(!n.getElementById("detectElementResize")){const o=(t||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=n.head||n.getElementsByTagName("head")[0],a=n.createElement("style");a.id="detectElementResize",a.type="text/css",null!=e&&a.setAttribute("nonce",e),a.styleSheet?a.styleSheet.cssText=o:a.appendChild(n.createTextNode(o)),r.appendChild(a)}}(c),r.__resizeLast__={},r.__resizeListeners__=[],(r.__resizeTriggers__=c.createElement("div")).className="resize-triggers";const d=c.createElement("div");d.className="expand-trigger",d.appendChild(c.createElement("div"));const u=c.createElement("div");u.className="contract-trigger",r.__resizeTriggers__.appendChild(d),r.__resizeTriggers__.appendChild(u),r.appendChild(r.__resizeTriggers__),a(r),r.addEventListener("scroll",s,!0),o&&(r.__resizeTriggers__.__animationListener__=function animationListener(e){e.animationName===n&&a(r)},r.__resizeTriggers__.addEventListener(o,r.__resizeTriggers__.__animationListener__))}r.__resizeListeners__.push(l)}},removeResizeListener:function(e,t){if(c)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(o,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(n){}}}}}null==Hl||null==Fl?(jl=Ol,Nl=function requestAnimationFrameViaSetTimeout(e){return Bl(e,20)}):(jl=function cancelFrame2([e,t]){Hl(e),Ol(t)},Nl=function requestAnimationFrameWithSetTimeoutFallback(e){const t=Fl((function animationFrameCallback(){Ol(n),e()})),n=Bl((function timeoutCallback(){Hl(t),e()}),20);return[t,n]});class AutoSizer extends e.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:n}=this.props;if(this._parentNode){const o=window.getComputedStyle(this._parentNode)||{},i=parseFloat(o.paddingLeft||"0"),r=parseFloat(o.paddingRight||"0"),a=parseFloat(o.paddingTop||"0"),s=parseFloat(o.paddingBottom||"0"),c=this._parentNode.getBoundingClientRect(),l=c.height-a-s,d=c.width-i-r,u=this._parentNode.offsetHeight-a-s,p=this._parentNode.offsetWidth-i-r;(e||this.state.height===u&&this.state.scaledHeight===l)&&(t||this.state.width===p&&this.state.scaledWidth===d)||(this.setState({height:u,width:p,scaledHeight:l,scaledWidth:d}),"function"==typeof n&&n({height:u,scaledHeight:l,scaledWidth:d,width:p}))}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const n=t.ownerDocument.defaultView.ResizeObserver;null!=n?(this._resizeObserver=new n((()=>{this._timeoutId=setTimeout(this._onResize,0)})),this._resizeObserver.observe(t)):(this._detectElementResize=createDetectElementResize(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:t,defaultHeight:n,defaultWidth:o,disableHeight:i=!1,disableWidth:r=!1,doNotBailOutOnEmptyChildren:a=!1,nonce:s,onResize:c,style:l={},tagName:d="div",...u}=this.props,{height:p,scaledHeight:h,scaledWidth:m,width:f}=this.state,b={overflow:"visible"},g={};let v=!1;return i||(0===p&&(v=!0),b.height=0,g.height=p,g.scaledHeight=h),r||(0===f&&(v=!0),b.width=0,g.width=f,g.scaledWidth=m),a&&(v=!1),e.createElement(d,{ref:this._setRef,style:{...b,...l},...u},!v&&t(g))}}function areInputsEqual(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function memoizeOne(e,t){var n;void 0===t&&(t=areInputsEqual);var o,i=[],r=!1;return function memoized(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return r&&n===this&&t(a,i)||(o=e.apply(this,a),r=!0,n=this,i=a),o}}var Wl="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function cancelTimeout(e){cancelAnimationFrame(e.id)}var Ul=-1;function getScrollbarSize(e){if(void 0===e&&(e=!1),-1===Ul||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),Ul=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ul}var Vl=null;function getRTLOffsetType(e){if(void 0===e&&(e=!1),null===Vl||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var o=document.createElement("div"),i=o.style;return i.width="100px",i.height="100px",t.appendChild(o),document.body.appendChild(t),t.scrollLeft>0?Vl="positive-descending":(t.scrollLeft=1,Vl=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Vl}return Vl}var ql=function defaultItemKey3(e,t){return e};function createListComponent(t){var n,o=t.getItemOffset,i=t.getEstimatedTotalSize,r=t.getItemSize,a=t.getOffsetForIndexAndAlignment,s=t.getStartIndexForOffset,c=t.getStopIndexForStartIndex,l=t.initInstanceProps,d=t.shouldResetStyleCacheOnItemSizeChange,u=t.validateProps;return(n=function(t){function List2(e){var n;return(n=t.call(this,e)||this)._instanceProps=l(n.props,Tn(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:Tn(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=memoizeOne((function(e,t,o,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:o,visibleStopIndex:i})})),n._callOnScroll=void 0,n._callOnScroll=memoizeOne((function(e,t,o){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:o})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,i=n.props,a=i.direction,s=i.itemSize,c=i.layout,l=n._getItemStyleCache(d&&s,d&&c,d&&a);if(l.hasOwnProperty(e))t=l[e];else{var u=o(n.props,e,n._instanceProps),p=r(n.props,e,n._instanceProps),h="horizontal"===a||"horizontal"===c,m="rtl"===a,f=h?u:0;l[e]=t={position:"absolute",left:m?void 0:f,right:m?f:void 0,top:h?0:u,height:h?"100%":p,width:h?p:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=memoizeOne((function(e,t,n){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,o=t.clientWidth,i=t.scrollLeft,r=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===i)return null;var t=n.props.direction,a=i;if("rtl"===t)switch(getRTLOffsetType()){case"negative":a=-i;break;case"positive-descending":a=r-o-i}return a=Math.max(0,Math.min(a,r-o)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,o=t.clientHeight,i=t.scrollHeight,r=t.scrollTop;n.setState((function(e){if(e.scrollOffset===r)return null;var t=Math.max(0,Math.min(r,i-o));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&cancelTimeout(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=function requestTimeout(e,t){var n=Wl(),o={id:requestAnimationFrame((function tick(){Wl()-n>=t?e.call(null):o.id=requestAnimationFrame(tick)}))};return o}(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}En(List2,t),List2.getDerivedStateFromProps=function getDerivedStateFromProps(e,t){return Kl(e,t),u(e),null};var n=List2.prototype;return n.scrollTo=function scrollTo(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},n.scrollToItem=function scrollToItem(e,t){void 0===t&&(t="auto");var n=this.props,o=n.itemCount,i=n.layout,r=this.state.scrollOffset;e=Math.max(0,Math.min(e,o-1));var s=0;if(this._outerRef){var c=this._outerRef;s="vertical"===i?c.scrollWidth>c.clientWidth?getScrollbarSize():0:c.scrollHeight>c.clientHeight?getScrollbarSize():0}this.scrollTo(a(this.props,e,t,r,this._instanceProps,s))},n.componentDidMount=function componentDidMount(){var e=this.props,t=e.direction,n=e.initialScrollOffset,o=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===o?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()},n.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.direction,n=e.layout,o=this.state,i=o.scrollOffset;if(o.scrollUpdateWasRequested&&null!=this._outerRef){var r=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(getRTLOffsetType()){case"negative":r.scrollLeft=-i;break;case"positive-ascending":r.scrollLeft=i;break;default:var a=r.clientWidth,s=r.scrollWidth;r.scrollLeft=s-a-i}else r.scrollLeft=i;else r.scrollTop=i}this._callPropsCallbacks()},n.componentWillUnmount=function componentWillUnmount(){null!==this._resetIsScrollingTimeoutId&&cancelTimeout(this._resetIsScrollingTimeoutId)},n.render=function render(){var t=this.props,n=t.children,o=t.className,r=t.direction,a=t.height,s=t.innerRef,c=t.innerElementType,l=t.innerTagName,d=t.itemCount,u=t.itemData,p=t.itemKey,h=void 0===p?ql:p,m=t.layout,f=t.outerElementType,b=t.outerTagName,g=t.style,v=t.useIsScrolling,x=t.width,y=this.state.isScrolling,w="horizontal"===r||"horizontal"===m,k=w?this._onScrollHorizontal:this._onScrollVertical,$=this._getRangeToRender(),_=$[0],C=$[1],I=[];if(d>0)for(var S=_;S<=C;S++)I.push(e.createElement(n,{data:u,key:h(S,u),index:S,isScrolling:v?y:void 0,style:this._getItemStyle(S)}));var M=i(this.props,this._instanceProps);return e.createElement(f||b||"div",{className:o,onScroll:k,ref:this._outerRefSetter,style:Rn({position:"relative",height:a,width:x,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},g)},e.createElement(c||l||"div",{children:I,ref:s,style:{height:w?"100%":M,pointerEvents:y?"none":void 0,width:w?M:"100%"}}))},n._callPropsCallbacks=function _callPropsCallbacks(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],o=e[2],i=e[3];this._callOnItemsRendered(t,n,o,i)}if("function"==typeof this.props.onScroll){var r=this.state,a=r.scrollDirection,s=r.scrollOffset,c=r.scrollUpdateWasRequested;this._callOnScroll(a,s,c)}},n._getRangeToRender=function _getRangeToRender(){var e=this.props,t=e.itemCount,n=e.overscanCount,o=this.state,i=o.isScrolling,r=o.scrollDirection,a=o.scrollOffset;if(0===t)return[0,0,0,0];var l=s(this.props,a,this._instanceProps),d=c(this.props,l,a,this._instanceProps),u=i&&"backward"!==r?1:Math.max(1,n),p=i&&"forward"!==r?1:Math.max(1,n);return[Math.max(0,l-u),Math.max(0,Math.min(t-1,d+p)),l,d]},List2}(e.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},n}var Kl=function validateSharedProps3(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Gl=createListComponent({getItemOffset:function getItemOffset2(e,t){return t*e.itemSize},getItemSize:function getItemSize2(e,t){return e.itemSize},getEstimatedTotalSize:function getEstimatedTotalSize3(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function getOffsetForIndexAndAlignment4(e,t,n,o,i,r){var a=e.direction,s=e.height,c=e.itemCount,l=e.itemSize,d=e.layout,u=e.width,p="horizontal"===a||"horizontal"===d?u:s,h=Math.max(0,c*l-p),m=Math.min(h,t*l),f=Math.max(0,t*l-p+l+r);switch("smart"===n&&(n=o>=f-p&&o<=m+p?"auto":"center"),n){case"start":return m;case"end":return f;case"center":var b=Math.round(f+(m-f)/2);return b<Math.ceil(p/2)?0:b>h+Math.floor(p/2)?h:b;default:return o>=f&&o<=m?o:o<f?f:m}},getStartIndexForOffset:function getStartIndexForOffset2(e,t){var n=e.itemCount,o=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(t/o)))},getStopIndexForStartIndex:function getStopIndexForStartIndex2(e,t,n){var o=e.direction,i=e.height,r=e.itemCount,a=e.itemSize,s=e.layout,c=e.width,l=t*a,d="horizontal"===o||"horizontal"===s?c:i,u=Math.ceil((d+n-l)/a);return Math.max(0,Math.min(r-1,t+u-1))},initInstanceProps:function initInstanceProps4(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function validateProps4(e){e.itemSize}});const Zl=c(Ft).withConfig({componentId:"sc-plbz9f-0"})([""," margin:0 4px 0 4px;color:inherit;"],Ln()),Xl=c(ml).withConfig({componentId:"sc-plbz9f-1"})(["position:relative;left:auto;margin-top:2px;"]),Yl=c(p).withConfig({componentId:"sc-plbz9f-2"})(["flex-direction:row-reverse;flex-shrink:0;width:","px;"],(e=>e.width)),Ql=c.span.withConfig({componentId:"sc-plbz9f-3"})(["display:flex;user-select:none;overflow:hidden;font-size:16px;width:",";color:",";cursor:var(--pointer);padding:12px;border-radius:6px;background:",";svg{flex-shrink:0;}&:focus{outline:none;}"," ",""],(e=>e.style.width),N("text"),(e=>!e.selected&&e.active&&e.theme.listItemHoverBackground),(e=>e.selected&&`\n      background: ${e.theme.accent};\n      color: ${e.theme.white};\n\n      svg {\n        color: ${e.theme.white};\n        fill: ${e.theme.white};\n      }\n    `),q("tablet")`
    padding: 4px;
    font-size: 15px;
  `),Jl=K(e.forwardRef((function DocumentExplorerNode({selected:e,active:t,style:n,expanded:o,icon:i,title:r,depth:a,hasChildren:s,onDisclosureClick:c,onPointerMove:l,onClick:u},p){const{t:m}=E();return h(Ql,{ref:p,selected:e,active:t,onClick:u,style:n,onPointerMove:l,role:"option",children:[d(Yl,{width:a?20*a+12:20,children:s&&d(Xl,{expanded:o,onClick:c,tabIndex:-1})}),i,d(Zl,{children:r||m("Untitled")})]})})));const ed=c(Ft).withConfig({componentId:"sc-1wnaea3-0"})(["flex-shrink:0;white-space:nowrap;margin:0 4px 0 4px;color:inherit;"]),td=c(Ft).withConfig({componentId:"sc-1wnaea3-1"})([""," padding-top:2px;margin:0 4px 0 8px;color:",";"],Ln(),(e=>e.$selected?e.theme.white50:e.theme.textTertiary)),nd=K((function DocumentExplorerSearchResult({selected:t,active:n,style:o,icon:i,title:r,path:a,onPointerMove:s,onClick:c}){const{t:l}=E(),u=e.useCallback((e=>{n&&e&&Ao(e,{scrollMode:"if-needed",behavior:"auto",block:"nearest"})}),[n]);return h(Ql,{ref:u,selected:t,active:n,onClick:c,style:o,onPointerMove:s,role:"option",children:[i,h(p,{children:[d(ed,{children:r||l("Untitled")}),d(td,{$selected:t,size:"xsmall",children:a})]})]})})),flattenTree=e=>{const t=[];return e?(t.push(e),e.children.forEach((e=>{t.push(...flattenTree(e))})),t):t},ancestors=e=>{const t=[];if(e)for(;null!==e.parent;)t.unshift(e.parent),e=e.parent;return t},descendants=(e,t=0)=>{const n=flattenTree(e).slice(1);return 0===t?n:n.filter((n=>n.depth<=e.depth+t))};const od=c.div.withConfig({componentId:"sc-s9c9ta-0"})([""]),id=c(p).withConfig({componentId:"sc-s9c9ta-1"})(["height:100%;align-items:center;justify-content:center;"]),rd=c(An).withConfig({componentId:"sc-s9c9ta-2"})(["","{border-radius:16px;}margin-bottom:4px;padding-left:24px;padding-right:24px;"],jn),ad=c.div.withConfig({componentId:"sc-s9c9ta-3"})(["height:65vh;",""],q("tablet")`
    height: 40vh;
  `),sd=K((function DocumentExplorer({onSubmit:t,onSelect:n,items:o,defaultValue:i}){const r=Kt(),{collections:a,documents:s}=z(),{t:c}=E(),l=re(),[u,m]=e.useState(),[f,g]=e.useState((()=>i&&o.find((e=>e.id===i))||null)),[v,x]=e.useState(0),[y,w]=e.useState(0),[k,$]=e.useState((()=>{if(i){const e=o.find((e=>e.id===i));if(e)return ancestors(e).map((e=>e.id))}return[]})),[_,C]=e.useState([]),I=e.useRef(null),S=e.useRef(null),M=s.recentlyViewed.slice(0,5).map((e=>e.id)),D=e.useMemo((()=>new FuzzySearch(o,["title"],{caseSensitive:!1})),[o]);e.useEffect((()=>{u&&(g(null),$([])),w(0)}),[u]),e.useEffect((()=>{C((t=>Ll(Dl(Array(o.length),0),((n,o)=>t[o]||e.createRef()))))}),[o.length]),e.useEffect((()=>{n(f)}),[f,n]),e.useEffect((()=>{if(i&&f&&S){const e=P.findIndex((e=>e.id===f.id));e>0&&setTimeout((()=>S.current?.scrollToItem(e,"center")),50)}}),[]);const P=function getNodes(){return u?D.search(u):o.filter((e=>M.includes(e.id))).concat(o.filter((e=>e.type===Nn.Collection))).flatMap((function includeDescendants(e){return k.includes(e.id)?[e,...descendants(e,1).flatMap(includeDescendants)]:[e]}))}(),T=P.reduce(((e,t)=>t.depth?Math.min(e,t.depth):e),1/0),R=e.useCallback((e=>{_[e]&&_[e].current&&Ao(_[e].current,{behavior:"auto",block:"center"})}),[_]),isExpanded=e=>Lo(k,P[e].id),calculateInitialScrollOffset=e=>{if(S.current){const{height:t,itemSize:n}=S.current.props,{scrollOffset:o}=S.current.state;return e*n<Number(t)?0:o}return 0};e.useEffect((()=>{a.orderedData.filter((e=>k.includes(e.id)||u)).forEach((e=>{e.fetchDocuments()}))}),[a,k,u]);const isSelected=e=>{if(!f)return!1;return f.id===P[e].id},hasChildren=e=>P[e].children.length>0||"collection"===P[e].type,toggleCollapse=e=>{hasChildren(e)&&(isExpanded(e)?(e=>{const t=descendants(P[e]).map((e=>e.id));$(Tr(k,[...t,P[e].id]));const n=On(P,(e=>!Lo(t,e.id))),o=calculateInitialScrollOffset(n.length);x(o)})(e):(e=>{$(Rc(k,P[e].id));const t=P.slice();t.splice(e+1,0,...descendants(P[e],1));const n=calculateInitialScrollOffset(t.length);x(n)})(e))},toggleSelect=e=>{isSelected(e)?g(null):g(P[e])},L=K((({index:e,data:t,style:n})=>{const o=t[e];let i,r,c,p,h;if("collection"===o.type){const t=a.get(o.collectionId);i=t&&d(po,{collection:t,expanded:isExpanded(e)}),r=o.title}else{const e=s.get(o.id);c=e?.icon??o.icon??o.emoji,p=e?.color??o.color,r=e?.title??o.title,i=c?d(St,{value:c,color:p}):e?.isStarred?d(b.StarredIcon,{color:l.yellow}):d(b.DocumentIcon,{color:l.textSecondary}),h=ancestors(o).map((e=>e.title)).join(" / ")}return u?d(nd,{selected:isSelected(e),active:y===e,style:{...n,top:n.top+6,left:n.left+24,width:`calc(${n.width} - 48px)`},onPointerMove:()=>w(e),onClick:()=>toggleSelect(e),icon:i,title:r,path:h}):d(Jl,{style:{...n,top:n.top+6,left:n.left+24,width:`calc(${n.width} - 48px)`},onPointerMove:()=>w(e),onClick:()=>toggleSelect(e),onDisclosureClick:t=>{t.stopPropagation(),toggleCollapse(e)},selected:isSelected(e),active:y===e,expanded:isExpanded(e),icon:i,title:r,depth:(o.depth??0)-T,hasChildren:hasChildren(e),ref:_[e]})})),next=()=>Math.min(y+1,P.length-1),prev=()=>Math.max(y-1,0),A=e.forwardRef((function innerElementType2({style:e,...t},n){return d("div",{ref:n,style:{...e,height:`${parseFloat(e?.height+"")+12}px`},...t})}));return h(od,{tabIndex:-1,onKeyDown:e=>{switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),w(next()),R(next());break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),0===y?I.current?.focus():(w(prev()),R(prev()));break;case"ArrowLeft":!u&&isExpanded(y)&&toggleCollapse(y);break;case"ArrowRight":u||(toggleCollapse(y),setTimeout((()=>R(y)),0));break;case"Enter":U(e)?t():toggleSelect(y)}},children:[d(rd,{ref:I,onChange:e=>{m(e.target.value)},placeholder:`${c("Search collections & documents")}…`,autoFocus:!0}),d(ad,{children:P.length?d(AutoSizer,{children:({width:e,height:t})=>d(p,{role:"listbox",column:!0,children:d(Gl,{ref:S,width:e,height:t,itemData:P,itemCount:P.length,itemSize:r?48:32,innerElementType:A,initialScrollOffset:v,itemKey:(e,t)=>t[e].id,children:L},P.length)})}):d(id,{children:h(Ft,{as:"p",type:"secondary",children:[c("No results found"),"."]})})})]})}));function useCollectionTrees(){const{collections:t}=z(),getCollectionTree=e=>{const addType=e=>(e.children.length>0&&(e.children=e.children.map(addType)),e.type=e.type?e.type:Nn.Document,e),addParent=(e,t=null)=>(e.children.length>0&&(e.children=e.children.map((t=>addParent(t,e)))),e.parent=t,e),addDepth=(e,t=0)=>(e.children.length>0&&(e.children=e.children.map((e=>addDepth(e,t+1)))),e.depth=t,e),addCollectionId=(t,n=e.id)=>(t.children.length>0&&(t.children=t.children.map((e=>addCollectionId(e,n)))),t.collectionId=n,t),t={id:e.id,title:e.name,url:e.path,type:Nn.Collection,children:e.documents?Bn(e.documents,e.sort,!0):[],parent:null};return addParent(addCollectionId(addDepth(addType(t))))},n=t.orderedData.map((e=>e.documents?.length)).join("-");return e.useMemo((()=>t.orderedData.map(getCollectionTree)),[t.orderedData,n])}const cd=c(p).withConfig({componentId:"sc-10acsh2-0"})(["margin-left:-24px;margin-right:-24px;margin-bottom:-24px;outline:none;"]),ld=c(p).withConfig({componentId:"sc-10acsh2-1"})(["height:64px;border-top:1px solid ",";padding-left:24px;padding-right:24px;"],(e=>e.theme.horizontalRule)),dd=c(Ft).withConfig({componentId:"sc-10acsh2-2"})([""," margin-bottom:0;"],Ln()),ud=K((function DocumentMove({document:t}){const{dialogs:n,policies:o}=z(),{t:i}=E(),r=useCollectionTrees(),[a,s]=e.useState(null),c=e.useMemo((()=>{const filterSourceDocument=e=>({...e,children:e.children?.filter((e=>e.id!==t.id&&e.id!==t.parentDocumentId)).map(filterSourceDocument)}),e=Hn(r.map(flattenTree)).filter((e=>e.id!==t.id&&e.id!==t.parentDocumentId)).map(filterSourceDocument).filter((e=>!e.collectionId||o.get(e.collectionId)?.abilities.createDocument));return t.isTemplate?e.filter((e=>"collection"===e.type)).map((e=>({...e,children:[]}))):e}),[o,r,t.id,t.parentDocumentId,t.isTemplate]),move=async()=>{if(a)try{const{type:e,id:o}=a,r=a.collectionId;"document"===e?await t.move({collectionId:r,parentDocumentId:o}):await t.move({collectionId:r}),mt.success(i("Document moved")),n.closeAllModals()}catch(e){mt.error(i("Couldn’t move the document, try again?"))}else mt.message(i("Select a location to move"))};return h(cd,{column:!0,children:[d(sd,{items:c,onSubmit:move,onSelect:s}),h(ld,{justify:"space-between",align:"center",gap:8,children:[d(dd,{type:"secondary",children:a?d(A,{defaults:"Move to <em>{{ location }}</em>",values:{location:a.title},components:{em:d("strong",{})}}):i("Select a location to move")}),d(j,{disabled:!a,onClick:move,children:i("Move")})]})]})}));const pd=K((function DocumentPermanentDelete({document:e,onSubmit:t}){const{t:n}=E(),{documents:o}=z(),i=Me();return d(p,{column:!0,children:d(jo,{submitText:n("I’m sure – Delete"),savingText:`${n("Deleting")}…`,onSubmit:async()=>{await o.delete(e,{permanent:!0}),mt.success(n("Document permanently deleted")),t(),i.push("/trash")},danger:!0,children:d(A,{defaults:"Are you sure you want to permanently delete the <em>{{ documentTitle }}</em> document? This action is immediate and cannot be undone.",values:{documentTitle:e.titleWithDefault},components:{em:d("strong",{})}})})})}));const hd=c(p).withConfig({componentId:"sc-1h6ly2w-0"})(["margin-left:-24px;margin-right:-24px;margin-bottom:-24px;outline:none;"]),md=c(p).withConfig({componentId:"sc-1h6ly2w-1"})(["height:64px;border-top:1px solid ",";padding-left:24px;padding-right:24px;"],(e=>e.theme.horizontalRule)),fd=c(Ft).withConfig({componentId:"sc-1h6ly2w-2"})([""," margin-bottom:0;"],Ln()),bd=K((function DocumentPublish({document:t}){const{dialogs:n,policies:o}=z(),{t:i}=E(),r=useCollectionTrees(),[a,s]=e.useState(null),c=e.useMemo((()=>Hn(r.map(flattenTree)).filter((e=>!e.collectionId||o.get(e.collectionId)?.abilities.createDocument))),[o,r]),publish=async()=>{if(a)try{const{type:e,id:o}=a,r=a.collectionId;"document"===e&&await t.move({collectionId:r,parentDocumentId:o}),t.collectionId=r,await t.save(void 0,{publish:!0}),mt.success(i("Document published")),n.closeAllModals()}catch(e){mt.error(i("Couldn’t publish the document, try again?"))}else mt.message(i("Select a location to publish"))};return h(hd,{column:!0,children:[d(sd,{items:c,onSubmit:publish,onSelect:s}),h(md,{justify:"space-between",align:"center",gap:8,children:[d(fd,{type:"secondary",children:a?d(A,{defaults:"Publish in <em>{{ location }}</em>",values:{location:a.title},components:{em:d("strong",{})}}):i("Select a location to publish")}),d(j,{disabled:!a,onClick:publish,children:i("Publish")})]})]})}));const gd=K((function DeleteDocumentsInTrash({onSubmit:e,shouldRedirect:t}){const{t:n}=E(),{documents:o}=z(),i=Me();return d(p,{column:!0,children:d(jo,{submitText:n("I’m sure – Delete"),savingText:`${n("Deleting")}…`,onSubmit:async()=>{await o.emptyTrash(),mt.success(n("Trash emptied")),e(),t&&i.push("/home")},danger:!0,children:d(A,{defaults:"Are you sure you want to permanently delete all the documents in Trash? This action is immediate and cannot be undone."})})})}));const vd=c.div.withConfig({componentId:"sc-1086ttk-0"})(["margin:16px 0 8px 0;padding-left:24px;padding-right:24px;"]),xd=K((function DocumentCopy({document:t,onSubmit:n}){const{t:o}=E(),{policies:i}=z(),r=useCollectionTrees(),[a,s]=e.useState(!!t.publishedAt),[c,l]=e.useState(!0),[u,p]=e.useState(null),f=e.useMemo((()=>{const e=Hn(r.map(flattenTree)).filter((e=>!e.collectionId||i.get(e.collectionId)?.abilities.createDocument));return t.isTemplate?e.filter((e=>"collection"===e.type)).map((e=>({...e,children:[]}))):e}),[i,r,t.isTemplate]),b=e.useCallback((e=>{s(e.target.checked)}),[]),g=e.useCallback((e=>{l(e.target.checked)}),[]),copy2=async()=>{if(u)try{const e=await t.duplicate({publish:a,recursive:c,title:t.title,collectionId:u.collectionId,..."document"===u.type?{parentDocumentId:u.id}:{}});mt.success(o("Document copied")),n(e)}catch(e){mt.error(o("Couldn’t copy the document, try again?"))}else mt.message(o("Select a location to copy"))};return h(cd,{column:!0,children:[d(sd,{items:f,onSubmit:copy2,onSelect:p,defaultValue:t.parentDocumentId||t.collectionId||""}),d(vd,{children:!t.isTemplate&&h(m,{children:[t.collectionId&&d(Ft,{size:"small",children:d(uo,{name:"publish",label:o("Publish"),labelPosition:"right",checked:a,onChange:b})}),t.publishedAt&&t.childDocuments.length>0&&d(Ft,{size:"small",children:d(uo,{name:"recursive",label:o("Include nested documents"),labelPosition:"right",checked:c,onChange:g})})]})}),h(ld,{justify:"space-between",align:"center",gap:8,children:[d(dd,{type:"secondary",children:u?d(A,{defaults:"Copy to <em>{{ location }}</em>",values:{location:u.title},components:{em:d("strong",{})}}):o("Select a location to copy")}),d(j,{disabled:!u,onClick:copy2,children:o("Copy")})]})]})}));function MarkdownIcon({size:e=24,color:t="currentColor",...n}){return h("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[d("path",{d:"M19.2692 7H3.86538C3.38745 7 3 7.38476 3 7.85938V16.2812C3 16.7559 3.38745 17.1406 3.86538 17.1406H19.2692C19.7472 17.1406 20.1346 16.7559 20.1346 16.2812V7.85938C20.1346 7.38476 19.7472 7 19.2692 7Z",stroke:t,strokeWidth:"2"}),d("path",{d:"M5.16345 14.9922V9.14844H6.89422L8.62499 11.2969L10.3558 9.14844H12.0865V14.9922H10.3558V11.6406L8.62499 13.7891L6.89422 11.6406V14.9922H5.16345ZM15.9808 14.9922L13.3846 12.1562H15.1154V9.14844H16.8461V12.1562H18.5769L15.9808 14.9922Z",fill:t})]})}const yd=c(se).withConfig({componentId:"sc-jhxdym-0"})(["color:",";text-decoration:underline;"],N("textTertiary")),wd=K((({user:t,membership:n,onRemove:o,onLeave:i,onUpdate:r})=>{const{t:a}=E(),s=e.useCallback((e=>{e===en?o?.():r?.(e)}),[o,r]),c=[{label:a("View only"),value:Fn.Read},{label:a("Can edit"),value:Fn.ReadWrite},{label:a("Manage"),value:Fn.Admin},{divider:!0,label:a("Remove"),value:en}],l=c.find((e=>e.value===n?.permission));if(!l)return null;const u=n?.source?yd:e.Fragment;return d(Ac,{title:t.name,image:d(Mo,{model:t,size:So.Medium}),subtitle:n?.sourceId?h(A,{children:["Has access through"," ",d(u,{to:n.source?.document?.path??"",children:"parent"})]}):t.isSuspended?a("Suspended"):t.isInvited?a("Invited"):t.lastActiveAt?h(A,{children:["Active ",d(Oo,{dateTime:t.lastActiveAt})," ago"]}):a("Never signed in"),actions:d("div",{style:{marginRight:-8},children:d(InputMemberPermissionSelect,{permissions:i?[l,{label:`${a("Leave")}…`,value:en}]:c,value:n?.permission,onChange:s,disabled:!r&&!i})})})}));const kd=c(se).withConfig({componentId:"sc-1a0xi7y-0"})(["color:",";text-decoration:underline;"],N("textTertiary")),$d=K((function DocumentMembersList({document:t,invitedInSession:n}){const{userMemberships:o,groupMemberships:i}=z(),r=Po(),a=Me(),s=Ko(t),{t:c}=E(),l=re(),u=e.useCallback((async e=>{try{await o.delete({documentId:t.id,userId:e.id}),e.id===r.id?a.push(v()):mt.success(c("{{ userName }} was removed from the document",{userName:e.name}))}catch(n){mt.error(c("Could not remove user"))}}),[c,a,o,r,t]),p=e.useCallback((async(e,n)=>{try{await o.create({documentId:t.id,userId:e.id,permission:n}),mt.success(c("Permissions for {{ userName }} updated",{userName:e.name}))}catch(i){mt.error(c("Could not update user"))}}),[c,o,t]),f=e.useMemo((()=>ut(t.members,(e=>(n.includes(e.id)?"_":"")+e.name.toLocaleLowerCase()),"asc")),[t.members,n]),b=e.useMemo((()=>[{label:c("View only"),value:Fn.Read},{label:c("Can edit"),value:Fn.ReadWrite},{label:c("Manage"),value:Fn.Admin},{divider:!0,label:c("Remove"),value:en}]),[c]);return h(m,{children:[i.inDocument(t.id).sort(((e,t)=>((n.includes(e.group.id)?"_":"")+e.group.name).localeCompare(t.group.name))).map((n=>{const o=n?.source?kd:e.Fragment;return d(Ac,{image:d(GroupAvatar,{group:n.group,backgroundColor:l.modalBackground}),title:n.group.name,subtitle:n.sourceId?h(A,{children:["Has access through"," ",d(o,{to:n.source?.document?.path??"",children:"parent"})]}):c("{{ count }} member",{count:n.group.memberCount}),actions:d("div",{style:{marginRight:-8},children:d(InputMemberPermissionSelect,{style:{margin:0},permissions:b,onChange:async e=>{e===en?await i.delete({documentId:t.id,groupId:n.groupId}):await i.create({documentId:t.id,groupId:n.groupId,permission:e})},disabled:!s.manageUsers,value:n.permission,labelHidden:!0,nude:!0})})},n.id)})),f.map((e=>d(wd,{user:e,membership:e.getMembership(t),onRemove:()=>u(e),onUpdate:s.manageUsers?t=>p(e,t):void 0,onLeave:e.id===r.id?()=>u(e):void 0},e.id)))]})}));const _d=c(b.InfoIcon).withConfig({componentId:"sc-16cuz7x-0"})(["vertical-align:bottom;margin-right:2px;"]),Cd=c.div.withConfig({componentId:"sc-16cuz7x-1"})(["padding-bottom:8px;"]),Id=c.span.withConfig({componentId:"sc-16cuz7x-2"})(["padding:0 2px 0 8px;flex:0 1 auto;cursor:text;color:",";user-select:none;"],N("placeholder")),Sd=c(Qt).withConfig({componentId:"sc-16cuz7x-3"})(["margin-top:12px;min-width:100px;flex:1;",":not(:first-child){padding:4px 8px 4px 0;flex:1;}"],sn),Md=c(se).withConfig({componentId:"sc-16cuz7x-4"})(["color:",";text-decoration:underline;"],N("textSecondary")),Dd=K((function PublicAccess({document:t,share:n,sharedParent:o}){const{t:i}=E(),r=re(),[a,s]=e.useState(""),[c,l]=e.useState(n?.urlId),u=e.useRef(null),f=Ko(n),g=Ko(t),v=f.update&&g.share;e.useEffect((()=>{l(n?.urlId)}),[n?.urlId]);const x=e.useCallback((async e=>{try{await(n?.save({allowIndexing:e.currentTarget.checked}))}catch(t){mt.error(t.message)}}),[n]),y=e.useCallback((async e=>{try{await(n?.save({published:e.currentTarget.checked}))}catch(t){mt.error(t.message)}}),[n]),w=e.useMemo((()=>Wn((async e=>{if(!n)return;const t=e.target.value;if(l(t),t&&!C.SHARE_URL_SLUG_REGEX.test(t))s(i("Only lowercase letters, digits and dashes allowed"));else if(s(""),n.urlId!==t)try{await n.save({urlId:Un(t)?null:t})}catch(o){o.message.includes("must be unique")&&s(i("Sorry, this link has already been used"))}}),500)),[i,n]),k=e.useCallback((()=>{mt.success(i("Public link copied to clipboard"))}),[i]),$=o?.documentTitle,_=o?.url?`${o.url}${t.url}`:n?.url??"",I=d(ce,{content:i("Copy public link"),placement:"top",children:d(_c,{text:_,onCopy:k,children:d(pe,{type:"button",disabled:!n,style:{marginRight:3},children:d(b.CopyIcon,{color:r.placeholder,size:18})})})});return h(Cd,{children:[d(Ac,{title:i("Web"),subtitle:d(m,{children:o&&!t.isDraft?h(A,{children:["Anyone with the link can access because the parent document,"," ",d(Md,{to:`/doc/${o.documentId}`,children:{documentTitle:$}}),", is shared"]}):i("Allow anyone with the link to access")}),image:d(le,{color:r.text,size:So.Medium,children:d(b.GlobeIcon,{color:r.background,size:18})}),actions:o&&!t.isDraft?null:d(uo,{"aria-label":i("Publish to internet"),checked:n?.published??!1,onChange:y,disabled:!v,width:26,height:14})}),h(pr,{children:[n?.published&&d(Ac,{title:h(Ft,{type:"tertiary",as:p,children:[i("Search engine indexing")," ",d(ce,{content:i("Disable this setting to discourage search engines from indexing the page"),children:d(b.QuestionMarkIcon,{size:18})})]}),actions:d(uo,{"aria-label":i("Search engine indexing"),checked:n?.allowIndexing??!1,onChange:x,width:26,height:14})}),o?.published?d(Sd,{type:"text",disabled:!0,defaultValue:_,children:I}):n?.published?d(Sd,{type:"text",ref:u,placeholder:n?.id,onChange:w,error:a,defaultValue:c,prefix:d(Id,{onClick:()=>u.current?.focus(),children:P.URL.replace(/https?:\/\//,"")+"/s/"}),children:I}):null,n?.published&&!n.includeChildDocuments?h(Ft,{as:"p",type:"tertiary",size:"xsmall",children:[d(_d,{size:18}),h("span",{children:[i("Nested documents are not shared on the web. Toggle sharing to enable access, this will be the default behavior in the future"),"."]})]}):null]})]})})),Pd=K((({document:t,invitedInSession:n,share:o,sharedParent:i,onRequestClose:r,visible:a})=>{const{t:s}=E(),c=re(),l=t.collection,u=function useUsersInCollection(t){const{users:n,memberships:o}=z(),{request:i}=useRequest((()=>o.fetchPage({limit:1,id:t.id})));return e.useEffect((()=>{t&&!t.permission&&i()}),[t]),!!t&&(!!t.permission||n.inCollection(t.id).length>1)}(l),p=Po(),{userMemberships:f,groupMemberships:g}=z(),v=!1===t.collection?.sharing,x=qo(),y=Ko(t),w=Ko(l),k=t.id,$=e.useRef(null),{maxHeight:_,calcMaxHeight:C}=useMaxHeight({elementRef:$,maxViewportPercentage:65,margin:24}),{loading:I,request:S}=useRequest(e.useCallback((()=>f.fetchDocumentMemberships({id:k,limit:Vn.defaultLimit})),[f,k])),{loading:M,request:D}=useRequest(e.useCallback((()=>g.fetchAll({documentId:k})),[g,k])),P=!(g.inDocument(k)?.length>0||t.members.length>0)&&(M||I);return e.useEffect((()=>{S(),D()}),[S,D]),e.useEffect((()=>{C()})),h(Ed,{ref:$,hiddenScrollbars:!0,style:{maxHeight:_},children:[P?d(Placeholder,{}):d(m,{children:l&&w.readDocument?h(m,{children:[l.permission?d(Ac,{image:d(le,{color:c.accent,size:So.Medium,children:d(b.UserIcon,{color:c.accentText,size:16})}),title:s("All members"),subtitle:s("Everyone in the workspace"),actions:d(AccessTooltip,{children:l?.permission===mn.ReadWrite?s("Can edit"):s("Can view")})}):d(Ac,u?{image:d(CollectionSquircle,{collection:l}),title:l.name,subtitle:s("Everyone in the collection"),actions:d(AccessTooltip,{children:s("Can view")})}:{image:d(Mo,{model:p}),title:p.name,subtitle:s("You have full access"),actions:d(AccessTooltip,{children:s("Can edit")})}),d($d,{document:t,invitedInSession:n})]}):t.isDraft?h(m,{children:[d(Ac,{image:d(Mo,{model:t.createdBy}),title:t.createdBy?.name,actions:d(AccessTooltip,{content:s("Created the document"),children:s("Can edit")})}),d($d,{document:t,invitedInSession:n})]}):h(m,{children:[d($d,{document:t,invitedInSession:n}),d(Ac,{image:d(le,{color:c.accent,size:So.Medium,children:d(b.MoreIcon,{color:c.accentText,size:16})}),title:s("Other people"),subtitle:s("Other workspace members may have access"),actions:d(AccessTooltip,{content:s("This document may be shared with more workspace members through a parent document or collection you do not have access to")})})]})}),x.sharing&&y.share&&!v&&a&&h(zd,{children:[t.members.length?d(wc,{}):null,d(Dd,{document:t,share:o,sharedParent:i,onRequestClose:r})]})]})})),AccessTooltip=({children:e,content:t})=>{const{t:n}=E();return h(p,{align:"center",gap:2,children:[d(Ft,{type:"secondary",size:"small",children:e}),d(ce,{content:t??n("Access inherited from collection"),children:d(b.QuestionMarkIcon,{size:18})})]})},CollectionSquircle=({collection:e})=>{const t=re(),n=Pt(e.icon),o=n===zt.SVG?e.color:t.slateLight,i=n===zt.SVG?16:22;return d(le,{color:o,size:So.Medium,children:d(po,{collection:e,color:t.white,size:i})})};const zd=c.div.withConfig({componentId:"sc-1f988b1-0"})(["background:",";position:sticky;bottom:-12px;"],N("menuBackground")),Ed=c(lt).withConfig({componentId:"sc-1f988b1-1"})(["padding:12px 24px;margin:-12px -24px;"]);const Td=K((function SharePopover({document:t,onRequestClose:n,visible:o}){const i=qo(),{t:r}=E(),a=Ko(t),{shares:s}=z(),c=s.getByDocumentId(t.id),l=s.getByDocumentParents(t.id),[u,p]=e.useState(o),{users:g,userMemberships:v,groups:x,groupMemberships:y}=z(),[w,k]=e.useState(""),[$,_,C]=Vo(),[I,S]=e.useState([]),[M,D]=e.useState([]),[P,T]=e.useState(Fn.Read),R=ue(M),L=e.useRef(null),A=e.useRef(null);co("Escape",(e=>{o&&(e.preventDefault(),e.stopImmediatePropagation(),$?C():n())}),{allowInInput:!0}),e.useEffect((()=>{o&&(t.share(),p(!0))}),[t,C,o]),e.useEffect((()=>{o&&(D([]),C())}),[C,o]),e.useEffect((()=>{$||k("")}),[$]),e.useEffect((()=>{if(R&&M.length>R.length)k(""),A.current?.focus();else if(R&&M.length<R.length){const e=L.current?.firstElementChild;e&&e.focus()}}),[M,R]);const j=e.useMemo((()=>f({name:r("Invite"),section:UserSection,perform:async()=>{const e=await Promise.all(M.map((async e=>{let n,o;if(isEmail(e)){n=(await g.invite([{email:e,name:e,role:i.defaultUserRole}]))[0]}else n=g.get(e),o=x.get(e);return n?(await v.create({documentId:t.id,userId:n.id,permission:P}),n):o?(await y.create({documentId:t.id,groupId:o.id,permission:P}),o):void 0}))),n=e.filter((e=>e instanceof fn)),o=e.filter((e=>e instanceof hn));if(n.length>0)if(1===n.length){const e=n[0];mt.message(r("{{ userName }} was added to the document",{userName:e.name}),{icon:d(Mo,{model:e,size:So.Toast})})}else mt.message(r("{{ count }} people added to the document",{count:n.length}));if(o.length>0)if(1===o.length){const e=o[0];mt.message(r("{{ userName }} was added to the document",{userName:e.name}),{icon:d(GroupAvatar,{group:e,size:So.Toast})})}else mt.message(r("{{ count }} groups added to the document",{count:o.length}));S((e=>[...e,...M])),D([]),C()}})),[t.id,y,x,C,v,M,P,r,i.defaultUserRole,g]),N=e.useCallback((e=>{_(),k(e.target.value)}),[_,k]),O=e.useCallback((e=>{D((t=>[...t,e]))}),[D]),B=e.useCallback((e=>{D((t=>t.filter((t=>t!==e))))}),[D]),H=e.useCallback((e=>{if(!e.nativeEvent.isComposing&&"ArrowDown"===e.key&&!e.shiftKey){if(e.preventDefault(),e.currentTarget.value){const t=e.currentTarget.value.length;if((e.currentTarget.selectionStart||0)<t)return e.currentTarget.selectionStart=t,void(e.currentTarget.selectionEnd=t)}const t=L.current?.firstElementChild;t&&t.focus()}}),[]),F=e.useCallback((()=>A.current?.focus()),[]),W=e.useMemo((()=>[{label:r("View only"),value:Fn.Read},{label:r("Can edit"),value:Fn.ReadWrite},{label:r("Manage"),value:Fn.Admin}]),[r]);if(!u)return null;const U=d(m,{children:$&&d(pe,{as:Ii.button,...$c,onClick:e=>{e.preventDefault(),e.stopPropagation(),C()},children:d(b.BackIcon,{})},"back")}),V=$?M.length?d(PermissionAction,{permission:P,permissions:W,action:j,onChange:e=>T(e)},"invite"):null:d(CopyLinkButton,{url:bn(In(t)),onCopy:n},"copy-link");return h(yc,{children:[a.manageUsers&&d(Mc,{ref:A,onChange:N,onClick:_,onKeyDown:H,query:w,back:U,action:V}),$&&d(jc,{ref:L,document:t,query:w,pendingIds:M,addPendingId:O,removePendingId:B,onEscape:F}),d("div",{style:{display:$?"none":"block"},children:d(Pd,{document:t,invitedInSession:I,share:c,sharedParent:l,visible:o,onRequestClose:n})})]})})),Label=({icon:e,value:t})=>h(p,{align:"center",gap:4,children:[d(Rd,{children:e}),t]}),Rd=c.span.withConfig({componentId:"sc-tl48f4-0"})(["display:flex;justify-content:center;align-items:center;height:24px;width:24px;overflow:hidden;flex-shrink:0;"]),Ld=K((({defaultCollectionId:e,onSelect:t})=>{const{t:n}=E(),o=qo(),{collections:i,policies:r}=z(),a=Ko(o),{loading:s,error:c}=useRequest(me.useCallback((async()=>{i.isLoaded||await i.fetchAll({limit:100})}),[i])),l=a.createTemplate?{label:d(Label,{icon:d(Do,{model:o,size:So.Toast}),value:n("Workspace")}),value:"workspace"}:null,u=me.useMemo((()=>i.orderedData.reduce(((e,t)=>(r.abilities(t.id).createDocument&&e.push({label:d(Label,{icon:d(po,{collection:t}),value:t.name}),value:t.id}),e)),[])),[i.orderedData,r]),p=l?u.length?[l,...u.map(((e,t)=>(0!==t||(e.divider=!0),e)))]:[l]:u,h=me.useCallback((e=>{t("workspace"===e?null:e)}),[t]);return c&&mt.error(n("Collections could not be loaded, please reload the app")),s||!p.length?null:d(Io,{value:e??"workspace",options:p,onChange:h,ariaLabel:n("Location"),label:n("Location")})}));const Ad=K((function DocumentTemplatizeDialog({documentId:t}){const n=Me(),{t:o}=E(),{documents:i}=z(),r=i.get(t);qn(r,"Document must exist");const[a,s]=e.useState(!0),[c,l]=e.useState(r.collectionId??null),u=e.useCallback((e=>{s(e.target.checked)}),[]),m=e.useCallback((async()=>{const e=await(r?.templatize({collectionId:c,publish:a}));e&&(n.push(In(e)),mt.success(o("Template created, go ahead and customize it")))}),[o,r,n,c,a]);return d(jo,{onSubmit:m,submitText:o("Create template"),savingText:`${o("Creating")}…`,children:h(p,{column:!0,gap:12,children:[d("div",{children:d(A,{defaults:"Creating a template from <em>{{titleWithDefault}}</em> is a non-destructive action – we'll make a copy of the document and turn it into a template that can be used as a starting point for new documents.",values:{titleWithDefault:r.titleWithDefault},components:{em:d("strong",{})}})}),d(Ld,{defaultCollectionId:c,onSelect:l}),d(uo,{name:"publish",label:o("Published"),note:o("Enable other members to use the template immediately"),checked:a,onChange:u})]})})})),jd=f({name:({t:e})=>e("Open document"),analyticsName:"Open document",section:DocumentSection,shortcut:["o","d"],keywords:"go to",icon:d(b.DocumentIcon,{}),children:({stores:e})=>e.collections.navigationNodes.reduce(((e,t)=>[...e,...t.children]),[]).map((e=>({id:e.url,name:e.title,icon:e.icon?d(St,{value:e.icon,color:e.color??void 0}):d(b.DocumentIcon,{}),section:DocumentSection,perform:()=>g.push(e.url)})))}),Nd=f({name:({t:e})=>e("New document"),analyticsName:"New document",section:DocumentSection,icon:d(b.NewDocumentIcon,{}),keywords:"create",visible:({currentTeamId:e,activeCollectionId:t,stores:n})=>!(t&&!n.policies.abilities(t).createDocument)&&(!!e&&n.policies.abilities(e).createDocument),perform:({activeCollectionId:e,sidebarContext:t})=>g.push(Kn(e),{sidebarContext:t})}),Od=f({name:({t:e})=>e("New draft"),analyticsName:"New document",section:DocumentSection,icon:d(b.NewDocumentIcon,{}),keywords:"create document",visible:({currentTeamId:e,stores:t})=>!!e&&t.policies.abilities(e).createDocument,perform:({sidebarContext:e})=>g.push(Kn(),{sidebarContext:e})}),Bd=f({name:({t:e})=>e("New from template"),analyticsName:"New document",section:DocumentSection,icon:d(b.NewDocumentIcon,{}),keywords:"create",visible:({currentTeamId:e,activeCollectionId:t,activeDocumentId:n,stores:o})=>{const i=n?o.documents.get(n):void 0;return!(!e||!i?.isTemplate||i?.isDraft||i?.isDeleted)&&(t?o.policies.abilities(t).createDocument:o.policies.abilities(e).createDocument)},perform:({activeCollectionId:e,activeDocumentId:t,sidebarContext:n})=>g.push(Kn(e,{templateId:t}),{sidebarContext:n})}),Hd=f({name:({t:e})=>e("New nested document"),analyticsName:"New document",section:ActiveDocumentSection,icon:d(b.NewDocumentIcon,{}),keywords:"create",visible:({currentTeamId:e,activeDocumentId:t,stores:n})=>!!e&&!!t&&n.policies.abilities(e).createDocument&&n.policies.abilities(t).createChildDocument,perform:({activeDocumentId:e,sidebarContext:t})=>g.push(Gn(e),{sidebarContext:t})}),Fd=f({name:({t:e})=>e("Star"),analyticsName:"Star document",section:ActiveDocumentSection,icon:d(b.StarredIcon,{}),keywords:"favorite bookmark",visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!n?.isStarred&&t.policies.abilities(e).star},perform:async({activeDocumentId:e,stores:t})=>{if(!e)return;const n=t.documents.get(e);await(n?.star()),xn(getHeaderExpandedKey("starred"),!0)}}),Wd=f({name:({t:e})=>e("Unstar"),analyticsName:"Unstar document",section:ActiveDocumentSection,icon:d(b.UnstarredIcon,{}),keywords:"unfavorite unbookmark",visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!!n?.isStarred&&t.policies.abilities(e).unstar},perform:async({activeDocumentId:e,stores:t})=>{if(!e)return;const n=t.documents.get(e);await(n?.unstar())}}),Ud=f({name:({t:e})=>e("Publish"),analyticsName:"Publish document",section:ActiveDocumentSection,icon:d(b.PublishIcon,{}),visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!!n?.isDraft&&t.policies.abilities(e).publish},perform:async({activeDocumentId:e,stores:t,t:n})=>{if(!e)return;const o=t.documents.get(e);o?.publishedAt||(o?.collectionId||o?.template?(await o.save(void 0,{publish:!0}),mt.success(n("Published {{ documentName }}",{documentName:o.noun}))):o&&t.dialogs.openModal({title:n("Publish document"),content:d(bd,{document:o})}))}}),Vd=f({name:({t:e})=>e("Unpublish"),analyticsName:"Unpublish document",section:ActiveDocumentSection,icon:d(b.UnpublishIcon,{}),visible:({activeDocumentId:e,stores:t})=>!!e&&t.policies.abilities(e).unpublish,perform:async({activeDocumentId:e,stores:t,t:n})=>{if(!e)return;const o=t.documents.get(e);o&&(await o.unpublish(),mt.success(n("Unpublished {{ documentName }}",{documentName:o.noun})))}}),qd=f({name:({t:e})=>e("Subscribe"),analyticsName:"Subscribe to document",section:ActiveDocumentSection,icon:d(b.SubscribeIcon,{}),visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!n?.collection?.isSubscribed&&!n?.isSubscribed&&t.policies.abilities(e).subscribe},perform:async({activeDocumentId:e,stores:t,t:n})=>{if(!e)return;const o=t.documents.get(e);await(o?.subscribe()),mt.success(n("Subscribed to document notifications"))}}),Kd=f({name:({t:e})=>e("Unsubscribe"),analyticsName:"Unsubscribe from document",section:ActiveDocumentSection,icon:d(b.UnsubscribeIcon,{}),visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!!n?.collection?.isSubscribed||!!n?.isSubscribed&&t.policies.abilities(e).unsubscribe},perform:async({activeDocumentId:e,stores:t,currentUserId:n,t:o})=>{if(!e||!n)return;const i=t.documents.get(e);await(i?.unsubscribe()),mt.success(o("Unsubscribed from document notifications"))}}),Gd=f({name:({t:e})=>`${e("Permissions")}…`,analyticsName:"Share document",section:ActiveDocumentSection,icon:d(b.PadlockIcon,{}),visible:({stores:e,activeDocumentId:t})=>{const n=e.policies.abilities(t);return n.manageUsers||n.share},perform:async({activeDocumentId:e,stores:t,currentUserId:n,t:o})=>{if(!e||!n)return;const i=t.documents.get(e);i&&t.dialogs.openModal({style:{marginBottom:-12},title:o("Share this document"),content:d(Td,{document:i,onRequestClose:t.dialogs.closeAllModals,visible:!0})})}}),Zd=f({name:({t:e})=>e("HTML"),analyticsName:"Download document as HTML",section:ActiveDocumentSection,keywords:"html export",icon:d(b.DownloadIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,stores:t})=>!!e&&t.policies.abilities(e).download,perform:async({activeDocumentId:e,stores:t})=>{if(!e)return;const n=t.documents.get(e);await(n?.download(Zn.Html))}}),Xd=f({name:({t:e})=>e("PDF"),analyticsName:"Download document as PDF",section:ActiveDocumentSection,keywords:"export",icon:d(b.DownloadIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,stores:t})=>!!e&&t.policies.abilities(e).download&&P.PDF_EXPORT_ENABLED,perform:({activeDocumentId:e,t:t,stores:n})=>{if(!e)return;const o=mt.loading(`${t("Exporting")}…`),i=n.documents.get(e);return i?.download(Zn.Pdf).finally((()=>o&&mt.dismiss(o)))}}),Yd=f({name:({t:e})=>e("Markdown"),analyticsName:"Download document as Markdown",section:ActiveDocumentSection,keywords:"md markdown export",icon:d(b.DownloadIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,stores:t})=>!!e&&t.policies.abilities(e).download,perform:async({activeDocumentId:e,stores:t})=>{if(!e)return;const n=t.documents.get(e);await(n?.download(Zn.Markdown))}}),Qd=f({name:({t:e,isContextMenu:t})=>e(t?"Download":"Download document"),analyticsName:"Download document",section:ActiveDocumentSection,icon:d(b.DownloadIcon,{}),keywords:"export",visible:({activeDocumentId:e,stores:t})=>!!e&&t.policies.abilities(e).download,children:[Zd,Xd,Yd]}),Jd=f({name:({t:e})=>e("Copy as Markdown"),section:ActiveDocumentSection,keywords:"clipboard",icon:d(MarkdownIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,stores:t})=>!!e&&t.policies.abilities(e).download,perform:({stores:e,activeDocumentId:t,t:n})=>{const o=t?e.documents.get(t):void 0;o&&(rn(o.toMarkdown()),mt.success(n("Markdown copied to clipboard")))}}),eu=f({name:({t:e})=>e("Copy public link"),section:ActiveDocumentSection,keywords:"clipboard share",icon:d(b.GlobeIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,stores:t})=>!!e&&!!t.shares.getByDocumentId(e)?.published,perform:({stores:e,activeDocumentId:t,t:n})=>{if(!t)return;const o=e.shares.getByDocumentId(t);o&&(rn(o.url),mt.success(n("Link copied to clipboard")))}}),tu=f({name:({t:e})=>e("Copy link"),section:ActiveDocumentSection,keywords:"clipboard",icon:d(b.CopyIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e})=>!!e,perform:({stores:e,activeDocumentId:t,t:n})=>{const o=t?e.documents.get(t):void 0;o&&(rn(bn(In(o))),mt.success(n("Link copied to clipboard")))}}),nu=f({name:({t:e})=>e("Copy"),analyticsName:"Copy document",section:ActiveDocumentSection,icon:d(b.CopyIcon,{}),keywords:"clipboard",children:[tu,eu,Jd]}),ou=f({name:({t:e,isContextMenu:t})=>e(t?"Duplicate":"Duplicate document"),analyticsName:"Duplicate document",section:ActiveDocumentSection,icon:d(b.DuplicateIcon,{}),keywords:"copy",visible:({activeDocumentId:e,stores:t})=>!!e&&t.policies.abilities(e).duplicate,perform:async({activeDocumentId:e,t:t,stores:n})=>{if(!e)return;const o=n.documents.get(e);qn(o,"Document must exist"),n.dialogs.openModal({title:t("Copy document"),content:d(xd,{document:o,onSubmit:e=>{n.dialogs.closeAllModals(),g.push(In(e[0]))}})})}}),iu=f({name:({activeDocumentId:e="",t:t,stores:n})=>{const o=n.documents.get(e),i=o?n.documents.getCollectionForDocument(o)?.name:t("collection");return t("Pin to {{collectionName}}",{collectionName:i})},analyticsName:"Pin document to collection",section:ActiveDocumentSection,icon:d(b.PinIcon,{}),iconInContextMenu:!1,visible:({activeCollectionId:e,activeDocumentId:t,stores:n})=>{if(!t||!e)return!1;const o=n.documents.get(t);return!!n.policies.abilities(t).pin&&!o?.pinned},perform:async({activeDocumentId:e,activeCollectionId:t,t:n,stores:o})=>{if(!e||!t)return;const i=o.documents.get(e);await(i?.pin(i.collectionId));const r=o.collections.get(t);r&&location.pathname.startsWith(r?.url)||mt.success(n("Pinned to collection"))}}),ru=f({name:({t:e})=>e("Pin to home"),analyticsName:"Pin document to home",section:ActiveDocumentSection,icon:d(b.PinIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,currentTeamId:t,stores:n})=>{if(!t||!e)return!1;const o=n.documents.get(e);return!!n.policies.abilities(e).pinToHome&&!o?.pinnedToHome},perform:async({activeDocumentId:e,location:t,t:n,stores:o})=>{if(!e)return;const i=o.documents.get(e);await(i?.pin()),t.pathname!==v()&&mt.success(n("Pinned to home"))}}),au=f({name:({t:e})=>e("Pin"),analyticsName:"Pin document",section:ActiveDocumentSection,icon:d(b.PinIcon,{}),children:[iu,ru]}),su=f({name:({t:e})=>e("Search in document"),analyticsName:"Search document",section:ActiveDocumentSection,shortcut:["Meta+/"],icon:d(b.SearchIcon,{}),visible:({stores:e,activeDocumentId:t})=>{if(!t)return!1;const n=e.documents.get(t);return!!n?.isActive},perform:({activeDocumentId:e})=>{g.push(x({documentId:e}))}}),cu=f({name:({t:e,isContextMenu:t})=>e(t?"Print":"Print document"),analyticsName:"Print document",section:ActiveDocumentSection,icon:d(b.PrintIcon,{}),visible:({activeDocumentId:e})=>!(!e||!window.print),perform:()=>{queueMicrotask(window.print)}}),lu=f({name:({t:e})=>e("Import document"),analyticsName:"Import document",section:DocumentSection,icon:d(b.ImportIcon,{}),keywords:"upload",visible:({activeCollectionId:e,activeDocumentId:t,stores:n})=>t?!!n.policies.abilities(t).createChildDocument:!!e&&!!n.policies.abilities(e).update,perform:({activeCollectionId:e,activeDocumentId:t,stores:n})=>{const{documents:o}=n,i=document.createElement("input");i.type="file",i.accept=o.importFileTypes.join(", "),i.onchange=async n=>{const i=ft(n)[0];try{const n=await o.import(i,t,e,{publish:!0});g.push(n.url)}catch(r){mt.error(r.message)}},i.click()}}),du=f({name:({t:e})=>e("Templatize"),analyticsName:"Templatize document",section:ActiveDocumentSection,icon:d(b.ShapesIcon,{}),keywords:"new create template",visible:({activeCollectionId:e,activeDocumentId:t,stores:n})=>{const o=t?n.documents.get(t):void 0;return!(o?.isTemplate||!o?.isActive)&&!(!e||!n.policies.abilities(e).updateDocument)},perform:({activeDocumentId:e,stores:t,t:n,event:o})=>{e&&(o?.preventDefault(),o?.stopPropagation(),t.dialogs.openModal({title:n("Create template"),content:d(Ad,{documentId:e})}))}}),uu=f({id:"random",name:({t:e})=>e("Open random document"),analyticsName:"Open random document",section:DocumentSection,icon:d(b.ShuffleIcon,{}),perform:({stores:e,activeDocumentId:t})=>{const n=e.collections.navigationNodes.reduce(((e,t)=>[...e,...t.children]),[]).filter((e=>e.id!==t)),o=n[Math.round(Math.random()*n.length)];o&&g.push(o.url)}}),searchDocumentsForQuery=e=>f({id:"search",name:({t:t})=>t('Search documents for "{{searchQuery}}"',{searchQuery:e}),analyticsName:"Search documents",section:DocumentSection,icon:d(b.SearchIcon,{}),perform:()=>g.push(x({query:e})),visible:({location:e})=>e.pathname!==x()}),pu=f({name:({t:e})=>e("Move to workspace"),analyticsName:"Move template to workspace",section:DocumentSection,icon:d(b.MoveIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!(!n||!n.template||n.isWorkspaceTemplate)&&!!t.policies.abilities(e).move},perform:async({activeDocumentId:e,stores:t})=>{if(e){const n=t.documents.get(e);if(!n)return;await n.move({collectionId:null})}}}),hu=f({name:({activeDocumentId:e,stores:t,t:n})=>{if(!e)return n("Move");const o=t.documents.get(e);return n(o?.template&&o?.collectionId?"Move to collection":"Move")},analyticsName:"Move document",section:ActiveDocumentSection,icon:d(b.MoveIcon,{}),iconInContextMenu:!1,visible:({activeDocumentId:e,stores:t})=>!!e&&!!t.policies.abilities(e).move,perform:({activeDocumentId:e,stores:t,t:n})=>{if(e){const o=t.documents.get(e);if(!o)return;t.dialogs.openModal({title:n("Move {{ documentType }}",{documentType:o.noun}),content:d(ud,{document:o})})}}}),mu=f({name:({t:e})=>e("Move"),analyticsName:"Move document",section:ActiveDocumentSection,icon:d(b.MoveIcon,{}),visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!(!n||n.template&&!n.isWorkspaceTemplate)&&!!t.policies.abilities(e).move},perform:hu.perform}),fu=f({name:({t:e})=>e("Move"),analyticsName:"Move document",section:ActiveDocumentSection,icon:d(b.MoveIcon,{}),visible:({activeDocumentId:e,stores:t})=>{if(!e)return!1;const n=t.documents.get(e);return!(!n||!n.template||n.isWorkspaceTemplate)&&!!t.policies.abilities(e).move},children:[pu,hu]}),bu=f({name:({t:e})=>`${e("Archive")}…`,analyticsName:"Archive document",section:ActiveDocumentSection,icon:d(b.ArchiveIcon,{}),visible:({activeDocumentId:e,stores:t})=>!!e&&!!t.policies.abilities(e).archive,perform:async({activeDocumentId:e,stores:t,t:n})=>{const{dialogs:o,documents:i}=t;if(e){const t=i.get(e);if(!t)return;o.openModal({title:n("Are you sure you want to archive this document?"),content:d(jo,{onSubmit:async()=>{await t.archive(),mt.success(n("Document archived"))},savingText:`${n("Archiving")}…`,children:n("Archiving this document will remove it from the collection and search results.")})})}}}),gu=f({name:({t:e})=>`${e("Delete")}…`,analyticsName:"Delete document",section:ActiveDocumentSection,icon:d(b.TrashIcon,{}),dangerous:!0,visible:({activeDocumentId:e,stores:t})=>!!e&&!!t.policies.abilities(e).delete,perform:({activeDocumentId:e,stores:t,t:n})=>{if(e){const o=t.documents.get(e);if(!o)return;t.dialogs.openModal({title:n("Delete {{ documentName }}",{documentName:o.noun}),content:d(kl,{document:o,onSubmit:t.dialogs.closeAllModals})})}}}),vu=f({name:({t:e})=>e("Permanently delete"),analyticsName:"Permanently delete document",section:ActiveDocumentSection,icon:d(b.CrossIcon,{}),dangerous:!0,visible:({activeDocumentId:e,stores:t})=>!!e&&!!t.policies.abilities(e).permanentDelete,perform:({activeDocumentId:e,stores:t,t:n})=>{if(e){const o=t.documents.get(e);if(!o)return;t.dialogs.openModal({title:n("Permanently delete {{ documentName }}",{documentName:o.noun}),content:d(pd,{document:o,onSubmit:t.dialogs.closeAllModals})})}}}),xu=f({name:({t:e})=>e("Empty trash"),analyticsName:"Empty trash",section:({t:e})=>e("Trash"),icon:d(b.TrashIcon,{}),dangerous:!0,visible:({stores:e})=>e.documents.deleted.length>0&&!!e.auth.user?.isAdmin,perform:({stores:e,t:t,location:n})=>{e.dialogs.openModal({title:t("Permanently delete documents in trash"),content:d(gd,{onSubmit:e.dialogs.closeAllModals,shouldRedirect:n.pathname===k()})})}}),yu=f({name:({t:e})=>e("Comments"),analyticsName:"Open comments",section:ActiveDocumentSection,icon:d(b.CommentIcon,{}),visible:({activeDocumentId:e,stores:t})=>{const n=t.policies.abilities(e??"");return!!e&&n.comment&&!!t.auth.team?.getPreference(Xn.Commenting)},perform:({activeDocumentId:e,stores:t})=>{e&&t.ui.toggleComments()}}),wu=f({name:({t:e})=>e("History"),analyticsName:"Open document history",section:ActiveDocumentSection,icon:d(b.HistoryIcon,{}),visible:({activeDocumentId:e,stores:t})=>{const n=t.policies.abilities(e??"");return!!e&&n.listRevisions},perform:({activeDocumentId:e,stores:t})=>{if(!e)return;const n=t.documents.get(e);n&&g.push(Yn(n))}}),ku=f({name:({t:e})=>e("Insights"),analyticsName:"Open document insights",section:ActiveDocumentSection,icon:d(b.GraphIcon,{}),visible:({activeDocumentId:e,stores:t})=>{const n=t.policies.abilities(e??""),o=e?t.documents.get(e):void 0;return!!e&&n.listViews&&!o?.isTemplate&&!o?.isDeleted},perform:({activeDocumentId:e,stores:t})=>{if(!e)return;const n=t.documents.get(e);n&&g.push(Qn(n))}}),$u=f({name:({t:e,stores:t,activeDocumentId:n})=>{const o=n?t.documents.get(n):void 0;return e(o?.insightsEnabled?"Disable viewer insights":"Enable viewer insights")},analyticsName:"Toggle viewer insights",section:ActiveDocumentSection,icon:d(b.EyeIcon,{}),visible:({activeDocumentId:e,stores:t})=>t.policies.abilities(e??"").updateInsights,perform:async({activeDocumentId:e,stores:t})=>{if(!e)return;const n=t.documents.get(e);n&&await n.save({insightsEnabled:!n.insightsEnabled})}}),_u=f({name:({t:e})=>e("Leave document"),analyticsName:"Leave document",section:ActiveDocumentSection,icon:d(b.LogoutIcon,{}),visible:({currentUserId:e,activeDocumentId:t,stores:n})=>!!n.userMemberships.orderedData.find((n=>n.documentId===t&&n.userId===e)),perform:async({t:e,location:t,currentUserId:n,activeDocumentId:o,stores:i})=>{if(!o)return;const r=i.documents.get(o);try{r&&t.pathname.startsWith(r.path)&&g.push(v()),await i.userMemberships.delete({documentId:o,userId:n}),mt.success(e("You have left the shared document"))}catch(a){mt.error(e("Could not leave document"))}}}),Cu=[jd,bu,Nd,Od,Hd,du,gu,lu,Qd,tu,eu,Jd,Fd,Wd,Ud,Vd,qd,Kd,su,ou,_u,pu,hu,uu,vu,xu,cu,iu,ru,yu,wu,ku,Gd],Iu=e.createContext({}),useMenuContext=()=>e.useContext(Iu),MenuTrigger=({label:t,onTrigger:n})=>{const{t:o}=E(),{subscriptions:i,pins:r}=z(),{model:a,menuState:s}=useMenuContext(),{loading:c,loaded:l,request:u}=useRequest((()=>Promise.all([i.fetchOne({documentId:a.id,event:to.Document}),a.collectionId?i.fetchOne({collectionId:a.collectionId,event:to.Document}):no,r.fetchOne({documentId:a.id,collectionId:a.collectionId??null})]))),p=e.useCallback((()=>{c||l||(u(),a.loadRelations())}),[c,l,u,a]);return t?d(ur,{...s,onPointerEnter:p,onClick:n,children:t}):d(OverflowMenuButton,{"aria-label":o("Show document menu"),onPointerEnter:p,onClick:n,...s})},Su=K((function MenuContent_({onOpen:t,onClose:n,onFindAndReplace:o,onRename:i,showDisplayOptions:r,showToggleEmbeds:a}){const s=Po(),{model:c,menuState:l}=useMenuContext(),u=Ko(c),{t:p}=E(),{policies:f,collections:g}=z(),v=c.collectionId?g.get(c.collectionId):void 0,x=useActionContext({isContextMenu:!0,activeDocumentId:c.id,activeCollectionId:c.collectionId??void 0}),y=Kt(),w=e.useCallback((async(e,t)=>{await c.restore(t),mt.success(p("{{ documentName }} restored",{documentName:ot(c.noun)}))}),[p,c]),k=e.useMemo((()=>[...g.orderedData.reduce(((e,t)=>(f.abilities(t.id).createDocument&&e.push({type:"button",onClick:e=>w(e,{collectionId:t.id}),icon:d(po,{collection:t}),title:t.name}),e)),[])]),[g.orderedData,w,f]);return Un(u)?null:h(vo,{...l,"aria-label":p("Document options"),onOpen:t,onClose:n,children:[d(br,{...l,items:[{type:"button",title:p("Restore"),visible:!(!c.isWorkspaceTemplate&&!v?.isActive||!u.restore&&!u.unarchive),onClick:e=>w(e),icon:d(b.RestoreIcon,{})},{type:"submenu",title:p("Restore"),visible:!(c.isWorkspaceTemplate||v?.isActive||!u.restore&&!u.unarchive||0===k.length),style:{left:-170,position:"relative",top:-40},icon:d(b.RestoreIcon,{}),hover:!0,items:[{type:"heading",title:p("Choose a collection")},...k]},ae(Fd,x),ae(Wd,x),{...ae(qd,x),disabled:v?.isSubscribed,tooltip:v?.isSubscribed?p("Subscription inherited from collection"):void 0},{...ae(Kd,x),disabled:v?.isSubscribed,tooltip:v?.isSubscribed?p("Subscription inherited from collection"):void 0},{type:"button",title:`${p("Find and replace")}…`,visible:!!o&&y,onClick:()=>o?.(),icon:d(b.SearchIcon,{})},{type:"separator"},{type:"route",title:p("Edit"),to:Jn(c),visible:!!u.update&&s.separateEditMode&&!c.template,icon:d(b.EditIcon,{})},{type:"button",title:`${p("Rename")}…`,visible:!!u.update&&!s.separateEditMode&&!!i,onClick:()=>i?.(),icon:d(b.InputIcon,{})},ae(Gd,x),ae(Hd,x),ae(lu,x),ae(du,x),ae(ou,x),ae(Ud,x),ae(Vd,x),ae(bu,x),ae(mu,x),ae(fu,x),ae(au,x),ae(Bd,x),{type:"separator"},ae(yu,x),ae(wu,x),ae(ku,x),ae(Qd,x),ae(nu,x),ae(cu,x),ae(su,x),{type:"separator"},ae(gu,x),ae(vu,x),ae(_u,x)]}),(r||a)&&u.update&&h(m,{children:[d(ko,{}),h(Du,{children:[a&&d(Pu,{children:d(Mu,{width:26,height:14,label:p("Enable embeds"),labelPosition:"left",checked:!c.embedsDisabled,onChange:c.embedsDisabled?c.enableEmbeds:c.disableEmbeds})}),r&&!y&&d(Pu,{children:d(Mu,{width:26,height:14,label:p("Full width"),labelPosition:"left",checked:c.fullWidth,onChange:e=>{const t=e.currentTarget.checked;s.setPreference(eo.FullWidthDocuments,t),s.save(),c.fullWidth=t,c.save()}})})]})]})]})}));const Mu=c(uo).withConfig({componentId:"sc-1kpex61-0"})(["*{font-weight:normal;color:",";}"],N("textSecondary")),Du=c.div.withConfig({componentId:"sc-1kpex61-1"})(["padding:8px 0 0;"]),Pu=c.div.withConfig({componentId:"sc-1kpex61-2"})(["padding:12px;",";"],q("tablet")`
    padding: 4px 12px;
    font-size: 14px;
  `),zu=K((function DocumentMenu({document:t,modal:n=!0,showToggleEmbeds:o,showDisplayOptions:i,label:r,onRename:a,onOpen:s,onClose:c}){const{collections:l,documents:u}=z(),p=useMenuState({modal:n,unstable_preventOverflow:!0,unstable_fixed:!0,unstable_flip:!0}),f=Me(),{t:b}=E(),[g,v]=Vo(!1),x=e.useRef(null),y=t.collectionId?l.get(t.collectionId):void 0,w=e.useCallback((e=>{e.stopPropagation()}),[]),k=e.useCallback((async e=>{const n=ft(e);if(n.length&&y)try{const e=n[0],o=await u.import(e,t.id,y.id,{publish:!0});f.push(o.url)}catch(o){throw mt.error(o.message),o}finally{e.target.value=""}}),[f,y,u,t.id]);return h(m,{children:[d(ht,{children:h("label",{children:[b("Import document"),d("input",{type:"file",ref:x,onChange:k,onClick:w,accept:u.importFileTypes.join(", "),tabIndex:-1})]})}),h(Iu.Provider,{value:{model:t,menuState:p},children:[d(MenuTrigger,{label:r,onTrigger:v}),g?d(Su,{onOpen:s,onClose:c,onRename:a,showDisplayOptions:i,showToggleEmbeds:o}):null]})]})}));function useLocationSidebarContext(){const e=T();return e.state?.sidebarContext}const Eu=c(p).withConfig({componentId:"sc-1lzclg2-0"})(["position:relative;flex-direction:column;margin:0 8px 12px;min-width:","px;flex-shrink:0;&:first-child{margin-top:12px;}&:empty{display:none;}"],(e=>e.theme.sidebarMinWidth));var Tu=Object.defineProperty,Ru=Object.getOwnPropertyDescriptor,__decorateClass=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?Ru(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&Tu(t,n,r),r};class DocumentContext{constructor(){this.isEditorInitialized=!1,this.headings=[],this.setDocument=e=>{this.document=e,this.updateState()},this.setEditor=e=>{this.editor=e,this.updateState()},this.setEditorInitialized=e=>{this.isEditorInitialized=e},this.updateState=()=>{this.updateHeadings(),this.updateTasks()}}get hasHeadings(){return this.headings.length>0}updateHeadings(){const e=this.editor?.getHeadings()??[];e.map((e=>e.level+e.title)).join("")!==this.headings.map((e=>e.level+e.title)).join("")&&(this.headings=e)}updateTasks(){const e=this.editor?.getTasks()??[],t=e.length??0,n=e.filter((e=>e.completed)).length??0;this.document?.updateTasks(t,n)}}__decorateClass([et],DocumentContext.prototype,"isEditorInitialized",2),__decorateClass([et],DocumentContext.prototype,"headings",2),__decorateClass([oo],DocumentContext.prototype,"hasHeadings",1),__decorateClass([Ye],DocumentContext.prototype,"setDocument",2),__decorateClass([Ye],DocumentContext.prototype,"setEditor",2),__decorateClass([Ye],DocumentContext.prototype,"setEditorInitialized",2),__decorateClass([Ye],DocumentContext.prototype,"updateState",2);const Lu=me.createContext(null),useDocumentContext=()=>{const e=me.useContext(Lu);if(!e)throw new Error("useDocumentContext must be used within DocumentContextProvider");return e},DocumentContextProvider=({children:e})=>{const t=me.useMemo((()=>new DocumentContext),[]);return d(Lu.Provider,{value:t,children:e})};export{DeveloperSection as $,AnimatePresence as A,MarkdownIcon as B,_c as C,zu as D,Error404 as E,Gl as F,getEmojiVariants as G,search as H,getEmojisWithCategory as I,Rc as J,getEmojis as K,lr as L,ur as M,RegisterKeyDown as N,OverflowMenuButton as O,Portal as P,vs as Q,RevisionSection as R,wl as S,br as T,$r as U,Nr as V,Vc as W,Jc as X,searchDocumentsForQuery as Y,navigateToRecentSearchQuery as Z,flattenTree as _,useLocationSidebarContext as a,groupSidebarContext as a$,dl as a0,Cu as a1,Gi as a2,Mr as a3,wr as a4,RecentSection as a5,NavigationSection as a6,TeamSection as a7,ActiveCollectionSection as a8,DocumentSection as a9,normalizePastedMarkdown as aA,useIdle as aB,Td as aC,Ai as aD,Ud as aE,ud as aF,bd as aG,PlaceholderDocument as aH,Qi as aI,usePageVisibility as aJ,gl as aK,Rl as aL,UserSection as aM,Ri as aN,Ki as aO,sl as aP,il as aQ,rl as aR,el as aS,ll as aT,al as aU,tl as aV,cl as aW,useSidebarContext as aX,ul as aY,Header as aZ,Qc as a_,es as aa,getEmojiId as ab,Ws as ac,Cc as ad,er as ae,useDictionary as af,useEditor as ag,SuggestionsMenu as ah,SuggestionsMenuItem as ai,Suggestion as aj,parseDocumentSlug as ak,SmartText as al,PasteHandler as am,ClipboardTextSerializer as an,EmojiMenuExtension as ao,MentionMenuExtension as ap,PreventTab as aq,Keys as ar,Dc as as,SettingsSection as at,as as au,filterExcessSeparators as av,ts as aw,rs as ax,Lr as ay,isMarkdown as az,useMenuState as b,starredSidebarContext as b0,kl as b1,nc as b2,useRequest as c,determineSidebarContext as d,pr as e,useDocumentContext as f,descendants as g,hc as h,Zi as i,oc as j,Eu as k,lc as l,Ii as m,DocumentContextProvider as n,Ar as o,xu as p,Di as q,Ac as r,separator as s,$u as t,useActionContext as u,ol as v,nl as w,Wd as x,Fd as y,xi as z};
