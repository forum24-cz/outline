import{M as n,N as r,O as a,P as c,Q as t,R as e,S as u,T as i,U as o,V as l,W as y,X as s,Y as f,Z as x,$ as p}from"./mermaid.core.tHGlKmnM.js";function arcInnerRadius(n){return n.innerRadius}function arcOuterRadius(n){return n.outerRadius}function arcStartAngle(n){return n.startAngle}function arcEndAngle(n){return n.endAngle}function arcPadAngle(n){return n&&n.padAngle}function cornerTangents(n,r,a,c,t,e,u){var i=n-a,l=r-c,y=(u?e:-e)/o(i*i+l*l),s=y*l,f=-y*i,x=n+s,g=r+f,d=a+s,h=c+f,v=(x+d)/2,T=(g+h)/2,A=d-x,R=h-g,m=A*A+R*R,P=t-e,O=x*h-d*g,S=(R<0?-1:1)*o(p(0,P*P*m-O*O)),E=(O*R-A*S)/m,I=(-O*A-R*S)/m,j=(O*R+A*S)/m,M=(-O*A+R*S)/m,N=E-v,Q=I-T,U=j-v,V=M-T;return N*N+Q*Q>U*U+V*V&&(E=j,I=M),{cx:E,cy:I,x01:-s,y01:-f,x11:E*(t/P-1),y11:I*(t/P-1)}}function d3arc(){var p=arcInnerRadius,g=arcOuterRadius,d=c(0),h=null,v=arcStartAngle,T=arcEndAngle,A=arcPadAngle,R=null;function arc(){var c,m,P=+p.apply(this,arguments),O=+g.apply(this,arguments),S=v.apply(this,arguments)-t,E=T.apply(this,arguments)-t,I=y(E-S),j=E>S;if(R||(R=c=e()),O<P&&(m=O,O=P,P=m),O>u)if(I>i-u)R.moveTo(O*r(S),O*a(S)),R.arc(0,0,O,S,E,!j),P>u&&(R.moveTo(P*r(E),P*a(E)),R.arc(0,0,P,E,S,j));else{var M,N,Q=S,U=E,V=S,W=E,X=I,Y=I,Z=A.apply(this,arguments)/2,$=Z>u&&(h?+h.apply(this,arguments):o(P*P+O*O)),b=l(y(O-P)/2,+d.apply(this,arguments)),k=b,q=b;if($>u){var w=f($/P*a(Z)),z=f($/O*a(Z));(X-=2*w)>u?(V+=w*=j?1:-1,W-=w):(X=0,V=W=(S+E)/2),(Y-=2*z)>u?(Q+=z*=j?1:-1,U-=z):(Y=0,Q=U=(S+E)/2)}var B=O*r(Q),C=O*a(Q),D=P*r(W),F=P*a(W);if(b>u){var G,H=O*r(U),J=O*a(U),K=P*r(V),L=P*a(V);if(I<n&&(G=function intersect(n,r,a,c,t,e,i,o){var l=a-n,y=c-r,s=i-t,f=o-e,x=f*l-s*y;if(!(x*x<u))return[n+(x=(s*(r-e)-f*(n-t))/x)*l,r+x*y]}(B,C,K,L,H,J,D,F))){var _=B-G[0],nn=C-G[1],rn=H-G[0],an=J-G[1],cn=1/a(x((_*rn+nn*an)/(o(_*_+nn*nn)*o(rn*rn+an*an)))/2),tn=o(G[0]*G[0]+G[1]*G[1]);k=l(b,(P-tn)/(cn-1)),q=l(b,(O-tn)/(cn+1))}}Y>u?q>u?(M=cornerTangents(K,L,B,C,O,q,j),N=cornerTangents(H,J,D,F,O,q,j),R.moveTo(M.cx+M.x01,M.cy+M.y01),q<b?R.arc(M.cx,M.cy,q,s(M.y01,M.x01),s(N.y01,N.x01),!j):(R.arc(M.cx,M.cy,q,s(M.y01,M.x01),s(M.y11,M.x11),!j),R.arc(0,0,O,s(M.cy+M.y11,M.cx+M.x11),s(N.cy+N.y11,N.cx+N.x11),!j),R.arc(N.cx,N.cy,q,s(N.y11,N.x11),s(N.y01,N.x01),!j))):(R.moveTo(B,C),R.arc(0,0,O,Q,U,!j)):R.moveTo(B,C),P>u&&X>u?k>u?(M=cornerTangents(D,F,H,J,P,-k,j),N=cornerTangents(B,C,K,L,P,-k,j),R.lineTo(M.cx+M.x01,M.cy+M.y01),k<b?R.arc(M.cx,M.cy,k,s(M.y01,M.x01),s(N.y01,N.x01),!j):(R.arc(M.cx,M.cy,k,s(M.y01,M.x01),s(M.y11,M.x11),!j),R.arc(0,0,P,s(M.cy+M.y11,M.cx+M.x11),s(N.cy+N.y11,N.cx+N.x11),j),R.arc(N.cx,N.cy,k,s(N.y11,N.x11),s(N.y01,N.x01),!j))):R.arc(0,0,P,W,V,j):R.lineTo(D,F)}else R.moveTo(0,0);if(R.closePath(),c)return R=null,c+""||null}return arc.centroid=function(){var c=(+p.apply(this,arguments)+ +g.apply(this,arguments))/2,t=(+v.apply(this,arguments)+ +T.apply(this,arguments))/2-n/2;return[r(t)*c,a(t)*c]},arc.innerRadius=function(n){return arguments.length?(p="function"==typeof n?n:c(+n),arc):p},arc.outerRadius=function(n){return arguments.length?(g="function"==typeof n?n:c(+n),arc):g},arc.cornerRadius=function(n){return arguments.length?(d="function"==typeof n?n:c(+n),arc):d},arc.padRadius=function(n){return arguments.length?(h=null==n?null:"function"==typeof n?n:c(+n),arc):h},arc.startAngle=function(n){return arguments.length?(v="function"==typeof n?n:c(+n),arc):v},arc.endAngle=function(n){return arguments.length?(T="function"==typeof n?n:c(+n),arc):T},arc.padAngle=function(n){return arguments.length?(A="function"==typeof n?n:c(+n),arc):A},arc.context=function(n){return arguments.length?(R=null==n?null:n,arc):R},arc}export{d3arc as d};
