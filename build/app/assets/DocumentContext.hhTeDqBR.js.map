{"version":3,"mappings":"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","names":["featureNames","Object","keys","featureDefinitions","numFeatures","length","MotionContext","createContext","LayoutGroupContext","useIsomorphicLayoutEffect","isBrowser","useLayoutEffect","useEffect","useVisualElement","Component","visualState","props","createVisualElement","config","useContext","MotionConfigContext","lazyContext","LazyContext","parent","useVisualElementContext","visualElement","presenceContext","PresenceContext","layoutId","useLayoutId","_a","layoutGroupId","visualElementRef","useRef","renderer","current","__assign","presenceId","id","blockInitialAnimation","initial","setProps","isPresent","isPresenceRoot","syncRender","animationState","animateChanges","notifyUnmount","useCreateMotionContext","isStatic","getCurrentTreeVariants","context","checkIfControllingVariants","animate","isVariantLabel","inherit","useMemo","variantLabelsAsDependency","prop","Array","isArray","join","createMotionComponent","preloadedFeatures","useRender","useVisualState","forwardRef","loadFeatures","MotionComponent","externalRef","features","useFeatures","i","name_1","isEnabled","push","React.createElement","key","React.Fragment","createElement","Provider","value","useMotionRef","useCallback","instance","mount","call","unmount","isRefObject","createHtmlRenderState","style","transform","transformKeys","transformOrigin","vars","copyRawValuesOnly","target","source","isMotionValue","isForcedMotionValue","useStyle","assign","useInitialMotionValues","transformTemplate","state","buildHTMLStyles","enableHardwareAcceleration","transformValues","useHTMLProps","htmlProps","Boolean","drag","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","validMotionProps","Set","isValidMotionProp","has","shouldForward","emotionIsPropValid_1","require","default","startsWith","createSvgRenderState","attrs","useSVGProps","visualProps","buildSVGAttrs","rawStyles","createUseRender","forwardMotionProps","ref","latestValues","isSVGComponent","filteredProps","filterProps","isDom","elementProps","makeState","scrapeMotionValuesFromProps","createRenderState","onMount","makeLatestValues","renderState","makeUseVisualState","useConstant","scrapeMotionValues","unwrappedValue","values","motionValues","get","isCustomValue","toValue","isControllingVariants","isVariantNode","checkIfVariantNode","variantToSet","isAnimationControls","forEach","definition","resolved","resolveVariantFromProps","transitionEnd","transition","__rest","svgMotionConfig","dimensions","getBBox","getBoundingClientRect","e","x","y","width","height","isPath","element","tagName","totalPathLength","getTotalLength","renderSVG","htmlMotionConfig","m","createMotionProxy","createConfig","custom","customMotionComponentConfig","componentCache","Map","Proxy","_target","set","createDomMotionConfig","_b","baseConfig","getPresenceId","PresenceChild","children","onExitComplete","presenceAffectsLayout","presenceChildren","newChildrenMap","childId","allComplete","isComplete","register","delete","_","React.useEffect","size","getChildKey","child","AnimatePresence","exitBeforeEnter","_c","forceRender","useForceUpdate","unloadingRef","__read","useState","forcedRenderCount","setForcedRenderCount","useUnmountEffect","layoutContext","SharedLayoutContext","isSharedLayout","forceUpdate","isInitialRender","filteredChildren","onlyElements","filtered","Children","isValidElement","presentChildren","allChildren","exiting","updateChildLookup","map","childrenToRender","__spreadArray","presentKeys","targetKeys","numPresent","indexOf","add","insertionIndex","splice","removeIndex","findIndex","presentChild","cloneElement","PlaceholderDocument","includeTitle","delay","content","jsxs","Fragment","jsx","PlaceholderText","DelayedMount","Fade","Flex","column","auto","Wrapper","maxWidth","styled","withConfig","componentId","CollectionSection","t","CollectionsSection","ActiveCollectionSection","stores","activeCollection","collections","active","name","priority","DeveloperSection","DocumentSection","DocumentsSection","ActiveDocumentSection","activeDocument","documents","titleWithDefault","RecentSection","RevisionSection","SettingsSection","NavigationSection","NotificationSection","UserSection","TeamSection","RecentSearchesSection","navigateToHome","createAction","analyticsName","section","shortcut","icon","HomeIcon","perform","history","homePath","visible","location","pathname","navigateToRecentSearchQuery","searchQuery","query","SearchIcon","searchPath","navigateToDrafts","DraftsIcon","draftsPath","navigateToSearch","navigateToArchive","ArchiveIcon","archivePath","navigateToTrash","TrashIcon","trashPath","SettingsIcon","policies","abilities","auth","team","update","settingsPath","navigateToWorkspaceSettings","navigateToProfileSettings","iconInContextMenu","ProfileIcon","navigateToTemplateSettings","ShapesIcon","navigateToNotificationSettings","EmailIcon","navigateToAccountPreferences","openDocumentation","OpenIcon","window","open","UrlHelper","guide","openAPIDocumentation","developers","toggleSidebar","keywords","ui","toggleCollapsedSidebar","openFeedbackUrl","contact","openBugReportUrl","github","openChangelog","changelog","openKeyboardShortcuts","KeyboardIcon","dialogs","openGuide","title","KeyboardShortcuts","downloadApp","platform","isMac","BrowserIcon","Desktop","isElectron","isCloudHosted","logout","LogoutIcon","async","env","OIDC_LOGOUT_URI","setTimeout","replace","rootNavigationActions","useActionContext","overrides","useStores","useTranslation","useLocation","isContextMenu","isCommandBar","isButton","activeCollectionId","undefined","activeDocumentId","currentUserId","user","currentTeamId","Error404","Scene","Heading","gap","Empty","Trans","Button","action","hideIcon","neutral","SkipNavContent","SkipNavLink","Anchor","href","a","s","depths","popover","Second","_Second","ms","Minute","_Minute","seconds","Hour","_Hour","minutes","Day","activityEvents","useIdle","timeToIdle","events","isMounted","useIsMounted","isIdle","setIsIdle","React","timeout","onActivity","clearTimeout","handleUserActivityEvent","throttle","addEventListener","eventName","removeEventListener","usePageVisibility","setVisible","useEventListener","document","hidden","isReloaded","useAutoRefresh","setMinutes","isVisible","useInterval","callback","savedCallback","setInterval","tick","clearInterval","prev","debug","Logger","warn","reload","Layout","Layout_","sidebar","sidebarRight","sidebarCollapsed","sidebarIsClosed","useKeyDown","event","isModKey","Container","Helmet","APP_NAME","progressBarVisible","LoadingIndicatorBar","MenuProvider","Content","justify","$isResizing","sidebarIsResizing","$sidebarCollapsed","$hasSidebar","marginLeft","sidebarWidth","breakpoint","theme","sidebarCollapsedWidth","observer","RegisterKeyDown","trigger","handler","options","noop","MenuButton","createComponent","as","memo","useHook","createHook","compose","usePopoverDisclosure","MENU_BUTTON_KEYS","propsAreEqual","next","unstable_popoverStyles","unstable_arrowStyles","currentId","unstable_moves","prevProps","_objectWithoutPropertiesLoose","nextProps","unstable_propsAreEqual","useProps","_ref","htmlRef","htmlOnClick","onClick","htmlOnKeyDown","onKeyDown","htmlOnFocus","onFocus","htmlOnMouseEnter","onMouseEnter","htmlOnMouseDown","onMouseDown","MenuContext","hasPressedMouse","dir","placement","split","hasParent","parentIsMenuBar","role","disabled","onClickRef","useLiveRef","onKeyDownRef","onFocusRef","onMouseEnterRef","onMouseDownRef","_onKeyDownRef$current","_options$hide","hide","_options$show","first","last","Enter","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","preventDefault","stopPropagation","show","_onMouseEnterRef$curr","defaultPrevented","currentTarget","findVisibleSubmenu","focus","_options$show2","hasFocusWithin","_onMouseDownRef$curre","_onFocusRef$current","_options$show3","_onClickRef$current","_options$show4","_options$toggle","_options$move","toggle","move","_objectSpread2","useForkRef","useComposeOptions","useMenuState","initialState","_useSealedState","useSealedState","_useSealedState$orien","orientation","_useSealedState$gutte","gutter","sealed","menuBar","useMenuBarState","_useSealedState$unsta","unstable_values","initialValues","_React$useState","setValues","composite","useCompositeState","unstable_setValue","vals","_objectSpread2$1","usePopoverState","reset","ResizingHeightContainer","ResizingHeightContainer_","forwardedRef","hideOverflow","duration","ease","useComponentSize","div","Math","round","overflow","position","mergeRefs","Header","h3","MouseSafeArea","h","w","parentRef","mouseX","mouseY","useMousePosition","mousePosition","setMousePosition","updateMousePosition","ev","clientX","clientY","positions","top","right","getRight","left","getLeft","getWidth","clipPath","getClipPath","max","Disclosure","ExpandedIcon","SubMenu","_Template","templateItems","parentMenuState","rest","useTheme","menu","MenuAnchor","disclosure","color","textTertiary","ContextMenu","unstable_popoverRef","Template","items","actions","showIcons","ctx","filteredTemplates","filterTemplateItems","filter","item","reduce","acc","type","index","arr","actionToMenuItem","iconIsPresentInAnyMenuItem","find","MenuIconWrapper","MenuItem","Link","to","selected","level","menuItem","dangerous","tooltip","Tooltip","BaseMenuItem","Title","Separator","_exhaustiveCheck","align","GroupAvatar","backgroundColor","AvatarSize","Medium","className","Squircle","text","GroupIcon","background","separator","changeToDarkTheme","MoonIcon","setTheme","Theme","Dark","changeToLightTheme","SunIcon","Light","changeToSystemTheme","System","changeTheme","placeholder","_Icon","resolvedTheme","rootSettingsActions","AccountMenu","modal","previousTheme","usePrevious","Relative","Badge","NotificationIcon","notifications","count","approximateUnreadCount","SubscribeIcon","markNotificationsAsRead","MarkAsReadIcon","markAllAsRead","markNotificationsAsArchived","markAllAsArchived","orderedData","rootNotificationActions","NotificationMenu","menuRef","performAction","capture","MoreIcon","NudeButton","hover","baseDifference","require$$0","baseFlatten","require$$1","isArrayLikeObject","require$$3","require$$2","array","keyframes","pulse","EditorContainer","css","grow","fontFamily","fontWeightRegular","mentionBackground","mentionHoverBackground","editorStyle","padding","margin","fontFamilyMono","textSecondary","embedBorder","readOnly","videoStyle","divider","EditorStyleHelper","tableFullWidth","tableScrollable","tableShadowRight","imageCaption","rtl","comment","userId","commentMarkBackground","transparentize","noticeInfoBackground","noticeInfoText","noticeTipBackground","noticeTipText","noticeWarningBackground","noticeWarningText","noticeSuccessBackground","noticeSuccessText","quote","lighten","link","staticHTML","readOnlyWriteCheckboxes","accent","horizontalRule","codeBorder","codeBackground","codeString","brand","red","code","tableSelectedBackground","tableAddRow","tableAddColumn","tableGrip","tableGripColumn","tableGripRow","btoa","tableSelected","table","scrollbarThumb","scrollbarBackground","tableShadowLeft","isDark","backgroundSecondary","cursor","slate","textDiffInserted","textDiffInsertedBackground","textDiffDeleted","textDiffDeletedBackground","codeStatement","codeMarkCursor","codeComment","codePunctuation","codeNumber","codeProperty","codeTag","codeSelector","codeAttr","codeEntity","codeKeyword","codeFunction","codeClassName","codePlaceholder","codeInserted","codeImportant","findAndReplaceStyle","ClickablePadding","minHeight","useDictionary","addColumnAfter","addColumnBefore","addRowAfter","addRowBefore","alignCenter","alignLeft","alignRight","alignDefaultWidth","alignFullWidth","bulletList","checkboxList","codeBlock","codeCopied","codeInline","copy","createLink","createLinkError","createNewDoc","createNewChildDoc","deleteColumn","deleteRow","deleteTable","deleteAttachment","download","downloadAttachment","replaceAttachment","deleteImage","downloadImage","replaceImage","em","embedInvalidLink","file","enterLink","h1","h2","h4","heading","hr","image","fileUploadError","imageCaptionPlaceholder","info","infoNotice","linkCopied","mark","newLineEmpty","newLineWithSlash","noResults","openLink","goToLink","openLinkError","orderedList","pageBreak","pasteLink","pasteLinkWithTitle","service","removeLink","searchOrPasteLink","strikethrough","strong","subheading","sortAsc","sortDesc","exportAsCSV","toggleHeader","mathInline","mathBlock","tip","tipNotice","warning","warningNotice","success","successNotice","insertDate","insertTime","insertDateTime","indent","outdent","video","untitled","none","LazyLoadedEditor","lazyWithRetry","__vitePreload","import","__VITE_PRELOAD__","Editor$1","Editor","shareId","onChange","onCreateCommentMark","onDeleteCommentMark","comments","dictionary","embeds","useEmbeds","loadIfMissing","integrations","isLoaded","isFetching","fetchEmbedIntegrations","fetchPage","limit","IntegrationType","Embed","err","error","integration","settings","localRef","preferences","useCurrentUser","rejectOnEmpty","previousCommentIds","handleUploadFile","documentId","preset","AttachmentPreset","DocumentAttachment","File","uploadFile","uploadFileFromUrl","url","handleClickLink","useEditorClickHandlers","useHistory","isHash","navigateTo","isInternalUrl","URL","hash","isDocumentUrl","includes","sharedDocumentPath","getByUrl","path","shiftKey","sidebarContext","focusAtEnd","handleDrop","files","getDataTransferFiles","view","pos","TextSelection","near","doc","resolve","nodeSize","from","dataTransfer","getData","dom","DOMParser","parseFromString","dispatch","tr","insert","ProsemirrorDOMParser","fromSchema","schema","parse","isAttachment","some","AttachmentValidation","imageContentTypes","insertFiles","onFileUploadStart","onFileUploadStop","handleDragOver","updateComments","commentMarks","getComments","commentIds","c","commentMarkIds","difference","commentId","handleChange","handleRefChanged","node","paragraphs","ProsemirrorHelper","getPlainParagraphs","ErrorBoundary","component","reloadOnChunkMissing","paragraph","userPreferences","onClickLink","defaultValue","extensions","paddingBottom","onDrop","onDragOver","ClipboardTextSerializer","Extension","plugins","mdSerializer","this","editor","serializer","Plugin","PluginKey","clipboardTextSerializer","slice","childCount","serialize","softBreak","toPlainText","SuggestionsMenuPlugin","constructor","extensionState","openRegex","super","handleKeyDown","fromPos","selection","$from","execute","match","regex","composing","spec","textBefore","textBetween","parentOffset","exec","Suggestion","inputRules","_options","InputRule","isInCode","enabledInCode","observable","RegExp","escapeRegExp","allowSpaces","requireSearchTerm","Space","$parcel$interopDefault","__esModule","$c770c458706daa72$export$2e2bcd8739ae039","obj","defineProperty","enumerable","configurable","writable","$fb96b826c0c5f37a$var$n","$fb96b826c0c5f37a$export$41c562ebe57d11e2","$fb96b826c0c5f37a$var$u","$fb96b826c0c5f37a$var$t","$fb96b826c0c5f37a$var$r","$fb96b826c0c5f37a$var$o","$fb96b826c0c5f37a$var$e","$fb96b826c0c5f37a$var$c","$fb96b826c0c5f37a$var$s","$fb96b826c0c5f37a$var$a","n1","l1","u1","$fb96b826c0c5f37a$var$h","n2","l2","parentNode","removeChild","$fb96b826c0c5f37a$export$c8a8987d4410bf2d","l3","u2","i1","t1","r1","o1","f1","arguments","defaultProps","$fb96b826c0c5f37a$var$y","n3","i2","t2","r2","o2","f2","__k","__","__b","__e","__d","__c","__h","__v","vnode","$fb96b826c0c5f37a$export$ffb0004e005737fa","n4","$fb96b826c0c5f37a$export$16fa2f45be04daa8","n5","l4","$fb96b826c0c5f37a$var$k","n6","l5","u3","$fb96b826c0c5f37a$var$b","n7","l6","u4","base","$fb96b826c0c5f37a$var$m","n8","$fb96b826c0c5f37a$var$g","__r","debounceRendering","n9","sort","n10","l7","n11","l8","u5","i3","t3","r3","o3","__P","$fb96b826c0c5f37a$var$j","__n","ownerSVGElement","$fb96b826c0c5f37a$var$z","$fb96b826c0c5f37a$var$w","n12","l9","u6","i4","t4","r4","o4","f3","s1","a1","v1","p1","_1","b1","m1","g1","w1","A1","$fb96b826c0c5f37a$var$x","$fb96b826c0c5f37a$var$P","$fb96b826c0c5f37a$var$N","$fb96b826c0c5f37a$var$M","n13","l10","u7","i5","t5","r5","$fb96b826c0c5f37a$export$47e4c5b300681277","n14","l11","n15","n16","l12","u8","i6","t6","r6","o5","f4","e1","n","appendChild","nextSibling","insertBefore","$fb96b826c0c5f37a$var$$","n18","l14","u10","setProperty","test","$fb96b826c0c5f37a$var$H","n19","l15","u11","i8","t8","r8","cssText","toLowerCase","l","$fb96b826c0c5f37a$var$T","$fb96b826c0c5f37a$var$I","setAttribute","removeAttribute","n20","n21","n22","u12","i9","t9","r9","o6","f5","e2","c1","s2","v2","y1","p2","k1","b2","m2","g2","x1","A2","P1","contextType","__E","prototype","render","$fb96b826c0c5f37a$var$O","sub","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","n23","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","$fb96b826c0c5f37a$var$L","l16","u15","i10","t10","r10","o7","f6","c2","s3","a2","v3","y2","p3","d1","_2","localName","nodeType","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","$fb96b826c0c5f37a$var$C","n17","l13","u9","i7","t7","r7","checked","diffed","n24","n25","u13","u14","n26","n27","n28","u16","i11","n29","n30","u17","i12","t11","r11","componentWillUnmount","n31","n32","u18","$fb96b826c0c5f37a$export$b3890eb0ae9dca99","u19","i13","t12","r12","o8","f7","firstChild","n39","l22","u23","i16","t14","getDerivedStateFromError","setState","componentDidCatch","l23","n41","l24","u24","n42","Promise","then","bind","$bd9dd35321b03dd4$var$o","$bd9dd35321b03dd4$export$34b9dba7ce09269b","f","u","__source","__self","$f72b75cf796873c7$export$2e2bcd8739ae039","$f72b75cf796873c7$var$set","localStorage","JSON","stringify","$f72b75cf796873c7$var$get","$c84d045dcc34faf5$var$CACHE","$c84d045dcc34faf5$var$VERSIONS","v","emoji","$c84d045dcc34faf5$var$isSupported","supported","$c84d045dcc34faf5$var$isEmojiSupported","navigator","userAgent","getContext","willReadFrequently","CANVAS_WIDTH","textSize","floor","CANVAS_HEIGHT","font","textBaseline","canvas","unicode","clearRect","fillStyle","fillText","getImageData","b","measureText","$c84d045dcc34faf5$export$2e2bcd8739ae039","latestVersion","$c84d045dcc34faf5$var$latestVersion","noCountryFlags","$c84d045dcc34faf5$var$noCountryFlags","$b22cfd0a55410b4f$var$DEFAULTS","$b22cfd0a55410b4f$var$Index","$8d50d93417ef682a$exports","$b22cfd0a55410b4f$export$2e2bcd8739ae039","$b22cfd0a55410b4f$var$add","emojiId","$b22cfd0a55410b4f$var$get","maxFrequentRows","perLine","emojiIds","aScore","bScore","localeCompare","removedIds","removedId","DEFAULTS","$b247ea80b67298d5$export$2e2bcd8739ae039","autoFocus","dynamicWidth","emojiButtonColors","emojiButtonRadius","emojiButtonSize","emojiSize","emojiVersion","choices","exceptEmojis","icons","locale","navPosition","noResultsEmoji","previewEmoji","previewPosition","searchPosition","skin","skinTonePosition","categories","categoryIcons","i18n","getImageURL","getSpritesheetURL","onAddCustomEmoji","onClickOutside","onEmojiSelect","stickySearch","deprecated","$7adb23b0109cc36a$export$dbe3113d60765c1a","$7adb23b0109cc36a$export$2d0294657ab35f1b","$7adb23b0109cc36a$var$fetchCache","$7adb23b0109cc36a$var$fetchJSON","src","response","fetch","json","$7adb23b0109cc36a$var$promise","$7adb23b0109cc36a$var$initCallback","$7adb23b0109cc36a$var$initialized","$7adb23b0109cc36a$export$2cd8252107eb640b","caller","$7adb23b0109cc36a$var$_init","emoticons","natives","unshift","emojis","alias","aliases","originalCategories","parseInt","category","prevCategory","latestVersionSupport","categoryIndex","resetSearchIndex","emojiIndex","ignore","version","$e6eae5155b87f591$export$bcb25aa587e9cb13","search","strings","string","flat","trim","emoticon","skinIndex","skins","native","skinShortcodes","shortcodes","$c4d155af13ad4d4b$export$2e2bcd8739ae039","$7adb23b0109cc36a$export$75fe5f91d452f94b","_props","k","$7adb23b0109cc36a$export$88c9ddb45cea7241","propName","defaults","getAttribute","$c4d155af13ad4d4b$var$Pool","$c4d155af13ad4d4b$var$search","maxResults","word","words","results","scores","pool","value1","score","$c4d155af13ad4d4b$var$get","$c4d155af13ad4d4b$var$reset","SHORTCODES_REGEX","$fcccfb36ed0cde68$export$2e2bcd8739ae039","activity","outline","xmlns","viewBox","d","solid","flags","foods","frequent","nature","objects","people","places","symbols","loupe","$254755d3f438722f$export$2e2bcd8739ae039","matches","fallback","emojiSkin","imageSrc","spritesheet","unified","spritesheetSrc","class","maxHeight","display","alt","fontSize","backgroundImage","backgroundSize","sheet","cols","rows","backgroundPosition","$6f57cc9cd54c5aaa$var$WindowHTMLElement","HTMLElement","$6f57cc9cd54c5aaa$export$2e2bcd8739ae039","observedAttributes","Props","attributeChangedCallback","attr","newValue","disconnectedCallback","disconnected","unregister","$26f27c338a96b1a6$export$2e2bcd8739ae039","setShadow","attachShadow","mode","injectStyles","styles","textContent","shadowRoot","$3d90f6e46fb2dd47$export$2e2bcd8739ae039","$331b4160623139bf$export$2e2bcd8739ae039","connectedCallback","customElements","define","$1a9a8ef576b7773d$var$r","$1a9a8ef576b7773d$var$i","$1a9a8ef576b7773d$var$c","$1a9a8ef576b7773d$var$f","$1a9a8ef576b7773d$var$e","$1a9a8ef576b7773d$var$a","$1a9a8ef576b7773d$var$v","$1a9a8ef576b7773d$var$x","pop","__H","$1a9a8ef576b7773d$var$g","$1a9a8ef576b7773d$var$j","requestAnimationFrame","$1a9a8ef576b7773d$var$b","cancelAnimationFrame","$dc040a17866866fa$var$C","$dc040a17866866fa$export$221d75b3f55bb0bd","isPureReactComponent","$dc040a17866866fa$var$w","__f","$dc040a17866866fa$var$A","e6","$dc040a17866866fa$var$O","$dc040a17866866fa$export$74bf444e3cd11ea5","__u","$dc040a17866866fa$var$U","$dc040a17866866fa$export$998bcd577473dd93","o","t13","__R","e8","t17","e9","t18","__O","t15","t19","e10","t20","e13","$dc040a17866866fa$var$S","t21","$dc040a17866866fa$var$T","t22","e14","revealOrder","n33","t25","e16","r13","n34","t26","reverse","e17","n35","t27","e18","$dc040a17866866fa$var$j","Symbol","for","$dc040a17866866fa$var$P","$dc040a17866866fa$var$V","isReactComponent","t30","$dc040a17866866fa$var$H","$dc040a17866866fa$var$Z","$dc040a17866866fa$var$Y","cancelBubble","$dc040a17866866fa$var$q","n40","persist","isPropagationStopped","isDefaultPrevented","nativeEvent","$dc040a17866866fa$var$J","$dc040a17866866fa$var$K","n36","t31","e21","r14","multiple","n43","$$typeof","$dc040a17866866fa$var$Q","n44","$ec8c39fdad15601a$var$THEME_ICONS","light","dark","$ec8c39fdad15601a$export$2e2bcd8739ae039","renderIcon","svg","selectedCategoryIndex","unfocused","categoryId","opacity","$e0d4dda61265ff1e$export$2e2bcd8739ae039","$89bd6bb200cc8fef$var$Performance","$89bd6bb200cc8fef$export$2e2bcd8739ae039","getInitialState","initTheme","refs","navigation","scroll","searchInput","skinToneButton","skinToneRadio","initGrid","console","nextState","nextStateTimer","requiresGridReset","unobserve","observeCategories","observeRows","handleClickOutside","observe","darkMedia","darkMediaCallback","except","observers","disconnect","concat","navKey","scrollTop","grid","setsize","addRow","row","__categoryId","__index","rowIndex","rowRef","posinset","category1","getPerLine","root","matchMedia","media","initDynamicPerLine","calculatePerLine","ResizeObserver","getEmojiByPos","searchResults","visibleCategories","observerOptions","threshold","IntersectionObserver","entries","entry","dataset","intersectionRatio","ratios","ratio","visibleRows","isIntersecting","rootMargin","unfocusSearch","input","blur","navigate","up","down","repeat","selectionStart","increment","keyboard","scrollTo","scrollRect","rowTop","rowBot","ignoreMouse","mouseIsIgnored","ignoreMouseTimer","handleEmojiOver","showSkins","handleEmojiClick","emojiData","$693b183b0a78708f$export$d10ac59fbe52a745","closeSkins","tempSkin","handleBaseClick","handleBaseKeydown","handleSkinMouseOver","handleSkinClick","renderNav","handleCategoryClick","renderPreview","noSearchResults","search_no_results_1","search_no_results_2","pick","renderSkinToneButton","renderEmojiButton","$693b183b0a78708f$export$9cb4719e2e525b7a","every","val","tabindex","onMouseLeave","lineHeight","borderRadius","renderSearch","renderSkinTone","handleSearchClick","onInput","handleSearchInput","handleSearchKeyDown","autoComplete","clearSearch","renderSearchResults","ii","add_custom","renderCategories","visibility","targetRow","start","end","choose","openSkins","renderLiveRegion","renderSkins","skinToneButtonRect","baseRect","bottom","defaultChecked","lineWidth","closest","stopImmediatePropagation","afterRender","rect","$693b183b0a78708f$export$e772c8ff12451969","frames","classList","remove","$efa000751917694d$export$2e2bcd8739ae039","$329d53ba9fd7125f$exports","Helper","getDescendantProperty","object","list","firstSegment","remaining","dotIndex","toString","FuzzySearch","haystack","caseSensitive","isMatch","propertyValues","found","z","result","String","toLocaleLowerCase","indexes","nearestIndexesFor","letters","indexesOfFirstLetter","startingIndex","loopingIndex","letter","letterIndexes","init","RawData","TypedData","Data","allowFlagEmoji","isFlagEmojiSupported","flagEmojiIds","EmojiCategory","Flags","Categories","capitalize","Emojis","fromEntries","searcher","SKINTONE_CODE_TO_ENUM","EmojiSkinTone","MediumLight","MediumDark","EMOJI_ID_TO_VARIANTS","getVariants","skinToneCode","Default","CATEGORY_TO_EMOJI_IDS","getEmojis","ids","skinTone","getEmojisWithCategory","getEmojiVariants","queryLowercase","emojiSkinTone","matchedEmojis","sortBy","nlc","getEmojiId","canUseDOM","_createClass","defineProperties","descriptor","Constructor","protoProps","staticProps","Portal","_possibleConstructorReturn","_classCallCheck","TypeError","self","ReferenceError","__proto__","getPrototypeOf","apply","_inherits","subClass","superClass","create","setPrototypeOf","defaultNode","body","ReactDOM","createPortal","propTypes","PropTypes","isRequired","any","Portalv4","renderPortal","unmountComponentAtNode","portal","unstable_renderSubtreeIntoContainer","LegacyPortal","Portal$2","PortalContext","ReactPortal","SuggestionsMenuItem","onPointerMove","subtitle","scrollIntoView","scrollMode","block","boundary","Subtitle","$active","Shortcut","span","accentText","Emoji","EmojiMenuItem","filterExcessSeparators","EditorContext","useEditor","Input","defaultPosition","isAbove","SuggestionsMenu","commands","editorProps","hasActivated","pointerRef","inputRef","setPosition","insertItem","setInsertItem","selectedIndex","setSelectedIndex","isActive","calculatePosition","offsetWidth","offsetHeight","caretPosition","toPos","coordsAtPos","min","offsetParent","leftPos","innerWidth","handleClearSearch","trimTrigger","cut","insertText","insertNode","command","onClose","handleClickItem","onSelect","onCreateLink","label","modelId","triggerFilePick","triggerLinkInput","close","accept","click","filterable","embedItems","embed","EmbedDescriptor","defaultHidden","orderBy","commandScore","handleMouseDown","contains","isComposing","ctrlKey","prevIndex","total","nextIndex","previousHeading","hiddenScrollbars","LinkInputWrapper","LinkInput","matcher","onPaste","clipboardData","List","ListItem","handlePointerMove","currentHeading","onPointerDown","handlePointerDown","renderMenuItem","VisuallyHidden","getEventFiles","findParentNode","Error","ol","li","Scrollable","editorToolbar","EmojiMenu","emojiSearch","shortcode","snakeCase","emojiMartToGemoji","description","markup","_index","languagesUsingColon","EmojiMenuExtension","widget","defaultOptions","language","Keys","onCancel","Mod-s","onSave","done","Escape","AllSelection","Selection","atStart","setSelection","atEnd","GapCursor","nodes","_typeof","iterator","exports","assertString","invalidType","module","merge","isByteLength","str","_assertString","len","encodeURI","_interopRequireDefault","isFQDN","_merge","default_fqdn_options","allow_trailing_dot","substring","allow_wildcard","parts","tld","require_tld","allow_numeric_tld","part","ignore_max_length","allow_underscores","isIP","IPv4AddressRegExp","IPv6AddressRegExp","IPv4SegmentFormat","IPv4AddressFormat","IPv6SegmentFormat","isEmail","default_email_options","require_display_name","allow_display_name","display_email","splitNameAddress","display_name","endsWith","validateDisplayName","display_name_without_quotes","defaultMaxEmailLength","domain","lower_domain","host_blacklist","host_whitelist","domain_specific_validation","username","_isByteLength","_user_parts","gmailUserPart","_isFQDN","allow_ip_domain","_isIP","noBracketdomain","allow_utf8_local_part","quotedEmailUserUtf8","quotedEmailUser","pattern","emailUserUtf8Part","emailUserPart","user_parts","_i","blacklisted_chars","require$$4","isEmailValidator","parseDocumentSlug","parsed","sharedEnv","indexOfDoc","useRequest","requestFn","makeRequestOnMount","setData","loading","setLoading","loaded","setLoaded","setError","request","MentionMenu","setItems","users","actorId","maxResultsInSection","res","client","post","findByQuery","Avatar","model","Small","appendSpace","v4","MentionType","User","Icon","DocumentIcon","collection","Document","CollectionIcon","Collection","PlusIcon","handleSelect","message","userName","Toast","MentionMenuExtension","isMarkdown","signals","lines","minConfidence","fences","latex","links","relativeLinks","headings","listItems","tables","normalizePastedMarkdown","CHECKBOX_REGEX","PasteMenu","pastedText","LinkIcon","PasteHandler","showPasteMenu","hidePasteMenu","insertEmbed","findPlaceholder","deleteRange","removePlaceholder","setMeta","decos","getState","transformPastedHTML","html","isDropboxPaper","handleDOMEvents","keydown","keyup","handlePaste","editable","iframeSrc","parseSingleIframeSrc","parser","firstElementChild","iframe","vscode","vscodeMeta","pasteCodeLanguage","supportsCodeBlock","code_block","supportsCodeMark","marks","code_inline","isUrl","empty","toggleMark","containsHash","slug","isDestroyed","mention","replaceWith","determineIconType","IconType","insertLink","catch","isCollectionUrl","parseCollectionSlug","indexOfCollection","replaceSelectionWith","codeLanguages","addMark","isContainingImage","paste","pasteParser","currentPos","singleNode","sliceSingleNode","openStart","openEnd","replaceSelection","DecorationSet","mapping","meta","getMeta","hasDecorations","decorations","Decoration","inline","isRemoteTransaction","recreateTransform","before","complexSteps","wordDiffs","simplifyDiff","transaction","Backspace","Mod-z","PreventTab","Tab","Shift-Tab","ProsemirrorInputRule","rule","offset","lastIndexOf","cutOff","rightArrow","emdash","oneHalf","threeQuarters","copyright","registered","trademarked","ellipsis","openDoubleQuote","closeDoubleQuote","openSingleQuote","closeSingleQuote","SmartText","enableSmartText","withComments","basicExtensions","HardBreak","CommentEditor$1","CommentEditor","UnreadBadge","StyledLink","StyledCommentEditor","truncateMultiline","StyledAvatar","NotificationListItem","notification","onNavigate","collectionId","altKey","toggleRead","markAsRead","$unread","viewedAt","actor","Large","Text","weight","eventText","subject","Time","dateTime","createdAt","addSuffix","toJS","EmptyNotifications","Notifications$2","Notifications","onRequestClose","isOpen","isEmpty","bridge","setNotificationCount","setAppBadge","clearAppBadge","React.Suspense","flex","topShadow","PaginatedList","archived","renderItem","StyledPopover","Popover","NotificationsPopover","scrollableRef","unstable_fixed","PopoverDisclosure","scrollable","mobilePosition","unstable_initialFocusRef","shrink","ResizeBorder","undraggableOnDesktop","SidebarButton","_SidebarButton","showMoreMenu","$position","StyledMoreIcon","hasInsetTitlebar","draggableOnDesktop","extraArea","ToggleButton","Sidebar","_Sidebar","isCollapsing","setCollapsing","previousLocation","isMenuOpen","useMenuContext","isMobile","useMobile","collapsed","sidebarMaxWidth","minWidth","sidebarMinWidth","setOffset","isHovering","setHovering","isAnimating","setAnimating","isResizing","setResizing","hasPointerMoved","setPointerMoved","isSmallerThanMinimum","handleDrag","pageX","isSmallerThanCollapsePoint","handleStopDrag","activeElement","collapseSidebar","handleBlur","hasFocus","handlePointerActivity","handlePointerLeave","pageY","innerHeight","handleReset","setSidebarResizing","hideMobileSidebar","TooltipProvider","$hidden","$isHovering","$isAnimating","$isSmallerThanMinimum","$mobileSidebarVisible","mobileSidebarVisible","$collapsed","$isMobile","onPointerLeave","onDoubleClick","Backdrop","toggleMobileSidebar","fadeIn","mobileSidebar","hoverStyles","fadeOnDesktopBackgrounded","OverflowMenuButton","IconPicker","lazy","CollectionForm","CollectionForm_","handleSubmit","useCurrentTeam","hasOpenedIconPicker","setHasOpenedIconPicker","useBoolean","iconColor","randomElement","colorPalette","fallbackIcon","formHandleSubmit","formState","watch","control","setValue","setFocus","useForm","defaultValues","sharing","permission","IconLibrary","findIconByKeyword","shouldSelect","handleIconChange","onSubmit","required","maxLength","CollectionValidation","maxNameLength","prefix","StyledIconPicker","popoverPosition","onOpen","Controller","field","InputSelectPermission","EmptySelectValue","note","Switch","isSubmitting","isValid","CollectionEdit","CollectionEdit_","save","CollectionNew","CollectionNew_","runInAction","CollectionDeleteDialog","ConfirmationDialog","submitText","savingText","danger","collectionName","components","defaultCollectionId","darken","buttonNeutralBackground","HeaderInput","presence","marginRight","bounce","exit","CopyToClipboard","onCopy","elem","only","ENVIRONMENT","format","CopyLinkButton","handleCopied","ButtonSmall","Inner","InputMemberPermissionSelect","Select","permissions","ariaLabel","labelHidden","nude","InputSelect","PermissionAction","timing","InputPermissionSelect","SearchInput","_SearchInput","back","focusInput","marginBottom","NativeInput","_copyArray","copyArray","arrayPush","args","useMaxHeight","elementRef","maxViewportPercentage","setMaxHeight","windowHeight","useWindowSize","calcMaxHeight","mxHeight","InviteIcon","BaseListItem","small","border","Suggestions","_Suggestions","pendingIds","addPendingId","removePendingId","onEscape","neverRenderedList","groups","containerRef","fetchUsersByQuery","useThrottledCallback","leading","getSuggestionForEmail","email","avatarUrl","stringToColor","toUpperCase","suggestions","notInDocument","notInCollection","activeOrInvited","isSuspended","members","pending","getListItemProps","suggestion","Group","memberCount","group","isViewer","suggestionsWithPending","Placeholder","ScrollableContainer","ArrowKeyNavigation","PendingListItem","keyboardNavigation","InvitedIcon","RemoveIcon","marginTop","CheckmarkIcon","CloseIcon","times","AccessControlList","invitedInSession","memberships","groupMemberships","can","usePolicy","fetchMemberships","membershipLoading","fetchAll","fetchGroupMemberships","groupMembershipLoading","groupMembershipsInCollection","inCollection","membershipsInCollection","showLoading","CollectionPermission","Read","ReadWrite","Admin","UserIcon","membership","modalBackground","groupId","SharePopover","setQuery","picker","showPicker","hidePicker","hasRendered","setHasRendered","setPendingIds","setInvitedInSession","setPermission","prevPendingIds","suggestionsRef","searchInputRef","allowInInput","firstPending","handleQuery","handleAddPendingId","handleRemovePendingId","selectionEnd","firstSuggestion","handleEscape","inviteAction","invited","all","idOrEmail","invite","defaultUserRole","invitedUsers","invitedGroups","count2","backButton","button","BackIcon","rightButton","urlify","collectionPath","getHeaderExpandedKey","firstRender","setFirstRender","expanded","setExpanded","usePersistedState","handleClick","H3","fadeAndSlideDown","CollapsedIcon","ColorCollectionIcon","DynamicCollectionIcon","openCollection","createCollection","openModal","closeAllModals","editCollection","EditIcon","editCollectionPermissions","PadlockIcon","searchInCollection","readDocument","starCollection","StarredIcon","isStarred","star","unstarCollection","UnstarredIcon","unstar","subscribeCollection","isSubscribed","subscribe","unsubscribeCollection","UnsubscribeIcon","unsubscribe","archiveCollection","archive","restoreCollection","RestoreIcon","restore","deleteCollection","createTemplate","createDocument","newTemplatePath","rootCollectionActions","SidebarContext","useSidebarContext","groupSidebarContext","starredSidebarContext","determineSidebarContext","currentContext","preferStarred","currentlyInStarredCollection","isArchived","documentMemberships","groupsWithDocumentMemberships","g","$root","StyledCollapsedIcon","StyledDisclosure","activeDropStyle","fontWeight","IconWrapper","Actions","EventBoundary","showActions","NavLink","ariaCurrent","activeClassName","activeStyle","classNameProp","exact","isActiveProp","locationProp","strict","styleProp","scrollIntoViewIfNeeded","onBeforeClick","linkRef","RouterContext","preActive","setPreActive","currentLocation","toLocation","normalizeToLocation","createLocation","resolveToLocation","matchPath","joinClassnames","classnames","behavior","shouldFastClick","metaKey","$isActiveDrop","slateDark","white","sidebarText","$disabled","$isDraft","sidebarDraftBorder","Label","SidebarLink","onClickIntent","isActiveDrop","isDraft","depth","onDisclosureClick","unreadBadge","timer","paddingLeft","sidebarActiveBackground","handleMouseEnter","handleMouseLeave","useUnmount","tabIndex","DocumentDelete","isDeleting","setDeleting","isArchiving","setArchiving","canArchive","template","nestedDocumentsCount","getChildrenForDocument","parentDocumentId","documentPath","handleArchive","isTemplate","documentTitle","noun","baseClamp","number","lower","upper","toInteger","toLength","baseFill","isIterateeCall","fill","arrayMap","baseIteratee","baseMap","map_1","iteratee","windowObject","global","cancelFrame","requestFrame","clearTimeoutFn","setTimeoutFn","cancelAnimationFrameFn","mozCancelAnimationFrame","webkitCancelAnimationFrame","requestAnimationFrameFn","mozRequestAnimationFrame","webkitRequestAnimationFrame","createDetectElementResize","nonce","animationKeyframes","animationName","animationStartEvent","animationStyle","checkTriggers","resetTriggers","scrollListener","attachEvent","triggers","__resizeTriggers__","expand","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","scrollHeight","__resizeLast__","__resizeRAF__","animationFrame","__resizeListeners__","forEachResizeListener","fn","animation","keyframeprefix","domPrefixes","startEvents","pfx","elm","addResizeListener","ownerDocument","elementStyle","getComputedStyle","getElementById","head","getElementsByTagName","styleSheet","createStyles","expandTrigger","contractTrigger","__animationListener__","animationListener","removeResizeListener","detachEvent","requestAnimationFrameViaSetTimeout","animationFrameID","timeoutID","requestAnimationFrameWithSetTimeoutFallback","animationFrameCallback","timeoutCallback","AutoSizer","defaultHeight","scaledHeight","scaledWidth","defaultWidth","_autoSizer","_detectElementResize","_parentNode","_resizeObserver","_timeoutId","_onResize","disableHeight","disableWidth","onResize","parseFloat","paddingRight","paddingTop","_setRef","autoSizer","defaultView","ResizeObserverInstance","doNotBailOutOnEmptyChildren","outerStyle","childParams","bailoutOnChildren","areInputsEqual","newInputs","lastInputs","memoizeOne","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","memoized","newArgs","now","performance","Date","cancelTimeout","getScrollbarSize","recalculate","clientWidth","cachedRTLResult","getRTLOffsetType","outerDiv","direction","innerDiv","innerStyle","defaultItemKey$1","defaultItemKey","createListComponent","_class","getItemOffset","getEstimatedTotalSize","getItemSize","getOffsetForIndexAndAlignment","getStartIndexForOffset","getStopIndexForStartIndex","initInstanceProps","shouldResetStyleCacheOnItemSizeChange","validateProps","_PureComponent","_this","_instanceProps","_assertThisInitialized","_outerRef","_resetIsScrollingTimeoutId","isScrolling","scrollDirection","scrollOffset","initialScrollOffset","scrollUpdateWasRequested","_callOnItemsRendered","overscanStartIndex","overscanStopIndex","visibleStartIndex","visibleStopIndex","onItemsRendered","_callOnScroll","onScroll","_getItemStyle","_this$props","itemSize","layout","itemStyleCache","_getItemStyleCache","hasOwnProperty","_offset","isHorizontal","isRtl","offsetHorizontal","___","_onScrollHorizontal","_event$currentTarget","prevState","_resetIsScrollingDebounced","_onScrollVertical","_event$currentTarget2","clientHeight","_outerRefSetter","outerRef","requestTimeout","_resetIsScrolling","_inheritsLoose","validateSharedProps$1","_proto","scrollToItem","_this$props2","itemCount","scrollbarSize","_this$props3","_callPropsCallbacks","_this$props4","_this$state","_this$props5","innerRef","innerElementType","innerTagName","itemData","_this$props5$itemKey","itemKey","outerElementType","outerTagName","useIsScrolling","_this$_getRangeToRend","_getRangeToRender","startIndex","stopIndex","estimatedTotalSize","_extends","WebkitOverflowScrolling","willChange","pointerEvents","_this$_getRangeToRend2","_overscanStartIndex","_overscanStopIndex","_visibleStartIndex","_visibleStopIndex","_this$state2","_scrollDirection","_scrollOffset","_scrollUpdateWasRequested","_this$props6","overscanCount","_this$state3","overscanBackward","overscanForward","PureComponent","validateSharedProps","_ref2","_ref3","FixedSizeList","_ref4","instanceProps","lastItemOffset","maxOffset","minOffset","middleOffset","ceil","_ref5","_ref6","numVisibleItems","_ref7","Spacer","Node","listItemHoverBackground","DocumentExplorerNode$1","DocumentExplorerNode","hasChildren","Path","$selected","white50","DocumentExplorerSearchResult","SearchResult","flattenTree","flattened","ancestors","descendants","allDescendants","FlexContainer","ListSearch","InputSearch","Outline","ListContainer","DocumentExplorer","searchTerm","setSearchTerm","selectedNode","selectNode","setInitialScrollOffset","activeNode","setActiveNode","expandedNodes","setExpandedNodes","itemRefs","setItemRefs","inputSearchRef","listRef","recentlyViewedItemIds","recentlyViewed","searchIndex","getNodes","NavigationNodeType","flatMap","includeDescendants","baseDepth","Infinity","scrollNodeIntoView","isExpanded","calculateInitialScrollOffset","Number","fetchDocuments","isSelected","nodeId","toggleCollapse","collapse","descendantIds","des","newNodes","toggleSelect","renderedIcon","col","yellow","VERTICAL_PADDING","useCollectionTrees","getCollectionTree","addType","addParent","addDepth","addCollectionId","collectionNode","sortNavigationNodes","collectionTrees","Footer","StyledText","DocumentMove","selectedPath","selectPath","filterSourceDocument","flatten","DocumentPermanentDelete","permanent","DocumentPublish","publishOptions","publish","DeleteDocumentsInTrash","shouldRedirect","emptyTrash","OptionsContainer","DocumentCopy","setPublish","publishedAt","recursive","setRecursive","handlePublishChange","handleRecursiveChange","duplicate","labelPosition","childDocuments","MarkdownIcon","stroke","strokeWidth","DocumentMemberListItem","onRemove","onLeave","onUpdate","DocumentPermission","currentPermission","p","MaybeLink","sourceId","isInvited","lastActiveAt","DocumentMembersList","userMemberships","handleRemoveUser","handleUpdateUser","inDocument","manageUsers","getMembership","StyledInfoIcon","InfoIcon","DomainPrefix","ShareLinkInput","PublicAccess","share","sharedParent","validationError","setValidationError","urlId","setUrlId","documentAbilities","canPublish","handleIndexingChanged","allowIndexing","handlePublishedChange","published","handleUrlChange","debounce","SHARE_URL_SLUG_REGEX","shareUrl","copyButton","CopyIcon","GlobeIcon","QuestionMarkIcon","includeChildDocuments","usersInCollection","useUsersInCollection","collectionSharingDisabled","canCollection","userMembershipLoading","fetchUserMemberships","fetchDocumentMemberships","Pagination","defaultLimit","AccessTooltip","CollectionSquircle","DocumentMemberList","createdBy","Sticky","iconType","squircleColor","SVG","slateLight","iconSize","shares","getByDocumentId","getByDocumentParents","SelectLocation","workspaceOption","TeamLogo","collectionOptions","opt","idx","handleSelection","DocumentTemplatizeDialog","invariant","setCollectionId","templatize","openDocument","navigationNodes","NewDocumentIcon","newDocumentPath","createDraftDocument","createDocumentFromTemplate","isDeleted","templateId","createNestedDocument","createChildDocument","newNestedDocumentPath","starDocument","unstarDocument","publishDocument","PublishIcon","documentName","unpublishDocument","UnpublishIcon","unpublish","subscribeDocument","unsubscribeDocument","shareDocument","downloadDocumentAsHTML","DownloadIcon","ExportContentType","Html","downloadDocumentAsPDF","PDF_EXPORT_ENABLED","toast","Pdf","finally","dismiss","downloadDocumentAsMarkdown","Markdown","downloadDocument","copyDocumentAsMarkdown","toMarkdown","copyDocumentShareLink","copyDocumentLink","copyDocument","duplicateDocument","DuplicateIcon","pinDocumentToCollection","selectedDocument","getCollectionForDocument","PinIcon","pin","pinned","pinDocumentToHome","pinToHome","pinnedToHome","pinDocument","searchInDocument","printDocument","PrintIcon","print","queueMicrotask","importDocument","ImportIcon","importFileTypes","onchange","createTemplateFromDocument","updateDocument","openRandomDocument","ShuffleIcon","random","searchDocumentsForQuery","moveTemplateToWorkspace","MoveIcon","isWorkspaceTemplate","moveDocumentToCollection","documentType","moveDocument","moveTemplate","archiveDocument","deleteDocument","permanentlyDeleteDocument","CrossIcon","permanentDelete","permanentlyDeleteDocumentsInTrash","TrashSection","deleted","isAdmin","openDocumentComments","CommentIcon","getPreference","TeamPreference","Commenting","toggleComments","openDocumentHistory","HistoryIcon","listRevisions","documentHistoryPath","openDocumentInsights","GraphIcon","listViews","documentInsightsPath","toggleViewerInsights","insightsEnabled","EyeIcon","updateInsights","leaveDocument","rootDocumentActions","MenuTrigger","onTrigger","subscriptions","pins","menuState","auxDataLoading","auxDataLoaded","auxDataRequest","fetchOne","SubscriptionType","handlePointerEnter","loadRelations","onPointerEnter","MenuContent","MenuContent_","onFindAndReplace","onRename","showDisplayOptions","showToggleEmbeds","handleRestore","restoreItems","unarchive","documentEditPath","separateEditMode","InputIcon","DisplayOptions","Style","ToggleMenuItem","embedsDisabled","enableEmbeds","disableEmbeds","fullWidth","setPreference","UserPreference","FullWidthDocuments","DocumentMenu","unstable_preventOverflow","unstable_flip","isMenuVisible","showMenu","handleFilePicked","importedDocument","useLocationSidebarContext","Section","DocumentContext","isEditorInitialized","setDocument","updateState","setEditor","setEditorInitialized","initialized","updateHeadings","updateTasks","hasHeadings","currHeadings","getHeadings","tasks","getTasks","completed","computed","Context","useDocumentContext","DocumentContextProvider"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,40,41,42,56,66,67,68,70,71,72,73,84,85,86,87,88,89,90,124,125,139,140,141,142,143,144,145,146],"sources":["../../../node_modules/framer-motion/dist/es/motion/features/use-features.js","../../../node_modules/framer-motion/dist/es/context/MotionContext/index.js","../../../node_modules/framer-motion/dist/es/context/LayoutGroupContext.js","../../../node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.js","../../../node_modules/framer-motion/dist/es/motion/utils/use-visual-element.js","../../../node_modules/framer-motion/dist/es/context/MotionContext/create.js","../../../node_modules/framer-motion/dist/es/context/MotionContext/utils.js","../../../node_modules/framer-motion/dist/es/motion/index.js","../../../node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.js","../../../node_modules/framer-motion/dist/es/render/html/utils/create-render-state.js","../../../node_modules/framer-motion/dist/es/render/html/use-props.js","../../../node_modules/framer-motion/dist/es/motion/utils/valid-prop.js","../../../node_modules/framer-motion/dist/es/render/dom/utils/filter-props.js","../../../node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.js","../../../node_modules/framer-motion/dist/es/render/svg/use-props.js","../../../node_modules/framer-motion/dist/es/render/dom/use-render.js","../../../node_modules/framer-motion/dist/es/motion/utils/use-visual-state.js","../../../node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.js","../../../node_modules/framer-motion/dist/es/render/svg/config-motion.js","../../../node_modules/framer-motion/dist/es/render/html/config-motion.js","../../../node_modules/framer-motion/dist/es/render/dom/motion-minimal.js","../../../node_modules/framer-motion/dist/es/render/dom/motion-proxy.js","../../../node_modules/framer-motion/dist/es/render/dom/utils/create-config.js","../../../node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.js","../../../node_modules/framer-motion/dist/es/components/AnimatePresence/index.js","../../../node_modules/framer-motion/dist/es/utils/use-force-update.js","../../../app/components/PlaceholderDocument.tsx","../../../app/actions/sections.ts","../../../app/actions/definitions/navigation.tsx","../../../app/hooks/useActionContext.ts","../../../app/scenes/Errors/Error404.tsx","../../../app/components/SkipNavContent.tsx","../../../app/components/SkipNavLink.tsx","../../../shared/utils/time.ts","../../../app/hooks/useIdle.ts","../../../app/hooks/usePageVisibility.ts","../../../app/hooks/useAutoRefresh.ts","../../../app/hooks/useInterval.ts","../../../app/components/Layout.tsx","../../../app/components/RegisterKeyDown.ts","../../../node_modules/reakit/es/Menu/MenuButton.js","../../../node_modules/reakit/es/Menu/MenuState.js","../../../node_modules/reakit/es/Menu/MenuBarState.js","../../../app/components/ResizingHeightContainer.tsx","../../../app/components/ContextMenu/Header.ts","../../../app/components/ContextMenu/MouseSafeArea.tsx","../../../app/hooks/useMousePosition.ts","../../../app/components/ContextMenu/Template.tsx","../../../app/components/Avatar/GroupAvatar.tsx","../../../app/menus/separator.ts","../../../app/actions/definitions/settings.tsx","../../../app/menus/AccountMenu.tsx","../../../app/components/Sidebar/components/Relative.tsx","../../../app/components/Notifications/NotificationIcon.tsx","../../../app/actions/definitions/notifications.tsx","../../../app/menus/NotificationMenu.tsx","../../../node_modules/lodash/difference.js","../../../shared/editor/components/Styles.ts","../../../app/components/ClickablePadding.ts","../../../app/hooks/useDictionary.ts","../../../app/components/Editor.tsx","../../../app/hooks/useEmbeds.ts","../../../app/hooks/useEditorClickHandlers.ts","../../../app/editor/extensions/ClipboardTextSerializer.ts","../../../shared/editor/plugins/Suggestions.ts","../../../app/editor/extensions/Suggestion.ts","../../../node_modules/emoji-mart/dist/module.js","../../../node_modules/fuzzy-search/src/Helper.js","../../../node_modules/fuzzy-search/src/FuzzySearch.js","../../../shared/utils/emoji.ts","../../../node_modules/react-portal/es/utils.js","../../../node_modules/react-portal/es/Portal.js","../../../node_modules/react-portal/es/LegacyPortal.js","../../../node_modules/react-portal/es/PortalCompat.js","../../../app/components/Portal.tsx","../../../app/editor/components/SuggestionsMenuItem.tsx","../../../app/editor/components/EmojiMenuItem.tsx","../../../shared/editor/lib/filterExcessSeparators.ts","../../../app/editor/components/EditorContext.tsx","../../../app/editor/components/Input.tsx","../../../app/editor/components/SuggestionsMenu.tsx","../../../app/editor/components/EmojiMenu.tsx","../../../app/editor/extensions/EmojiMenu.tsx","../../../app/editor/extensions/Keys.ts","../../../node_modules/validator/lib/util/assertString.js","../../../node_modules/validator/lib/util/merge.js","../../../node_modules/validator/lib/isByteLength.js","../../../node_modules/validator/lib/isFQDN.js","../../../node_modules/validator/lib/isIP.js","../../../node_modules/validator/lib/isEmail.js","../../../node_modules/class-validator/esm5/decorator/string/IsEmail.js","../../../shared/utils/parseDocumentSlug.ts","../../../app/hooks/useRequest.ts","../../../app/editor/components/MentionMenu.tsx","../../../app/editor/extensions/MentionMenu.tsx","../../../shared/editor/lib/isMarkdown.ts","../../../shared/editor/lib/markdown/normalize.ts","../../../app/editor/components/PasteMenu.tsx","../../../app/editor/extensions/PasteHandler.tsx","../../../shared/utils/parseCollectionSlug.ts","../../../app/editor/extensions/PreventTab.ts","../../../shared/editor/lib/InputRule.ts","../../../app/editor/extensions/SmartText.ts","../../../app/scenes/Document/components/CommentEditor.tsx","../../../app/components/UnreadBadge.tsx","../../../app/components/Notifications/NotificationListItem.tsx","../../../app/components/Notifications/Notifications.tsx","../../../app/components/Notifications/NotificationsPopover.tsx","../../../app/components/Sidebar/components/ResizeBorder.ts","../../../app/components/Sidebar/components/SidebarButton.tsx","../../../app/components/Sidebar/components/ToggleButton.tsx","../../../app/components/Sidebar/Sidebar.tsx","../../../app/components/ContextMenu/OverflowMenuButton.tsx","../../../app/components/Collection/CollectionForm.tsx","../../../app/components/Collection/CollectionEdit.tsx","../../../app/components/Collection/CollectionNew.tsx","../../../app/components/CollectionDeleteDialog.tsx","../../../app/components/Sharing/components/index.tsx","../../../app/components/CopyToClipboard.ts","../../../app/components/Sharing/components/CopyLinkButton.tsx","../../../app/components/ButtonSmall.ts","../../../app/components/InputMemberPermissionSelect.tsx","../../../app/components/Sharing/components/PermissionAction.tsx","../../../app/components/Sharing/components/SearchInput.tsx","../../../node_modules/lodash/_copyArray.js","../../../node_modules/lodash/concat.js","../../../app/hooks/useMaxHeight.ts","../../../app/components/Sharing/components/ListItem.tsx","../../../app/components/Sharing/components/Suggestions.tsx","../../../app/components/Sharing/components/Placeholder.tsx","../../../app/components/Sharing/Collection/AccessControlList.tsx","../../../app/components/Sharing/Collection/SharePopover.tsx","../../../app/components/Sidebar/components/Header.tsx","../../../app/actions/definitions/collections.tsx","../../../app/components/Sidebar/components/SidebarContext.ts","../../../app/components/Sidebar/components/Disclosure.tsx","../../../app/components/Sidebar/components/SidebarLink.tsx","../../../app/components/Sidebar/components/NavLink.tsx","../../../app/scenes/DocumentDelete.tsx","../../../node_modules/lodash/_baseClamp.js","../../../node_modules/lodash/toLength.js","../../../node_modules/lodash/_baseFill.js","../../../node_modules/lodash/fill.js","../../../node_modules/lodash/map.js","../../../node_modules/react-virtualized-auto-sizer/dist/react-virtualized-auto-sizer.esm.js","../../../node_modules/memoize-one/dist/memoize-one.esm.js","../../../node_modules/react-window/dist/index.esm.js","../../../app/components/DocumentExplorerNode.tsx","../../../app/components/DocumentExplorerSearchResult.tsx","../../../app/utils/tree.ts","../../../app/components/DocumentExplorer.tsx","../../../app/hooks/useCollectionTrees.ts","../../../app/scenes/DocumentMove.tsx","../../../app/scenes/DocumentPermanentDelete.tsx","../../../app/scenes/DocumentPublish.tsx","../../../app/scenes/Trash/components/DeleteDocumentsInTrash.tsx","../../../app/components/DocumentCopy.tsx","../../../app/components/Icons/MarkdownIcon.tsx","../../../app/components/Sharing/Document/DocumentMemberListItem.tsx","../../../app/components/Sharing/Document/DocumentMemberList.tsx","../../../app/components/Sharing/Document/PublicAccess.tsx","../../../app/components/Sharing/Document/AccessControlList.tsx","../../../app/components/Sharing/Document/SharePopover.tsx","../../../app/components/TemplatizeDialog/Label.tsx","../../../app/components/TemplatizeDialog/SelectLocation.tsx","../../../app/components/TemplatizeDialog/index.tsx","../../../app/actions/definitions/documents.tsx","../../../app/menus/MenuContext.tsx","../../../app/menus/DocumentMenu.tsx","../../../app/hooks/useLocationSidebarContext.ts","../../../app/components/Sidebar/components/Section.ts","../../../app/components/DocumentContext.tsx"],"sourcesContent":["import { __assign } from 'tslib';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { featureDefinitions } from './definitions.js';\nimport { invariant } from 'hey-listen';\nimport { LazyContext } from '../../context/LazyContext.js';\n\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n    var features = [];\n    var lazyContext = useContext(LazyContext);\n    if (!visualElement)\n        return null;\n    /**\n     * If we're in development mode, check to make sure we're not rendering a motion component\n     * as a child of LazyMotion, as this will break the file-size benefits of using it.\n     */\n    if (process.env.NODE_ENV !== \"production\" &&\n        preloadedFeatures &&\n        lazyContext.strict) {\n        invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n    }\n    for (var i = 0; i < numFeatures; i++) {\n        var name_1 = featureNames[i];\n        var _a = featureDefinitions[name_1], isEnabled = _a.isEnabled, Component = _a.Component;\n        /**\n         * It might be possible in the future to use this moment to\n         * dynamically request functionality. In initial tests this\n         * was producing a lot of duplication amongst bundles.\n         */\n        if (isEnabled(props) && Component) {\n            features.push(React.createElement(Component, __assign({ key: name_1 }, props, { visualElement: visualElement })));\n        }\n    }\n    return features;\n}\n\nexport { useFeatures };\n","import { useContext, createContext } from 'react';\n\nvar MotionContext = createContext({});\nfunction useVisualElementContext() {\n    return useContext(MotionContext).visualElement;\n}\n\nexport { MotionContext, useVisualElementContext };\n","import { createContext } from 'react';\n\n/**\n * @internal\n */\nvar LayoutGroupContext = createContext(null);\n\nexport { LayoutGroupContext };\n","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.js';\n\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect };\n","import { __assign } from 'tslib';\nimport { useContext, useRef, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { isPresent } from '../../components/AnimatePresence/use-presence.js';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.js';\nimport { useVisualElementContext } from '../../context/MotionContext/index.js';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.js';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { LazyContext } from '../../context/LazyContext.js';\n\nfunction useLayoutId(_a) {\n    var layoutId = _a.layoutId;\n    var layoutGroupId = useContext(LayoutGroupContext);\n    return layoutGroupId && layoutId !== undefined\n        ? layoutGroupId + \"-\" + layoutId\n        : layoutId;\n}\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n    var config = useContext(MotionConfigContext);\n    var lazyContext = useContext(LazyContext);\n    var parent = useVisualElementContext();\n    var presenceContext = useContext(PresenceContext);\n    var layoutId = useLayoutId(props);\n    var visualElementRef = useRef(undefined);\n    /**\n     * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n     */\n    if (!createVisualElement)\n        createVisualElement = lazyContext.renderer;\n    if (!visualElementRef.current && createVisualElement) {\n        visualElementRef.current = createVisualElement(Component, {\n            visualState: visualState,\n            parent: parent,\n            props: __assign(__assign({}, props), { layoutId: layoutId }),\n            presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n            blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false,\n        });\n    }\n    var visualElement = visualElementRef.current;\n    useIsomorphicLayoutEffect(function () {\n        if (!visualElement)\n            return;\n        visualElement.setProps(__assign(__assign(__assign({}, config), props), { layoutId: layoutId }));\n        visualElement.isPresent = isPresent(presenceContext);\n        visualElement.isPresenceRoot =\n            !parent || parent.presenceId !== (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id);\n        /**\n         * Fire a render to ensure the latest state is reflected on-screen.\n         */\n        visualElement.syncRender();\n    });\n    useEffect(function () {\n        var _a;\n        if (!visualElement)\n            return;\n        /**\n         * In a future refactor we can replace the features-as-components and\n         * have this loop through them all firing \"effect\" listeners\n         */\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n    });\n    useIsomorphicLayoutEffect(function () { return function () { return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount(); }; }, []);\n    return visualElement;\n}\n\nexport { useVisualElement };\n","import { useMemo, useContext } from 'react';\nimport { MotionContext } from './index.js';\nimport { getCurrentTreeVariants } from './utils.js';\n\nfunction useCreateMotionContext(props, isStatic) {\n    var _a = getCurrentTreeVariants(props, useContext(MotionContext)), initial = _a.initial, animate = _a.animate;\n    return useMemo(function () { return ({ initial: initial, animate: animate }); }, \n    /**\n     * Only break memoisation in static mode\n     */\n    isStatic\n        ? [\n            variantLabelsAsDependency(initial),\n            variantLabelsAsDependency(animate),\n        ]\n        : []);\n}\nfunction variantLabelsAsDependency(prop) {\n    return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };\n","import { checkIfControllingVariants, isVariantLabel } from '../../render/utils/variants.js';\n\nfunction getCurrentTreeVariants(props, context) {\n    if (checkIfControllingVariants(props)) {\n        var initial = props.initial, animate = props.animate;\n        return {\n            initial: initial === false || isVariantLabel(initial)\n                ? initial\n                : undefined,\n            animate: isVariantLabel(animate) ? animate : undefined,\n        };\n    }\n    return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };\n","import * as React from 'react';\nimport { forwardRef, useContext } from 'react';\nimport { useFeatures } from './features/use-features.js';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { MotionContext } from '../context/MotionContext/index.js';\nimport { useVisualElement } from './utils/use-visual-element.js';\nimport { useMotionRef } from './utils/use-motion-ref.js';\nimport { useCreateMotionContext } from '../context/MotionContext/create.js';\nimport { loadFeatures } from './features/definitions.js';\nimport { isBrowser } from '../utils/is-browser.js';\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\nfunction createMotionComponent(_a) {\n    var preloadedFeatures = _a.preloadedFeatures, createVisualElement = _a.createVisualElement, useRender = _a.useRender, useVisualState = _a.useVisualState, Component = _a.Component;\n    preloadedFeatures && loadFeatures(preloadedFeatures);\n    function MotionComponent(props, externalRef) {\n        /**\n         * If we're rendering in a static environment, we only visually update the component\n         * as a result of a React-rerender rather than interactions or animations. This\n         * means we don't need to load additional memory structures like VisualElement,\n         * or any gesture/animation features.\n         */\n        var isStatic = useContext(MotionConfigContext).isStatic;\n        var features = null;\n        /**\n         * Create the tree context. This is memoized and will only trigger renders\n         * when the current tree variant changes in static mode.\n         */\n        var context = useCreateMotionContext(props, isStatic);\n        /**\n         *\n         */\n        var visualState = useVisualState(props, isStatic);\n        if (!isStatic && isBrowser) {\n            /**\n             * Create a VisualElement for this component. A VisualElement provides a common\n             * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n             * providing a way of rendering to these APIs outside of the React render loop\n             * for more performant animations and interactions\n             */\n            context.visualElement = useVisualElement(Component, visualState, props, createVisualElement);\n            /**\n             * Load Motion gesture and animation features. These are rendered as renderless\n             * components so each feature can optionally make use of React lifecycle methods.\n             *\n             * TODO: The intention is to move these away from a React-centric to a\n             * VisualElement-centric lifecycle scheme.\n             */\n            features = useFeatures(props, context.visualElement, preloadedFeatures);\n        }\n        /**\n         * The mount order and hierarchy is specific to ensure our element ref\n         * is hydrated by the time features fire their effects.\n         */\n        return (React.createElement(React.Fragment, null,\n            React.createElement(MotionContext.Provider, { value: context }, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic)),\n            features));\n    }\n    return forwardRef(MotionComponent);\n}\n\nexport { createMotionComponent };\n","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.js';\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n    return useCallback(function (instance) {\n        var _a;\n        instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n        if (visualElement) {\n            instance\n                ? visualElement.mount(instance)\n                : visualElement.unmount();\n        }\n        if (externalRef) {\n            if (typeof externalRef === \"function\") {\n                externalRef(instance);\n            }\n            else if (isRefObject(externalRef)) {\n                externalRef.current = instance;\n            }\n        }\n    }, \n    /**\n     * Only pass a new ref callback to React if we've received a visual element\n     * factory. Otherwise we'll be mounting/remounting every time externalRef\n     * or other dependencies change.\n     */\n    [visualElement]);\n}\n\nexport { useMotionRef };\n","var createHtmlRenderState = function () { return ({\n    style: {},\n    transform: {},\n    transformKeys: [],\n    transformOrigin: {},\n    vars: {},\n}); };\n\nexport { createHtmlRenderState };\n","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\n\nfunction copyRawValuesOnly(target, source, props) {\n    for (var key in source) {\n        if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n            target[key] = source[key];\n        }\n    }\n}\nfunction useInitialMotionValues(_a, visualState, isStatic) {\n    var transformTemplate = _a.transformTemplate;\n    return useMemo(function () {\n        var state = createHtmlRenderState();\n        buildHTMLStyles(state, visualState, undefined, undefined, { enableHardwareAcceleration: !isStatic }, transformTemplate);\n        var vars = state.vars, style = state.style;\n        return __assign(__assign({}, vars), style);\n    }, [visualState]);\n}\nfunction useStyle(props, visualState, isStatic) {\n    var styleProp = props.style || {};\n    var style = {};\n    /**\n     * Copy non-Motion Values straight into style\n     */\n    copyRawValuesOnly(style, styleProp, props);\n    Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n    if (props.transformValues) {\n        style = props.transformValues(style);\n    }\n    return style;\n}\nfunction useHTMLProps(props, visualState, isStatic) {\n    // The `any` isn't ideal but it is the type of createElement props argument\n    var htmlProps = {};\n    var style = useStyle(props, visualState, isStatic);\n    if (Boolean(props.drag)) {\n        // Disable the ghost element when a user drags\n        htmlProps.draggable = false;\n        // Disable text selection\n        style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout =\n            \"none\";\n        // Disable scrolling on the draggable direction\n        style.touchAction =\n            props.drag === true\n                ? \"none\"\n                : \"pan-\" + (props.drag === \"x\" ? \"y\" : \"x\");\n    }\n    htmlProps.style = style;\n    return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps, useStyle };\n","/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\n    \"initial\",\n    \"animate\",\n    \"exit\",\n    \"style\",\n    \"variants\",\n    \"transition\",\n    \"transformTemplate\",\n    \"transformValues\",\n    \"custom\",\n    \"inherit\",\n    \"layout\",\n    \"layoutId\",\n    \"_layoutResetTransform\",\n    \"onLayoutAnimationComplete\",\n    \"onViewportBoxUpdate\",\n    \"onLayoutMeasure\",\n    \"onBeforeLayoutMeasure\",\n    \"onAnimationStart\",\n    \"onAnimationComplete\",\n    \"onUpdate\",\n    \"onDragStart\",\n    \"onDrag\",\n    \"onDragEnd\",\n    \"onMeasureDragConstraints\",\n    \"onDirectionLock\",\n    \"onDragTransitionEnd\",\n    \"drag\",\n    \"dragControls\",\n    \"dragListener\",\n    \"dragConstraints\",\n    \"dragDirectionLock\",\n    \"_dragX\",\n    \"_dragY\",\n    \"dragElastic\",\n    \"dragMomentum\",\n    \"dragPropagation\",\n    \"dragTransition\",\n    \"whileDrag\",\n    \"onPan\",\n    \"onPanStart\",\n    \"onPanEnd\",\n    \"onPanSessionStart\",\n    \"onTap\",\n    \"onTapStart\",\n    \"onTapCancel\",\n    \"onHoverStart\",\n    \"onHoverEnd\",\n    \"whileFocus\",\n    \"whileTap\",\n    \"whileHover\",\n]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n    return validMotionProps.has(key);\n}\n\nexport { isValidMotionProp };\n","import { isValidMotionProp } from '../../../motion/utils/valid-prop.js';\n\nvar shouldForward = function (key) { return !isValidMotionProp(key); };\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n    var emotionIsPropValid_1 = require(\"@emotion/is-prop-valid\").default;\n    shouldForward = function (key) {\n        // Handle events explicitly as Emotion validates them all as true\n        if (key.startsWith(\"on\")) {\n            return !isValidMotionProp(key);\n        }\n        else {\n            return emotionIsPropValid_1(key);\n        }\n    };\n}\ncatch (_a) {\n    // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props, isDom, forwardMotionProps) {\n    var filteredProps = {};\n    for (var key in props) {\n        if (shouldForward(key) ||\n            (forwardMotionProps === true && isValidMotionProp(key)) ||\n            (!isDom && !isValidMotionProp(key))) {\n            filteredProps[key] = props[key];\n        }\n    }\n    return filteredProps;\n}\n\nexport { filterProps };\n","import { __assign } from 'tslib';\nimport { createHtmlRenderState } from '../../html/utils/create-render-state.js';\n\nvar createSvgRenderState = function () { return (__assign(__assign({}, createHtmlRenderState()), { attrs: {} })); };\n\nexport { createSvgRenderState };\n","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\n\nfunction useSVGProps(props, visualState) {\n    var visualProps = useMemo(function () {\n        var state = createSvgRenderState();\n        buildSVGAttrs(state, visualState, undefined, undefined, { enableHardwareAcceleration: false }, props.transformTemplate);\n        return __assign(__assign({}, state.attrs), { style: __assign({}, state.style) });\n    }, [visualState]);\n    if (props.style) {\n        var rawStyles = {};\n        copyRawValuesOnly(rawStyles, props.style, props);\n        visualProps.style = __assign(__assign({}, rawStyles), visualProps.style);\n    }\n    return visualProps;\n}\n\nexport { useSVGProps };\n","import { __assign } from 'tslib';\nimport { createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.js';\nimport { filterProps } from './utils/filter-props.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\nimport { useSVGProps } from '../svg/use-props.js';\n\nfunction createUseRender(forwardMotionProps) {\n    if (forwardMotionProps === void 0) { forwardMotionProps = false; }\n    var useRender = function (Component, props, ref, _a, isStatic) {\n        var latestValues = _a.latestValues;\n        var useVisualProps = isSVGComponent(Component)\n            ? useSVGProps\n            : useHTMLProps;\n        var visualProps = useVisualProps(props, latestValues, isStatic);\n        var filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n        var elementProps = __assign(__assign(__assign({}, filteredProps), visualProps), { ref: ref });\n        return createElement(Component, elementProps);\n    };\n    return useRender;\n}\n\nexport { createUseRender };\n","import { __rest } from 'tslib';\nimport { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { checkIfControllingVariants, checkIfVariantNode, resolveVariantFromProps } from '../../render/utils/variants.js';\nimport { useConstant } from '../../utils/use-constant.js';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.js';\nimport { MotionContext } from '../../context/MotionContext/index.js';\n\nfunction makeState(_a, props, context, presenceContext) {\n    var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps, createRenderState = _a.createRenderState, onMount = _a.onMount;\n    var state = {\n        latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n        renderState: createRenderState(),\n    };\n    if (onMount) {\n        state.mount = function (instance) { return onMount(props, instance, state); };\n    }\n    return state;\n}\nvar makeUseVisualState = function (config) { return function (props, isStatic) {\n    var context = useContext(MotionContext);\n    var presenceContext = useContext(PresenceContext);\n    return isStatic\n        ? makeState(config, props, context, presenceContext)\n        : useConstant(function () { return makeState(config, props, context, presenceContext); });\n}; };\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n    var values = {};\n    var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n    var motionValues = scrapeMotionValues(props);\n    for (var key in motionValues) {\n        values[key] = resolveMotionValue(motionValues[key]);\n    }\n    var initial = props.initial, animate = props.animate;\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n    if (context &&\n        isVariantNode &&\n        !isControllingVariants &&\n        props.inherit !== false) {\n        initial !== null && initial !== void 0 ? initial : (initial = context.initial);\n        animate !== null && animate !== void 0 ? animate : (animate = context.animate);\n    }\n    var variantToSet = blockInitialAnimation || initial === false ? animate : initial;\n    if (variantToSet &&\n        typeof variantToSet !== \"boolean\" &&\n        !isAnimationControls(variantToSet)) {\n        var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n        list.forEach(function (definition) {\n            var resolved = resolveVariantFromProps(props, definition);\n            if (!resolved)\n                return;\n            var transitionEnd = resolved.transitionEnd; resolved.transition; var target = __rest(resolved, [\"transitionEnd\", \"transition\"]);\n            for (var key in target)\n                values[key] = target[key];\n            for (var key in transitionEnd)\n                values[key] = transitionEnd[key];\n        });\n    }\n    return values;\n}\n\nexport { makeUseVisualState };\n","import { isCustomValue } from '../../utils/resolve-value.js';\nimport { isMotionValue } from './is-motion-value.js';\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\nfunction resolveMotionValue(value) {\n    var unwrappedValue = isMotionValue(value) ? value.get() : value;\n    return isCustomValue(unwrappedValue)\n        ? unwrappedValue.toValue()\n        : unwrappedValue;\n}\n\nexport { resolveMotionValue };\n","import { renderSVG } from './utils/render.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\n\nvar svgMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n        createRenderState: createSvgRenderState,\n        onMount: function (props, instance, _a) {\n            var renderState = _a.renderState, latestValues = _a.latestValues;\n            try {\n                renderState.dimensions =\n                    typeof instance.getBBox ===\n                        \"function\"\n                        ? instance.getBBox()\n                        : instance.getBoundingClientRect();\n            }\n            catch (e) {\n                // Most likely trying to measure an unrendered element under Firefox\n                renderState.dimensions = {\n                    x: 0,\n                    y: 0,\n                    width: 0,\n                    height: 0,\n                };\n            }\n            if (isPath(instance)) {\n                renderState.totalPathLength = instance.getTotalLength();\n            }\n            buildSVGAttrs(renderState, latestValues, undefined, undefined, { enableHardwareAcceleration: false }, props.transformTemplate);\n            // TODO: Replace with direct assignment\n            renderSVG(instance, renderState);\n        },\n    }),\n};\nfunction isPath(element) {\n    return element.tagName === \"path\";\n}\n\nexport { svgMotionConfig };\n","import { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\n\nvar htmlMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n        createRenderState: createHtmlRenderState,\n    }),\n};\n\nexport { htmlMotionConfig };\n","import { createMotionProxy } from './motion-proxy.js';\nimport { createDomMotionConfig } from './utils/create-config.js';\n\n/**\n * @public\n */\nvar m = createMotionProxy(createDomMotionConfig);\n\nexport { m };\n","import { createMotionComponent } from '../../motion/index.js';\n\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\nfunction createMotionProxy(createConfig) {\n    function custom(Component, customMotionComponentConfig) {\n        if (customMotionComponentConfig === void 0) { customMotionComponentConfig = {}; }\n        return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n    }\n    /**\n     * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n     * Rather than generating them anew every render.\n     */\n    var componentCache = new Map();\n    return new Proxy(custom, {\n        /**\n         * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n         * The prop name is passed through as `key` and we can use that to generate a `motion`\n         * DOM component with that name.\n         */\n        get: function (_target, key) {\n            /**\n             * If this element doesn't exist in the component cache, create it and cache.\n             */\n            if (!componentCache.has(key)) {\n                componentCache.set(key, custom(key));\n            }\n            return componentCache.get(key);\n        },\n    });\n}\n\nexport { createMotionProxy };\n","import { __assign } from 'tslib';\nimport { isSVGComponent } from './is-svg-component.js';\nimport { createUseRender } from '../use-render.js';\nimport { svgMotionConfig } from '../../svg/config-motion.js';\nimport { htmlMotionConfig } from '../../html/config-motion.js';\n\nfunction createDomMotionConfig(Component, _a, preloadedFeatures, createVisualElement) {\n    var _b = _a.forwardMotionProps, forwardMotionProps = _b === void 0 ? false : _b;\n    var baseConfig = isSVGComponent(Component)\n        ? svgMotionConfig\n        : htmlMotionConfig;\n    return __assign(__assign({}, baseConfig), { preloadedFeatures: preloadedFeatures, useRender: createUseRender(forwardMotionProps), createVisualElement: createVisualElement,\n        Component: Component });\n}\n\nexport { createDomMotionConfig };\n","import * as React from 'react';\nimport { useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { useConstant } from '../../utils/use-constant.js';\n\nvar presenceId = 0;\nfunction getPresenceId() {\n    var id = presenceId;\n    presenceId++;\n    return id;\n}\nvar PresenceChild = function (_a) {\n    var children = _a.children, initial = _a.initial, isPresent = _a.isPresent, onExitComplete = _a.onExitComplete, custom = _a.custom, presenceAffectsLayout = _a.presenceAffectsLayout;\n    var presenceChildren = useConstant(newChildrenMap);\n    var id = useConstant(getPresenceId);\n    var context = useMemo(function () { return ({\n        id: id,\n        initial: initial,\n        isPresent: isPresent,\n        custom: custom,\n        onExitComplete: function (childId) {\n            presenceChildren.set(childId, true);\n            var allComplete = true;\n            presenceChildren.forEach(function (isComplete) {\n                if (!isComplete)\n                    allComplete = false;\n            });\n            allComplete && (onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete());\n        },\n        register: function (childId) {\n            presenceChildren.set(childId, false);\n            return function () { return presenceChildren.delete(childId); };\n        },\n    }); }, \n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? undefined : [isPresent]);\n    useMemo(function () {\n        presenceChildren.forEach(function (_, key) { return presenceChildren.set(key, false); });\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(function () {\n        !isPresent && !presenceChildren.size && (onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete());\n    }, [isPresent]);\n    return (React.createElement(PresenceContext.Provider, { value: context }, children));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","import { __spreadArray, __read } from 'tslib';\nimport * as React from 'react';\nimport { useContext, useRef, cloneElement, Children, isValidElement } from 'react';\nimport { useForceUpdate } from '../../utils/use-force-update.js';\nimport { PresenceChild } from './PresenceChild.js';\nimport { SharedLayoutContext, isSharedLayout } from '../../context/SharedLayoutContext.js';\n\nfunction getChildKey(child) {\n    return child.key || \"\";\n}\nfunction updateChildLookup(children, allChildren) {\n    var seenChildren = process.env.NODE_ENV !== \"production\" ? new Set() : null;\n    children.forEach(function (child) {\n        var key = getChildKey(child);\n        if (process.env.NODE_ENV !== \"production\" && seenChildren) {\n            if (seenChildren.has(key)) {\n                console.warn(\"Children of AnimatePresence require unique keys. \\\"\" + key + \"\\\" is a duplicate.\");\n            }\n            seenChildren.add(key);\n        }\n        allChildren.set(key, child);\n    });\n}\nfunction onlyElements(children) {\n    var filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, function (child) {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * @library\n *\n * Any `Frame` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { Frame, AnimatePresence } from 'framer'\n *\n * // As items are added and removed from `items`\n * export function Items({ items }) {\n *   return (\n *     <AnimatePresence>\n *       {items.map(item => (\n *         <Frame\n *           key={item.id}\n *           initial={{ opacity: 0 }}\n *           animate={{ opacity: 1 }}\n *           exit={{ opacity: 0 }}\n *         />\n *       ))}\n *     </AnimatePresence>\n *   )\n * }\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * @motion\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nvar AnimatePresence = function (_a) {\n    var children = _a.children, custom = _a.custom, _b = _a.initial, initial = _b === void 0 ? true : _b, onExitComplete = _a.onExitComplete, exitBeforeEnter = _a.exitBeforeEnter, _c = _a.presenceAffectsLayout, presenceAffectsLayout = _c === void 0 ? true : _c;\n    // We want to force a re-render once all exiting animations have finished. We\n    // either use a local forceRender function, or one from a parent context if it exists.\n    var forceRender = useForceUpdate();\n    var layoutContext = useContext(SharedLayoutContext);\n    if (isSharedLayout(layoutContext)) {\n        forceRender = layoutContext.forceUpdate;\n    }\n    var isInitialRender = useRef(true);\n    // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n    var filteredChildren = onlyElements(children);\n    // Keep a living record of the children we're actually rendering so we\n    // can diff to figure out which are entering and exiting\n    var presentChildren = useRef(filteredChildren);\n    // A lookup table to quickly reference components by key\n    var allChildren = useRef(new Map())\n        .current;\n    // A living record of all currently exiting components.\n    var exiting = useRef(new Set()).current;\n    updateChildLookup(filteredChildren, allChildren);\n    // If this is the initial component render, just deal with logic surrounding whether\n    // we play onMount animations or not.\n    if (isInitialRender.current) {\n        isInitialRender.current = false;\n        return (React.createElement(React.Fragment, null, filteredChildren.map(function (child) { return (React.createElement(PresenceChild, { key: getChildKey(child), isPresent: true, initial: initial ? undefined : false, presenceAffectsLayout: presenceAffectsLayout }, child)); })));\n    }\n    // If this is a subsequent render, deal with entering and exiting children\n    var childrenToRender = __spreadArray([], __read(filteredChildren));\n    // Diff the keys of the currently-present and target children to update our\n    // exiting list.\n    var presentKeys = presentChildren.current.map(getChildKey);\n    var targetKeys = filteredChildren.map(getChildKey);\n    // Diff the present children with our target children and mark those that are exiting\n    var numPresent = presentKeys.length;\n    for (var i = 0; i < numPresent; i++) {\n        var key = presentKeys[i];\n        if (targetKeys.indexOf(key) === -1) {\n            exiting.add(key);\n        }\n        else {\n            // In case this key has re-entered, remove from the exiting list\n            exiting.delete(key);\n        }\n    }\n    // If we currently have exiting children, and we're deferring rendering incoming children\n    // until after all current children have exiting, empty the childrenToRender array\n    if (exitBeforeEnter && exiting.size) {\n        childrenToRender = [];\n    }\n    // Loop through all currently exiting components and clone them to overwrite `animate`\n    // with any `exit` prop they might have defined.\n    exiting.forEach(function (key) {\n        // If this component is actually entering again, early return\n        if (targetKeys.indexOf(key) !== -1)\n            return;\n        var child = allChildren.get(key);\n        if (!child)\n            return;\n        var insertionIndex = presentKeys.indexOf(key);\n        var onExit = function () {\n            allChildren.delete(key);\n            exiting.delete(key);\n            // Remove this child from the present children\n            var removeIndex = presentChildren.current.findIndex(function (presentChild) { return presentChild.key === key; });\n            presentChildren.current.splice(removeIndex, 1);\n            // Defer re-rendering until all exiting children have indeed left\n            if (!exiting.size) {\n                presentChildren.current = filteredChildren;\n                forceRender();\n                onExitComplete && onExitComplete();\n            }\n        };\n        childrenToRender.splice(insertionIndex, 0, React.createElement(PresenceChild, { key: getChildKey(child), isPresent: false, onExitComplete: onExit, custom: custom, presenceAffectsLayout: presenceAffectsLayout }, child));\n    });\n    // Add `MotionContext` even to children that don't need it to ensure we're rendering\n    // the same tree between renders\n    childrenToRender = childrenToRender.map(function (child) {\n        var key = child.key;\n        return exiting.has(key) ? (child) : (React.createElement(PresenceChild, { key: getChildKey(child), isPresent: true, presenceAffectsLayout: presenceAffectsLayout }, child));\n    });\n    presentChildren.current = childrenToRender;\n    if (process.env.NODE_ENV !== \"production\" &&\n        exitBeforeEnter &&\n        childrenToRender.length > 1) {\n        console.warn(\"You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour.\");\n    }\n    return (React.createElement(React.Fragment, null, exiting.size\n        ? childrenToRender\n        : childrenToRender.map(function (child) { return cloneElement(child); })));\n};\n\nexport { AnimatePresence };\n","import { __read } from 'tslib';\nimport { useCallback, useRef, useState } from 'react';\nimport { useUnmountEffect } from './use-unmount-effect.js';\n\nfunction useForceUpdate() {\n    var unloadingRef = useRef(false);\n    var _a = __read(useState(0), 2), forcedRenderCount = _a[0], setForcedRenderCount = _a[1];\n    useUnmountEffect(function () { return (unloadingRef.current = true); });\n    return useCallback(function () {\n        !unloadingRef.current && setForcedRenderCount(forcedRenderCount + 1);\n    }, [forcedRenderCount]);\n}\n\nexport { useForceUpdate };\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport DelayedMount from \"~/components/DelayedMount\";\nimport Fade from \"~/components/Fade\";\nimport Flex from \"~/components/Flex\";\nimport PlaceholderText from \"~/components/PlaceholderText\";\n\ntype Props = {\n  /** Whether to include a title placeholder. */\n  includeTitle?: boolean;\n  /** Delay before mounting the component. Defaults to 500ms */\n  delay?: number;\n};\n\nexport default function PlaceholderDocument({\n  includeTitle,\n  delay = 500,\n}: Props) {\n  const content = (\n    <>\n      <PlaceholderText delay={0.2} />\n      <PlaceholderText delay={0.4} />\n      <PlaceholderText delay={0.6} />\n    </>\n  );\n\n  if (includeTitle === false) {\n    return (\n      <DelayedMount delay={delay}>\n        <Fade>\n          <Flex column auto>\n            {content}\n          </Flex>\n        </Fade>\n      </DelayedMount>\n    );\n  }\n\n  return (\n    <DelayedMount delay={delay}>\n      <Wrapper>\n        <Fade>\n          <Flex column auto>\n            <PlaceholderText height={34} maxWidth={70} />\n            <PlaceholderText delay={0.2} maxWidth={40} />\n            <br />\n\n            {content}\n          </Flex>\n        </Fade>\n      </Wrapper>\n    </DelayedMount>\n  );\n}\n\nconst Wrapper = styled(Fade)`\n  display: block;\n  margin: 6vh 0;\n  padding: 12px 0;\n`;\n","import { ActionContext } from \"~/types\";\n\nexport const CollectionSection = ({ t }: ActionContext) => t(\"Collection\");\n\nexport const CollectionsSection = ({ t }: ActionContext) => t(\"Collections\");\n\nexport const ActiveCollectionSection = ({ t, stores }: ActionContext) => {\n  const activeCollection = stores.collections.active;\n  return `${t(\"Collection\")} · ${activeCollection?.name}`;\n};\n\nActiveCollectionSection.priority = 0.8;\n\nexport const DeveloperSection = ({ t }: ActionContext) => t(\"Debug\");\n\nexport const DocumentSection = ({ t }: ActionContext) => t(\"Document\");\n\nexport const DocumentsSection = ({ t }: ActionContext) => t(\"Documents\");\n\nexport const ActiveDocumentSection = ({ t, stores }: ActionContext) => {\n  const activeDocument = stores.documents.active;\n  return `${t(\"Document\")} · ${activeDocument?.titleWithDefault}`;\n};\n\nActiveDocumentSection.priority = 0.9;\n\nexport const RecentSection = ({ t }: ActionContext) => t(\"Recently viewed\");\n\nRecentSection.priority = 1;\n\nexport const RevisionSection = ({ t }: ActionContext) => t(\"Revision\");\n\nexport const SettingsSection = ({ t }: ActionContext) => t(\"Settings\");\n\nexport const NavigationSection = ({ t }: ActionContext) => t(\"Navigation\");\n\nexport const NotificationSection = ({ t }: ActionContext) => t(\"Notification\");\n\nexport const UserSection = ({ t }: ActionContext) => t(\"People\");\n\nUserSection.priority = 0.5;\n\nexport const TeamSection = ({ t }: ActionContext) => t(\"Workspace\");\n\nexport const RecentSearchesSection = ({ t }: ActionContext) =>\n  t(\"Recent searches\");\n\nRecentSearchesSection.priority = -0.1;\n\nexport const TrashSection = ({ t }: ActionContext) => t(\"Trash\");\n","import {\n  HomeIcon,\n  SearchIcon,\n  ArchiveIcon,\n  TrashIcon,\n  OpenIcon,\n  SettingsIcon,\n  KeyboardIcon,\n  EmailIcon,\n  LogoutIcon,\n  ProfileIcon,\n  BrowserIcon,\n  ShapesIcon,\n  DraftsIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { UrlHelper } from \"@shared/utils/UrlHelper\";\nimport { isMac } from \"@shared/utils/browser\";\nimport stores from \"~/stores\";\nimport SearchQuery from \"~/models/SearchQuery\";\nimport KeyboardShortcuts from \"~/scenes/KeyboardShortcuts\";\nimport { createAction } from \"~/actions\";\nimport { NavigationSection, RecentSearchesSection } from \"~/actions/sections\";\nimport env from \"~/env\";\nimport Desktop from \"~/utils/Desktop\";\nimport history from \"~/utils/history\";\nimport isCloudHosted from \"~/utils/isCloudHosted\";\nimport {\n  homePath,\n  searchPath,\n  draftsPath,\n  archivePath,\n  trashPath,\n  settingsPath,\n} from \"~/utils/routeHelpers\";\n\nexport const navigateToHome = createAction({\n  name: ({ t }) => t(\"Home\"),\n  analyticsName: \"Navigate to home\",\n  section: NavigationSection,\n  shortcut: [\"d\"],\n  icon: <HomeIcon />,\n  perform: () => history.push(homePath()),\n  visible: ({ location }) => location.pathname !== homePath(),\n});\n\nexport const navigateToRecentSearchQuery = (searchQuery: SearchQuery) =>\n  createAction({\n    section: RecentSearchesSection,\n    name: searchQuery.query,\n    analyticsName: \"Navigate to recent search query\",\n    icon: <SearchIcon />,\n    perform: () => history.push(searchPath({ query: searchQuery.query })),\n  });\n\nexport const navigateToDrafts = createAction({\n  name: ({ t }) => t(\"Drafts\"),\n  analyticsName: \"Navigate to drafts\",\n  section: NavigationSection,\n  icon: <DraftsIcon />,\n  perform: () => history.push(draftsPath()),\n  visible: ({ location }) => location.pathname !== draftsPath(),\n});\n\nexport const navigateToSearch = createAction({\n  name: ({ t }) => t(\"Search\"),\n  analyticsName: \"Navigate to search\",\n  section: NavigationSection,\n  icon: <SearchIcon />,\n  perform: () => history.push(searchPath()),\n  visible: ({ location }) => location.pathname !== searchPath(),\n});\n\nexport const navigateToArchive = createAction({\n  name: ({ t }) => t(\"Archive\"),\n  analyticsName: \"Navigate to archive\",\n  section: NavigationSection,\n  shortcut: [\"g\", \"a\"],\n  icon: <ArchiveIcon />,\n  perform: () => history.push(archivePath()),\n  visible: ({ location }) => location.pathname !== archivePath(),\n});\n\nexport const navigateToTrash = createAction({\n  name: ({ t }) => t(\"Trash\"),\n  analyticsName: \"Navigate to trash\",\n  section: NavigationSection,\n  icon: <TrashIcon />,\n  perform: () => history.push(trashPath()),\n  visible: ({ location }) => location.pathname !== trashPath(),\n});\n\nexport const navigateToSettings = createAction({\n  name: ({ t }) => t(\"Settings\"),\n  analyticsName: \"Navigate to settings\",\n  section: NavigationSection,\n  shortcut: [\"g\", \"s\"],\n  icon: <SettingsIcon />,\n  visible: () => stores.policies.abilities(stores.auth.team?.id || \"\").update,\n  perform: () => history.push(settingsPath()),\n});\n\nexport const navigateToWorkspaceSettings = createAction({\n  name: ({ t }) => t(\"Settings\"),\n  analyticsName: \"Navigate to workspace settings\",\n  section: NavigationSection,\n  icon: <SettingsIcon />,\n  visible: () => stores.policies.abilities(stores.auth.team?.id || \"\").update,\n  perform: () => history.push(settingsPath(\"details\")),\n});\n\nexport const navigateToProfileSettings = createAction({\n  name: ({ t }) => t(\"Profile\"),\n  analyticsName: \"Navigate to profile settings\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <ProfileIcon />,\n  perform: () => history.push(settingsPath()),\n});\n\nexport const navigateToTemplateSettings = createAction({\n  name: ({ t }) => t(\"Templates\"),\n  analyticsName: \"Navigate to template settings\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <ShapesIcon />,\n  perform: () => history.push(settingsPath(\"templates\")),\n});\n\nexport const navigateToNotificationSettings = createAction({\n  name: ({ t }) => t(\"Notifications\"),\n  analyticsName: \"Navigate to notification settings\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <EmailIcon />,\n  perform: () => history.push(settingsPath(\"notifications\")),\n});\n\nexport const navigateToAccountPreferences = createAction({\n  name: ({ t }) => t(\"Preferences\"),\n  analyticsName: \"Navigate to account preferences\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <SettingsIcon />,\n  perform: () => history.push(settingsPath(\"preferences\")),\n});\n\nexport const openDocumentation = createAction({\n  name: ({ t }) => t(\"Documentation\"),\n  analyticsName: \"Open documentation\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <OpenIcon />,\n  perform: () => window.open(UrlHelper.guide),\n});\n\nexport const openAPIDocumentation = createAction({\n  name: ({ t }) => t(\"API documentation\"),\n  analyticsName: \"Open API documentation\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <OpenIcon />,\n  perform: () => window.open(UrlHelper.developers),\n});\n\nexport const toggleSidebar = createAction({\n  name: ({ t }) => t(\"Toggle sidebar\"),\n  analyticsName: \"Toggle sidebar\",\n  keywords: \"hide show navigation\",\n  section: NavigationSection,\n  perform: () => stores.ui.toggleCollapsedSidebar(),\n});\n\nexport const openFeedbackUrl = createAction({\n  name: ({ t }) => t(\"Send us feedback\"),\n  analyticsName: \"Open feedback\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <EmailIcon />,\n  perform: () => window.open(UrlHelper.contact),\n});\n\nexport const openBugReportUrl = createAction({\n  name: ({ t }) => t(\"Report a bug\"),\n  analyticsName: \"Open bug report\",\n  section: NavigationSection,\n  perform: () => window.open(UrlHelper.github),\n});\n\nexport const openChangelog = createAction({\n  name: ({ t }) => t(\"Changelog\"),\n  analyticsName: \"Open changelog\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <OpenIcon />,\n  perform: () => window.open(UrlHelper.changelog),\n});\n\nexport const openKeyboardShortcuts = createAction({\n  name: ({ t }) => t(\"Keyboard shortcuts\"),\n  analyticsName: \"Open keyboard shortcuts\",\n  section: NavigationSection,\n  shortcut: [\"?\"],\n  iconInContextMenu: false,\n  icon: <KeyboardIcon />,\n  perform: ({ t }) => {\n    stores.dialogs.openGuide({\n      title: t(\"Keyboard shortcuts\"),\n      content: <KeyboardShortcuts />,\n    });\n  },\n});\n\nexport const downloadApp = createAction({\n  name: ({ t }) =>\n    t(\"Download {{ platform }} app\", {\n      platform: isMac() ? \"macOS\" : \"Windows\",\n    }),\n  analyticsName: \"Download app\",\n  section: NavigationSection,\n  iconInContextMenu: false,\n  icon: <BrowserIcon />,\n  visible: () => !Desktop.isElectron() && isMac() && isCloudHosted,\n  perform: () => {\n    window.open(\"https://desktop.getoutline.com\");\n  },\n});\n\nexport const logout = createAction({\n  name: ({ t }) => t(\"Log out\"),\n  analyticsName: \"Log out\",\n  section: NavigationSection,\n  icon: <LogoutIcon />,\n  perform: async () => {\n    await stores.auth.logout();\n    if (env.OIDC_LOGOUT_URI) {\n      setTimeout(() => {\n        window.location.replace(env.OIDC_LOGOUT_URI);\n      }, 200);\n    }\n  },\n});\n\nexport const rootNavigationActions = [\n  navigateToHome,\n  navigateToDrafts,\n  navigateToArchive,\n  navigateToTrash,\n  downloadApp,\n  openDocumentation,\n  openAPIDocumentation,\n  openFeedbackUrl,\n  openBugReportUrl,\n  openChangelog,\n  openKeyboardShortcuts,\n  toggleSidebar,\n  logout,\n];\n","import { useTranslation } from \"react-i18next\";\nimport { useLocation } from \"react-router\";\nimport useStores from \"~/hooks/useStores\";\nimport { ActionContext } from \"~/types\";\n\n/**\n * Hook to get the current action context, an object that is passed to all\n * action definitions.\n *\n * @param overrides Overides of the default action context.\n * @returns The current action context.\n */\nexport default function useActionContext(\n  overrides?: Partial<ActionContext>\n): ActionContext {\n  const stores = useStores();\n  const { t } = useTranslation();\n  const location = useLocation();\n\n  return {\n    isContextMenu: false,\n    isCommandBar: false,\n    isButton: false,\n    activeCollectionId: stores.ui.activeCollectionId ?? undefined,\n    activeDocumentId: stores.ui.activeDocumentId,\n    currentUserId: stores.auth.user?.id,\n    currentTeamId: stores.auth.team?.id,\n    ...overrides,\n    location,\n    stores,\n    t,\n  };\n}\n","import * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport Flex from \"@shared/components/Flex\";\nimport Button from \"~/components/Button\";\nimport Empty from \"~/components/Empty\";\nimport Heading from \"~/components/Heading\";\nimport Scene from \"~/components/Scene\";\nimport {\n  navigateToHome,\n  navigateToSearch,\n} from \"~/actions/definitions/navigation\";\nimport useActionContext from \"~/hooks/useActionContext\";\n\nconst Error404 = () => {\n  const { t } = useTranslation();\n  const context = useActionContext();\n\n  return (\n    <Scene title={t(\"Not found\")}>\n      <Heading>{t(\"Not found\")}</Heading>\n      <Flex gap={20} style={{ maxWidth: 500 }} column>\n        <Empty size=\"large\">\n          <Trans>\n            The page you’re looking for cannot be found. It might have been\n            deleted or the link is incorrect.\n          </Trans>\n        </Empty>\n        <Flex gap={8}>\n          <Button action={navigateToHome} context={context} hideIcon>\n            {t(\"Home\")}\n          </Button>\n          <Button action={navigateToSearch} context={context} neutral>\n            {t(\"Search\")}…\n          </Button>\n        </Flex>\n      </Flex>\n    </Scene>\n  );\n};\n\nexport default Error404;\n","import * as React from \"react\";\n\nexport const id = \"skip-nav\";\n\nexport default function SkipNavContent() {\n  return <div id={id} />;\n}\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { depths, s } from \"@shared/styles\";\nimport { id } from \"~/components/SkipNavContent\";\n\nexport default function SkipNavLink() {\n  return <Anchor href={`#${id}`}>Skip navigation</Anchor>;\n}\n\nconst Anchor = styled.a`\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  width: 1px;\n  margin: -1px;\n  padding: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: 1;\n\n  &:focus {\n    padding: 1rem;\n    position: fixed;\n    top: 12px;\n    left: 12px;\n    background: ${s(\"background\")};\n    color: ${s(\"text\")};\n    outline-color: ${s(\"accent\")};\n    z-index: ${depths.popover};\n    width: auto;\n    height: auto;\n    clip: auto;\n  }\n`;\n","export class Second {\n  /** Milliseconds in a second */\n  public static ms = 1000;\n}\n\nexport class Minute {\n  /** Milliseconds in a minute */\n  public static ms = 60 * Second.ms;\n  /** Seconds in a minute */\n  public static seconds = 60;\n}\n\nexport class Hour {\n  /** Milliseconds in an hour */\n  public static ms = 60 * Minute.ms;\n  /** Seconds in an hour */\n  public static seconds = 60 * Minute.seconds;\n  /** Minutes in an hour */\n  public static minutes = 60;\n}\n\nexport class Day {\n  /** Milliseconds in a day */\n  public static ms = 24 * Hour.ms;\n  /** Seconds in a day */\n  public static seconds = 24 * Hour.seconds;\n  /** Minutes in a day */\n  public static minutes = 24 * Hour.minutes;\n}\n","import throttle from \"lodash/throttle\";\nimport * as React from \"react\";\nimport { Minute } from \"@shared/utils/time\";\nimport useIsMounted from \"./useIsMounted\";\n\nconst activityEvents = [\n  \"click\",\n  \"mousemove\",\n  \"keydown\",\n  \"DOMMouseScroll\",\n  \"mousewheel\",\n  \"mousedown\",\n  \"touchstart\",\n  \"touchmove\",\n  \"focus\",\n];\n\n/**\n * Hook to detect user idle state.\n *\n * @param timeToIdle The time in ms until idle\n * @param events The events to listen to\n * @returns boolean if the user is idle\n */\nexport default function useIdle(\n  timeToIdle: number = 3 * Minute.ms,\n  events = activityEvents\n) {\n  const isMounted = useIsMounted();\n  const [isIdle, setIsIdle] = React.useState(false);\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>();\n\n  const onActivity = React.useCallback(() => {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n\n    timeout.current = setTimeout(() => {\n      if (isMounted()) {\n        setIsIdle(true);\n      }\n    }, timeToIdle);\n  }, [isMounted, timeToIdle]);\n\n  React.useEffect(() => {\n    const handleUserActivityEvent = throttle(() => {\n      if (isMounted()) {\n        setIsIdle(false);\n        onActivity();\n      }\n    }, 1000);\n\n    events.forEach((eventName) =>\n      window.addEventListener(eventName, handleUserActivityEvent)\n    );\n    return () => {\n      events.forEach((eventName) =>\n        window.removeEventListener(eventName, handleUserActivityEvent)\n      );\n    };\n  }, [events, isMounted, onActivity]);\n\n  return isIdle;\n}\n","import * as React from \"react\";\nimport useEventListener from \"./useEventListener\";\n\n/**\n * Hook to return page visibility state.\n *\n * @returns boolean if the page is visible\n */\nexport default function usePageVisibility(): boolean {\n  const [visible, setVisible] = React.useState(true);\n\n  useEventListener(\n    \"visibilitychange\",\n    () => setVisible(!document.hidden),\n    document\n  );\n\n  return visible;\n}\n","import * as React from \"react\";\nimport { Minute } from \"@shared/utils/time\";\nimport Logger from \"~/utils/Logger\";\nimport useIdle from \"./useIdle\";\nimport useInterval from \"./useInterval\";\nimport usePageVisibility from \"./usePageVisibility\";\n\n// The case of isReloaded=true should never be hit as the app will reload\n// before the hook is called again, however seems like the only possible\n// cause of #5384, adding to debug.\nlet isReloaded = false;\n\n/**\n * Hook to reload the app around once a day to stop old code from running.\n */\nexport default function useAutoRefresh() {\n  const [minutes, setMinutes] = React.useState(0);\n  const isVisible = usePageVisibility();\n  const isIdle = useIdle(15 * Minute.ms);\n\n  useInterval(() => {\n    setMinutes((prev) => prev + 1);\n\n    if (minutes >= 60 * 24) {\n      if (isVisible) {\n        Logger.debug(\"lifecycle\", \"Skipping reload due to app visible\");\n        return;\n      }\n      if (!isIdle) {\n        Logger.debug(\"lifecycle\", \"Skipping reload due to user activity\");\n        return;\n      }\n      if (isReloaded) {\n        Logger.warn(\"Attempted to reload twice\");\n        return;\n      }\n\n      Logger.debug(\"lifecycle\", \"Auto-reloading app…\");\n      window.location.reload();\n      isReloaded = true;\n    }\n  }, Minute.ms);\n}\n","import * as React from \"react\";\n\ntype Callback = () => void;\n\n/**\n * Hook to set up an interval that calls a callback.\n *\n * @param callback The callback to call.\n * @param delay The delay in milliseconds.\n */\nexport default function useInterval(callback: Callback, delay: number) {\n  const savedCallback = React.useRef<Callback>();\n\n  // Remember the latest callback.\n  React.useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  React.useEffect(() => {\n    function tick() {\n      savedCallback.current?.();\n    }\n\n    if (delay !== null) {\n      const id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n\n    return undefined;\n  }, [delay]);\n}\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport styled, { DefaultTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { s } from \"@shared/styles\";\nimport { isModKey } from \"@shared/utils/keyboard\";\nimport Flex from \"~/components/Flex\";\nimport { LoadingIndicatorBar } from \"~/components/LoadingIndicator\";\nimport SkipNavContent from \"~/components/SkipNavContent\";\nimport SkipNavLink from \"~/components/SkipNavLink\";\nimport env from \"~/env\";\nimport useAutoRefresh from \"~/hooks/useAutoRefresh\";\nimport useKeyDown from \"~/hooks/useKeyDown\";\nimport { MenuProvider } from \"~/hooks/useMenuContext\";\nimport useStores from \"~/hooks/useStores\";\n\ntype Props = {\n  children?: React.ReactNode;\n  title?: string;\n  sidebar?: React.ReactNode;\n  sidebarRight?: React.ReactNode;\n};\n\nconst Layout = React.forwardRef(function Layout_(\n  { title, children, sidebar, sidebarRight }: Props,\n  ref: React.RefObject<HTMLDivElement>\n) {\n  const { ui } = useStores();\n  const sidebarCollapsed = !sidebar || ui.sidebarIsClosed;\n\n  useAutoRefresh();\n\n  useKeyDown(\".\", (event) => {\n    if (isModKey(event)) {\n      ui.toggleCollapsedSidebar();\n    }\n  });\n\n  return (\n    <Container column auto ref={ref}>\n      <Helmet>\n        <title>{title ? title : env.APP_NAME}</title>\n      </Helmet>\n\n      <SkipNavLink />\n\n      {ui.progressBarVisible && <LoadingIndicatorBar />}\n\n      <Container auto>\n        <MenuProvider>{sidebar}</MenuProvider>\n\n        <SkipNavContent />\n        <Content\n          auto\n          justify=\"center\"\n          $isResizing={ui.sidebarIsResizing}\n          $sidebarCollapsed={sidebarCollapsed}\n          $hasSidebar={!!sidebar}\n          style={\n            sidebarCollapsed\n              ? undefined\n              : {\n                  marginLeft: `${ui.sidebarWidth}px`,\n                }\n          }\n        >\n          {children}\n        </Content>\n\n        {sidebarRight}\n      </Container>\n    </Container>\n  );\n});\n\nconst Container = styled(Flex)`\n  background: ${s(\"background\")};\n  position: relative;\n  width: 100%;\n  min-height: 100%;\n`;\n\ntype ContentProps = {\n  $isResizing?: boolean;\n  $sidebarCollapsed?: boolean;\n  $hasSidebar?: boolean;\n  theme: DefaultTheme;\n};\n\nconst Content = styled(Flex)<ContentProps>`\n  margin: 0;\n  transition: ${(props) =>\n    props.$isResizing ? \"none\" : `margin-left 100ms ease-out`};\n\n  @media print {\n    margin: 0 !important;\n  }\n\n  ${breakpoint(\"mobile\", \"tablet\")`\n    margin-left: 0 !important;\n  `}\n\n  ${breakpoint(\"tablet\")`\n    ${(props: ContentProps) =>\n      props.$hasSidebar &&\n      props.$sidebarCollapsed &&\n      `margin-left: ${props.theme.sidebarCollapsedWidth}px;`}\n  `};\n`;\n\nexport default observer(Layout);\n","import useKeyDown, { KeyFilter, Options } from \"~/hooks/useKeyDown\";\n\ntype Props = {\n  trigger: KeyFilter;\n  handler: (event: KeyboardEvent) => void;\n  options?: Options;\n};\n\n/**\n * This method is a wrapper around the useKeyDown hook to allow easier use in\n * class components that have not yet been converted to functions. Do not use\n * this method in functional components.\n */\nexport default function RegisterKeyDown({ trigger, handler, options }: Props) {\n  useKeyDown(trigger, handler, options);\n  return null;\n}\n","import { _ as _objectWithoutPropertiesLoose, a as _objectSpread2 } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport { createComponent } from 'reakit-system/createComponent';\nimport { createHook } from 'reakit-system/createHook';\nimport 'reakit-utils/shallowEqual';\nimport { useContext, useRef, useCallback } from 'react';\nimport { useForkRef } from 'reakit-utils/useForkRef';\nimport 'reakit-utils/isButton';\nimport 'reakit-warning';\nimport { useLiveRef } from 'reakit-utils/useLiveRef';\nimport 'reakit-utils/isSelfTarget';\nimport 'reakit-utils/useIsomorphicEffect';\nimport { hasFocusWithin } from 'reakit-utils/hasFocusWithin';\nimport 'reakit-utils/isPortalEvent';\nimport 'reakit-utils/dom';\nimport 'reakit-utils/tabbable';\nimport '../Role/Role.js';\nimport '../Tabbable/Tabbable.js';\nimport '../Clickable/Clickable.js';\nimport '../Button/Button.js';\nimport '../__keys-e6a5cfbe.js';\nimport 'reakit-utils/removeItemFromArray';\nimport { M as MenuContext } from '../MenuContext-6af6cf92.js';\nimport '../__keys-ed7b48af.js';\nimport '../__keys-26bb1730.js';\nimport '../Disclosure/Disclosure.js';\nimport '../Dialog/DialogDisclosure.js';\nimport { c as MENU_BUTTON_KEYS } from '../__keys-f74df4e0.js';\nimport { usePopoverDisclosure } from '../Popover/PopoverDisclosure.js';\nimport { f as findVisibleSubmenu } from '../findVisibleSubmenu-1553e354.js';\n\nvar noop = function noop() {};\n\nvar useMenuButton = createHook({\n  name: \"MenuButton\",\n  compose: usePopoverDisclosure,\n  keys: MENU_BUTTON_KEYS,\n  propsAreEqual: function propsAreEqual(prev, next) {\n    var prevPopoverStyles = prev.unstable_popoverStyles,\n        prevArrowStyles = prev.unstable_arrowStyles,\n        prevCurrentId = prev.currentId,\n        prevMoves = prev.unstable_moves,\n        prevProps = _objectWithoutPropertiesLoose(prev, [\"unstable_popoverStyles\", \"unstable_arrowStyles\", \"currentId\", \"unstable_moves\"]);\n\n    var nextPopoverStyles = next.unstable_popoverStyles,\n        nextArrowStyles = next.unstable_arrowStyles,\n        nextCurrentId = next.currentId,\n        nextMoves = next.unstable_moves,\n        nextProps = _objectWithoutPropertiesLoose(next, [\"unstable_popoverStyles\", \"unstable_arrowStyles\", \"currentId\", \"unstable_moves\"]);\n\n    return usePopoverDisclosure.unstable_propsAreEqual(prevProps, nextProps);\n  },\n  useProps: function useProps(options, _ref) {\n    var htmlRef = _ref.ref,\n        htmlOnClick = _ref.onClick,\n        htmlOnKeyDown = _ref.onKeyDown,\n        htmlOnFocus = _ref.onFocus,\n        htmlOnMouseEnter = _ref.onMouseEnter,\n        htmlOnMouseDown = _ref.onMouseDown,\n        htmlProps = _objectWithoutPropertiesLoose(_ref, [\"ref\", \"onClick\", \"onKeyDown\", \"onFocus\", \"onMouseEnter\", \"onMouseDown\"]);\n\n    var parent = useContext(MenuContext);\n    var ref = useRef(null);\n    var hasPressedMouse = useRef(false);\n\n    var _options$placement$sp = options.placement.split(\"-\"),\n        dir = _options$placement$sp[0];\n\n    var hasParent = !!parent;\n    var parentIsMenuBar = (parent === null || parent === void 0 ? void 0 : parent.role) === \"menubar\";\n    var disabled = options.disabled || htmlProps[\"aria-disabled\"];\n    var onClickRef = useLiveRef(htmlOnClick);\n    var onKeyDownRef = useLiveRef(htmlOnKeyDown);\n    var onFocusRef = useLiveRef(htmlOnFocus);\n    var onMouseEnterRef = useLiveRef(htmlOnMouseEnter);\n    var onMouseDownRef = useLiveRef(htmlOnMouseDown);\n    var onKeyDown = useCallback(function (event) {\n      var _onKeyDownRef$current;\n\n      if (event.key === \"Escape\") {\n        var _options$hide;\n\n        // Doesn't prevent default on Escape, otherwise we can't close\n        // dialogs when MenuButton is focused\n        (_options$hide = options.hide) === null || _options$hide === void 0 ? void 0 : _options$hide.call(options);\n      } else if (!disabled) {\n        // setTimeout prevents scroll jump\n        var first = options.first && function () {\n          return setTimeout(options.first);\n        };\n\n        var last = options.last && function () {\n          return setTimeout(options.last);\n        };\n\n        var keyMap = {\n          Enter: first,\n          \" \": first,\n          ArrowUp: (dir === \"top\" || dir === \"bottom\") && last,\n          ArrowRight: dir === \"right\" && first,\n          ArrowDown: (dir === \"bottom\" || dir === \"top\") && first,\n          ArrowLeft: dir === \"left\" && first\n        };\n        var action = keyMap[event.key];\n\n        if (action) {\n          var _options$show;\n\n          event.preventDefault();\n          event.stopPropagation();\n          (_options$show = options.show) === null || _options$show === void 0 ? void 0 : _options$show.call(options);\n          action();\n          return;\n        }\n      }\n\n      (_onKeyDownRef$current = onKeyDownRef.current) === null || _onKeyDownRef$current === void 0 ? void 0 : _onKeyDownRef$current.call(onKeyDownRef, event);\n    }, [disabled, options.hide, options.first, options.last, dir, options.show]);\n    var onMouseEnter = useCallback(function (event) {\n      var _onMouseEnterRef$curr;\n\n      (_onMouseEnterRef$curr = onMouseEnterRef.current) === null || _onMouseEnterRef$curr === void 0 ? void 0 : _onMouseEnterRef$curr.call(onMouseEnterRef, event);\n      if (event.defaultPrevented) return; // MenuButton's don't do anything on mouse over when they aren't\n      // cointained within a Menu/MenuBar\n\n      if (!parent) return;\n      var element = event.currentTarget;\n\n      if (parentIsMenuBar) {\n        // if MenuButton is an item inside a MenuBar, it'll only open\n        // if there's already another sibling expanded MenuButton\n        if (findVisibleSubmenu(parent.children)) {\n          element.focus();\n        }\n      } else {\n        // If it's in a Menu, open after a short delay\n        // TODO: Make the delay a prop?\n        setTimeout(function () {\n          if (hasFocusWithin(element)) {\n            var _options$show2;\n\n            (_options$show2 = options.show) === null || _options$show2 === void 0 ? void 0 : _options$show2.call(options);\n          }\n        }, 200);\n      }\n    }, [parent, parentIsMenuBar, options.show]);\n    var onMouseDown = useCallback(function (event) {\n      var _onMouseDownRef$curre;\n\n      // When in menu bar, the menu button can be activated either by focus\n      // or click, but we don't want both to trigger sequentially.\n      // Otherwise, onClick would toggle (hide) the menu right after it got\n      // shown on focus.\n      // This is also useful so we know if the menu button has been clicked\n      // using mouse or keyboard. On mouse click, we don't automatically\n      // focus the first menu item.\n      hasPressedMouse.current = true;\n      (_onMouseDownRef$curre = onMouseDownRef.current) === null || _onMouseDownRef$curre === void 0 ? void 0 : _onMouseDownRef$curre.call(onMouseDownRef, event);\n    }, []);\n    var onFocus = useCallback(function (event) {\n      var _onFocusRef$current;\n\n      (_onFocusRef$current = onFocusRef.current) === null || _onFocusRef$current === void 0 ? void 0 : _onFocusRef$current.call(onFocusRef, event);\n      if (event.defaultPrevented) return;\n      if (disabled) return;\n\n      if (parentIsMenuBar && !hasPressedMouse.current) {\n        var _options$show3;\n\n        (_options$show3 = options.show) === null || _options$show3 === void 0 ? void 0 : _options$show3.call(options);\n      }\n    }, [parentIsMenuBar, disabled, options.show]); // If disclosure is rendered as a menu bar item, it's toggable\n    // That is, you can click on the expanded disclosure to close its menu.\n\n    var onClick = useCallback(function (event) {\n      var _onClickRef$current;\n\n      (_onClickRef$current = onClickRef.current) === null || _onClickRef$current === void 0 ? void 0 : _onClickRef$current.call(onClickRef, event);\n      if (event.defaultPrevented) return; // If menu button is a menu item inside a menu (not menu bar), you\n      // can't close it by clicking on it again.\n\n      if (hasParent && !parentIsMenuBar) {\n        var _options$show4;\n\n        (_options$show4 = options.show) === null || _options$show4 === void 0 ? void 0 : _options$show4.call(options);\n      } else {\n        var _options$toggle;\n\n        // Otherwise, if menu button is a menu bar item or an orphan menu\n        // button, it's toggable.\n        (_options$toggle = options.toggle) === null || _options$toggle === void 0 ? void 0 : _options$toggle.call(options); // Focus the menu popover when it's opened with mouse click.\n\n        if (hasPressedMouse.current && !parentIsMenuBar && !options.visible) {\n          var _options$move;\n\n          (_options$move = options.move) === null || _options$move === void 0 ? void 0 : _options$move.call(options, null);\n        }\n      }\n\n      hasPressedMouse.current = false;\n    }, [hasParent, parentIsMenuBar, options.show, options.toggle, options.visible, options.move]);\n    return _objectSpread2({\n      ref: useForkRef(ref, htmlRef),\n      \"aria-haspopup\": \"menu\",\n      onKeyDown: onKeyDown,\n      onMouseEnter: onMouseEnter,\n      onMouseDown: onMouseDown,\n      onFocus: onFocus,\n      onClick: onClick\n    }, htmlProps);\n  },\n  useComposeOptions: function useComposeOptions(options) {\n    return _objectSpread2(_objectSpread2({}, options), {}, {\n      // Toggling is handled by MenuButton\n      toggle: noop\n    });\n  }\n});\nvar MenuButton = createComponent({\n  as: \"button\",\n  memo: true,\n  useHook: useMenuButton\n});\n\nexport { MenuButton, useMenuButton };\n","import { _ as _objectWithoutPropertiesLoose, a as _objectSpread2 } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport 'reakit-utils/shallowEqual';\nimport { useContext, useEffect } from 'react';\nimport 'reakit-warning';\nimport 'reakit-utils/useIsomorphicEffect';\nimport 'reakit-utils/dom';\nimport { useSealedState } from 'reakit-utils/useSealedState';\nimport 'reakit-utils/getDocument';\nimport '../reverse-30eaa122.js';\nimport '../getCurrentId-5aa9849e.js';\nimport '../findEnabledItemById-8ddca752.js';\nimport '../Id/IdProvider.js';\nimport 'reakit-utils/applyState';\nimport '../Id/IdState.js';\nimport '../Composite/CompositeState.js';\nimport '@popperjs/core';\nimport '../Disclosure/DisclosureState.js';\nimport '../Dialog/DialogState.js';\nimport { usePopoverState } from '../Popover/PopoverState.js';\nimport 'reakit-utils/removeItemFromArray';\nimport { M as MenuContext } from '../MenuContext-6af6cf92.js';\nimport { useMenuBarState } from './MenuBarState.js';\n\nfunction useMenuState(initialState) {\n  if (initialState === void 0) {\n    initialState = {};\n  }\n\n  var parent = useContext(MenuContext);\n\n  var _useSealedState = useSealedState(initialState),\n      _useSealedState$orien = _useSealedState.orientation,\n      orientation = _useSealedState$orien === void 0 ? \"vertical\" : _useSealedState$orien,\n      _useSealedState$gutte = _useSealedState.gutter,\n      gutter = _useSealedState$gutte === void 0 ? 0 : _useSealedState$gutte,\n      sealed = _objectWithoutPropertiesLoose(_useSealedState, [\"orientation\", \"gutter\"]);\n\n  var placement = sealed.placement || (parent && parent.orientation === \"vertical\" ? \"right-start\" : \"bottom-start\");\n  var menuBar = useMenuBarState(_objectSpread2(_objectSpread2({}, sealed), {}, {\n    orientation: orientation\n  }));\n  var popover = usePopoverState(_objectSpread2(_objectSpread2({}, sealed), {}, {\n    placement: placement,\n    gutter: gutter\n  }));\n  useEffect(function () {\n    if (!popover.visible) {\n      menuBar.reset();\n    }\n  }, [popover.visible, menuBar.reset]);\n  return _objectSpread2(_objectSpread2({}, menuBar), popover);\n}\n\nexport { useMenuState };\n","import { _ as _objectWithoutPropertiesLoose, a as _objectSpread2 } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport { useState, useCallback } from 'react';\nimport 'reakit-utils/useIsomorphicEffect';\nimport { useSealedState } from 'reakit-utils/useSealedState';\nimport 'reakit-utils/getDocument';\nimport '../reverse-30eaa122.js';\nimport '../getCurrentId-5aa9849e.js';\nimport '../findEnabledItemById-8ddca752.js';\nimport '../Id/IdProvider.js';\nimport 'reakit-utils/applyState';\nimport '../Id/IdState.js';\nimport { useCompositeState } from '../Composite/CompositeState.js';\n\nfunction useMenuBarState(initialState) {\n  if (initialState === void 0) {\n    initialState = {};\n  }\n\n  var _useSealedState = useSealedState(initialState),\n      _useSealedState$orien = _useSealedState.orientation,\n      orientation = _useSealedState$orien === void 0 ? \"horizontal\" : _useSealedState$orien,\n      _useSealedState$unsta = _useSealedState.unstable_values,\n      initialValues = _useSealedState$unsta === void 0 ? {} : _useSealedState$unsta,\n      sealed = _objectWithoutPropertiesLoose(_useSealedState, [\"orientation\", \"unstable_values\"]);\n\n  var _React$useState = useState(initialValues),\n      values = _React$useState[0],\n      setValues = _React$useState[1];\n\n  var composite = useCompositeState(_objectSpread2(_objectSpread2({}, sealed), {}, {\n    orientation: orientation\n  }));\n  return _objectSpread2(_objectSpread2({}, composite), {}, {\n    unstable_values: values,\n    unstable_setValue: useCallback(function (name, value) {\n      setValues(function (vals) {\n        var _objectSpread2$1;\n\n        return _objectSpread2(_objectSpread2({}, vals), {}, (_objectSpread2$1 = {}, _objectSpread2$1[name] = typeof value === \"function\" ? value(vals) : value, _objectSpread2$1));\n      });\n    }, [])\n  });\n}\n\nexport { useMenuBarState };\n","import { m, TargetAndTransition } from \"framer-motion\";\nimport * as React from \"react\";\nimport { mergeRefs } from \"react-merge-refs\";\nimport { useComponentSize } from \"@shared/hooks/useComponentSize\";\n\ntype Props = {\n  /** The children to render */\n  children: React.ReactNode;\n  /** Whether to hide overflow. */\n  hideOverflow?: boolean;\n  /** A way to calculate height */\n  componentSizeCalculation?: \"clientRectHeight\" | \"scrollHeight\";\n  /** Optional animation config. */\n  config?: TargetAndTransition;\n  /** Optional styles. */\n  style?: React.CSSProperties;\n};\n\n/**\n * Automatically animates the height of a container based on it's contents.\n */\nexport const ResizingHeightContainer = React.forwardRef<HTMLDivElement, Props>(\n  function ResizingHeightContainer_(props, forwardedRef) {\n    const {\n      hideOverflow,\n      children,\n      config = {\n        transition: {\n          duration: 0.1,\n          ease: \"easeInOut\",\n        },\n      },\n      style,\n    } = props;\n\n    const ref = React.useRef<HTMLDivElement>(null);\n    const { height } = useComponentSize(ref);\n\n    return (\n      <m.div\n        animate={{\n          ...config,\n          height: Math.round(height),\n        }}\n        style={{\n          ...style,\n          overflow: hideOverflow ? \"hidden\" : \"inherit\",\n          position: \"relative\",\n        }}\n      >\n        <div ref={mergeRefs([ref, forwardedRef])}>{children}</div>\n      </m.div>\n    );\n  }\n);\n","import styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\n\nconst Header = styled.h3`\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: ${s(\"sidebarText\")};\n  letter-spacing: 0.04em;\n  margin: 1em 12px 0.5em;\n`;\n\nexport default Header;\n","import * as React from \"react\";\nimport { useMousePosition } from \"~/hooks/useMousePosition\";\n\ntype Positions = {\n  /** Sub-menu x */\n  x: number;\n  /** Sub-menu y */\n  y: number;\n  /** Sub-menu height */\n  h: number;\n  /** Sub-menu width */\n  w: number;\n  /** Mouse x */\n  mouseX: number;\n  /** Mouse y */\n  mouseY: number;\n};\n\n/**\n * Component to cover the area between the mouse cursor and the sub-menu, to\n * allow moving cursor to lower parts of sub-menu without the sub-menu\n * disappearing.\n */\nexport default function MouseSafeArea(props: {\n  parentRef: React.RefObject<HTMLElement | null>;\n}) {\n  const {\n    x = 0,\n    y = 0,\n    height: h = 0,\n    width: w = 0,\n  } = props.parentRef.current?.getBoundingClientRect() || {};\n  const [mouseX, mouseY] = useMousePosition();\n  const positions = { x, y, h, w, mouseX, mouseY };\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 0,\n        // backgroundColor: \"rgba(255,0,0,0.1)\", // Uncomment to debug\n        right: getRight(positions),\n        left: getLeft(positions),\n        height: h,\n        width: getWidth(positions),\n        clipPath: getClipPath(positions),\n      }}\n    />\n  );\n}\n\nconst getLeft = ({ x, mouseX }: Positions) =>\n  mouseX > x ? undefined : -Math.max(x - mouseX, 10) + \"px\";\n\nconst getRight = ({ x, w, mouseX }: Positions) =>\n  mouseX > x ? -Math.max(mouseX - (x + w), 10) + \"px\" : undefined;\n\nconst getWidth = ({ x, w, mouseX }: Positions) =>\n  mouseX > x\n    ? Math.max(mouseX - (x + w), 10) + \"px\"\n    : Math.max(x - mouseX, 10) + \"px\";\n\nconst getClipPath = ({ x, y, h, mouseX, mouseY }: Positions) =>\n  mouseX > x\n    ? `polygon(0% 0%, 0% 100%, 100% ${(100 * (mouseY - y)) / h - 10}%, 100% ${\n        (100 * (mouseY - y)) / h + 5\n      }%)`\n    : `polygon(100% 0%, 0% ${(100 * (mouseY - y)) / h - 10}%, 0% ${\n        (100 * (mouseY - y)) / h + 5\n      }%, 100% 100%)`;\n","import throttle from \"lodash/throttle\";\nimport * as React from \"react\";\nimport useEventListener from \"./useEventListener\";\nimport useIsMounted from \"./useIsMounted\";\n\n/**\n * Mouse position as a tuple of [x, y]\n */\ntype MousePosition = [number, number];\n\n/**\n * Hook to get the current mouse position\n *\n * @returns Mouse position as a tuple of [x, y]\n */\nexport const useMousePosition = () => {\n  const isMounted = useIsMounted();\n  const [mousePosition, setMousePosition] = React.useState<MousePosition>([\n    0, 0,\n  ]);\n\n  const updateMousePosition = React.useMemo(\n    () =>\n      throttle((ev: MouseEvent) => {\n        if (isMounted()) {\n          setMousePosition([ev.clientX, ev.clientY]);\n        }\n      }, 200),\n    [isMounted]\n  );\n\n  useEventListener(\"mousemove\", updateMousePosition);\n\n  return mousePosition;\n};\n","import { ExpandedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport {\n  useMenuState,\n  MenuButton,\n  MenuItem as BaseMenuItem,\n  MenuStateReturn,\n} from \"reakit/Menu\";\nimport styled, { useTheme } from \"styled-components\";\nimport MenuIconWrapper from \"~/components/ContextMenu/MenuIconWrapper\";\nimport Flex from \"~/components/Flex\";\nimport { actionToMenuItem } from \"~/actions\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport {\n  Action,\n  ActionContext,\n  MenuSeparator,\n  MenuHeading,\n  MenuItem as TMenuItem,\n} from \"~/types\";\nimport Tooltip from \"../Tooltip\";\nimport Header from \"./Header\";\nimport MenuItem, { MenuAnchor } from \"./MenuItem\";\nimport MouseSafeArea from \"./MouseSafeArea\";\nimport Separator from \"./Separator\";\nimport ContextMenu from \".\";\n\ntype Props = Omit<MenuStateReturn, \"items\"> & {\n  actions?: (Action | MenuSeparator | MenuHeading)[];\n  context?: Partial<ActionContext>;\n  items?: TMenuItem[];\n  showIcons?: boolean;\n};\n\nconst Disclosure = styled(ExpandedIcon)`\n  transform: rotate(270deg);\n  position: absolute;\n  right: 8px;\n`;\n\ntype SubMenuProps = MenuStateReturn & {\n  templateItems: TMenuItem[];\n  parentMenuState: Omit<MenuStateReturn, \"items\">;\n  title: React.ReactNode;\n};\n\nconst SubMenu = React.forwardRef(function _Template(\n  { templateItems, title, parentMenuState, ...rest }: SubMenuProps,\n  ref: React.LegacyRef<HTMLButtonElement>\n) {\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const menu = useMenuState();\n\n  return (\n    <>\n      <MenuButton ref={ref} {...menu} {...rest}>\n        {(props) => (\n          <MenuAnchor disclosure {...props}>\n            {title} <Disclosure color={theme.textTertiary} />\n          </MenuAnchor>\n        )}\n      </MenuButton>\n      <ContextMenu\n        {...menu}\n        aria-label={t(\"Submenu\")}\n        onClick={parentMenuState.hide}\n        parentMenuState={parentMenuState}\n      >\n        <MouseSafeArea parentRef={menu.unstable_popoverRef} />\n        <Template {...menu} items={templateItems} />\n      </ContextMenu>\n    </>\n  );\n});\n\nexport function filterTemplateItems(items: TMenuItem[]): TMenuItem[] {\n  return items\n    .filter((item) => item.visible !== false)\n    .reduce((acc, item) => {\n      // trim separator if the previous item was a separator\n      if (\n        item.type === \"separator\" &&\n        acc[acc.length - 1]?.type === \"separator\"\n      ) {\n        return acc;\n      }\n      return [...acc, item];\n    }, [] as TMenuItem[])\n    .filter((item, index, arr) => {\n      if (\n        item.type === \"separator\" &&\n        (index === 0 || index === arr.length - 1)\n      ) {\n        return false;\n      }\n      return true;\n    });\n}\n\nfunction Template({ items, actions, context, showIcons, ...menu }: Props) {\n  const ctx = useActionContext({\n    isContextMenu: true,\n  });\n\n  const templateItems = actions\n    ? actions.map((item) =>\n        item.type === \"separator\" || item.type === \"heading\"\n          ? item\n          : actionToMenuItem(item, ctx)\n      )\n    : items || [];\n\n  const filteredTemplates = filterTemplateItems(templateItems);\n\n  const iconIsPresentInAnyMenuItem = filteredTemplates.find(\n    (item) =>\n      item.type !== \"separator\" && item.type !== \"heading\" && !!item.icon\n  );\n\n  return (\n    <>\n      {filteredTemplates.map((item, index) => {\n        if (\n          iconIsPresentInAnyMenuItem &&\n          item.type !== \"separator\" &&\n          item.type !== \"heading\" &&\n          showIcons !== false\n        ) {\n          item.icon = item.icon || <MenuIconWrapper aria-hidden />;\n        }\n\n        if (item.type === \"route\") {\n          return (\n            <MenuItem\n              as={Link}\n              id={`${item.title}-${index}`}\n              to={item.to}\n              key={index}\n              disabled={item.disabled}\n              selected={item.selected}\n              icon={showIcons !== false ? item.icon : undefined}\n              {...menu}\n            >\n              {item.title}\n            </MenuItem>\n          );\n        }\n\n        if (item.type === \"link\") {\n          return (\n            <MenuItem\n              id={`${item.title}-${index}`}\n              href={item.href}\n              key={index}\n              disabled={item.disabled}\n              selected={item.selected}\n              level={item.level}\n              target={item.href.startsWith(\"#\") ? undefined : \"_blank\"}\n              icon={showIcons !== false ? item.icon : undefined}\n              {...menu}\n            >\n              {item.title}\n            </MenuItem>\n          );\n        }\n\n        if (item.type === \"button\") {\n          const menuItem = (\n            <MenuItem\n              as=\"button\"\n              id={`${item.title}-${index}`}\n              onClick={item.onClick}\n              disabled={item.disabled}\n              selected={item.selected}\n              dangerous={item.dangerous}\n              key={index}\n              icon={showIcons !== false ? item.icon : undefined}\n              {...menu}\n            >\n              {item.title}\n            </MenuItem>\n          );\n\n          return item.tooltip ? (\n            <Tooltip content={item.tooltip} placement={\"bottom\"}>\n              <div>{menuItem}</div>\n            </Tooltip>\n          ) : (\n            <>{menuItem}</>\n          );\n        }\n\n        if (item.type === \"submenu\") {\n          return (\n            <BaseMenuItem\n              key={index}\n              as={SubMenu}\n              id={`${item.title}-${index}`}\n              templateItems={item.items}\n              parentMenuState={menu}\n              title={\n                <Title\n                  title={item.title}\n                  icon={showIcons !== false ? item.icon : undefined}\n                />\n              }\n              {...menu}\n            />\n          );\n        }\n\n        if (item.type === \"separator\") {\n          return <Separator key={index} />;\n        }\n\n        if (item.type === \"heading\") {\n          return <Header key={index}>{item.title}</Header>;\n        }\n\n        const _exhaustiveCheck: never = item;\n        return _exhaustiveCheck;\n      })}\n    </>\n  );\n}\n\nfunction Title({\n  title,\n  icon,\n}: {\n  title: React.ReactNode;\n  icon?: React.ReactNode;\n}) {\n  return (\n    <Flex align=\"center\">\n      {icon && <MenuIconWrapper aria-hidden>{icon}</MenuIconWrapper>}\n      {title}\n    </Flex>\n  );\n}\n\nexport default React.memo<Props>(Template);\n","import { GroupIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTheme } from \"styled-components\";\nimport Squircle from \"@shared/components/Squircle\";\nimport Group from \"~/models/Group\";\nimport { AvatarSize } from \"../Avatar/Avatar\";\n\ntype Props = {\n  /** The group to show an avatar for */\n  group: Group;\n  /** The size of the icon, 24px is default to match standard avatars */\n  size?: number;\n  /** The color of the avatar */\n  color?: string;\n  /** The background color of the avatar */\n  backgroundColor?: string;\n  className?: string;\n};\n\nexport function GroupAvatar({\n  color,\n  backgroundColor,\n  size = AvatarSize.Medium,\n  className,\n}: Props) {\n  const theme = useTheme();\n  return (\n    <Squircle color={color ?? theme.text} size={size} className={className}>\n      <GroupIcon\n        color={backgroundColor ?? theme.background}\n        size={size * 0.75}\n      />\n    </Squircle>\n  );\n}\n","import { MenuSeparator } from \"~/types\";\n\nexport default function separator(): MenuSeparator {\n  return {\n    type: \"separator\",\n  };\n}\n","import { SunIcon, MoonIcon, BrowserIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport stores from \"~/stores\";\nimport { Theme } from \"~/stores/UiStore\";\nimport { createAction } from \"~/actions\";\nimport { SettingsSection } from \"~/actions/sections\";\n\nexport const changeToDarkTheme = createAction({\n  name: ({ t }) => t(\"Dark\"),\n  analyticsName: \"Change to dark theme\",\n  icon: <MoonIcon />,\n  iconInContextMenu: false,\n  keywords: \"theme dark night\",\n  section: SettingsSection,\n  selected: () => stores.ui.theme === \"dark\",\n  perform: () => stores.ui.setTheme(Theme.Dark),\n});\n\nexport const changeToLightTheme = createAction({\n  name: ({ t }) => t(\"Light\"),\n  analyticsName: \"Change to light theme\",\n  icon: <SunIcon />,\n  iconInContextMenu: false,\n  keywords: \"theme light day\",\n  section: SettingsSection,\n  selected: () => stores.ui.theme === \"light\",\n  perform: () => stores.ui.setTheme(Theme.Light),\n});\n\nexport const changeToSystemTheme = createAction({\n  name: ({ t }) => t(\"System\"),\n  analyticsName: \"Change to system theme\",\n  icon: <BrowserIcon />,\n  iconInContextMenu: false,\n  keywords: \"theme system default\",\n  section: SettingsSection,\n  selected: () => stores.ui.theme === \"system\",\n  perform: () => stores.ui.setTheme(Theme.System),\n});\n\nexport const changeTheme = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Appearance\") : t(\"Change theme\"),\n  analyticsName: \"Change theme\",\n  placeholder: ({ t }) => t(\"Change theme to\"),\n  icon: function _Icon() {\n    return stores.ui.resolvedTheme === \"light\" ? <SunIcon /> : <MoonIcon />;\n  },\n  keywords: \"appearance display\",\n  section: SettingsSection,\n  children: [changeToLightTheme, changeToDarkTheme, changeToSystemTheme],\n});\n\nexport const rootSettingsActions = [changeTheme];\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { MenuButton, useMenuState } from \"reakit/Menu\";\nimport ContextMenu from \"~/components/ContextMenu\";\nimport Template from \"~/components/ContextMenu/Template\";\nimport {\n  navigateToProfileSettings,\n  navigateToAccountPreferences,\n  openKeyboardShortcuts,\n  openChangelog,\n  openDocumentation,\n  openAPIDocumentation,\n  openBugReportUrl,\n  openFeedbackUrl,\n  logout,\n} from \"~/actions/definitions/navigation\";\nimport { changeTheme } from \"~/actions/definitions/settings\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport useStores from \"~/hooks/useStores\";\nimport separator from \"~/menus/separator\";\n\ntype Props = {\n  children?: React.ReactNode;\n};\n\nconst AccountMenu: React.FC = ({ children }: Props) => {\n  const menu = useMenuState({\n    placement: \"bottom-end\",\n    modal: true,\n  });\n  const { ui } = useStores();\n  const { theme } = ui;\n  const previousTheme = usePrevious(theme);\n  const { t } = useTranslation();\n\n  React.useEffect(() => {\n    if (theme !== previousTheme) {\n      menu.hide();\n    }\n  }, [menu, theme, previousTheme]);\n\n  const actions = React.useMemo(\n    () => [\n      openKeyboardShortcuts,\n      openDocumentation,\n      openAPIDocumentation,\n      separator(),\n      openChangelog,\n      openFeedbackUrl,\n      openBugReportUrl,\n      changeTheme,\n      navigateToProfileSettings,\n      navigateToAccountPreferences,\n      separator(),\n      logout,\n    ],\n    []\n  );\n\n  return (\n    <>\n      <MenuButton {...menu}>{children}</MenuButton>\n      <ContextMenu {...menu} aria-label={t(\"Account\")}>\n        <Template {...menu} items={undefined} actions={actions} />\n      </ContextMenu>\n    </>\n  );\n};\n\nexport default observer(AccountMenu);\n","import styled from \"styled-components\";\n\nconst Relative = styled.div`\n  position: relative;\n`;\n\nexport default Relative;\n","import { observer } from \"mobx-react\";\nimport { SubscribeIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport useStores from \"~/hooks/useStores\";\nimport Relative from \"../Sidebar/components/Relative\";\n\nconst NotificationIcon = () => {\n  const { notifications } = useStores();\n  const count = notifications.approximateUnreadCount;\n\n  return (\n    <Relative style={{ height: 24 }}>\n      <SubscribeIcon />\n      {count > 0 && <Badge />}\n    </Relative>\n  );\n};\n\nconst Badge = styled.div`\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: ${s(\"accent\")};\n  top: 0;\n  right: 0;\n`;\n\nexport default observer(NotificationIcon);\n","import { ArchiveIcon, MarkAsReadIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { createAction } from \"..\";\nimport { NotificationSection } from \"../sections\";\n\nexport const markNotificationsAsRead = createAction({\n  name: ({ t }) => t(\"Mark notifications as read\"),\n  analyticsName: \"Mark notifications as read\",\n  section: NotificationSection,\n  icon: <MarkAsReadIcon />,\n  shortcut: [\"Shift+Escape\"],\n  perform: ({ stores }) => stores.notifications.markAllAsRead(),\n  visible: ({ stores }) => stores.notifications.approximateUnreadCount > 0,\n});\n\nexport const markNotificationsAsArchived = createAction({\n  name: ({ t }) => t(\"Archive all notifications\"),\n  analyticsName: \"Mark notifications as archived\",\n  section: NotificationSection,\n  icon: <ArchiveIcon />,\n  iconInContextMenu: false,\n  perform: ({ stores }) => stores.notifications.markAllAsArchived(),\n  visible: ({ stores }) => stores.notifications.orderedData.length > 0,\n});\n\nexport const rootNotificationActions = [\n  markNotificationsAsRead,\n  markNotificationsAsArchived,\n];\n","import { t } from \"i18next\";\nimport { MoreIcon } from \"outline-icons\";\nimport React from \"react\";\nimport { MenuButton, useMenuState } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport { s, hover } from \"@shared/styles\";\nimport ContextMenu from \"~/components/ContextMenu\";\nimport Template from \"~/components/ContextMenu/Template\";\nimport NudeButton from \"~/components/NudeButton\";\nimport { actionToMenuItem, performAction } from \"~/actions\";\nimport { navigateToNotificationSettings } from \"~/actions/definitions/navigation\";\nimport { markNotificationsAsArchived } from \"~/actions/definitions/notifications\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport useOnClickOutside from \"~/hooks/useOnClickOutside\";\nimport { MenuItem } from \"~/types\";\n\nconst NotificationMenu: React.FC = () => {\n  const menuRef = React.useRef<HTMLDivElement>(null);\n  const menu = useMenuState();\n  const context = useActionContext();\n  const items: MenuItem[] = React.useMemo(\n    () => [\n      actionToMenuItem(markNotificationsAsArchived, context),\n      {\n        type: \"button\",\n        title: t(\"Notification settings\"),\n        onClick: () => performAction(navigateToNotificationSettings, context),\n      },\n    ],\n    [context]\n  );\n\n  useOnClickOutside(\n    menuRef,\n    (event) => {\n      if (menu.visible) {\n        event.stopPropagation();\n        event.preventDefault();\n        menu.hide();\n      }\n    },\n    { capture: true }\n  );\n\n  return (\n    <>\n      <MenuButton {...menu}>\n        {(props) => (\n          <Button {...props}>\n            <MoreIcon />\n          </Button>\n        )}\n      </MenuButton>\n      <ContextMenu {...menu} menuRef={menuRef} aria-label={t(\"Notification\")}>\n        <Template {...menu} items={items} />\n      </ContextMenu>\n    </>\n  );\n};\n\nconst Button = styled(NudeButton)`\n  color: ${s(\"textSecondary\")};\n\n  &:${hover},\n  &:active {\n    color: ${s(\"text\")};\n    background: ${s(\"sidebarControlHoverBackground\")};\n  }\n`;\n\nexport default NotificationMenu;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nmodule.exports = difference;\n","/* eslint-disable no-irregular-whitespace */\nimport { lighten, transparentize } from \"polished\";\nimport styled, { DefaultTheme, css, keyframes } from \"styled-components\";\nimport { hover } from \"../../styles\";\nimport { EditorStyleHelper } from \"../styles/EditorStyleHelper\";\nimport { videoStyle } from \"./Video\";\n\nexport type Props = {\n  rtl: boolean;\n  readOnly?: boolean;\n  readOnlyWriteCheckboxes?: boolean;\n  staticHTML?: boolean;\n  editorStyle?: React.CSSProperties;\n  grow?: boolean;\n  theme: DefaultTheme;\n  userId?: string;\n};\n\nexport const fadeIn = keyframes`\n  from { opacity: 0; }\n  to { opacity: 1; }\n`;\n\nexport const pulse = keyframes`\n  0% { box-shadow: 0 0 0 1px rgba(255, 213, 0, 0.75) }\n  50% { box-shadow: 0 0 0 4px rgba(255, 213, 0, 0.75) }\n  100% { box-shadow: 0 0 0 1px rgba(255, 213, 0, 0.75) }\n`;\n\nconst codeMarkCursor = () => css`\n  /* Based on https://github.com/curvenote/editor/blob/main/packages/prosemirror-codemark/src/codemark.css */\n  .no-cursor {\n    caret-color: transparent;\n  }\n\n  div:focus .fake-cursor,\n  span:focus .fake-cursor {\n    margin-right: -1px;\n    border-left-width: 1px;\n    border-left-style: solid;\n    animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n    position: relative;\n    z-index: 1;\n  }\n`;\n\nconst mathStyle = (props: Props) => css`\n  /* Based on https://github.com/benrbray/prosemirror-math/blob/master/style/math.css */\n\n  .math-node {\n    min-width: 1em;\n    min-height: 1em;\n    font-size: 0.95em;\n    font-family: ${props.theme.fontFamilyMono};\n    cursor: auto;\n    white-space: pre-wrap;\n    overflow-x: auto;\n    overflow-y: none;\n  }\n\n  .math-node.empty-math .math-render::before {\n    content: \"Empty math\";\n    color: ${props.theme.placeholder};\n    font-size: 14px;\n  }\n\n  .math-node .math-render.parse-error::before {\n    content: \"(math error)\";\n    color: ${props.theme.brand.red};\n    cursor: help;\n  }\n\n  .math-node.ProseMirror-selectednode {\n    outline: none;\n  }\n\n  .math-node .math-src {\n    display: none;\n    color: ${props.theme.codeStatement};\n    tab-size: 4;\n  }\n\n  .math-node.ProseMirror-selectednode .math-src {\n    display: inline;\n  }\n\n  .math-node.ProseMirror-selectednode .math-render {\n    display: none;\n  }\n\n  math-inline {\n    display: inline;\n    white-space: nowrap;\n  }\n\n  math-inline .math-render {\n    display: inline-block;\n    font-size: 0.85em;\n  }\n\n  math-inline .math-src .ProseMirror {\n    display: inline;\n    margin: 0px 3px;\n  }\n\n  math-block {\n    display: block;\n  }\n\n  math-block .math-render {\n    display: block;\n  }\n\n  math-block.ProseMirror-selectednode,\n  math-block.empty-math {\n    border-radius: 4px;\n    border: 1px solid ${props.theme.codeBorder};\n    background: ${props.theme.codeBackground};\n    padding: 0.75em 1em;\n    font-family: ${props.theme.fontFamilyMono};\n    font-size: 90%;\n  }\n\n  math-block.empty-math {\n    text-align: center;\n  }\n\n  math-block .math-src .ProseMirror {\n    width: 100%;\n    display: block;\n  }\n\n  math-block .katex-display {\n    margin: 0;\n  }\n\n  .katex-html *::selection {\n    background-color: none !important;\n  }\n\n  .math-node.math-select .math-render {\n    background-color: #c0c0c0ff;\n  }\n\n  math-inline.math-select .math-render {\n    padding-top: 2px;\n  }\n`;\n\nconst codeBlockStyle = (props: Props) => css`\n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: ${props.theme.codeComment};\n  }\n\n  .token.punctuation {\n    color: ${props.theme.codePunctuation};\n  }\n\n  .token.namespace {\n    opacity: 0.7;\n  }\n\n  .token.operator,\n  .token.boolean,\n  .token.number {\n    color: ${props.theme.codeNumber};\n  }\n\n  .token.property {\n    color: ${props.theme.codeProperty};\n  }\n\n  .token.tag {\n    color: ${props.theme.codeTag};\n  }\n\n  .token.string {\n    color: ${props.theme.codeString};\n  }\n\n  .token.selector {\n    color: ${props.theme.codeSelector};\n  }\n\n  .token.attr-name {\n    color: ${props.theme.codeAttr};\n  }\n\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: ${props.theme.codeEntity};\n  }\n\n  .token.attr-value,\n  .token.keyword,\n  .token.control,\n  .token.directive,\n  .token.unit {\n    color: ${props.theme.codeKeyword};\n  }\n\n  .token.function,\n  .token.class-name-definition {\n    color: ${props.theme.codeFunction};\n  }\n\n  .token.class-name {\n    color: ${props.theme.codeClassName};\n  }\n\n  .token.statement,\n  .token.regex,\n  .token.atrule {\n    color: ${props.theme.codeStatement};\n  }\n\n  .token.placeholder,\n  .token.variable {\n    color: ${props.theme.codePlaceholder};\n  }\n\n  .token.deleted {\n    text-decoration: line-through;\n  }\n\n  .token.inserted {\n    border-bottom: 1px dotted ${props.theme.codeInserted};\n    text-decoration: none;\n  }\n\n  .token.italic {\n    font-style: italic;\n  }\n\n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n\n  .token.important {\n    color: ${props.theme.codeImportant};\n  }\n\n  .token.entity {\n    cursor: help;\n  }\n`;\n\nconst findAndReplaceStyle = () => css`\n  .find-result:not(:has(.mention)),\n  .find-result .mention {\n    background: rgba(255, 213, 0, 0.25);\n  }\n\n  .find-result.current-result:not(:has(.mention)),\n  .find-result.current-result .mention {\n      background: rgba(255, 213, 0, 0.75);\n      animation: ${pulse} 150ms 1;\n    }\n  }\n`;\n\nconst emailStyle = (props: Props) => css`\n  .attachment {\n    display: block;\n    color: ${props.theme.text} !important;\n    box-shadow: 0 0 0 1px ${props.theme.divider};\n    white-space: nowrap;\n    border-radius: 8px;\n    padding: 6px 8px;\n  }\n\n  .image > img {\n    width: auto;\n    height: auto;\n  }\n`;\n\nconst style = (props: Props) => css`\nflex-grow: ${props.grow ? 1 : 0};\njustify-content: start;\ncolor: ${props.theme.text};\nfont-family: ${props.theme.fontFamily};\nfont-weight: ${props.theme.fontWeightRegular};\nfont-size: 1em;\nline-height: -0.011;\nwidth: 100%;\n\n.mention {\n  background: ${props.theme.mentionBackground};\n  border-radius: 8px;\n  padding-top: 1px;\n  padding-bottom: 1px;\n  padding-left: 4px;\n  padding-right: 6px;\n  font-weight: 500;\n  font-size: 0.9em;\n  cursor: default;\n  text-decoration: none !important;\n\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  vertical-align: bottom;\n\n  &:${hover} {\n    cursor: default;\n    background: ${props.theme.mentionHoverBackground};\n  }\n\n  &.mention-user::before {\n    content: \"@\";\n  }\n\n  &.mention-document::before {\n    content: \"+\";\n  }\n}\n\n> div {\n  background: transparent;\n}\n\n& * {\n  box-sizing: content-box;\n}\n\n.ProseMirror {\n  position: relative;\n  outline: none;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  padding: ${props.editorStyle?.padding ?? \"initial\"};\n  margin: ${props.editorStyle?.margin ?? \"initial\"};\n\n  & > .ProseMirror-yjs-cursor {\n    display: none;\n  }\n\n  & > * {\n    margin-top: .5em;\n    margin-bottom: .5em;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  & > :first-child,\n  & > button:first-child + * {\n    margin-top: 0;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin-top: 1em;\n    margin-bottom: 0.25em;\n    font-weight: 600;\n    cursor: text;\n\n    & + p,\n    // accounts for block insert trigger and other widgets between heading and paragraph\n    & + .ProseMirror-widget + p {\n      margin-top: 0.25em;\n    }\n\n    &:not(.placeholder) {\n      &::before {\n        display: none;\n        font-family: ${props.theme.fontFamilyMono};\n        color: ${props.theme.textSecondary};\n        font-size: 13px;\n        font-weight: 500;\n        line-height: 0;\n        margin-left: -24px;\n        transition: opacity 150ms ease-in-out;\n        opacity: 0;\n        width: 24px;\n      }\n\n      &:dir(rtl)::before {\n        margin-left: 0;\n        margin-right: -24px;\n      }\n    }\n\n    &:hover,\n    &:focus-within {\n      .heading-actions {\n        opacity: 1;\n      }\n    }\n  }\n\n  // all of heading sizes are stepped down one from global styles, except h1\n  // which is between h1 and h2\n  h1 { font-size: 28px; }\n  h2 { font-size: 22px; }\n  h3 { font-size: 18px; }\n  h4 { font-size: 16px; }\n  h5 { font-size: 15px; }\n  h6 { font-size: 15px; }\n\n  .ProseMirror-yjs-selection {\n    transition: background-color 500ms ease-in-out;\n  }\n\n  .ProseMirror-yjs-cursor {\n    position: relative;\n    margin-left: -1px;\n    margin-right: -1px;\n    border-left: 1px solid black;\n    border-right: 1px solid black;\n    height: 1em;\n    word-break: normal;\n\n    &::after {\n      content: \"\";\n      display: block;\n      position: absolute;\n      left: -8px;\n      right: -8px;\n      top: 0;\n      bottom: 0;\n    }\n    > div {\n      opacity: 0;\n      transition: opacity 100ms ease-in-out;\n      position: absolute;\n      top: -1.8em;\n      font-size: 13px;\n      background-color: rgb(250, 129, 0);\n      font-style: normal;\n      line-height: normal;\n      user-select: none;\n      white-space: nowrap;\n      color: white;\n      padding: 2px 6px;\n      font-weight: 500;\n      border-radius: 4px;\n      pointer-events: none;\n      left: -1px;\n    }\n\n    &:hover {\n      > div {\n        opacity: 1;\n      }\n    }\n  }\n}\n\n&.show-cursor-names .ProseMirror-yjs-cursor > div {\n  opacity: 1;\n}\n\npre {\n  white-space: pre-wrap;\n}\n\nli {\n  position: relative;\n}\n\niframe.embed {\n  width: 100%;\n  height: 400px;\n  border: 1px solid ${props.theme.embedBorder};\n  border-radius: 6px;\n}\n\n.image,\n.video {\n  line-height: 0;\n  text-align: center;\n  max-width: 100%;\n  clear: both;\n  position: relative;\n  z-index: 1;\n\n  img,\n  video {\n    pointer-events: ${props.readOnly ? \"initial\" : \"none\"};\n    display: inline-block;\n    max-width: 100%;\n  }\n\n  video {\n    pointer-events: initial;\n    ${videoStyle}\n  }\n\n  .ProseMirror-selectednode img {\n    pointer-events: initial;\n  }\n}\n\n.image.placeholder,\n.video.placeholder {\n  position: relative;\n  background: ${props.theme.background};\n  margin-bottom: calc(28px + 1.2em);\n\n  img,\n  video {\n    opacity: 0.5;\n  }\n\n  video {\n    border-radius: 8px;\n  }\n}\n\n.file.placeholder {\n  display: flex;\n  align-items: center;\n  background: ${props.theme.background};\n  box-shadow: 0 0 0 1px ${props.theme.divider};\n  white-space: nowrap;\n  border-radius: 8px;\n  padding: 6px 8px;\n  max-width: 840px;\n  cursor: default;\n\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n\n  .title,\n  .subtitle {\n    margin-left: 8px;\n  }\n\n  .title {\n    font-weight: 600;\n    font-size: 14px;\n    color:  ${props.theme.text};\n  }\n\n  .subtitle {\n    font-size: 13px;\n    color: ${props.theme.textTertiary};\n    line-height: 0;\n  }\n\n  span {\n    font-family: ${props.theme.fontFamilyMono};\n  }\n}\n\n.attachment-replacement-uploading {\n  .widget {\n    opacity: 0.5;\n  }\n}\n\n.image-replacement-uploading {\n  img {\n    opacity: 0.5;\n  }\n}\n\n.image-right-50 {\n  float: right;\n  margin-left: 2em;\n  margin-bottom: 1em;\n  clear: initial;\n}\n\n.image-left-50 {\n  float: left;\n  margin-right: 2em;\n  margin-bottom: 1em;\n  clear: initial;\n}\n\n.image-full-width {\n  width: initial;\n  max-width: 100vw;\n  clear: both;\n  position: initial;\n  transform: translateX(calc(50% + var(--container-width) * -0.5));\n\n  img {\n    max-width: 100vw;\n    max-height: min(450px, 50vh);\n    object-fit: cover;\n    object-position: center;\n  }\n}\n\n.${EditorStyleHelper.tableFullWidth} {\n  transform: translateX(calc(50% + ${\n    EditorStyleHelper.padding\n  }px + var(--container-width) * -0.5));\n\n  .${EditorStyleHelper.tableScrollable},\n  table {\n    width: calc(var(--container-width) - ${EditorStyleHelper.padding * 2}px);\n  }\n\n  &.${EditorStyleHelper.tableShadowRight}::after {\n    left: calc(var(--container-width) - ${EditorStyleHelper.padding * 3}px);\n  }\n}\n\n.column-resize-handle {\n  ${props.readOnly ? \"display: none;\" : \"\"}\n  position: absolute;\n  right: -1px;\n  top: 0;\n  bottom: -1px;\n  width: 2px;\n  z-index: 20;\n  background-color: ${props.theme.text};\n  pointer-events: none;\n}\n\n.resize-cursor {\n  ${props.readOnly ? \"pointer-events: none;\" : \"\"}\n  cursor: ew-resize;\n  cursor: col-resize;\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n.ProseMirror-hideselection {\n  caret-color: transparent;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid\n    ${props.readOnly ? \"transparent\" : props.theme.selected};\n\n  @media print {\n    outline: none;\n  }\n}\n\n/* Make sure li selections wrap around markers */\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode {\n  &::after {\n    content: \"\";\n    position: absolute;\n    left: -32px;\n    right: -2px;\n    top: -2px;\n    bottom: -2px;\n    border: 2px solid ${props.theme.selected};\n    pointer-events: none;\n  }\n\n  &:dir(rtl)::after {\n    left: -2px;\n    right: -32px;\n  }\n}\n\nimg.ProseMirror-separator {\n  display: inline;\n  border: none !important;\n  margin: 0 !important;\n}\n\n// Removes forced paragraph spaces below images, this is needed to images\n// being inline nodes that are displayed like blocks\n.component-image + img.ProseMirror-separator,\n.component-image + img.ProseMirror-separator + br.ProseMirror-trailingBreak {\n  display: none;\n}\n\n.${EditorStyleHelper.imageCaption} {\n  border: 0;\n  display: block;\n  font-style: italic;\n  font-weight: normal;\n  font-size: 13px;\n  color: ${props.theme.textSecondary};\n  padding: 8px 0 4px;\n  line-height: 16px;\n  text-align: center;\n  min-height: 1em;\n  outline: none;\n  background: none;\n  resize: none;\n  user-select: text;\n  margin: 0 auto !important;\n}\n\n.ProseMirror[contenteditable=\"false\"] {\n  .${EditorStyleHelper.imageCaption} {\n    pointer-events: none;\n  }\n  .${EditorStyleHelper.imageCaption}:empty {\n    visibility: hidden;\n  }\n}\n\n.heading-content {\n  &::before {\n    content: \"​\";\n    display: inline;\n  }\n}\n\n.heading-name {\n  color: ${props.theme.text};\n  pointer-events: none;\n  display: block;\n  position: relative;\n  top: -60px;\n  visibility: hidden;\n\n  &:hover {\n    text-decoration: none;\n  }\n}\n\n.heading-name:first-child,\n// Edge case where multiplayer cursor is between start of cell and heading\n.heading-name:first-child + .ProseMirror-yjs-cursor,\n// Edge case where table grips are between start of cell and heading\n.heading-name:first-child + [role=button] + [role=button] {\n  & + h1,\n  & + h2,\n  & + h3,\n  & + h4 {\n    margin-top: 0;\n  }\n}\n\na:first-child {\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin-top: 0;\n  }\n}\n\nh1:not(.placeholder)::before {\n  content: \"H1\";\n}\nh2:not(.placeholder)::before {\n  content: \"H2\";\n}\nh3:not(.placeholder)::before {\n  content: \"H3\";\n}\nh4:not(.placeholder)::before {\n  content: \"H4\";\n}\nh5:not(.placeholder)::before {\n  content: \"H5\";\n}\nh6:not(.placeholder)::before {\n  content: \"H6\";\n}\n\n.ProseMirror[contenteditable=\"true\"]:focus-within,\n.ProseMirror-focused {\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    &:not(.placeholder):before {\n      opacity: 1;\n    }\n  }\n}\n\n.with-emoji {\n  margin-${props.rtl ? \"right\" : \"left\"}: -1em;\n}\n\n.heading-anchor,\n.heading-fold {\n  display: inline-block;\n  color: ${props.theme.text};\n  opacity: .75;\n  cursor: var(--pointer);\n  background: none;\n  outline: none;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  text-align: start;\n  font-weight: 500;\n  font-family: ${props.theme.fontFamilyMono};\n  font-size: 14px;\n  line-height: 0;\n  width: 12px;\n  height: 24px;\n\n  &:focus,\n  &:hover {\n    opacity: 1;\n  }\n}\n\n.heading-anchor {\n  box-sizing: border-box;\n}\n\n.heading-actions {\n  opacity: 0;\n  user-select: none;\n  background: ${props.theme.background};\n  margin-left: -26px;\n  flex-direction: row;\n  display: none;\n  position: relative;\n  top: -2px;\n  width: 26px;\n  height: 24px;\n\n  &:dir(rtl) {\n    margin-left: 0;\n    margin-right: -26px;\n  }\n\n  &.collapsed {\n    opacity: 1;\n  }\n\n  &.collapsed .heading-anchor {\n    opacity: 0;\n  }\n\n  &.collapsed .heading-fold {\n    opacity: 1;\n  }\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  &:hover {\n    .heading-anchor {\n      opacity: 0.75 !important;\n    }\n    .heading-anchor:hover {\n      opacity: 1 !important;\n    }\n  }\n}\n\n.ProseMirror > {\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    .heading-actions {\n      display: inline-flex;\n    }\n    &:not(.placeholder)::before {\n      display: ${props.readOnly ? \"none\" : \"inline-block\"};\n    }\n  }\n}\n\n.heading-fold {\n  display: inline-block;\n  transform-origin: center;\n  padding: 0;\n\n  &.collapsed {\n    svg {\n      transform: rotate(-90deg);\n      pointer-events: none;\n    }\n    transition-delay: 0.1s;\n    opacity: 1;\n  }\n\n  &:dir(rtl).collapsed svg {\n    transform: rotate(90deg);\n  }\n}\n\n.placeholder::before {\n  display: block;\n  opacity: 0;\n  transition: opacity 150ms ease-in-out;\n  content: ${props.readOnly ? \"\" : \"attr(data-empty-text)\"};\n  pointer-events: none;\n  height: 0;\n  color: ${props.theme.placeholder};\n}\n\n/** Show the placeholder if focused or the first visible item nth(2) accounts for block insert trigger */\n.ProseMirror-focused .placeholder::before,\n.placeholder:nth-child(1)::before,\n.placeholder:nth-child(2)::before {\n  opacity: 1;\n}\n\n.${EditorStyleHelper.comment} {\n  &:not([data-resolved]):not([data-draft]), &[data-draft][data-user-id=\"${\n    props.userId ?? \"\"\n  }\"]  {\n    border-bottom: 2px solid ${props.theme.commentMarkBackground};\n    transition: background 100ms ease-in-out;\n    border-radius: 2px;\n\n    &:hover {\n      ${props.readOnly ? \"cursor: var(--pointer);\" : \"\"}\n      background: ${props.theme.commentMarkBackground};\n    }\n  }\n}\n\n.notice-block {\n  display: flex;\n  align-items: center;\n  background: ${transparentize(0.9, props.theme.noticeInfoBackground)};\n  border-left: 4px solid ${props.theme.noticeInfoBackground};\n  color: ${props.theme.noticeInfoText};\n  border-radius: 4px;\n  padding: 8px 10px 8px 8px;\n  margin: 8px 0;\n\n  a {\n    color: ${props.theme.noticeInfoText};\n    text-decoration: underline;\n  }\n\n  p:first-child {\n    margin-top: 0;\n  }\n\n  p:last-child {\n    margin-bottom: 0;\n  }\n}\n\n.notice-block .content {\n  flex-grow: 1;\n  min-width: 0;\n}\n\n.notice-block {\n  .icon {\n    width: 24px;\n    height: 24px;\n    align-self: flex-start;\n    margin-right: 4px;\n    color: ${props.theme.noticeInfoBackground};\n  }\n\n  &:dir(rtl) .icon {\n    margin-right: 0;\n    margin-left: 4px;\n  }\n}\n\n.notice-block.tip {\n  background: ${transparentize(0.9, props.theme.noticeTipBackground)};\n  border-left: 4px solid ${props.theme.noticeTipBackground};\n  color: ${props.theme.noticeTipText};\n\n  .icon {\n    color: ${props.theme.noticeTipBackground};\n  }\n\n  a {\n    color: ${props.theme.noticeTipText};\n  }\n}\n\n.notice-block.warning {\n  background: ${transparentize(0.9, props.theme.noticeWarningBackground)};\n  border-left: 4px solid ${props.theme.noticeWarningBackground};\n  color: ${props.theme.noticeWarningText};\n\n  .icon {\n    color: ${props.theme.noticeWarningBackground};\n  }\n\n  a {\n    color: ${props.theme.noticeWarningText};\n  }\n}\n\n.notice-block.success {\n  background: ${transparentize(0.9, props.theme.noticeSuccessBackground)};\n  border-left: 4px solid ${props.theme.noticeSuccessBackground};\n  color: ${props.theme.noticeSuccessText};\n\n  .icon {\n    color: ${props.theme.noticeSuccessBackground};\n  }\n\n  a {\n    color: ${props.theme.noticeSuccessText};\n  }\n}\n\nblockquote {\n  margin: 0;\n  padding: 8px 10px 8px 1.5em;\n  overflow: hidden;\n  position: relative;\n\n  &::before {\n    content: \"\";\n    display: inline-block;\n    width: 2px;\n    border-radius: 1px;\n    position: absolute;\n    margin-left: -1.5em;\n    top: 0;\n    bottom: 0;\n    background: ${props.theme.quote};\n  }\n\n  &:dir(rtl)::before {\n    margin-left: 0;\n    margin-right: -1.5em;\n  }\n}\n\nb,\nstrong {\n  font-weight: 600;\n}\n\n.template-placeholder {\n  color: ${props.theme.placeholder};\n  border-bottom: 1px dotted ${props.theme.placeholder};\n  border-radius: 2px;\n  cursor: text;\n\n  &:hover {\n    border-bottom: 1px dotted\n      ${props.readOnly ? props.theme.placeholder : props.theme.textSecondary};\n  }\n}\n\np {\n  margin: 0;\n  min-height: 1.6em;\n}\n\n.heading-content a,\np a {\n  color: ${props.theme.text};\n  text-decoration: underline;\n  text-decoration-color: ${lighten(0.5, props.theme.text)};\n  text-decoration-thickness: 1px;\n  text-underline-offset: .15em;\n  font-weight: 500;\n\n  &:hover {\n    text-decoration: underline;\n    text-decoration-color: ${props.theme.text};\n    text-decoration-thickness: 1px;\n  }\n}\n\na {\n  color: ${props.theme.link};\n  cursor: pointer;\n}\n\n.ProseMirror-focused {\n  a {\n    cursor: text;\n  }\n}\n\na:hover {\n  text-decoration: ${props.readOnly ? \"underline\" : \"none\"};\n}\n\nul,\nol {\n  margin: 0 0.1em 0 ${props.staticHTML ? \"0\" : \"-26px\"};\n  padding: 0 0 0 48px;\n\n  &:has(p:dir(rtl)) {\n    direction: rtl;\n  }\n\n  &:has(p:dir(rtl)),\n  &:dir(rtl) {\n    margin: 0 ${props.staticHTML ? \"0\" : \"-26px\"} 0 0.1em;\n    padding: 0 48px 0 0;\n  }\n}\n\nol ol {\n  list-style: lower-alpha;\n}\n\nol ol ol {\n  list-style: lower-roman;\n}\n\nul li,\nol li {\n  position: relative;\n  white-space: initial;\n  text-align: start;\n\n  p {\n    white-space: pre-wrap;\n  }\n\n  > div {\n    width: 100%;\n  }\n}\n\nul.checkbox_list {\n  padding: 0;\n  margin-left: -24px;\n  margin-right: 0;\n\n  & > li {\n    display: flex;\n    list-style: none;\n    padding-left: 24px;\n    padding-right: 0;\n  }\n\n  &:has(p:dir(rtl)) {\n    margin-left: 0;\n    margin-right: -24px;\n\n    & > li {\n      padding-left: 0;\n      padding-right: 24px;\n    }\n  }\n}\n\nul.checkbox_list > li.checked > div > p {\n  color: ${props.theme.textTertiary};\n}\n\nul li,\nol li {\n  &::before {\n    background: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iOCIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iOCIgeT0iMTEiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+CjxyZWN0IHg9IjgiIHk9IjE1IiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iNyIgd2lkdGg9IjMiIGhlaWdodD0iMiIgcng9IjEiIGZpbGw9IiM0RTVDNkUiLz4KPHJlY3QgeD0iMTMiIHk9IjExIiB3aWR0aD0iMyIgaGVpZ2h0PSIyIiByeD0iMSIgZmlsbD0iIzRFNUM2RSIvPgo8cmVjdCB4PSIxMyIgeT0iMTUiIHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSIjNEU1QzZFIi8+Cjwvc3ZnPgo=\") no-repeat;\n    background-position: 0 2px;\n    content: \"\";\n    display: ${props.readOnly ? \"none\" : \"inline-block\"};\n    cursor: grab;\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    left: -40px;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n  }\n\n  &:dir(rtl)::before {\n    left: auto;\n    right: -40px;\n  }\n}\n\nul li[draggable=true]::before,\nol li[draggable=true]::before {\n  cursor: grabbing;\n}\n\nul > li.counter-2,\nol li.counter-2 {\n  &::before {\n    left: -50px;\n  }\n  &:dir(rtl)::before {\n    left: auto;\n    right: -50px;\n  }\n}\n\nul > li.hovering::before,\nol li.hovering::before {\n  opacity: 0.5;\n}\n\nul li.ProseMirror-selectednode::after,\nol li.ProseMirror-selectednode::after {\n  display: none;\n}\n\nul.checkbox_list > li {\n  &::before {\n    left: 0;\n  }\n\n  &:dir(rtl)::before {\n    left: auto;\n    right: 0;\n  }\n}\n\nul.checkbox_list {\n  .checkbox {\n    display: inline-block;\n    cursor: var(--pointer);\n    pointer-events: ${\n      props.readOnly && !props.readOnlyWriteCheckboxes ? \"none\" : \"initial\"\n    };\n    opacity: ${props.readOnly && !props.readOnlyWriteCheckboxes ? 0.75 : 1};\n    width: 14px;\n    height: 14px;\n    position: relative;\n    top: 1px;\n    transition: transform 100ms ease-in-out;\n    opacity: .8;\n    margin: 0 0.5em 0 0;\n\n    background-image: ${`url(\"data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3 0C1.34315 0 0 1.34315 0 3V11C0 12.6569 1.34315 14 3 14H11C12.6569 14 14 12.6569 14 11V3C14 1.34315 12.6569 0 11 0H3ZM3 2C2.44772 2 2 2.44772 2 3V11C2 11.5523 2.44772 12 3 12H11C11.5523 12 12 11.5523 12 11V3C12 2.44772 11.5523 2 11 2H3Z' fill='${props.theme.text.replace(\n      \"#\",\n      \"%23\"\n    )}' /%3E%3C/svg%3E%0A\");`}\n\n    &[aria-checked=true] {\n        opacity: 1;\n        background-image: ${`url(\n            \"data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3 0C1.34315 0 0 1.34315 0 3V11C0 12.6569 1.34315 14 3 14H11C12.6569 14 14 12.6569 14 11V3C14 1.34315 12.6569 0 11 0H3ZM4.26825 5.85982L5.95873 7.88839L9.70003 2.9C10.0314 2.45817 10.6582 2.36863 11.1 2.7C11.5419 3.03137 11.6314 3.65817 11.3 4.1L6.80002 10.1C6.41275 10.6164 5.64501 10.636 5.2318 10.1402L2.7318 7.14018C2.37824 6.71591 2.43556 6.08534 2.85984 5.73178C3.28412 5.37821 3.91468 5.43554 4.26825 5.85982Z' fill='${props.theme.accent.replace(\n              \"#\",\n              \"%23\"\n            )}' /%3E%3C/svg%3E%0A\"\n        )`};\n    }\n\n    &:active {\n      transform: scale(0.9);\n    }\n  }\n\n  &:has(p:dir(rtl)) {\n    .checkbox {\n      margin: 0 0 0 0.5em;\n    }\n  }\n}\n\nli p:first-child {\n  margin: 0;\n  word-break: break-word;\n}\n\nhr {\n  position: relative;\n  height: 1em;\n  border: 0;\n}\n\nhr::before {\n  content: \"\";\n  display: block;\n  position: absolute;\n  border-top: 1px solid ${props.theme.horizontalRule};\n  top: 0.5em;\n  left: 0;\n  right: 0;\n}\n\nhr.page-break {\n  page-break-after: always;\n}\n\nhr.page-break::before {\n  border-top: 1px dashed ${props.theme.horizontalRule};\n}\n\n.math-inline .math-src .ProseMirror,\ncode {\n  border-radius: 4px;\n  border: 1px solid ${props.theme.codeBorder};\n  background: ${props.theme.codeBackground};\n  padding: 3px 4px;\n  color: ${props.theme.codeString};\n  font-family: ${props.theme.fontFamilyMono};\n  font-size: 90%;\n}\n\nmark {\n  border-radius: 1px;\n  padding: 2px 0;\n  color: ${props.theme.text};\n\n  a {\n    color: ${props.theme.text};\n  }\n}\n\n.external-link {\n  cursor: pointer;\n  display: inline-block;\n  position: relative;\n  top: 2px;\n  width: 16px;\n  height: 16px;\n}\n\n.code-block {\n  position: relative;\n}\n\n.code-block[data-language=mermaidjs] {\n  margin: 0.75em 0;\n\n  ${\n    !props.staticHTML &&\n    css`\n      pre {\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        margin-bottom: -20px;\n        overflow: hidden;\n      }\n    `\n  }\n\n  // Hide code without display none so toolbar can still be positioned against it\n  &:not(.code-active) {\n    height: ${props.staticHTML || props.readOnly ? \"auto\" : \"0\"};\n    margin: -0.75em 0;\n    overflow: hidden;\n\n    // Allows the margin to collapse correctly by moving div out of the flow\n    position: ${props.staticHTML || props.readOnly ? \"relative\" : \"absolute\"};\n  }\n}\n\n.ProseMirror[contenteditable=\"false\"] .code-block[data-language=mermaidjs] {\n    height: 0;\n    overflow: hidden;\n    margin: -0.5em 0 0 0;\n}\n\n.code-block.with-line-numbers {\n  pre {\n    padding-left: calc(var(--line-number-gutter-width, 0) * 1em + 1.5em);\n  }\n\n  &::after {\n    content: attr(data-line-numbers);\n    position: absolute;\n    padding-left: 0.5em;\n    left: 1px;\n    top: calc(1px + 0.75em);\n    width: calc(var(--line-number-gutter-width,0) * 1em + .25em);\n    word-break: break-all;\n    white-space: break-spaces;\n    font-family: ${props.theme.fontFamilyMono};\n    font-size: 13px;\n    line-height: 1.4em;\n    color: ${props.theme.textTertiary};\n    background: ${props.theme.codeBackground};\n    text-align: right;\n    font-variant-numeric: tabular-nums;\n    user-select: none;\n  }\n}\n\n.mermaid-diagram-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0.75em 0;\n  min-height: 1.6em;\n  background: ${props.theme.codeBackground};\n  border-radius: 6px;\n  border: 1px solid ${props.theme.codeBorder};\n  padding: 8px;\n  user-select: none;\n  cursor: default;\n\n  * {\n    font-family: ${props.theme.fontFamily};\n  }\n\n  &.empty {\n    font-family: ${props.theme.fontFamilyMono};\n    font-size: 14px;\n    color: ${props.theme.placeholder};\n  }\n\n  &.parse-error {\n    font-family: ${props.theme.fontFamilyMono};\n    font-size: 14px;\n    color: ${props.theme.brand.red};\n  }\n}\n\npre {\n  display: block;\n  overflow-x: auto;\n  padding: 0.75em 1em;\n  line-height: 1.4em;\n  position: relative;\n  background: ${props.theme.codeBackground};\n  border-radius: 4px;\n  border: 1px solid ${props.theme.codeBorder};\n  margin: .5em 0;\n\n  -webkit-font-smoothing: initial;\n  font-family: ${props.theme.fontFamilyMono};\n  font-size: 13px;\n  direction: ltr;\n  text-align: left;\n  white-space: pre;\n  word-spacing: normal;\n  word-break: normal;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n  color: ${props.theme.code};\n\n  code {\n    font-size: 13px;\n    background: none;\n    padding: 0;\n    border: 0;\n  }\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  border-radius: 4px;\n  margin-top: 1em;\n  box-sizing: border-box;\n\n  * {\n    box-sizing: border-box;\n  }\n\n  tr {\n    position: relative;\n    border-bottom: 1px solid ${props.theme.divider};\n  }\n\n  td,\n  th {\n    position: relative;\n    vertical-align: top;\n    border: 1px solid ${props.theme.divider};\n    position: relative;\n    padding: 4px 8px;\n    text-align: start;\n    min-width: 100px;\n    font-weight: normal;\n  }\n\n  th {\n    background: ${transparentize(0.75, props.theme.divider)};\n    color: ${props.theme.textSecondary};\n    font-weight: 500;\n  }\n\n  td .component-embed {\n    padding: 4px 0;\n  }\n\n  .selectedCell {\n    background: ${\n      props.readOnly ? \"inherit\" : props.theme.tableSelectedBackground\n    };\n\n    /* fixes Firefox background color painting over border:\n     * https://bugzilla.mozilla.org/show_bug.cgi?id=688556 */\n    background-clip: padding-box;\n  }\n\n  .${EditorStyleHelper.tableAddRow},\n  .${EditorStyleHelper.tableAddColumn},\n  .${EditorStyleHelper.tableGrip},\n  .${EditorStyleHelper.tableGripColumn},\n  .${EditorStyleHelper.tableGripRow} {\n    @media print {\n      display: none;\n    }\n  }\n\n  .${EditorStyleHelper.tableAddRow},\n  .${EditorStyleHelper.tableAddColumn} {\n    display: block;\n    position: absolute;\n    background: ${props.theme.accent};\n    cursor: var(--pointer);\n\n    &:hover::after {\n      width: 16px;\n      height: 16px;\n      z-index: 20;\n      background-color: ${props.theme.accent};\n      background-size: 16px 16px;\n      background-position: 50% 50%;\n      background-image: url(\"data:image/svg+xml;base64,${btoa(\n        '<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12 5C11.4477 5 11 5.44772 11 6V11H6C5.44772 11 5 11.4477 5 12C5 12.5523 5.44772 13 6 13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V13H18C18.5523 13 19 12.5523 19 12C19 11.4477 18.5523 11 18 11H13V6C13 5.44772 12.5523 5 12 5Z\" fill=\"white\"/></svg>'\n      )}\")\n    }\n\n    // extra clickable area\n    &::before {\n      content: \"\";\n      display: block;\n      cursor: var(--pointer);\n      position: absolute;\n      width: 24px;\n      height: 24px;\n    }\n  }\n\n  .${EditorStyleHelper.tableAddRow} {\n    bottom: -1px;\n    left: -16px;\n    width: 0;\n    height: 2px;\n\n    &::after {\n      content: \"\";\n      position: absolute;\n      bottom: -1px;\n      left: -10px;\n      width: 4px;\n      height: 4px;\n      display: ${props.readOnly ? \"none\" : \"block\"};\n      border-radius: 100%;\n      background-color: ${props.theme.divider};\n    }\n\n    &:hover {\n      width: calc(var(--table-width) - ${EditorStyleHelper.padding * 1.5}px);\n    }\n\n    &:hover::after {\n      bottom: -7.5px;\n      left: -16px;\n    }\n\n    // extra clickable area\n    &::before {\n      bottom: -12px;\n      left: -18px;\n    }\n\n    &.first {\n      bottom: auto;\n      top: -1px;\n\n      &::before {\n        bottom: auto;\n        top: -12px;\n      }\n    }\n  }\n\n  .${EditorStyleHelper.tableAddColumn} {\n    top: -16px;\n    right: -1px;\n    width: 2px;\n    height: 0;\n\n    &::after {\n      content: \"\";\n      position: absolute;\n      top: -10px;\n      right: -1px;\n      width: 4px;\n      height: 4px;\n      display: ${props.readOnly ? \"none\" : \"block\"};\n      border-radius: 100%;\n      background-color: ${props.theme.divider};\n    }\n\n    &:hover {\n      height: calc(var(--table-height) - ${EditorStyleHelper.padding}px + 6px);\n    }\n\n    &:hover::after {\n      top: -16px;\n      right: -7px;\n    }\n\n    // extra clickable area\n    &::before {\n      top: -16px;\n      right: -12px;\n    }\n\n    &.first {\n      right: auto;\n      left: -1px;\n\n      &::before {\n        right: auto;\n        left: -12px;\n      }\n    }\n  }\n\n  .${EditorStyleHelper.tableGripColumn} {\n    /* usage of ::after for all of the table grips works around a bug in\n     * prosemirror-tables that causes Safari to hang when selecting a cell\n     * in an empty table:\n     * https://github.com/ProseMirror/prosemirror/issues/947 */\n    &::after {\n      content: \"\";\n      cursor: var(--pointer);\n      position: absolute;\n      top: -16px;\n      left: 0;\n      width: 100%;\n      height: 12px;\n      background: ${props.theme.divider};\n      display: ${props.readOnly ? \"none\" : \"block\"};\n    }\n\n    &:hover::after {\n      background: ${props.theme.text};\n    }\n    &.first::after {\n      border-top-left-radius: 3px;\n      border-bottom-left-radius: 3px;\n    }\n    &.last::after {\n      border-top-right-radius: 3px;\n      border-bottom-right-radius: 3px;\n    }\n    &.selected::after {\n      background: ${props.theme.tableSelected};\n    }\n  }\n\n  .${EditorStyleHelper.tableGripRow} {\n    &::after {\n      content: \"\";\n      cursor: var(--pointer);\n      position: absolute;\n      left: -16px;\n      top: 0;\n      height: 100%;\n      width: 12px;\n      background: ${props.theme.divider};\n      border-color: ${props.theme.background};\n      display: ${props.readOnly ? \"none\" : \"block\"};\n    }\n\n    &:hover::after {\n      background: ${props.theme.text};\n    }\n    &.first::after {\n      border-top-left-radius: 3px;\n      border-top-right-radius: 3px;\n    }\n    &.last::after {\n      border-bottom-left-radius: 3px;\n      border-bottom-right-radius: 3px;\n    }\n    &.selected::after {\n      background: ${props.theme.tableSelected};\n    }\n  }\n\n  .${EditorStyleHelper.tableGrip} {\n    &::after {\n      content: \"\";\n      cursor: var(--pointer);\n      background: ${props.theme.divider};\n      width: 13px;\n      height: 13px;\n      border-radius: 13px;\n      border: 2px solid ${props.theme.background};\n      position: absolute;\n      top: -18px;\n      left: -18px;\n      display: ${props.readOnly ? \"none\" : \"block\"};\n      z-index: 10;\n    }\n\n    &:hover::after {\n      background: ${props.theme.text};\n    }\n    &.selected::after {\n      background: ${props.theme.tableSelected};\n    }\n  }\n}\n\n.${EditorStyleHelper.table} {\n  position: relative;\n}\n\n.${EditorStyleHelper.tableScrollable} {\n  position: relative;\n  margin: -1em ${-EditorStyleHelper.padding}px -0.5em;\n  scrollbar-width: thin;\n  scrollbar-color: transparent transparent;\n  overflow-y: hidden;\n  overflow-x: auto;\n  padding-top: 1em;\n  padding-bottom: .5em;\n  padding-left: ${EditorStyleHelper.padding}px;\n  padding-right: ${EditorStyleHelper.padding}px;\n  transition: border 250ms ease-in-out 0s;\n\n  &:hover {\n    scrollbar-color: ${props.theme.scrollbarThumb} ${\n  props.theme.scrollbarBackground\n};\n  }\n\n  & ::-webkit-scrollbar {\n    height: 14px;\n    background-color: transparent;\n  }\n\n  &:hover ::-webkit-scrollbar {\n    background-color: ${props.theme.scrollbarBackground};\n  }\n\n  & ::-webkit-scrollbar-thumb {\n    background-color: transparent;\n    border: 3px solid transparent;\n    border-radius: 7px;\n  }\n\n  &:hover ::-webkit-scrollbar-thumb {\n    background-color: ${props.theme.scrollbarThumb};\n    border-color: ${props.theme.scrollbarBackground};\n  }\n}\n\n.${EditorStyleHelper.tableShadowLeft}::before,\n.${EditorStyleHelper.tableShadowRight}::after {\n  content: \"\";\n  position: absolute;\n  top: 1px;\n  bottom: 0;\n  left: -1em;\n  width: 32px;\n  z-index: 20;\n  transition: box-shadow 250ms ease-in-out;\n  border: 0px solid transparent;\n  pointer-events: none;\n}\n\n.${EditorStyleHelper.tableShadowLeft}::before {\n  left: -${EditorStyleHelper.padding}px;\n  right: auto;\n  box-shadow: 16px 0 16px -16px inset rgba(0, 0, 0, ${\n    props.theme.isDark ? 1 : 0.25\n  });\n  border-left: ${EditorStyleHelper.padding}px solid ${props.theme.background};\n}\n\n.${EditorStyleHelper.tableShadowRight}::after {\n  right: -${EditorStyleHelper.padding}px;\n  left: auto;\n  box-shadow: -16px 0 16px -16px inset rgba(0, 0, 0, ${\n    props.theme.isDark ? 1 : 0.25\n  });\n  border-right: ${EditorStyleHelper.padding}px solid ${props.theme.background};\n}\n\n.block-menu-trigger {\n  opacity: 0;\n  pointer-events: none;\n  display: ${props.readOnly ? \"none\" : \"inline\"};\n  width: 24px;\n  height: 24px;\n  color: ${props.theme.textSecondary};\n  background: none;\n  position: absolute;\n  transition: color 150ms cubic-bezier(0.175, 0.885, 0.32, 1.275),\n    opacity 150ms ease-in-out;\n  outline: none;\n  border: 0;\n  padding: 0;\n  margin-top: 1px;\n  margin-${props.rtl ? \"right\" : \"left\"}: -28px;\n  border-radius: 4px;\n\n  &:hover,\n  &:focus {\n    cursor: var(--pointer);\n    color: ${props.theme.text};\n    background: ${props.theme.backgroundSecondary};\n  }\n}\n\n.ProseMirror[contenteditable=\"true\"]:focus-within,\n.ProseMirror-focused .block-menu-trigger,\n.block-menu-trigger:active,\n.block-menu-trigger:focus {\n  opacity: 1;\n  pointer-events: initial;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor::after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid ${props.theme.cursor};\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n.folded-content,\n.folded-content + .mermaid-diagram-wrapper {\n  display: none;\n  user-select: none;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\ndel {\n  color: ${props.theme.slate};\n  text-decoration: strikethrough;\n}\n\nins[data-operation-index] {\n  color: ${props.theme.textDiffInserted};\n  background-color: ${props.theme.textDiffInsertedBackground};\n  text-decoration: none;\n}\n\ndel[data-operation-index] {\n  color: ${props.theme.textDiffDeleted};\n  background-color: ${props.theme.textDiffDeletedBackground};\n  text-decoration: none;\n\n  img {\n    opacity: .5;\n  }\n}\n\n@media print {\n  .placeholder::before,\n  .block-menu-trigger,\n  .heading-actions,\n  button.show-source-button,\n  h1:not(.placeholder)::before,\n  h2:not(.placeholder)::before,\n  h3:not(.placeholder)::before,\n  h4:not(.placeholder)::before,\n  h5:not(.placeholder)::before,\n  h6:not(.placeholder)::before {\n    display: none;\n  }\n\n  .image {\n    page-break-inside: avoid;\n  }\n\n  .${EditorStyleHelper.comment} {\n    border: 0;\n    background: none;\n  }\n\n  .page-break {\n    opacity: 0;\n  }\n\n  pre {\n    overflow-x: hidden;\n    white-space: pre-wrap;\n  }\n\n  em,\n  blockquote {\n    font-family: \"SF Pro Text\", ${props.theme.fontFamily};\n  }\n}\n`;\n\nconst EditorContainer = styled.div<Props>`\n  ${style}\n  ${mathStyle}\n  ${codeMarkCursor}\n  ${codeBlockStyle}\n  ${findAndReplaceStyle}\n  ${emailStyle}\n`;\n\nexport default EditorContainer;\n","import styled from \"styled-components\";\n\nconst ClickablePadding = styled.div<{\n  grow?: boolean;\n  minHeight?: React.CSSProperties[\"paddingBottom\"];\n}>`\n  min-height: ${(props) => props.minHeight || \"50vh\"};\n  flex-grow: 100;\n  cursor: text;\n`;\n\nexport default ClickablePadding;\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\n/**\n * Hook that provides a dictionary of translated UI strings.\n *\n * @returns An object containing all translated UI strings used throughout the application\n */\nexport default function useDictionary() {\n  const { t } = useTranslation();\n\n  return React.useMemo(\n    () => ({\n      addColumnAfter: t(\"Add column after\"),\n      addColumnBefore: t(\"Add column before\"),\n      addRowAfter: t(\"Add row after\"),\n      addRowBefore: t(\"Add row before\"),\n      alignCenter: t(\"Align center\"),\n      alignLeft: t(\"Align left\"),\n      alignRight: t(\"Align right\"),\n      alignDefaultWidth: t(\"Default width\"),\n      alignFullWidth: t(\"Full width\"),\n      bulletList: t(\"Bulleted list\"),\n      checkboxList: t(\"Todo list\"),\n      codeBlock: t(\"Code block\"),\n      codeCopied: t(\"Copied to clipboard\"),\n      codeInline: t(\"Code\"),\n      comment: t(\"Comment\"),\n      copy: t(\"Copy\"),\n      createLink: t(\"Create link\"),\n      createLinkError: t(\"Sorry, an error occurred creating the link\"),\n      createNewDoc: t(\"Create a new doc\"),\n      createNewChildDoc: t(\"Create a new child doc\"),\n      deleteColumn: t(\"Delete\"),\n      deleteRow: t(\"Delete\"),\n      deleteTable: t(\"Delete table\"),\n      deleteAttachment: t(\"Delete file\"),\n      download: t(\"Download\"),\n      downloadAttachment: t(\"Download file\"),\n      replaceAttachment: t(\"Replace file\"),\n      deleteImage: t(\"Delete image\"),\n      downloadImage: t(\"Download image\"),\n      replaceImage: t(\"Replace image\"),\n      em: t(\"Italic\"),\n      embedInvalidLink: t(\"Sorry, that link won’t work for this embed type\"),\n      file: t(\"File attachment\"),\n      enterLink: `${t(\"Enter a link\")}…`,\n      h1: t(\"Big heading\"),\n      h2: t(\"Medium heading\"),\n      h3: t(\"Small heading\"),\n      h4: t(\"Extra small heading\"),\n      heading: t(\"Heading\"),\n      hr: t(\"Divider\"),\n      image: t(\"Image\"),\n      fileUploadError: t(\"Sorry, an error occurred uploading the file\"),\n      imageCaptionPlaceholder: t(\"Write a caption\"),\n      info: t(\"Info\"),\n      infoNotice: t(\"Info notice\"),\n      link: t(\"Link\"),\n      linkCopied: t(\"Link copied to clipboard\"),\n      mark: t(\"Highlight\"),\n      newLineEmpty: `${t(\"Type '/' to insert\")}…`,\n      newLineWithSlash: `${t(\"Keep typing to filter\")}…`,\n      noResults: t(\"No results\"),\n      openLink: t(\"Open link\"),\n      goToLink: t(\"Go to link\"),\n      openLinkError: t(\"Sorry, that type of link is not supported\"),\n      orderedList: t(\"Ordered list\"),\n      pageBreak: t(\"Page break\"),\n      pasteLink: `${t(\"Paste a link\")}…`,\n      pasteLinkWithTitle: (service: string) =>\n        t(\"Paste a {{service}} link…\", {\n          service,\n        }),\n      placeholder: t(\"Placeholder\"),\n      quote: t(\"Quote\"),\n      removeLink: t(\"Remove link\"),\n      searchOrPasteLink: `${t(\"Search or paste a link\")}…`,\n      strikethrough: t(\"Strikethrough\"),\n      strong: t(\"Bold\"),\n      subheading: t(\"Subheading\"),\n      sortAsc: t(\"Sort ascending\"),\n      sortDesc: t(\"Sort descending\"),\n      table: t(\"Table\"),\n      exportAsCSV: t(\"Export as CSV\"),\n      toggleHeader: t(\"Toggle header\"),\n      mathInline: t(\"Math inline (LaTeX)\"),\n      mathBlock: t(\"Math block (LaTeX)\"),\n      tip: t(\"Tip\"),\n      tipNotice: t(\"Tip notice\"),\n      warning: t(\"Warning\"),\n      warningNotice: t(\"Warning notice\"),\n      success: t(\"Success\"),\n      successNotice: t(\"Success notice\"),\n      insertDate: t(\"Current date\"),\n      insertTime: t(\"Current time\"),\n      insertDateTime: t(\"Current date and time\"),\n      indent: t(\"Indent\"),\n      outdent: t(\"Outdent\"),\n      video: t(\"Video\"),\n      untitled: t(\"Untitled\"),\n      none: t(\"None\"),\n    }),\n    [t]\n  );\n}\n\nexport type Dictionary = ReturnType<typeof useDictionary>;\n","import difference from \"lodash/difference\";\nimport { observer } from \"mobx-react\";\nimport { DOMParser as ProsemirrorDOMParser } from \"prosemirror-model\";\nimport { TextSelection } from \"prosemirror-state\";\nimport * as React from \"react\";\nimport { mergeRefs } from \"react-merge-refs\";\nimport { Optional } from \"utility-types\";\nimport insertFiles from \"@shared/editor/commands/insertFiles\";\nimport EditorContainer from \"@shared/editor/components/Styles\";\nimport { AttachmentPreset } from \"@shared/types\";\nimport { ProsemirrorHelper } from \"@shared/utils/ProsemirrorHelper\";\nimport { getDataTransferFiles } from \"@shared/utils/files\";\nimport { AttachmentValidation } from \"@shared/validations\";\nimport ClickablePadding from \"~/components/ClickablePadding\";\nimport ErrorBoundary from \"~/components/ErrorBoundary\";\nimport type { Props as EditorProps, Editor as SharedEditor } from \"~/editor\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useDictionary from \"~/hooks/useDictionary\";\nimport useEditorClickHandlers from \"~/hooks/useEditorClickHandlers\";\nimport useEmbeds from \"~/hooks/useEmbeds\";\nimport useStores from \"~/hooks/useStores\";\nimport { uploadFile, uploadFileFromUrl } from \"~/utils/files\";\nimport lazyWithRetry from \"~/utils/lazyWithRetry\";\n\nconst LazyLoadedEditor = lazyWithRetry(() => import(\"~/editor\"));\n\nexport type Props = Optional<\n  EditorProps,\n  | \"placeholder\"\n  | \"defaultValue\"\n  | \"onClickLink\"\n  | \"embeds\"\n  | \"dictionary\"\n  | \"extensions\"\n> & {\n  shareId?: string | undefined;\n  embedsDisabled?: boolean;\n  onSynced?: () => Promise<void>;\n  onPublish?: (event: React.MouseEvent) => void;\n  editorStyle?: React.CSSProperties;\n};\n\nfunction Editor(props: Props, ref: React.RefObject<SharedEditor> | null) {\n  const { id, shareId, onChange, onCreateCommentMark, onDeleteCommentMark } =\n    props;\n  const { comments } = useStores();\n  const dictionary = useDictionary();\n  const embeds = useEmbeds(!shareId);\n  const localRef = React.useRef<SharedEditor>();\n  const preferences = useCurrentUser({ rejectOnEmpty: false })?.preferences;\n  const previousCommentIds = React.useRef<string[]>();\n\n  const handleUploadFile = React.useCallback(\n    async (file: File | string) => {\n      const options = {\n        documentId: id,\n        preset: AttachmentPreset.DocumentAttachment,\n      };\n      const result =\n        file instanceof File\n          ? await uploadFile(file, options)\n          : await uploadFileFromUrl(file, options);\n      return result.url;\n    },\n    [id]\n  );\n\n  const { handleClickLink } = useEditorClickHandlers({ shareId });\n\n  const focusAtEnd = React.useCallback(() => {\n    localRef?.current?.focusAtEnd();\n  }, [localRef]);\n\n  const handleDrop = React.useCallback(\n    (event: React.DragEvent<HTMLDivElement>) => {\n      event.preventDefault();\n      event.stopPropagation();\n      const files = getDataTransferFiles(event);\n\n      const view = localRef?.current?.view;\n      if (!view) {\n        return;\n      }\n\n      // Find a valid position at the end of the document to insert our content\n      const pos = TextSelection.near(\n        view.state.doc.resolve(view.state.doc.nodeSize - 2)\n      ).from;\n\n      // If there are no files in the drop event attempt to parse the html\n      // as a fragment and insert it at the end of the document\n      if (files.length === 0) {\n        const text =\n          event.dataTransfer.getData(\"text/html\") ||\n          event.dataTransfer.getData(\"text/plain\");\n\n        const dom = new DOMParser().parseFromString(text, \"text/html\");\n\n        view.dispatch(\n          view.state.tr.insert(\n            pos,\n            ProsemirrorDOMParser.fromSchema(view.state.schema).parse(dom)\n          )\n        );\n\n        return;\n      }\n\n      // Insert all files as attachments if any of the files are not images.\n      const isAttachment = files.some(\n        (file) => !AttachmentValidation.imageContentTypes.includes(file.type)\n      );\n\n      return insertFiles(view, event, pos, files, {\n        uploadFile: handleUploadFile,\n        onFileUploadStart: props.onFileUploadStart,\n        onFileUploadStop: props.onFileUploadStop,\n        dictionary,\n        isAttachment,\n      });\n    },\n    [\n      localRef,\n      props.onFileUploadStart,\n      props.onFileUploadStop,\n      dictionary,\n      handleUploadFile,\n    ]\n  );\n\n  // see: https://stackoverflow.com/a/50233827/192065\n  const handleDragOver = React.useCallback(\n    (event: React.DragEvent<HTMLDivElement>) => {\n      event.stopPropagation();\n      event.preventDefault();\n    },\n    []\n  );\n\n  const updateComments = React.useCallback(() => {\n    if (onCreateCommentMark && onDeleteCommentMark && localRef.current) {\n      const commentMarks = localRef.current.getComments();\n      const commentIds = comments.orderedData.map((c) => c.id);\n      const commentMarkIds = commentMarks?.map((c) => c.id);\n      const newCommentIds = difference(\n        commentMarkIds,\n        previousCommentIds.current ?? [],\n        commentIds\n      );\n\n      newCommentIds.forEach((commentId) => {\n        const mark = commentMarks.find((c) => c.id === commentId);\n        if (mark) {\n          onCreateCommentMark(mark.id, mark.userId);\n        }\n      });\n\n      const removedCommentIds = difference(\n        previousCommentIds.current ?? [],\n        commentMarkIds ?? []\n      );\n\n      removedCommentIds.forEach((commentId) => {\n        onDeleteCommentMark(commentId);\n      });\n\n      previousCommentIds.current = commentMarkIds;\n    }\n  }, [onCreateCommentMark, onDeleteCommentMark, comments.orderedData]);\n\n  const handleChange = React.useCallback(\n    (event) => {\n      onChange?.(event);\n      updateComments();\n    },\n    [onChange, updateComments]\n  );\n\n  const handleRefChanged = React.useCallback(\n    (node: SharedEditor | null) => {\n      if (node) {\n        updateComments();\n      }\n    },\n    [updateComments]\n  );\n\n  const paragraphs = React.useMemo(() => {\n    if (props.readOnly && typeof props.value === \"object\") {\n      return ProsemirrorHelper.getPlainParagraphs(props.value);\n    }\n    return undefined;\n  }, [props.readOnly, props.value]);\n\n  return (\n    <ErrorBoundary component=\"div\" reloadOnChunkMissing>\n      <>\n        {paragraphs ? (\n          <EditorContainer\n            rtl={props.dir === \"rtl\"}\n            grow={props.grow}\n            style={props.style}\n            editorStyle={props.editorStyle}\n          >\n            <div className=\"ProseMirror\">\n              {paragraphs.map((paragraph, index) => (\n                <p key={index} dir=\"auto\">\n                  {paragraph.content?.map((content) => content.text)}\n                </p>\n              ))}\n            </div>\n          </EditorContainer>\n        ) : (\n          <LazyLoadedEditor\n            key={props.extensions?.length || 0}\n            ref={mergeRefs([ref, localRef, handleRefChanged])}\n            uploadFile={handleUploadFile}\n            embeds={embeds}\n            userPreferences={preferences}\n            dictionary={dictionary}\n            {...props}\n            onClickLink={handleClickLink}\n            onChange={handleChange}\n            placeholder={props.placeholder || \"\"}\n            defaultValue={props.defaultValue || \"\"}\n          />\n        )}\n        {props.editorStyle?.paddingBottom && !props.readOnly && (\n          <ClickablePadding\n            onClick={props.readOnly ? undefined : focusAtEnd}\n            onDrop={props.readOnly ? undefined : handleDrop}\n            onDragOver={props.readOnly ? undefined : handleDragOver}\n            minHeight={props.editorStyle.paddingBottom}\n          />\n        )}\n      </>\n    </ErrorBoundary>\n  );\n}\n\nexport default observer(React.forwardRef(Editor));\n","import find from \"lodash/find\";\nimport * as React from \"react\";\nimport embeds from \"@shared/editor/embeds\";\nimport { IntegrationType } from \"@shared/types\";\nimport Integration from \"~/models/Integration\";\nimport Logger from \"~/utils/Logger\";\nimport useStores from \"./useStores\";\n\n/**\n * Hook to get all embed configuration for the current team\n *\n * @param loadIfMissing Should we load integration settings if they are not locally available\n * @returns A list of embed descriptors\n */\nexport default function useEmbeds(loadIfMissing = false) {\n  const { integrations } = useStores();\n\n  React.useEffect(() => {\n    async function fetchEmbedIntegrations() {\n      try {\n        await integrations.fetchPage({\n          limit: 100,\n          type: IntegrationType.Embed,\n        });\n      } catch (err) {\n        Logger.error(\"Failed to fetch embed integrations\", err);\n      }\n    }\n\n    if (!integrations.isLoaded && !integrations.isFetching && loadIfMissing) {\n      void fetchEmbedIntegrations();\n    }\n  }, [integrations, loadIfMissing]);\n\n  return React.useMemo(\n    () =>\n      embeds.map((e) => {\n        // Find any integrations that match this embed and inject the settings\n        const integration: Integration<IntegrationType.Embed> | undefined =\n          find(\n            integrations.orderedData,\n            (integration) => integration.service === e.name\n          );\n\n        if (integration?.settings) {\n          e.settings = integration.settings;\n        }\n\n        return e;\n      }),\n    [integrations.orderedData]\n  );\n}\n","import * as React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { isModKey } from \"@shared/utils/keyboard\";\nimport { isDocumentUrl, isInternalUrl } from \"@shared/utils/urls\";\nimport { sharedDocumentPath } from \"~/utils/routeHelpers\";\nimport { isHash } from \"~/utils/urls\";\nimport useStores from \"./useStores\";\n\ntype Params = {\n  /** The share ID of the document being viewed, if any */\n  shareId?: string;\n};\n\nexport default function useEditorClickHandlers({ shareId }: Params) {\n  const history = useHistory();\n  const { documents } = useStores();\n  const handleClickLink = React.useCallback(\n    (href: string, event?: MouseEvent) => {\n      // on page hash\n      if (isHash(href)) {\n        window.location.href = href;\n        return;\n      }\n\n      let navigateTo = href;\n\n      if (isInternalUrl(href)) {\n        // probably absolute\n        if (href[0] !== \"/\") {\n          try {\n            const url = new URL(href);\n            navigateTo = url.pathname + url.hash;\n          } catch (err) {\n            navigateTo = href;\n          }\n        }\n\n        // Link to our own API should be opened in a new tab, not in the app\n        if (navigateTo.startsWith(\"/api/\")) {\n          window.open(href, \"_blank\");\n          return;\n        }\n\n        // If we're navigating to an internal document link then prepend the\n        // share route to the URL so that the document is loaded in context\n        if (\n          shareId &&\n          navigateTo.includes(\"/doc/\") &&\n          !navigateTo.includes(shareId)\n        ) {\n          navigateTo = sharedDocumentPath(shareId, navigateTo);\n        }\n\n        if (isDocumentUrl(navigateTo)) {\n          const document = documents.getByUrl(navigateTo);\n          if (document) {\n            navigateTo = document.path;\n          }\n        }\n\n        // If we're navigating to a share link from a non-share link then open it in a new tab\n        if (!shareId && navigateTo.startsWith(\"/s/\")) {\n          window.open(href, \"_blank\");\n          return;\n        }\n\n        if (!event || (!isModKey(event) && !event.shiftKey)) {\n          history.push(navigateTo, { sidebarContext: \"collections\" }); // optimistic preference of \"collections\"\n        } else {\n          window.open(navigateTo, \"_blank\");\n        }\n      } else {\n        window.open(href, \"_blank\");\n      }\n    },\n    [history, shareId]\n  );\n\n  return { handleClickLink };\n}\n","import { Plugin, PluginKey } from \"prosemirror-state\";\nimport Extension from \"@shared/editor/lib/Extension\";\nimport { ProsemirrorHelper } from \"@shared/utils/ProsemirrorHelper\";\n\n/**\n * A plugin that allows overriding the default behavior of the editor to allow\n * copying text including the markdown formatting.\n */\nexport default class ClipboardTextSerializer extends Extension {\n  get name() {\n    return \"clipboardTextSerializer\";\n  }\n\n  get plugins() {\n    const mdSerializer = this.editor.extensions.serializer();\n\n    return [\n      new Plugin({\n        key: new PluginKey(\"clipboardTextSerializer\"),\n        props: {\n          clipboardTextSerializer: (slice) => {\n            const isMultiline = slice.content.childCount > 1;\n\n            // This is a cheap way to determine if the content is \"complex\",\n            // aka it has multiple marks or formatting. In which case we'll use\n            // markdown formatting\n            const copyAsMarkdown =\n              isMultiline ||\n              slice.content.content.some(\n                (node) => node.content.content.length > 1\n              );\n\n            return copyAsMarkdown\n              ? mdSerializer.serialize(slice.content, {\n                  softBreak: true,\n                })\n              : slice.content.content\n                  .map((node) =>\n                    ProsemirrorHelper.toPlainText(node, this.editor.schema)\n                  )\n                  .join(\"\");\n          },\n        },\n      }),\n    ];\n  }\n}\n","import { action } from \"mobx\";\nimport { EditorState, Plugin } from \"prosemirror-state\";\nimport { EditorView } from \"prosemirror-view\";\n\nconst MAX_MATCH = 500;\n\ntype Options = {\n  openRegex: RegExp;\n  closeRegex: RegExp;\n  enabledInCode: boolean;\n  trigger: string;\n  allowSpaces: boolean;\n  requireSearchTerm: boolean;\n};\n\ntype ExtensionState = {\n  open: boolean;\n  query: string;\n};\n\nexport class SuggestionsMenuPlugin extends Plugin {\n  constructor(\n    options: Options,\n    extensionState: ExtensionState,\n    openRegex: RegExp\n  ) {\n    super({\n      props: {\n        handleKeyDown: (view, event) => {\n          // Prosemirror input rules are not triggered on backspace, however\n          // we need them to be evaluted for the filter trigger to work\n          // correctly. This additional handler adds inputrules-like handling.\n          if (event.key === \"Backspace\") {\n            // timeout ensures that the delete has been handled by prosemirror\n            // and any characters removed, before we evaluate the rule.\n            setTimeout(() => {\n              const { pos: fromPos } = view.state.selection.$from;\n              return this.execute(\n                view,\n                fromPos,\n                fromPos,\n                openRegex,\n                action((_, match) => {\n                  if (match) {\n                    extensionState.query = match[1];\n                  } else {\n                    extensionState.open = false;\n                  }\n                  return null;\n                })\n              );\n            });\n          }\n\n          // If the menu is open then just ignore the key events in the editor\n          // itself until we're done.\n          if (\n            event.key === \"Enter\" ||\n            event.key === \"ArrowUp\" ||\n            event.key === \"ArrowDown\" ||\n            event.key === \"Tab\"\n          ) {\n            return extensionState.open;\n          }\n\n          return false;\n        },\n      },\n    });\n  }\n\n  // based on the input rules code in Prosemirror, here:\n  // https://github.com/ProseMirror/prosemirror-inputrules/blob/master/src/inputrules.js\n  private execute(\n    view: EditorView,\n    from: number,\n    to: number,\n    regex: RegExp,\n    handler: (\n      state: EditorState,\n      match: RegExpExecArray | null,\n      from?: number,\n      to?: number\n    ) => boolean | null\n  ) {\n    if (view.composing) {\n      return false;\n    }\n    const state = view.state;\n    const $from = state.doc.resolve(from);\n    if ($from.parent.type.spec.code) {\n      return false;\n    }\n\n    const textBefore = $from.parent.textBetween(\n      Math.max(0, $from.parentOffset - MAX_MATCH),\n      $from.parentOffset,\n      undefined,\n      \"\\ufffc\"\n    );\n\n    const match = regex.exec(textBefore);\n    const tr = handler(state, match, match ? from - match[0].length : from, to);\n    if (!tr) {\n      return false;\n    }\n    return true;\n  }\n}\n","import escapeRegExp from \"lodash/escapeRegExp\";\nimport { action, observable } from \"mobx\";\nimport { InputRule } from \"prosemirror-inputrules\";\nimport { NodeType, Schema } from \"prosemirror-model\";\nimport { EditorState, Plugin } from \"prosemirror-state\";\nimport Extension from \"@shared/editor/lib/Extension\";\nimport { SuggestionsMenuPlugin } from \"@shared/editor/plugins/Suggestions\";\nimport { isInCode } from \"@shared/editor/queries/isInCode\";\n\ntype Options = {\n  enabledInCode: boolean;\n  trigger: string;\n  allowSpaces: boolean;\n  requireSearchTerm: boolean;\n};\n\nexport default class Suggestion extends Extension {\n  constructor(options: Options) {\n    super(options);\n\n    this.openRegex = new RegExp(\n      `(?:^|\\\\s|\\\\()${escapeRegExp(\n        this.options.trigger\n      )}(${`[\\\\p{L}\\/\\\\p{M}\\\\d${\n        this.options.allowSpaces ? \"\\\\s{1}\" : \"\"\n      }\\\\.\\\\-–_]+`})${this.options.requireSearchTerm ? \"\" : \"?\"}$`,\n      \"u\"\n    );\n  }\n\n  get plugins(): Plugin[] {\n    return [\n      new SuggestionsMenuPlugin(this.options, this.state, this.openRegex),\n    ];\n  }\n\n  keys() {\n    return {\n      Space: action(() => {\n        if (this.state.open && !this.options.allowSpaces) {\n          this.state.open = false;\n        }\n        return false;\n      }),\n    };\n  }\n\n  inputRules = (_options: { type: NodeType; schema: Schema }) => [\n    new InputRule(\n      this.openRegex,\n      action((state: EditorState, match: RegExpMatchArray) => {\n        const { parent } = state.selection.$from;\n        if (\n          match &&\n          (parent.type.name === \"paragraph\" ||\n            parent.type.name === \"heading\") &&\n          (!isInCode(state) || this.options.enabledInCode)\n        ) {\n          if (match[0].length <= 2) {\n            this.state.open = true;\n          }\n          this.state.query = match[1];\n        }\n        return null;\n      })\n    ),\n  ];\n\n  protected openRegex: RegExp;\n\n  protected state: {\n    open: boolean;\n    query: string;\n  } = observable({\n    open: false,\n    query: \"\",\n  });\n}\n","function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nfunction $c770c458706daa72$export$2e2bcd8739ae039(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\n\n\nvar $fb96b826c0c5f37a$var$n, $fb96b826c0c5f37a$export$41c562ebe57d11e2, $fb96b826c0c5f37a$var$u, $fb96b826c0c5f37a$export$a8257692ac88316c, $fb96b826c0c5f37a$var$t, $fb96b826c0c5f37a$var$r, $fb96b826c0c5f37a$var$o, $fb96b826c0c5f37a$var$f, $fb96b826c0c5f37a$var$e = {}, $fb96b826c0c5f37a$var$c = [], $fb96b826c0c5f37a$var$s = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\nfunction $fb96b826c0c5f37a$var$a(n1, l1) {\n    for(var u1 in l1)n1[u1] = l1[u1];\n    return n1;\n}\nfunction $fb96b826c0c5f37a$var$h(n2) {\n    var l2 = n2.parentNode;\n    l2 && l2.removeChild(n2);\n}\nfunction $fb96b826c0c5f37a$export$c8a8987d4410bf2d(l3, u2, i1) {\n    var t1, r1, o1, f1 = {};\n    for(o1 in u2)\"key\" == o1 ? t1 = u2[o1] : \"ref\" == o1 ? r1 = u2[o1] : f1[o1] = u2[o1];\n    if (arguments.length > 2 && (f1.children = arguments.length > 3 ? $fb96b826c0c5f37a$var$n.call(arguments, 2) : i1), \"function\" == typeof l3 && null != l3.defaultProps) for(o1 in l3.defaultProps)void 0 === f1[o1] && (f1[o1] = l3.defaultProps[o1]);\n    return $fb96b826c0c5f37a$var$y(l3, f1, t1, r1, null);\n}\nfunction $fb96b826c0c5f37a$var$y(n3, i2, t2, r2, o2) {\n    var f2 = {\n        type: n3,\n        props: i2,\n        key: t2,\n        ref: r2,\n        __k: null,\n        __: null,\n        __b: 0,\n        __e: null,\n        __d: void 0,\n        __c: null,\n        __h: null,\n        constructor: void 0,\n        __v: null == o2 ? ++$fb96b826c0c5f37a$var$u : o2\n    };\n    return null == o2 && null != $fb96b826c0c5f37a$export$41c562ebe57d11e2.vnode && $fb96b826c0c5f37a$export$41c562ebe57d11e2.vnode(f2), f2;\n}\nfunction $fb96b826c0c5f37a$export$7d1e3a5e95ceca43() {\n    return {\n        current: null\n    };\n}\nfunction $fb96b826c0c5f37a$export$ffb0004e005737fa(n4) {\n    return n4.children;\n}\nfunction $fb96b826c0c5f37a$export$16fa2f45be04daa8(n5, l4) {\n    this.props = n5, this.context = l4;\n}\nfunction $fb96b826c0c5f37a$var$k(n6, l5) {\n    if (null == l5) return n6.__ ? $fb96b826c0c5f37a$var$k(n6.__, n6.__.__k.indexOf(n6) + 1) : null;\n    for(var u3; l5 < n6.__k.length; l5++)if (null != (u3 = n6.__k[l5]) && null != u3.__e) return u3.__e;\n    return \"function\" == typeof n6.type ? $fb96b826c0c5f37a$var$k(n6) : null;\n}\nfunction $fb96b826c0c5f37a$var$b(n7) {\n    var l6, u4;\n    if (null != (n7 = n7.__) && null != n7.__c) {\n        for(n7.__e = n7.__c.base = null, l6 = 0; l6 < n7.__k.length; l6++)if (null != (u4 = n7.__k[l6]) && null != u4.__e) {\n            n7.__e = n7.__c.base = u4.__e;\n            break;\n        }\n        return $fb96b826c0c5f37a$var$b(n7);\n    }\n}\nfunction $fb96b826c0c5f37a$var$m(n8) {\n    (!n8.__d && (n8.__d = !0) && $fb96b826c0c5f37a$var$t.push(n8) && !$fb96b826c0c5f37a$var$g.__r++ || $fb96b826c0c5f37a$var$o !== $fb96b826c0c5f37a$export$41c562ebe57d11e2.debounceRendering) && (($fb96b826c0c5f37a$var$o = $fb96b826c0c5f37a$export$41c562ebe57d11e2.debounceRendering) || $fb96b826c0c5f37a$var$r)($fb96b826c0c5f37a$var$g);\n}\nfunction $fb96b826c0c5f37a$var$g() {\n    for(var n9; $fb96b826c0c5f37a$var$g.__r = $fb96b826c0c5f37a$var$t.length;)n9 = $fb96b826c0c5f37a$var$t.sort(function(n10, l7) {\n        return n10.__v.__b - l7.__v.__b;\n    }), $fb96b826c0c5f37a$var$t = [], n9.some(function(n11) {\n        var l8, u5, i3, t3, r3, o3;\n        n11.__d && (r3 = (t3 = (l8 = n11).__v).__e, (o3 = l8.__P) && (u5 = [], (i3 = $fb96b826c0c5f37a$var$a({}, t3)).__v = t3.__v + 1, $fb96b826c0c5f37a$var$j(o3, t3, i3, l8.__n, void 0 !== o3.ownerSVGElement, null != t3.__h ? [\n            r3\n        ] : null, u5, null == r3 ? $fb96b826c0c5f37a$var$k(t3) : r3, t3.__h), $fb96b826c0c5f37a$var$z(u5, t3), t3.__e != r3 && $fb96b826c0c5f37a$var$b(t3)));\n    });\n}\nfunction $fb96b826c0c5f37a$var$w(n12, l9, u6, i4, t4, r4, o4, f3, s1, a1) {\n    var h1, v1, p1, _1, b1, m1, g1, w1 = i4 && i4.__k || $fb96b826c0c5f37a$var$c, A1 = w1.length;\n    for(u6.__k = [], h1 = 0; h1 < l9.length; h1++)if (null != (_1 = u6.__k[h1] = null == (_1 = l9[h1]) || \"boolean\" == typeof _1 ? null : \"string\" == typeof _1 || \"number\" == typeof _1 || \"bigint\" == typeof _1 ? $fb96b826c0c5f37a$var$y(null, _1, null, null, _1) : Array.isArray(_1) ? $fb96b826c0c5f37a$var$y($fb96b826c0c5f37a$export$ffb0004e005737fa, {\n        children: _1\n    }, null, null, null) : _1.__b > 0 ? $fb96b826c0c5f37a$var$y(_1.type, _1.props, _1.key, null, _1.__v) : _1)) {\n        if (_1.__ = u6, _1.__b = u6.__b + 1, null === (p1 = w1[h1]) || p1 && _1.key == p1.key && _1.type === p1.type) w1[h1] = void 0;\n        else for(v1 = 0; v1 < A1; v1++){\n            if ((p1 = w1[v1]) && _1.key == p1.key && _1.type === p1.type) {\n                w1[v1] = void 0;\n                break;\n            }\n            p1 = null;\n        }\n        $fb96b826c0c5f37a$var$j(n12, _1, p1 = p1 || $fb96b826c0c5f37a$var$e, t4, r4, o4, f3, s1, a1), b1 = _1.__e, (v1 = _1.ref) && p1.ref != v1 && (g1 || (g1 = []), p1.ref && g1.push(p1.ref, null, _1), g1.push(v1, _1.__c || b1, _1)), null != b1 ? (null == m1 && (m1 = b1), \"function\" == typeof _1.type && _1.__k === p1.__k ? _1.__d = s1 = $fb96b826c0c5f37a$var$x(_1, s1, n12) : s1 = $fb96b826c0c5f37a$var$P(n12, _1, p1, w1, b1, s1), \"function\" == typeof u6.type && (u6.__d = s1)) : s1 && p1.__e == s1 && s1.parentNode != n12 && (s1 = $fb96b826c0c5f37a$var$k(p1));\n    }\n    for(u6.__e = m1, h1 = A1; h1--;)null != w1[h1] && (\"function\" == typeof u6.type && null != w1[h1].__e && w1[h1].__e == u6.__d && (u6.__d = $fb96b826c0c5f37a$var$k(i4, h1 + 1)), $fb96b826c0c5f37a$var$N(w1[h1], w1[h1]));\n    if (g1) for(h1 = 0; h1 < g1.length; h1++)$fb96b826c0c5f37a$var$M(g1[h1], g1[++h1], g1[++h1]);\n}\nfunction $fb96b826c0c5f37a$var$x(n13, l10, u7) {\n    for(var i5, t5 = n13.__k, r5 = 0; t5 && r5 < t5.length; r5++)(i5 = t5[r5]) && (i5.__ = n13, l10 = \"function\" == typeof i5.type ? $fb96b826c0c5f37a$var$x(i5, l10, u7) : $fb96b826c0c5f37a$var$P(u7, i5, i5, t5, i5.__e, l10));\n    return l10;\n}\nfunction $fb96b826c0c5f37a$export$47e4c5b300681277(n14, l11) {\n    return l11 = l11 || [], null == n14 || \"boolean\" == typeof n14 || (Array.isArray(n14) ? n14.some(function(n15) {\n        $fb96b826c0c5f37a$export$47e4c5b300681277(n15, l11);\n    }) : l11.push(n14)), l11;\n}\nfunction $fb96b826c0c5f37a$var$P(n16, l12, u8, i6, t6, r6) {\n    var o5, f4, e1;\n    if (void 0 !== l12.__d) o5 = l12.__d, l12.__d = void 0;\n    else if (null == u8 || t6 != r6 || null == t6.parentNode) n: if (null == r6 || r6.parentNode !== n16) n16.appendChild(t6), o5 = null;\n    else {\n        for(f4 = r6, e1 = 0; (f4 = f4.nextSibling) && e1 < i6.length; e1 += 2)if (f4 == t6) break n;\n        n16.insertBefore(t6, r6), o5 = r6;\n    }\n    return void 0 !== o5 ? o5 : t6.nextSibling;\n}\nfunction $fb96b826c0c5f37a$var$C(n17, l13, u9, i7, t7) {\n    var r7;\n    for(r7 in u9)\"children\" === r7 || \"key\" === r7 || r7 in l13 || $fb96b826c0c5f37a$var$H(n17, r7, null, u9[r7], i7);\n    for(r7 in l13)t7 && \"function\" != typeof l13[r7] || \"children\" === r7 || \"key\" === r7 || \"value\" === r7 || \"checked\" === r7 || u9[r7] === l13[r7] || $fb96b826c0c5f37a$var$H(n17, r7, l13[r7], u9[r7], i7);\n}\nfunction $fb96b826c0c5f37a$var$$(n18, l14, u10) {\n    \"-\" === l14[0] ? n18.setProperty(l14, u10) : n18[l14] = null == u10 ? \"\" : \"number\" != typeof u10 || $fb96b826c0c5f37a$var$s.test(l14) ? u10 : u10 + \"px\";\n}\nfunction $fb96b826c0c5f37a$var$H(n19, l15, u11, i8, t8) {\n    var r8;\n    n: if (\"style\" === l15) {\n        if (\"string\" == typeof u11) n19.style.cssText = u11;\n        else {\n            if (\"string\" == typeof i8 && (n19.style.cssText = i8 = \"\"), i8) for(l15 in i8)u11 && l15 in u11 || $fb96b826c0c5f37a$var$$(n19.style, l15, \"\");\n            if (u11) for(l15 in u11)i8 && u11[l15] === i8[l15] || $fb96b826c0c5f37a$var$$(n19.style, l15, u11[l15]);\n        }\n    } else if (\"o\" === l15[0] && \"n\" === l15[1]) r8 = l15 !== (l15 = l15.replace(/Capture$/, \"\")), l15 = l15.toLowerCase() in n19 ? l15.toLowerCase().slice(2) : l15.slice(2), n19.l || (n19.l = {}), n19.l[l15 + r8] = u11, u11 ? i8 || n19.addEventListener(l15, r8 ? $fb96b826c0c5f37a$var$T : $fb96b826c0c5f37a$var$I, r8) : n19.removeEventListener(l15, r8 ? $fb96b826c0c5f37a$var$T : $fb96b826c0c5f37a$var$I, r8);\n    else if (\"dangerouslySetInnerHTML\" !== l15) {\n        if (t8) l15 = l15.replace(/xlink[H:h]/, \"h\").replace(/sName$/, \"s\");\n        else if (\"href\" !== l15 && \"list\" !== l15 && \"form\" !== l15 && \"tabIndex\" !== l15 && \"download\" !== l15 && l15 in n19) try {\n            n19[l15] = null == u11 ? \"\" : u11;\n            break n;\n        } catch (n) {}\n        \"function\" == typeof u11 || (null != u11 && (!1 !== u11 || \"a\" === l15[0] && \"r\" === l15[1]) ? n19.setAttribute(l15, u11) : n19.removeAttribute(l15));\n    }\n}\nfunction $fb96b826c0c5f37a$var$I(n20) {\n    this.l[n20.type + !1]($fb96b826c0c5f37a$export$41c562ebe57d11e2.event ? $fb96b826c0c5f37a$export$41c562ebe57d11e2.event(n20) : n20);\n}\nfunction $fb96b826c0c5f37a$var$T(n21) {\n    this.l[n21.type + !0]($fb96b826c0c5f37a$export$41c562ebe57d11e2.event ? $fb96b826c0c5f37a$export$41c562ebe57d11e2.event(n21) : n21);\n}\nfunction $fb96b826c0c5f37a$var$j(n22, u12, i9, t9, r9, o6, f5, e2, c1) {\n    var s2, h2, v2, y1, p2, k1, b2, m2, g2, x1, A2, P1 = u12.type;\n    if (void 0 !== u12.constructor) return null;\n    null != i9.__h && (c1 = i9.__h, e2 = u12.__e = i9.__e, u12.__h = null, o6 = [\n        e2\n    ]), (s2 = $fb96b826c0c5f37a$export$41c562ebe57d11e2.__b) && s2(u12);\n    try {\n        n: if (\"function\" == typeof P1) {\n            if (m2 = u12.props, g2 = (s2 = P1.contextType) && t9[s2.__c], x1 = s2 ? g2 ? g2.props.value : s2.__ : t9, i9.__c ? b2 = (h2 = u12.__c = i9.__c).__ = h2.__E : (\"prototype\" in P1 && P1.prototype.render ? u12.__c = h2 = new P1(m2, x1) : (u12.__c = h2 = new $fb96b826c0c5f37a$export$16fa2f45be04daa8(m2, x1), h2.constructor = P1, h2.render = $fb96b826c0c5f37a$var$O), g2 && g2.sub(h2), h2.props = m2, h2.state || (h2.state = {}), h2.context = x1, h2.__n = t9, v2 = h2.__d = !0, h2.__h = []), null == h2.__s && (h2.__s = h2.state), null != P1.getDerivedStateFromProps && (h2.__s == h2.state && (h2.__s = $fb96b826c0c5f37a$var$a({}, h2.__s)), $fb96b826c0c5f37a$var$a(h2.__s, P1.getDerivedStateFromProps(m2, h2.__s))), y1 = h2.props, p2 = h2.state, v2) null == P1.getDerivedStateFromProps && null != h2.componentWillMount && h2.componentWillMount(), null != h2.componentDidMount && h2.__h.push(h2.componentDidMount);\n            else {\n                if (null == P1.getDerivedStateFromProps && m2 !== y1 && null != h2.componentWillReceiveProps && h2.componentWillReceiveProps(m2, x1), !h2.__e && null != h2.shouldComponentUpdate && !1 === h2.shouldComponentUpdate(m2, h2.__s, x1) || u12.__v === i9.__v) {\n                    h2.props = m2, h2.state = h2.__s, u12.__v !== i9.__v && (h2.__d = !1), h2.__v = u12, u12.__e = i9.__e, u12.__k = i9.__k, u12.__k.forEach(function(n23) {\n                        n23 && (n23.__ = u12);\n                    }), h2.__h.length && f5.push(h2);\n                    break n;\n                }\n                null != h2.componentWillUpdate && h2.componentWillUpdate(m2, h2.__s, x1), null != h2.componentDidUpdate && h2.__h.push(function() {\n                    h2.componentDidUpdate(y1, p2, k1);\n                });\n            }\n            h2.context = x1, h2.props = m2, h2.state = h2.__s, (s2 = $fb96b826c0c5f37a$export$41c562ebe57d11e2.__r) && s2(u12), h2.__d = !1, h2.__v = u12, h2.__P = n22, s2 = h2.render(h2.props, h2.state, h2.context), h2.state = h2.__s, null != h2.getChildContext && (t9 = $fb96b826c0c5f37a$var$a($fb96b826c0c5f37a$var$a({}, t9), h2.getChildContext())), v2 || null == h2.getSnapshotBeforeUpdate || (k1 = h2.getSnapshotBeforeUpdate(y1, p2)), A2 = null != s2 && s2.type === $fb96b826c0c5f37a$export$ffb0004e005737fa && null == s2.key ? s2.props.children : s2, $fb96b826c0c5f37a$var$w(n22, Array.isArray(A2) ? A2 : [\n                A2\n            ], u12, i9, t9, r9, o6, f5, e2, c1), h2.base = u12.__e, u12.__h = null, h2.__h.length && f5.push(h2), b2 && (h2.__E = h2.__ = null), h2.__e = !1;\n        } else null == o6 && u12.__v === i9.__v ? (u12.__k = i9.__k, u12.__e = i9.__e) : u12.__e = $fb96b826c0c5f37a$var$L(i9.__e, u12, i9, t9, r9, o6, f5, c1);\n        (s2 = $fb96b826c0c5f37a$export$41c562ebe57d11e2.diffed) && s2(u12);\n    } catch (n24) {\n        u12.__v = null, (c1 || null != o6) && (u12.__e = e2, u12.__h = !!c1, o6[o6.indexOf(e2)] = null), $fb96b826c0c5f37a$export$41c562ebe57d11e2.__e(n24, u12, i9);\n    }\n}\nfunction $fb96b826c0c5f37a$var$z(n25, u13) {\n    $fb96b826c0c5f37a$export$41c562ebe57d11e2.__c && $fb96b826c0c5f37a$export$41c562ebe57d11e2.__c(u13, n25), n25.some(function(u14) {\n        try {\n            n25 = u14.__h, u14.__h = [], n25.some(function(n26) {\n                n26.call(u14);\n            });\n        } catch (n27) {\n            $fb96b826c0c5f37a$export$41c562ebe57d11e2.__e(n27, u14.__v);\n        }\n    });\n}\nfunction $fb96b826c0c5f37a$var$L(l16, u15, i10, t10, r10, o7, f6, c2) {\n    var s3, a2, v3, y2 = i10.props, p3 = u15.props, d1 = u15.type, _2 = 0;\n    if (\"svg\" === d1 && (r10 = !0), null != o7) {\n        for(; _2 < o7.length; _2++)if ((s3 = o7[_2]) && \"setAttribute\" in s3 == !!d1 && (d1 ? s3.localName === d1 : 3 === s3.nodeType)) {\n            l16 = s3, o7[_2] = null;\n            break;\n        }\n    }\n    if (null == l16) {\n        if (null === d1) return document.createTextNode(p3);\n        l16 = r10 ? document.createElementNS(\"http://www.w3.org/2000/svg\", d1) : document.createElement(d1, p3.is && p3), o7 = null, c2 = !1;\n    }\n    if (null === d1) y2 === p3 || c2 && l16.data === p3 || (l16.data = p3);\n    else {\n        if (o7 = o7 && $fb96b826c0c5f37a$var$n.call(l16.childNodes), a2 = (y2 = i10.props || $fb96b826c0c5f37a$var$e).dangerouslySetInnerHTML, v3 = p3.dangerouslySetInnerHTML, !c2) {\n            if (null != o7) for(y2 = {}, _2 = 0; _2 < l16.attributes.length; _2++)y2[l16.attributes[_2].name] = l16.attributes[_2].value;\n            (v3 || a2) && (v3 && (a2 && v3.__html == a2.__html || v3.__html === l16.innerHTML) || (l16.innerHTML = v3 && v3.__html || \"\"));\n        }\n        if ($fb96b826c0c5f37a$var$C(l16, p3, y2, r10, c2), v3) u15.__k = [];\n        else if (_2 = u15.props.children, $fb96b826c0c5f37a$var$w(l16, Array.isArray(_2) ? _2 : [\n            _2\n        ], u15, i10, t10, r10 && \"foreignObject\" !== d1, o7, f6, o7 ? o7[0] : i10.__k && $fb96b826c0c5f37a$var$k(i10, 0), c2), null != o7) for(_2 = o7.length; _2--;)null != o7[_2] && $fb96b826c0c5f37a$var$h(o7[_2]);\n        c2 || (\"value\" in p3 && void 0 !== (_2 = p3.value) && (_2 !== y2.value || _2 !== l16.value || \"progress\" === d1 && !_2) && $fb96b826c0c5f37a$var$H(l16, \"value\", _2, y2.value, !1), \"checked\" in p3 && void 0 !== (_2 = p3.checked) && _2 !== l16.checked && $fb96b826c0c5f37a$var$H(l16, \"checked\", _2, y2.checked, !1));\n    }\n    return l16;\n}\nfunction $fb96b826c0c5f37a$var$M(n28, u16, i11) {\n    try {\n        \"function\" == typeof n28 ? n28(u16) : n28.current = u16;\n    } catch (n29) {\n        $fb96b826c0c5f37a$export$41c562ebe57d11e2.__e(n29, i11);\n    }\n}\nfunction $fb96b826c0c5f37a$var$N(n30, u17, i12) {\n    var t11, r11;\n    if ($fb96b826c0c5f37a$export$41c562ebe57d11e2.unmount && $fb96b826c0c5f37a$export$41c562ebe57d11e2.unmount(n30), (t11 = n30.ref) && (t11.current && t11.current !== n30.__e || $fb96b826c0c5f37a$var$M(t11, null, u17)), null != (t11 = n30.__c)) {\n        if (t11.componentWillUnmount) try {\n            t11.componentWillUnmount();\n        } catch (n31) {\n            $fb96b826c0c5f37a$export$41c562ebe57d11e2.__e(n31, u17);\n        }\n        t11.base = t11.__P = null;\n    }\n    if (t11 = n30.__k) for(r11 = 0; r11 < t11.length; r11++)t11[r11] && $fb96b826c0c5f37a$var$N(t11[r11], u17, \"function\" != typeof n30.type);\n    i12 || null == n30.__e || $fb96b826c0c5f37a$var$h(n30.__e), n30.__e = n30.__d = void 0;\n}\nfunction $fb96b826c0c5f37a$var$O(n32, l, u18) {\n    return this.constructor(n32, u18);\n}\nfunction $fb96b826c0c5f37a$export$b3890eb0ae9dca99(u19, i13, t12) {\n    var r12, o8, f7;\n    $fb96b826c0c5f37a$export$41c562ebe57d11e2.__ && $fb96b826c0c5f37a$export$41c562ebe57d11e2.__(u19, i13), o8 = (r12 = \"function\" == typeof t12) ? null : t12 && t12.__k || i13.__k, f7 = [], $fb96b826c0c5f37a$var$j(i13, u19 = (!r12 && t12 || i13).__k = $fb96b826c0c5f37a$export$c8a8987d4410bf2d($fb96b826c0c5f37a$export$ffb0004e005737fa, null, [\n        u19\n    ]), o8 || $fb96b826c0c5f37a$var$e, $fb96b826c0c5f37a$var$e, void 0 !== i13.ownerSVGElement, !r12 && t12 ? [\n        t12\n    ] : o8 ? null : i13.firstChild ? $fb96b826c0c5f37a$var$n.call(i13.childNodes) : null, f7, !r12 && t12 ? t12 : o8 ? o8.__e : i13.firstChild, r12), $fb96b826c0c5f37a$var$z(f7, u19);\n}\nfunction $fb96b826c0c5f37a$export$fa8d919ba61d84db(n33, l17) {\n    $fb96b826c0c5f37a$export$b3890eb0ae9dca99(n33, l17, $fb96b826c0c5f37a$export$fa8d919ba61d84db);\n}\nfunction $fb96b826c0c5f37a$export$e530037191fcd5d7(l18, u20, i14) {\n    var t13, r13, o9, f8 = $fb96b826c0c5f37a$var$a({}, l18.props);\n    for(o9 in u20)\"key\" == o9 ? t13 = u20[o9] : \"ref\" == o9 ? r13 = u20[o9] : f8[o9] = u20[o9];\n    return arguments.length > 2 && (f8.children = arguments.length > 3 ? $fb96b826c0c5f37a$var$n.call(arguments, 2) : i14), $fb96b826c0c5f37a$var$y(l18.type, f8, t13 || l18.key, r13 || l18.ref, null);\n}\nfunction $fb96b826c0c5f37a$export$fd42f52fd3ae1109(n34, l19) {\n    var u21 = {\n        __c: l19 = \"__cC\" + $fb96b826c0c5f37a$var$f++,\n        __: n34,\n        Consumer: function(n35, l20) {\n            return n35.children(l20);\n        },\n        Provider: function(n36) {\n            var u22, i15;\n            return this.getChildContext || (u22 = [], (i15 = {})[l19] = this, this.getChildContext = function() {\n                return i15;\n            }, this.shouldComponentUpdate = function(n37) {\n                this.props.value !== n37.value && u22.some($fb96b826c0c5f37a$var$m);\n            }, this.sub = function(n38) {\n                u22.push(n38);\n                var l21 = n38.componentWillUnmount;\n                n38.componentWillUnmount = function() {\n                    u22.splice(u22.indexOf(n38), 1), l21 && l21.call(n38);\n                };\n            }), n36.children;\n        }\n    };\n    return u21.Provider.__ = u21.Consumer.contextType = u21;\n}\n$fb96b826c0c5f37a$var$n = $fb96b826c0c5f37a$var$c.slice, $fb96b826c0c5f37a$export$41c562ebe57d11e2 = {\n    __e: function(n39, l22) {\n        for(var u23, i16, t14; l22 = l22.__;)if ((u23 = l22.__c) && !u23.__) try {\n            if ((i16 = u23.constructor) && null != i16.getDerivedStateFromError && (u23.setState(i16.getDerivedStateFromError(n39)), t14 = u23.__d), null != u23.componentDidCatch && (u23.componentDidCatch(n39), t14 = u23.__d), t14) return u23.__E = u23;\n        } catch (l23) {\n            n39 = l23;\n        }\n        throw n39;\n    }\n}, $fb96b826c0c5f37a$var$u = 0, $fb96b826c0c5f37a$export$a8257692ac88316c = function(n40) {\n    return null != n40 && void 0 === n40.constructor;\n}, $fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype.setState = function(n41, l24) {\n    var u24;\n    u24 = null != this.__s && this.__s !== this.state ? this.__s : this.__s = $fb96b826c0c5f37a$var$a({}, this.state), \"function\" == typeof n41 && (n41 = n41($fb96b826c0c5f37a$var$a({}, u24), this.props)), n41 && $fb96b826c0c5f37a$var$a(u24, n41), null != n41 && this.__v && (l24 && this.__h.push(l24), $fb96b826c0c5f37a$var$m(this));\n}, $fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype.forceUpdate = function(n42) {\n    this.__v && (this.__e = !0, n42 && this.__h.push(n42), $fb96b826c0c5f37a$var$m(this));\n}, $fb96b826c0c5f37a$export$16fa2f45be04daa8.prototype.render = $fb96b826c0c5f37a$export$ffb0004e005737fa, $fb96b826c0c5f37a$var$t = [], $fb96b826c0c5f37a$var$r = \"function\" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, $fb96b826c0c5f37a$var$g.__r = 0, $fb96b826c0c5f37a$var$f = 0;\n\n\n\nvar $bd9dd35321b03dd4$var$o = 0;\nfunction $bd9dd35321b03dd4$export$34b9dba7ce09269b(_1, e1, n, t, f) {\n    var l, s, u = {};\n    for(s in e1)\"ref\" == s ? l = e1[s] : u[s] = e1[s];\n    var a = {\n        type: _1,\n        props: u,\n        key: n,\n        ref: l,\n        __k: null,\n        __: null,\n        __b: 0,\n        __e: null,\n        __d: void 0,\n        __c: null,\n        __h: null,\n        constructor: void 0,\n        __v: --$bd9dd35321b03dd4$var$o,\n        __source: t,\n        __self: f\n    };\n    if (\"function\" == typeof _1 && (l = _1.defaultProps)) for(s in l)void 0 === u[s] && (u[s] = l[s]);\n    return (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).vnode && (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).vnode(a), a;\n}\n\n\n\nfunction $f72b75cf796873c7$var$set(key, value) {\n    try {\n        window.localStorage[`emoji-mart.${key}`] = JSON.stringify(value);\n    } catch (error) {}\n}\nfunction $f72b75cf796873c7$var$get(key) {\n    try {\n        const value = window.localStorage[`emoji-mart.${key}`];\n        if (value) return JSON.parse(value);\n    } catch (error) {}\n}\nvar $f72b75cf796873c7$export$2e2bcd8739ae039 = {\n    set: $f72b75cf796873c7$var$set,\n    get: $f72b75cf796873c7$var$get\n};\n\n\nconst $c84d045dcc34faf5$var$CACHE = new Map();\nconst $c84d045dcc34faf5$var$VERSIONS = [\n    {\n        v: 15,\n        emoji: \"\\uD83E\\uDEE8\"\n    },\n    {\n        v: 14,\n        emoji: \"\\uD83E\\uDEE0\"\n    },\n    {\n        v: 13.1,\n        emoji: \"\\uD83D\\uDE36\\u200D\\uD83C\\uDF2B\\uFE0F\"\n    },\n    {\n        v: 13,\n        emoji: \"\\uD83E\\uDD78\"\n    },\n    {\n        v: 12.1,\n        emoji: \"\\uD83E\\uDDD1\\u200D\\uD83E\\uDDB0\"\n    },\n    {\n        v: 12,\n        emoji: \"\\uD83E\\uDD71\"\n    },\n    {\n        v: 11,\n        emoji: \"\\uD83E\\uDD70\"\n    },\n    {\n        v: 5,\n        emoji: \"\\uD83E\\uDD29\"\n    },\n    {\n        v: 4,\n        emoji: \"\\uD83D\\uDC71\\u200D\\u2640\\uFE0F\"\n    },\n    {\n        v: 3,\n        emoji: \"\\uD83E\\uDD23\"\n    },\n    {\n        v: 2,\n        emoji: \"\\uD83D\\uDC4B\\uD83C\\uDFFB\"\n    },\n    {\n        v: 1,\n        emoji: \"\\uD83D\\uDE43\"\n    }, \n];\nfunction $c84d045dcc34faf5$var$latestVersion() {\n    for (const { v: v , emoji: emoji  } of $c84d045dcc34faf5$var$VERSIONS){\n        if ($c84d045dcc34faf5$var$isSupported(emoji)) return v;\n    }\n}\nfunction $c84d045dcc34faf5$var$noCountryFlags() {\n    if ($c84d045dcc34faf5$var$isSupported(\"\\uD83C\\uDDE8\\uD83C\\uDDE6\")) return false;\n    return true;\n}\nfunction $c84d045dcc34faf5$var$isSupported(emoji) {\n    if ($c84d045dcc34faf5$var$CACHE.has(emoji)) return $c84d045dcc34faf5$var$CACHE.get(emoji);\n    const supported = $c84d045dcc34faf5$var$isEmojiSupported(emoji);\n    $c84d045dcc34faf5$var$CACHE.set(emoji, supported);\n    return supported;\n}\n// https://github.com/koala-interactive/is-emoji-supported\nconst $c84d045dcc34faf5$var$isEmojiSupported = (()=>{\n    let ctx = null;\n    try {\n        if (!navigator.userAgent.includes(\"jsdom\")) ctx = document.createElement(\"canvas\").getContext(\"2d\", {\n            willReadFrequently: true\n        });\n    } catch  {}\n    // Not in browser env\n    if (!ctx) return ()=>false;\n    const CANVAS_HEIGHT = 25;\n    const CANVAS_WIDTH = 20;\n    const textSize = Math.floor(CANVAS_HEIGHT / 2);\n    // Initialize convas context\n    ctx.font = textSize + \"px Arial, Sans-Serif\";\n    ctx.textBaseline = \"top\";\n    ctx.canvas.width = CANVAS_WIDTH * 2;\n    ctx.canvas.height = CANVAS_HEIGHT;\n    return (unicode)=>{\n        ctx.clearRect(0, 0, CANVAS_WIDTH * 2, CANVAS_HEIGHT);\n        // Draw in red on the left\n        ctx.fillStyle = \"#FF0000\";\n        ctx.fillText(unicode, 0, 22);\n        // Draw in blue on right\n        ctx.fillStyle = \"#0000FF\";\n        ctx.fillText(unicode, CANVAS_WIDTH, 22);\n        const a = ctx.getImageData(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT).data;\n        const count = a.length;\n        let i = 0;\n        // Search the first visible pixel\n        for(; i < count && !a[i + 3]; i += 4);\n        // No visible pixel\n        if (i >= count) return false;\n        // Emoji has immutable color, so we check the color of the emoji in two different colors\n        // the result show be the same.\n        const x = CANVAS_WIDTH + i / 4 % CANVAS_WIDTH;\n        const y = Math.floor(i / 4 / CANVAS_WIDTH);\n        const b = ctx.getImageData(x, y, 1, 1).data;\n        if (a[i] !== b[0] || a[i + 2] !== b[2]) return false;\n        // Some emojis are a contraction of different ones, so if it's not\n        // supported, it will show multiple characters\n        if (ctx.measureText(unicode).width >= CANVAS_WIDTH) return false;\n        // Supported\n        return true;\n    };\n})();\nvar $c84d045dcc34faf5$export$2e2bcd8739ae039 = {\n    latestVersion: $c84d045dcc34faf5$var$latestVersion,\n    noCountryFlags: $c84d045dcc34faf5$var$noCountryFlags\n};\n\n\n\nconst $b22cfd0a55410b4f$var$DEFAULTS = [\n    \"+1\",\n    \"grinning\",\n    \"kissing_heart\",\n    \"heart_eyes\",\n    \"laughing\",\n    \"stuck_out_tongue_winking_eye\",\n    \"sweat_smile\",\n    \"joy\",\n    \"scream\",\n    \"disappointed\",\n    \"unamused\",\n    \"weary\",\n    \"sob\",\n    \"sunglasses\",\n    \"heart\", \n];\nlet $b22cfd0a55410b4f$var$Index = null;\nfunction $b22cfd0a55410b4f$var$add(emoji) {\n    $b22cfd0a55410b4f$var$Index || ($b22cfd0a55410b4f$var$Index = (0, $f72b75cf796873c7$export$2e2bcd8739ae039).get(\"frequently\") || {});\n    const emojiId = emoji.id || emoji;\n    if (!emojiId) return;\n    $b22cfd0a55410b4f$var$Index[emojiId] || ($b22cfd0a55410b4f$var$Index[emojiId] = 0);\n    $b22cfd0a55410b4f$var$Index[emojiId] += 1;\n    (0, $f72b75cf796873c7$export$2e2bcd8739ae039).set(\"last\", emojiId);\n    (0, $f72b75cf796873c7$export$2e2bcd8739ae039).set(\"frequently\", $b22cfd0a55410b4f$var$Index);\n}\nfunction $b22cfd0a55410b4f$var$get({ maxFrequentRows: maxFrequentRows , perLine: perLine  }) {\n    if (!maxFrequentRows) return [];\n    $b22cfd0a55410b4f$var$Index || ($b22cfd0a55410b4f$var$Index = (0, $f72b75cf796873c7$export$2e2bcd8739ae039).get(\"frequently\"));\n    let emojiIds = [];\n    if (!$b22cfd0a55410b4f$var$Index) {\n        $b22cfd0a55410b4f$var$Index = {};\n        for(let i in $b22cfd0a55410b4f$var$DEFAULTS.slice(0, perLine)){\n            const emojiId = $b22cfd0a55410b4f$var$DEFAULTS[i];\n            $b22cfd0a55410b4f$var$Index[emojiId] = perLine - i;\n            emojiIds.push(emojiId);\n        }\n        return emojiIds;\n    }\n    const max = maxFrequentRows * perLine;\n    const last = (0, $f72b75cf796873c7$export$2e2bcd8739ae039).get(\"last\");\n    for(let emojiId in $b22cfd0a55410b4f$var$Index)emojiIds.push(emojiId);\n    emojiIds.sort((a, b)=>{\n        const aScore = $b22cfd0a55410b4f$var$Index[b];\n        const bScore = $b22cfd0a55410b4f$var$Index[a];\n        if (aScore == bScore) return a.localeCompare(b);\n        return aScore - bScore;\n    });\n    if (emojiIds.length > max) {\n        const removedIds = emojiIds.slice(max);\n        emojiIds = emojiIds.slice(0, max);\n        for (let removedId of removedIds){\n            if (removedId == last) continue;\n            delete $b22cfd0a55410b4f$var$Index[removedId];\n        }\n        if (last && emojiIds.indexOf(last) == -1) {\n            delete $b22cfd0a55410b4f$var$Index[emojiIds[emojiIds.length - 1]];\n            emojiIds.splice(-1, 1, last);\n        }\n        (0, $f72b75cf796873c7$export$2e2bcd8739ae039).set(\"frequently\", $b22cfd0a55410b4f$var$Index);\n    }\n    return emojiIds;\n}\nvar $b22cfd0a55410b4f$export$2e2bcd8739ae039 = {\n    add: $b22cfd0a55410b4f$var$add,\n    get: $b22cfd0a55410b4f$var$get,\n    DEFAULTS: $b22cfd0a55410b4f$var$DEFAULTS\n};\n\n\nvar $8d50d93417ef682a$exports = {};\n$8d50d93417ef682a$exports = JSON.parse('{\"search\":\"Search\",\"search_no_results_1\":\"Oh no!\",\"search_no_results_2\":\"That emoji couldn\\u2019t be found\",\"pick\":\"Pick an emoji\\u2026\",\"add_custom\":\"Add custom emoji\",\"categories\":{\"activity\":\"Activity\",\"custom\":\"Custom\",\"flags\":\"Flags\",\"foods\":\"Food & Drink\",\"frequent\":\"Frequently used\",\"nature\":\"Animals & Nature\",\"objects\":\"Objects\",\"people\":\"Smileys & People\",\"places\":\"Travel & Places\",\"search\":\"Search Results\",\"symbols\":\"Symbols\"},\"skins\":{\"1\":\"Default\",\"2\":\"Light\",\"3\":\"Medium-Light\",\"4\":\"Medium\",\"5\":\"Medium-Dark\",\"6\":\"Dark\",\"choose\":\"Choose default skin tone\"}}');\n\n\nvar $b247ea80b67298d5$export$2e2bcd8739ae039 = {\n    autoFocus: {\n        value: false\n    },\n    dynamicWidth: {\n        value: false\n    },\n    emojiButtonColors: {\n        value: null\n    },\n    emojiButtonRadius: {\n        value: \"100%\"\n    },\n    emojiButtonSize: {\n        value: 36\n    },\n    emojiSize: {\n        value: 24\n    },\n    emojiVersion: {\n        value: 15,\n        choices: [\n            1,\n            2,\n            3,\n            4,\n            5,\n            11,\n            12,\n            12.1,\n            13,\n            13.1,\n            14,\n            15\n        ]\n    },\n    exceptEmojis: {\n        value: []\n    },\n    icons: {\n        value: \"auto\",\n        choices: [\n            \"auto\",\n            \"outline\",\n            \"solid\"\n        ]\n    },\n    locale: {\n        value: \"en\",\n        choices: [\n            \"en\",\n            \"ar\",\n            \"be\",\n            \"cs\",\n            \"de\",\n            \"es\",\n            \"fa\",\n            \"fi\",\n            \"fr\",\n            \"hi\",\n            \"it\",\n            \"ja\",\n            \"ko\",\n            \"nl\",\n            \"pl\",\n            \"pt\",\n            \"ru\",\n            \"sa\",\n            \"tr\",\n            \"uk\",\n            \"vi\",\n            \"zh\", \n        ]\n    },\n    maxFrequentRows: {\n        value: 4\n    },\n    navPosition: {\n        value: \"top\",\n        choices: [\n            \"top\",\n            \"bottom\",\n            \"none\"\n        ]\n    },\n    noCountryFlags: {\n        value: false\n    },\n    noResultsEmoji: {\n        value: null\n    },\n    perLine: {\n        value: 9\n    },\n    previewEmoji: {\n        value: null\n    },\n    previewPosition: {\n        value: \"bottom\",\n        choices: [\n            \"top\",\n            \"bottom\",\n            \"none\"\n        ]\n    },\n    searchPosition: {\n        value: \"sticky\",\n        choices: [\n            \"sticky\",\n            \"static\",\n            \"none\"\n        ]\n    },\n    set: {\n        value: \"native\",\n        choices: [\n            \"native\",\n            \"apple\",\n            \"facebook\",\n            \"google\",\n            \"twitter\"\n        ]\n    },\n    skin: {\n        value: 1,\n        choices: [\n            1,\n            2,\n            3,\n            4,\n            5,\n            6\n        ]\n    },\n    skinTonePosition: {\n        value: \"preview\",\n        choices: [\n            \"preview\",\n            \"search\",\n            \"none\"\n        ]\n    },\n    theme: {\n        value: \"auto\",\n        choices: [\n            \"auto\",\n            \"light\",\n            \"dark\"\n        ]\n    },\n    // Data\n    categories: null,\n    categoryIcons: null,\n    custom: null,\n    data: null,\n    i18n: null,\n    // Callbacks\n    getImageURL: null,\n    getSpritesheetURL: null,\n    onAddCustomEmoji: null,\n    onClickOutside: null,\n    onEmojiSelect: null,\n    // Deprecated\n    stickySearch: {\n        deprecated: true,\n        value: true\n    }\n};\n\n\n\nlet $7adb23b0109cc36a$export$dbe3113d60765c1a = null;\nlet $7adb23b0109cc36a$export$2d0294657ab35f1b = null;\nconst $7adb23b0109cc36a$var$fetchCache = {};\nasync function $7adb23b0109cc36a$var$fetchJSON(src) {\n    if ($7adb23b0109cc36a$var$fetchCache[src]) return $7adb23b0109cc36a$var$fetchCache[src];\n    const response = await fetch(src);\n    const json = await response.json();\n    $7adb23b0109cc36a$var$fetchCache[src] = json;\n    return json;\n}\nlet $7adb23b0109cc36a$var$promise = null;\nlet $7adb23b0109cc36a$var$initiated = false;\nlet $7adb23b0109cc36a$var$initCallback = null;\nlet $7adb23b0109cc36a$var$initialized = false;\nfunction $7adb23b0109cc36a$export$2cd8252107eb640b(options, { caller: caller  } = {}) {\n    $7adb23b0109cc36a$var$promise || ($7adb23b0109cc36a$var$promise = new Promise((resolve)=>{\n        $7adb23b0109cc36a$var$initCallback = resolve;\n    }));\n    if (options) $7adb23b0109cc36a$var$_init(options);\n    else if (caller && !$7adb23b0109cc36a$var$initialized) console.warn(`\\`${caller}\\` requires data to be initialized first. Promise will be pending until \\`init\\` is called.`);\n    return $7adb23b0109cc36a$var$promise;\n}\nasync function $7adb23b0109cc36a$var$_init(props) {\n    $7adb23b0109cc36a$var$initialized = true;\n    let { emojiVersion: emojiVersion , set: set , locale: locale  } = props;\n    emojiVersion || (emojiVersion = (0, $b247ea80b67298d5$export$2e2bcd8739ae039).emojiVersion.value);\n    set || (set = (0, $b247ea80b67298d5$export$2e2bcd8739ae039).set.value);\n    locale || (locale = (0, $b247ea80b67298d5$export$2e2bcd8739ae039).locale.value);\n    if (!$7adb23b0109cc36a$export$2d0294657ab35f1b) {\n        $7adb23b0109cc36a$export$2d0294657ab35f1b = (typeof props.data === \"function\" ? await props.data() : props.data) || await $7adb23b0109cc36a$var$fetchJSON(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/sets/${emojiVersion}/${set}.json`);\n        $7adb23b0109cc36a$export$2d0294657ab35f1b.emoticons = {};\n        $7adb23b0109cc36a$export$2d0294657ab35f1b.natives = {};\n        $7adb23b0109cc36a$export$2d0294657ab35f1b.categories.unshift({\n            id: \"frequent\",\n            emojis: []\n        });\n        for(const alias in $7adb23b0109cc36a$export$2d0294657ab35f1b.aliases){\n            const emojiId = $7adb23b0109cc36a$export$2d0294657ab35f1b.aliases[alias];\n            const emoji = $7adb23b0109cc36a$export$2d0294657ab35f1b.emojis[emojiId];\n            if (!emoji) continue;\n            emoji.aliases || (emoji.aliases = []);\n            emoji.aliases.push(alias);\n        }\n        $7adb23b0109cc36a$export$2d0294657ab35f1b.originalCategories = $7adb23b0109cc36a$export$2d0294657ab35f1b.categories;\n    } else $7adb23b0109cc36a$export$2d0294657ab35f1b.categories = $7adb23b0109cc36a$export$2d0294657ab35f1b.categories.filter((c)=>{\n        const isCustom = !!c.name;\n        if (!isCustom) return true;\n        return false;\n    });\n    $7adb23b0109cc36a$export$dbe3113d60765c1a = (typeof props.i18n === \"function\" ? await props.i18n() : props.i18n) || (locale == \"en\" ? (0, (/*@__PURE__*/$parcel$interopDefault($8d50d93417ef682a$exports))) : await $7adb23b0109cc36a$var$fetchJSON(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/i18n/${locale}.json`));\n    if (props.custom) for(let i in props.custom){\n        i = parseInt(i);\n        const category = props.custom[i];\n        const prevCategory = props.custom[i - 1];\n        if (!category.emojis || !category.emojis.length) continue;\n        category.id || (category.id = `custom_${i + 1}`);\n        category.name || (category.name = $7adb23b0109cc36a$export$dbe3113d60765c1a.categories.custom);\n        if (prevCategory && !category.icon) category.target = prevCategory.target || prevCategory;\n        $7adb23b0109cc36a$export$2d0294657ab35f1b.categories.push(category);\n        for (const emoji of category.emojis)$7adb23b0109cc36a$export$2d0294657ab35f1b.emojis[emoji.id] = emoji;\n    }\n    if (props.categories) $7adb23b0109cc36a$export$2d0294657ab35f1b.categories = $7adb23b0109cc36a$export$2d0294657ab35f1b.originalCategories.filter((c)=>{\n        return props.categories.indexOf(c.id) != -1;\n    }).sort((c1, c2)=>{\n        const i1 = props.categories.indexOf(c1.id);\n        const i2 = props.categories.indexOf(c2.id);\n        return i1 - i2;\n    });\n    let latestVersionSupport = null;\n    let noCountryFlags = null;\n    if (set == \"native\") {\n        latestVersionSupport = (0, $c84d045dcc34faf5$export$2e2bcd8739ae039).latestVersion();\n        noCountryFlags = props.noCountryFlags || (0, $c84d045dcc34faf5$export$2e2bcd8739ae039).noCountryFlags();\n    }\n    let categoryIndex = $7adb23b0109cc36a$export$2d0294657ab35f1b.categories.length;\n    let resetSearchIndex = false;\n    while(categoryIndex--){\n        const category = $7adb23b0109cc36a$export$2d0294657ab35f1b.categories[categoryIndex];\n        if (category.id == \"frequent\") {\n            let { maxFrequentRows: maxFrequentRows , perLine: perLine  } = props;\n            maxFrequentRows = maxFrequentRows >= 0 ? maxFrequentRows : (0, $b247ea80b67298d5$export$2e2bcd8739ae039).maxFrequentRows.value;\n            perLine || (perLine = (0, $b247ea80b67298d5$export$2e2bcd8739ae039).perLine.value);\n            category.emojis = (0, $b22cfd0a55410b4f$export$2e2bcd8739ae039).get({\n                maxFrequentRows: maxFrequentRows,\n                perLine: perLine\n            });\n        }\n        if (!category.emojis || !category.emojis.length) {\n            $7adb23b0109cc36a$export$2d0294657ab35f1b.categories.splice(categoryIndex, 1);\n            continue;\n        }\n        const { categoryIcons: categoryIcons  } = props;\n        if (categoryIcons) {\n            const icon = categoryIcons[category.id];\n            if (icon && !category.icon) category.icon = icon;\n        }\n        let emojiIndex = category.emojis.length;\n        while(emojiIndex--){\n            const emojiId = category.emojis[emojiIndex];\n            const emoji = emojiId.id ? emojiId : $7adb23b0109cc36a$export$2d0294657ab35f1b.emojis[emojiId];\n            const ignore = ()=>{\n                category.emojis.splice(emojiIndex, 1);\n            };\n            if (!emoji || props.exceptEmojis && props.exceptEmojis.includes(emoji.id)) {\n                ignore();\n                continue;\n            }\n            if (latestVersionSupport && emoji.version > latestVersionSupport) {\n                ignore();\n                continue;\n            }\n            if (noCountryFlags && category.id == \"flags\") {\n                if (!(0, $e6eae5155b87f591$export$bcb25aa587e9cb13).includes(emoji.id)) {\n                    ignore();\n                    continue;\n                }\n            }\n            if (!emoji.search) {\n                resetSearchIndex = true;\n                emoji.search = \",\" + [\n                    [\n                        emoji.id,\n                        false\n                    ],\n                    [\n                        emoji.name,\n                        true\n                    ],\n                    [\n                        emoji.keywords,\n                        false\n                    ],\n                    [\n                        emoji.emoticons,\n                        false\n                    ], \n                ].map(([strings, split])=>{\n                    if (!strings) return;\n                    return (Array.isArray(strings) ? strings : [\n                        strings\n                    ]).map((string)=>{\n                        return (split ? string.split(/[-|_|\\s]+/) : [\n                            string\n                        ]).map((s)=>s.toLowerCase());\n                    }).flat();\n                }).flat().filter((a)=>a && a.trim()).join(\",\");\n                if (emoji.emoticons) for (const emoticon of emoji.emoticons){\n                    if ($7adb23b0109cc36a$export$2d0294657ab35f1b.emoticons[emoticon]) continue;\n                    $7adb23b0109cc36a$export$2d0294657ab35f1b.emoticons[emoticon] = emoji.id;\n                }\n                let skinIndex = 0;\n                for (const skin of emoji.skins){\n                    if (!skin) continue;\n                    skinIndex++;\n                    const { native: native  } = skin;\n                    if (native) {\n                        $7adb23b0109cc36a$export$2d0294657ab35f1b.natives[native] = emoji.id;\n                        emoji.search += `,${native}`;\n                    }\n                    const skinShortcodes = skinIndex == 1 ? \"\" : `:skin-tone-${skinIndex}:`;\n                    skin.shortcodes = `:${emoji.id}:${skinShortcodes}`;\n                }\n            }\n        }\n    }\n    if (resetSearchIndex) (0, $c4d155af13ad4d4b$export$2e2bcd8739ae039).reset();\n    $7adb23b0109cc36a$var$initCallback();\n}\nfunction $7adb23b0109cc36a$export$75fe5f91d452f94b(props, defaultProps, element) {\n    props || (props = {});\n    const _props = {};\n    for(let k in defaultProps)_props[k] = $7adb23b0109cc36a$export$88c9ddb45cea7241(k, props, defaultProps, element);\n    return _props;\n}\nfunction $7adb23b0109cc36a$export$88c9ddb45cea7241(propName, props, defaultProps, element) {\n    const defaults = defaultProps[propName];\n    let value = element && element.getAttribute(propName) || (props[propName] != null && props[propName] != undefined ? props[propName] : null);\n    if (!defaults) return value;\n    if (value != null && defaults.value && typeof defaults.value != typeof value) {\n        if (typeof defaults.value == \"boolean\") value = value == \"false\" ? false : true;\n        else value = defaults.value.constructor(value);\n    }\n    if (defaults.transform && value) value = defaults.transform(value);\n    if (value == null || defaults.choices && defaults.choices.indexOf(value) == -1) value = defaults.value;\n    return value;\n}\n\n\nconst $c4d155af13ad4d4b$var$SHORTCODES_REGEX = /^(?:\\:([^\\:]+)\\:)(?:\\:skin-tone-(\\d)\\:)?$/;\nlet $c4d155af13ad4d4b$var$Pool = null;\nfunction $c4d155af13ad4d4b$var$get(emojiId) {\n    if (emojiId.id) return emojiId;\n    return (0, $7adb23b0109cc36a$export$2d0294657ab35f1b).emojis[emojiId] || (0, $7adb23b0109cc36a$export$2d0294657ab35f1b).emojis[(0, $7adb23b0109cc36a$export$2d0294657ab35f1b).aliases[emojiId]] || (0, $7adb23b0109cc36a$export$2d0294657ab35f1b).emojis[(0, $7adb23b0109cc36a$export$2d0294657ab35f1b).natives[emojiId]];\n}\nfunction $c4d155af13ad4d4b$var$reset() {\n    $c4d155af13ad4d4b$var$Pool = null;\n}\nasync function $c4d155af13ad4d4b$var$search(value, { maxResults: maxResults , caller: caller  } = {}) {\n    if (!value || !value.trim().length) return null;\n    maxResults || (maxResults = 90);\n    await (0, $7adb23b0109cc36a$export$2cd8252107eb640b)(null, {\n        caller: caller || \"SearchIndex.search\"\n    });\n    const values = value.toLowerCase().replace(/(\\w)-/, \"$1 \").split(/[\\s|,]+/).filter((word, i, words)=>{\n        return word.trim() && words.indexOf(word) == i;\n    });\n    if (!values.length) return;\n    let pool = $c4d155af13ad4d4b$var$Pool || ($c4d155af13ad4d4b$var$Pool = Object.values((0, $7adb23b0109cc36a$export$2d0294657ab35f1b).emojis));\n    let results, scores;\n    for (const value1 of values){\n        if (!pool.length) break;\n        results = [];\n        scores = {};\n        for (const emoji of pool){\n            if (!emoji.search) continue;\n            const score = emoji.search.indexOf(`,${value1}`);\n            if (score == -1) continue;\n            results.push(emoji);\n            scores[emoji.id] || (scores[emoji.id] = 0);\n            scores[emoji.id] += emoji.id == value1 ? 0 : score + 1;\n        }\n        pool = results;\n    }\n    if (results.length < 2) return results;\n    results.sort((a, b)=>{\n        const aScore = scores[a.id];\n        const bScore = scores[b.id];\n        if (aScore == bScore) return a.id.localeCompare(b.id);\n        return aScore - bScore;\n    });\n    if (results.length > maxResults) results = results.slice(0, maxResults);\n    return results;\n}\nvar $c4d155af13ad4d4b$export$2e2bcd8739ae039 = {\n    search: $c4d155af13ad4d4b$var$search,\n    get: $c4d155af13ad4d4b$var$get,\n    reset: $c4d155af13ad4d4b$var$reset,\n    SHORTCODES_REGEX: $c4d155af13ad4d4b$var$SHORTCODES_REGEX\n};\n\n\nconst $e6eae5155b87f591$export$bcb25aa587e9cb13 = [\n    \"checkered_flag\",\n    \"crossed_flags\",\n    \"pirate_flag\",\n    \"rainbow-flag\",\n    \"transgender_flag\",\n    \"triangular_flag_on_post\",\n    \"waving_black_flag\",\n    \"waving_white_flag\", \n];\n\n\nfunction $693b183b0a78708f$export$9cb4719e2e525b7a(a, b) {\n    return Array.isArray(a) && Array.isArray(b) && a.length === b.length && a.every((val, index)=>val == b[index]);\n}\nasync function $693b183b0a78708f$export$e772c8ff12451969(frames = 1) {\n    for(let _ in [\n        ...Array(frames).keys()\n    ])await new Promise(requestAnimationFrame);\n}\nfunction $693b183b0a78708f$export$d10ac59fbe52a745(emoji, { skinIndex: skinIndex = 0  } = {}) {\n    const skin = emoji.skins[skinIndex] || (()=>{\n        skinIndex = 0;\n        return emoji.skins[skinIndex];\n    })();\n    const emojiData = {\n        id: emoji.id,\n        name: emoji.name,\n        native: skin.native,\n        unified: skin.unified,\n        keywords: emoji.keywords,\n        shortcodes: skin.shortcodes || emoji.shortcodes\n    };\n    if (emoji.skins.length > 1) emojiData.skin = skinIndex + 1;\n    if (skin.src) emojiData.src = skin.src;\n    if (emoji.aliases && emoji.aliases.length) emojiData.aliases = emoji.aliases;\n    if (emoji.emoticons && emoji.emoticons.length) emojiData.emoticons = emoji.emoticons;\n    return emojiData;\n}\nasync function $693b183b0a78708f$export$5ef5574deca44bc0(nativeString) {\n    const results = await (0, $c4d155af13ad4d4b$export$2e2bcd8739ae039).search(nativeString, {\n        maxResults: 1,\n        caller: \"getEmojiDataFromNative\"\n    });\n    if (!results || !results.length) return null;\n    const emoji = results[0];\n    let skinIndex = 0;\n    for (let skin of emoji.skins){\n        if (skin.native == nativeString) break;\n        skinIndex++;\n    }\n    return $693b183b0a78708f$export$d10ac59fbe52a745(emoji, {\n        skinIndex: skinIndex\n    });\n}\n\n\n\n\n\nconst $fcccfb36ed0cde68$var$categories = {\n    activity: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113\"\n            })\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M16.17 337.5c0 44.98 7.565 83.54 13.98 107.9C35.22 464.3 50.46 496 174.9 496c9.566 0 19.59-.4707 29.84-1.271L17.33 307.3C16.53 317.6 16.17 327.7 16.17 337.5zM495.8 174.5c0-44.98-7.565-83.53-13.98-107.9c-4.688-17.54-18.34-31.23-36.04-35.95C435.5 27.91 392.9 16 337 16c-9.564 0-19.59 .4707-29.84 1.271l187.5 187.5C495.5 194.4 495.8 184.3 495.8 174.5zM26.77 248.8l236.3 236.3c142-36.1 203.9-150.4 222.2-221.1L248.9 26.87C106.9 62.96 45.07 177.2 26.77 248.8zM256 335.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L164.7 283.3C161.6 280.2 160 276.1 160 271.1c0-8.529 6.865-16 16-16c4.095 0 8.189 1.562 11.31 4.688l64.01 64C254.4 327.8 256 331.9 256 335.1zM304 287.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L212.7 235.3C209.6 232.2 208 228.1 208 223.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01C302.5 279.8 304 283.9 304 287.1zM256 175.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01c3.125 3.125 4.688 7.219 4.688 11.31c0 9.133-7.468 16-16 16c-4.094 0-8.189-1.562-11.31-4.688l-64.01-64.01C257.6 184.2 256 180.1 256 175.1z\"\n            })\n        })\n    },\n    custom: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 448 512\",\n        children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n            d: \"M417.1 368c-5.937 10.27-16.69 16-27.75 16c-5.422 0-10.92-1.375-15.97-4.281L256 311.4V448c0 17.67-14.33 32-31.1 32S192 465.7 192 448V311.4l-118.3 68.29C68.67 382.6 63.17 384 57.75 384c-11.06 0-21.81-5.734-27.75-16c-8.828-15.31-3.594-34.88 11.72-43.72L159.1 256L41.72 187.7C26.41 178.9 21.17 159.3 29.1 144C36.63 132.5 49.26 126.7 61.65 128.2C65.78 128.7 69.88 130.1 73.72 132.3L192 200.6V64c0-17.67 14.33-32 32-32S256 46.33 256 64v136.6l118.3-68.29c3.838-2.213 7.939-3.539 12.07-4.051C398.7 126.7 411.4 132.5 417.1 144c8.828 15.31 3.594 34.88-11.72 43.72L288 256l118.3 68.28C421.6 333.1 426.8 352.7 417.1 368z\"\n        })\n    }),\n    flags: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z\"\n            })\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z\"\n            })\n        })\n    },\n    foods: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9\"\n            })\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M481.9 270.1C490.9 279.1 496 291.3 496 304C496 316.7 490.9 328.9 481.9 337.9C472.9 346.9 460.7 352 448 352H64C51.27 352 39.06 346.9 30.06 337.9C21.06 328.9 16 316.7 16 304C16 291.3 21.06 279.1 30.06 270.1C39.06 261.1 51.27 256 64 256H448C460.7 256 472.9 261.1 481.9 270.1zM475.3 388.7C478.3 391.7 480 395.8 480 400V416C480 432.1 473.3 449.3 461.3 461.3C449.3 473.3 432.1 480 416 480H96C79.03 480 62.75 473.3 50.75 461.3C38.74 449.3 32 432.1 32 416V400C32 395.8 33.69 391.7 36.69 388.7C39.69 385.7 43.76 384 48 384H464C468.2 384 472.3 385.7 475.3 388.7zM50.39 220.8C45.93 218.6 42.03 215.5 38.97 211.6C35.91 207.7 33.79 203.2 32.75 198.4C31.71 193.5 31.8 188.5 32.99 183.7C54.98 97.02 146.5 32 256 32C365.5 32 457 97.02 479 183.7C480.2 188.5 480.3 193.5 479.2 198.4C478.2 203.2 476.1 207.7 473 211.6C469.1 215.5 466.1 218.6 461.6 220.8C457.2 222.9 452.3 224 447.3 224H64.67C59.73 224 54.84 222.9 50.39 220.8zM372.7 116.7C369.7 119.7 368 123.8 368 128C368 131.2 368.9 134.3 370.7 136.9C372.5 139.5 374.1 141.6 377.9 142.8C380.8 143.1 384 144.3 387.1 143.7C390.2 143.1 393.1 141.6 395.3 139.3C397.6 137.1 399.1 134.2 399.7 131.1C400.3 128 399.1 124.8 398.8 121.9C397.6 118.1 395.5 116.5 392.9 114.7C390.3 112.9 387.2 111.1 384 111.1C379.8 111.1 375.7 113.7 372.7 116.7V116.7zM244.7 84.69C241.7 87.69 240 91.76 240 96C240 99.16 240.9 102.3 242.7 104.9C244.5 107.5 246.1 109.6 249.9 110.8C252.8 111.1 256 112.3 259.1 111.7C262.2 111.1 265.1 109.6 267.3 107.3C269.6 105.1 271.1 102.2 271.7 99.12C272.3 96.02 271.1 92.8 270.8 89.88C269.6 86.95 267.5 84.45 264.9 82.7C262.3 80.94 259.2 79.1 256 79.1C251.8 79.1 247.7 81.69 244.7 84.69V84.69zM116.7 116.7C113.7 119.7 112 123.8 112 128C112 131.2 112.9 134.3 114.7 136.9C116.5 139.5 118.1 141.6 121.9 142.8C124.8 143.1 128 144.3 131.1 143.7C134.2 143.1 137.1 141.6 139.3 139.3C141.6 137.1 143.1 134.2 143.7 131.1C144.3 128 143.1 124.8 142.8 121.9C141.6 118.1 139.5 116.5 136.9 114.7C134.3 112.9 131.2 111.1 128 111.1C123.8 111.1 119.7 113.7 116.7 116.7L116.7 116.7z\"\n            })\n        })\n    },\n    frequent: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M13 4h-2l-.001 7H9v2h2v2h2v-2h4v-2h-4z\"\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\"\n                })\n            ]\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z\"\n            })\n        })\n    },\n    nature: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8\"\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235\"\n                })\n            ]\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 576 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M332.7 19.85C334.6 8.395 344.5 0 356.1 0C363.6 0 370.6 3.52 375.1 9.502L392 32H444.1C456.8 32 469.1 37.06 478.1 46.06L496 64H552C565.3 64 576 74.75 576 88V112C576 156.2 540.2 192 496 192H426.7L421.6 222.5L309.6 158.5L332.7 19.85zM448 64C439.2 64 432 71.16 432 80C432 88.84 439.2 96 448 96C456.8 96 464 88.84 464 80C464 71.16 456.8 64 448 64zM416 256.1V480C416 497.7 401.7 512 384 512H352C334.3 512 320 497.7 320 480V364.8C295.1 377.1 268.8 384 240 384C211.2 384 184 377.1 160 364.8V480C160 497.7 145.7 512 128 512H96C78.33 512 64 497.7 64 480V249.8C35.23 238.9 12.64 214.5 4.836 183.3L.9558 167.8C-3.331 150.6 7.094 133.2 24.24 128.1C41.38 124.7 58.76 135.1 63.05 152.2L66.93 167.8C70.49 182 83.29 191.1 97.97 191.1H303.8L416 256.1z\"\n            })\n        })\n    },\n    objects: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z\"\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789\"\n                })\n            ]\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 384 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z\"\n            })\n        })\n    },\n    people: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\"\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0\"\n                })\n            ]\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256 432C332.1 432 396.2 382 415.2 314.1C419.1 300.4 407.8 288 393.6 288H118.4C104.2 288 92.92 300.4 96.76 314.1C115.8 382 179.9 432 256 432V432zM176.4 160C158.7 160 144.4 174.3 144.4 192C144.4 209.7 158.7 224 176.4 224C194 224 208.4 209.7 208.4 192C208.4 174.3 194 160 176.4 160zM336.4 224C354 224 368.4 209.7 368.4 192C368.4 174.3 354 160 336.4 160C318.7 160 304.4 174.3 304.4 192C304.4 209.7 318.7 224 336.4 224z\"\n            })\n        })\n    },\n    places: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5\"\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                    d: \"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z\"\n                })\n            ]\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M39.61 196.8L74.8 96.29C88.27 57.78 124.6 32 165.4 32H346.6C387.4 32 423.7 57.78 437.2 96.29L472.4 196.8C495.6 206.4 512 229.3 512 256V448C512 465.7 497.7 480 480 480H448C430.3 480 416 465.7 416 448V400H96V448C96 465.7 81.67 480 64 480H32C14.33 480 0 465.7 0 448V256C0 229.3 16.36 206.4 39.61 196.8V196.8zM109.1 192H402.9L376.8 117.4C372.3 104.6 360.2 96 346.6 96H165.4C151.8 96 139.7 104.6 135.2 117.4L109.1 192zM96 256C78.33 256 64 270.3 64 288C64 305.7 78.33 320 96 320C113.7 320 128 305.7 128 288C128 270.3 113.7 256 96 256zM416 320C433.7 320 448 305.7 448 288C448 270.3 433.7 256 416 256C398.3 256 384 270.3 384 288C384 305.7 398.3 320 416 320z\"\n            })\n        })\n    },\n    symbols: {\n        outline: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76\"\n            })\n        }),\n        solid: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 512 512\",\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n                d: \"M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z\"\n            })\n        })\n    }\n};\nconst $fcccfb36ed0cde68$var$search = {\n    loupe: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 20 20\",\n        children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n            d: \"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"\n        })\n    }),\n    delete: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 20 20\",\n        children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"path\", {\n            d: \"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z\"\n        })\n    })\n};\nvar $fcccfb36ed0cde68$export$2e2bcd8739ae039 = {\n    categories: $fcccfb36ed0cde68$var$categories,\n    search: $fcccfb36ed0cde68$var$search\n};\n\n\n\n\n\nfunction $254755d3f438722f$export$2e2bcd8739ae039(props) {\n    let { id: id , skin: skin , emoji: emoji  } = props;\n    if (props.shortcodes) {\n        const matches = props.shortcodes.match((0, $c4d155af13ad4d4b$export$2e2bcd8739ae039).SHORTCODES_REGEX);\n        if (matches) {\n            id = matches[1];\n            if (matches[2]) skin = matches[2];\n        }\n    }\n    emoji || (emoji = (0, $c4d155af13ad4d4b$export$2e2bcd8739ae039).get(id || props.native));\n    if (!emoji) return props.fallback;\n    const emojiSkin = emoji.skins[skin - 1] || emoji.skins[0];\n    const imageSrc = emojiSkin.src || (props.set != \"native\" && !props.spritesheet ? typeof props.getImageURL === \"function\" ? props.getImageURL(props.set, emojiSkin.unified) : `https://cdn.jsdelivr.net/npm/emoji-datasource-${props.set}@15.0.1/img/${props.set}/64/${emojiSkin.unified}.png` : undefined);\n    const spritesheetSrc = typeof props.getSpritesheetURL === \"function\" ? props.getSpritesheetURL(props.set) : `https://cdn.jsdelivr.net/npm/emoji-datasource-${props.set}@15.0.1/img/${props.set}/sheets-256/64.png`;\n    return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n        class: \"emoji-mart-emoji\",\n        \"data-emoji-set\": props.set,\n        children: imageSrc ? /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"img\", {\n            style: {\n                maxWidth: props.size || \"1em\",\n                maxHeight: props.size || \"1em\",\n                display: \"inline-block\"\n            },\n            alt: emojiSkin.native || emojiSkin.shortcodes,\n            src: imageSrc\n        }) : props.set == \"native\" ? /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n            style: {\n                fontSize: props.size,\n                fontFamily: '\"EmojiMart\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Segoe UI\", \"Apple Color Emoji\", \"Twemoji Mozilla\", \"Noto Color Emoji\", \"Android Emoji\"'\n            },\n            children: emojiSkin.native\n        }) : /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n            style: {\n                display: \"block\",\n                width: props.size,\n                height: props.size,\n                backgroundImage: `url(${spritesheetSrc})`,\n                backgroundSize: `${100 * (0, $7adb23b0109cc36a$export$2d0294657ab35f1b).sheet.cols}% ${100 * (0, $7adb23b0109cc36a$export$2d0294657ab35f1b).sheet.rows}%`,\n                backgroundPosition: `${100 / ((0, $7adb23b0109cc36a$export$2d0294657ab35f1b).sheet.cols - 1) * emojiSkin.x}% ${100 / ((0, $7adb23b0109cc36a$export$2d0294657ab35f1b).sheet.rows - 1) * emojiSkin.y}%`\n            }\n        })\n    });\n}\n\n\n\n\n\n\n\nconst $6f57cc9cd54c5aaa$var$WindowHTMLElement = typeof window !== \"undefined\" && window.HTMLElement ? window.HTMLElement : Object;\nclass $6f57cc9cd54c5aaa$export$2e2bcd8739ae039 extends $6f57cc9cd54c5aaa$var$WindowHTMLElement {\n    static get observedAttributes() {\n        return Object.keys(this.Props);\n    }\n    update(props = {}) {\n        for(let k in props)this.attributeChangedCallback(k, null, props[k]);\n    }\n    attributeChangedCallback(attr, _, newValue) {\n        if (!this.component) return;\n        const value = (0, $7adb23b0109cc36a$export$88c9ddb45cea7241)(attr, {\n            [attr]: newValue\n        }, this.constructor.Props, this);\n        if (this.component.componentWillReceiveProps) this.component.componentWillReceiveProps({\n            [attr]: value\n        });\n        else {\n            this.component.props[attr] = value;\n            this.component.forceUpdate();\n        }\n    }\n    disconnectedCallback() {\n        this.disconnected = true;\n        if (this.component && this.component.unregister) this.component.unregister();\n    }\n    constructor(props = {}){\n        super();\n        this.props = props;\n        if (props.parent || props.ref) {\n            let ref = null;\n            const parent = props.parent || (ref = props.ref && props.ref.current);\n            if (ref) ref.innerHTML = \"\";\n            if (parent) parent.appendChild(this);\n        }\n    }\n}\n\n\n\nclass $26f27c338a96b1a6$export$2e2bcd8739ae039 extends (0, $6f57cc9cd54c5aaa$export$2e2bcd8739ae039) {\n    setShadow() {\n        this.attachShadow({\n            mode: \"open\"\n        });\n    }\n    injectStyles(styles) {\n        if (!styles) return;\n        const style = document.createElement(\"style\");\n        style.textContent = styles;\n        this.shadowRoot.insertBefore(style, this.shadowRoot.firstChild);\n    }\n    constructor(props, { styles: styles  } = {}){\n        super(props);\n        this.setShadow();\n        this.injectStyles(styles);\n    }\n}\n\n\n\n\n\n\nvar $3d90f6e46fb2dd47$export$2e2bcd8739ae039 = {\n    fallback: \"\",\n    id: \"\",\n    native: \"\",\n    shortcodes: \"\",\n    size: {\n        value: \"\",\n        transform: (value)=>{\n            // If the value is a number, then we assume it’s a pixel value.\n            if (!/\\D/.test(value)) return `${value}px`;\n            return value;\n        }\n    },\n    // Shared\n    set: (0, $b247ea80b67298d5$export$2e2bcd8739ae039).set,\n    skin: (0, $b247ea80b67298d5$export$2e2bcd8739ae039).skin\n};\n\n\nclass $331b4160623139bf$export$2e2bcd8739ae039 extends (0, $6f57cc9cd54c5aaa$export$2e2bcd8739ae039) {\n    async connectedCallback() {\n        const props = (0, $7adb23b0109cc36a$export$75fe5f91d452f94b)(this.props, (0, $3d90f6e46fb2dd47$export$2e2bcd8739ae039), this);\n        props.element = this;\n        props.ref = (component)=>{\n            this.component = component;\n        };\n        await (0, $7adb23b0109cc36a$export$2cd8252107eb640b)();\n        if (this.disconnected) return;\n        (0, $fb96b826c0c5f37a$export$b3890eb0ae9dca99)(/*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)((0, $254755d3f438722f$export$2e2bcd8739ae039), {\n            ...props\n        }), this);\n    }\n    constructor(props){\n        super(props);\n    }\n}\n(0, $c770c458706daa72$export$2e2bcd8739ae039)($331b4160623139bf$export$2e2bcd8739ae039, \"Props\", (0, $3d90f6e46fb2dd47$export$2e2bcd8739ae039));\nif (typeof customElements !== \"undefined\" && !customElements.get(\"em-emoji\")) customElements.define(\"em-emoji\", $331b4160623139bf$export$2e2bcd8739ae039);\n\n\n\n\n\n\nvar $1a9a8ef576b7773d$var$t, $1a9a8ef576b7773d$var$u, $1a9a8ef576b7773d$var$r, $1a9a8ef576b7773d$var$o = 0, $1a9a8ef576b7773d$var$i = [], $1a9a8ef576b7773d$var$c = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__b, $1a9a8ef576b7773d$var$f = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__r, $1a9a8ef576b7773d$var$e = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).diffed, $1a9a8ef576b7773d$var$a = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__c, $1a9a8ef576b7773d$var$v = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).unmount;\nfunction $1a9a8ef576b7773d$var$m(t1, r1) {\n    (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__h && (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__h($1a9a8ef576b7773d$var$u, t1, $1a9a8ef576b7773d$var$o || r1), $1a9a8ef576b7773d$var$o = 0;\n    var i1 = $1a9a8ef576b7773d$var$u.__H || ($1a9a8ef576b7773d$var$u.__H = {\n        __: [],\n        __h: []\n    });\n    return t1 >= i1.__.length && i1.__.push({}), i1.__[t1];\n}\nfunction $1a9a8ef576b7773d$export$60241385465d0a34(n1) {\n    return $1a9a8ef576b7773d$var$o = 1, $1a9a8ef576b7773d$export$13e3392192263954($1a9a8ef576b7773d$var$w, n1);\n}\nfunction $1a9a8ef576b7773d$export$13e3392192263954(n2, r2, o1) {\n    var i2 = $1a9a8ef576b7773d$var$m($1a9a8ef576b7773d$var$t++, 2);\n    return i2.t = n2, i2.__c || (i2.__ = [\n        o1 ? o1(r2) : $1a9a8ef576b7773d$var$w(void 0, r2),\n        function(n3) {\n            var t2 = i2.t(i2.__[0], n3);\n            i2.__[0] !== t2 && (i2.__ = [\n                t2,\n                i2.__[1]\n            ], i2.__c.setState({}));\n        }\n    ], i2.__c = $1a9a8ef576b7773d$var$u), i2.__;\n}\nfunction $1a9a8ef576b7773d$export$6d9c69b0de29b591(r3, o2) {\n    var i3 = $1a9a8ef576b7773d$var$m($1a9a8ef576b7773d$var$t++, 3);\n    !(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__s && $1a9a8ef576b7773d$var$k(i3.__H, o2) && (i3.__ = r3, i3.__H = o2, $1a9a8ef576b7773d$var$u.__H.__h.push(i3));\n}\nfunction $1a9a8ef576b7773d$export$e5c5a5f917a5871c(r4, o3) {\n    var i4 = $1a9a8ef576b7773d$var$m($1a9a8ef576b7773d$var$t++, 4);\n    !(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__s && $1a9a8ef576b7773d$var$k(i4.__H, o3) && (i4.__ = r4, i4.__H = o3, $1a9a8ef576b7773d$var$u.__h.push(i4));\n}\nfunction $1a9a8ef576b7773d$export$b8f5890fc79d6aca(n4) {\n    return $1a9a8ef576b7773d$var$o = 5, $1a9a8ef576b7773d$export$1538c33de8887b59(function() {\n        return {\n            current: n4\n        };\n    }, []);\n}\nfunction $1a9a8ef576b7773d$export$d5a552a76deda3c2(n5, t3, u1) {\n    $1a9a8ef576b7773d$var$o = 6, $1a9a8ef576b7773d$export$e5c5a5f917a5871c(function() {\n        \"function\" == typeof n5 ? n5(t3()) : n5 && (n5.current = t3());\n    }, null == u1 ? u1 : u1.concat(n5));\n}\nfunction $1a9a8ef576b7773d$export$1538c33de8887b59(n6, u2) {\n    var r5 = $1a9a8ef576b7773d$var$m($1a9a8ef576b7773d$var$t++, 7);\n    return $1a9a8ef576b7773d$var$k(r5.__H, u2) && (r5.__ = n6(), r5.__H = u2, r5.__h = n6), r5.__;\n}\nfunction $1a9a8ef576b7773d$export$35808ee640e87ca7(n7, t4) {\n    return $1a9a8ef576b7773d$var$o = 8, $1a9a8ef576b7773d$export$1538c33de8887b59(function() {\n        return n7;\n    }, t4);\n}\nfunction $1a9a8ef576b7773d$export$fae74005e78b1a27(n8) {\n    var r6 = $1a9a8ef576b7773d$var$u.context[n8.__c], o4 = $1a9a8ef576b7773d$var$m($1a9a8ef576b7773d$var$t++, 9);\n    return o4.c = n8, r6 ? (null == o4.__ && (o4.__ = !0, r6.sub($1a9a8ef576b7773d$var$u)), r6.props.value) : n8.__;\n}\nfunction $1a9a8ef576b7773d$export$dc8fbce3eb94dc1e(t5, u3) {\n    (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).useDebugValue && (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).useDebugValue(u3 ? u3(t5) : t5);\n}\nfunction $1a9a8ef576b7773d$export$c052f6604b7d51fe(n9) {\n    var r7 = $1a9a8ef576b7773d$var$m($1a9a8ef576b7773d$var$t++, 10), o5 = $1a9a8ef576b7773d$export$60241385465d0a34();\n    return r7.__ = n9, $1a9a8ef576b7773d$var$u.componentDidCatch || ($1a9a8ef576b7773d$var$u.componentDidCatch = function(n10) {\n        r7.__ && r7.__(n10), o5[1](n10);\n    }), [\n        o5[0],\n        function() {\n            o5[1](void 0);\n        }\n    ];\n}\nfunction $1a9a8ef576b7773d$var$x() {\n    var t6;\n    for($1a9a8ef576b7773d$var$i.sort(function(n11, t7) {\n        return n11.__v.__b - t7.__v.__b;\n    }); t6 = $1a9a8ef576b7773d$var$i.pop();)if (t6.__P) try {\n        t6.__H.__h.forEach($1a9a8ef576b7773d$var$g), t6.__H.__h.forEach($1a9a8ef576b7773d$var$j), t6.__H.__h = [];\n    } catch (u4) {\n        t6.__H.__h = [], (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__e(u4, t6.__v);\n    }\n}\n(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__b = function(n12) {\n    $1a9a8ef576b7773d$var$u = null, $1a9a8ef576b7773d$var$c && $1a9a8ef576b7773d$var$c(n12);\n}, (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__r = function(n13) {\n    $1a9a8ef576b7773d$var$f && $1a9a8ef576b7773d$var$f(n13), $1a9a8ef576b7773d$var$t = 0;\n    var r8 = ($1a9a8ef576b7773d$var$u = n13.__c).__H;\n    r8 && (r8.__h.forEach($1a9a8ef576b7773d$var$g), r8.__h.forEach($1a9a8ef576b7773d$var$j), r8.__h = []);\n}, (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).diffed = function(t8) {\n    $1a9a8ef576b7773d$var$e && $1a9a8ef576b7773d$var$e(t8);\n    var o6 = t8.__c;\n    o6 && o6.__H && o6.__H.__h.length && (1 !== $1a9a8ef576b7773d$var$i.push(o6) && $1a9a8ef576b7773d$var$r === (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).requestAnimationFrame || (($1a9a8ef576b7773d$var$r = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).requestAnimationFrame) || function(n14) {\n        var t9, u5 = function() {\n            clearTimeout(r9), $1a9a8ef576b7773d$var$b && cancelAnimationFrame(t9), setTimeout(n14);\n        }, r9 = setTimeout(u5, 100);\n        $1a9a8ef576b7773d$var$b && (t9 = requestAnimationFrame(u5));\n    })($1a9a8ef576b7773d$var$x)), $1a9a8ef576b7773d$var$u = null;\n}, (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__c = function(t10, u6) {\n    u6.some(function(t11) {\n        try {\n            t11.__h.forEach($1a9a8ef576b7773d$var$g), t11.__h = t11.__h.filter(function(n15) {\n                return !n15.__ || $1a9a8ef576b7773d$var$j(n15);\n            });\n        } catch (r10) {\n            u6.some(function(n16) {\n                n16.__h && (n16.__h = []);\n            }), u6 = [], (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__e(r10, t11.__v);\n        }\n    }), $1a9a8ef576b7773d$var$a && $1a9a8ef576b7773d$var$a(t10, u6);\n}, (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).unmount = function(t12) {\n    $1a9a8ef576b7773d$var$v && $1a9a8ef576b7773d$var$v(t12);\n    var u7, r11 = t12.__c;\n    r11 && r11.__H && (r11.__H.__.forEach(function(n17) {\n        try {\n            $1a9a8ef576b7773d$var$g(n17);\n        } catch (n18) {\n            u7 = n18;\n        }\n    }), u7 && (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__e(u7, r11.__v));\n};\nvar $1a9a8ef576b7773d$var$b = \"function\" == typeof requestAnimationFrame;\nfunction $1a9a8ef576b7773d$var$g(n19) {\n    var t13 = $1a9a8ef576b7773d$var$u, r12 = n19.__c;\n    \"function\" == typeof r12 && (n19.__c = void 0, r12()), $1a9a8ef576b7773d$var$u = t13;\n}\nfunction $1a9a8ef576b7773d$var$j(n20) {\n    var t14 = $1a9a8ef576b7773d$var$u;\n    n20.__c = n20.__(), $1a9a8ef576b7773d$var$u = t14;\n}\nfunction $1a9a8ef576b7773d$var$k(n21, t15) {\n    return !n21 || n21.length !== t15.length || t15.some(function(t16, u8) {\n        return t16 !== n21[u8];\n    });\n}\nfunction $1a9a8ef576b7773d$var$w(n22, t17) {\n    return \"function\" == typeof t17 ? t17(n22) : t17;\n}\n\n\n\n\n\nfunction $dc040a17866866fa$var$S(n1, t1) {\n    for(var e1 in t1)n1[e1] = t1[e1];\n    return n1;\n}\nfunction $dc040a17866866fa$var$C(n2, t2) {\n    for(var e2 in n2)if (\"__source\" !== e2 && !(e2 in t2)) return !0;\n    for(var r1 in t2)if (\"__source\" !== r1 && n2[r1] !== t2[r1]) return !0;\n    return !1;\n}\nfunction $dc040a17866866fa$export$221d75b3f55bb0bd(n3) {\n    this.props = n3;\n}\nfunction $dc040a17866866fa$export$7c73462e0d25e514(n4, t3) {\n    function e3(n5) {\n        var e4 = this.props.ref, r3 = e4 == n5.ref;\n        return !r3 && e4 && (e4.call ? e4(null) : e4.current = null), t3 ? !t3(this.props, n5) || !r3 : $dc040a17866866fa$var$C(this.props, n5);\n    }\n    function r2(t4) {\n        return this.shouldComponentUpdate = e3, (0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d)(n4, t4);\n    }\n    return r2.displayName = \"Memo(\" + (n4.displayName || n4.name) + \")\", r2.prototype.isReactComponent = !0, r2.__f = !0, r2;\n}\n($dc040a17866866fa$export$221d75b3f55bb0bd.prototype = new (0, $fb96b826c0c5f37a$export$16fa2f45be04daa8)).isPureReactComponent = !0, $dc040a17866866fa$export$221d75b3f55bb0bd.prototype.shouldComponentUpdate = function(n6, t5) {\n    return $dc040a17866866fa$var$C(this.props, n6) || $dc040a17866866fa$var$C(this.state, t5);\n};\nvar $dc040a17866866fa$var$w = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__b;\n(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__b = function(n7) {\n    n7.type && n7.type.__f && n7.ref && (n7.props.ref = n7.ref, n7.ref = null), $dc040a17866866fa$var$w && $dc040a17866866fa$var$w(n7);\n};\nvar $dc040a17866866fa$var$R = \"undefined\" != typeof Symbol && Symbol.for && Symbol.for(\"react.forward_ref\") || 3911;\nfunction $dc040a17866866fa$export$257a8862b851cb5b(n8) {\n    function t6(t7, e5) {\n        var r4 = $dc040a17866866fa$var$S({}, t7);\n        return delete r4.ref, n8(r4, (e5 = t7.ref || e5) && (\"object\" != typeof e5 || \"current\" in e5) ? e5 : null);\n    }\n    return t6.$$typeof = $dc040a17866866fa$var$R, t6.render = t6, t6.prototype.isReactComponent = t6.__f = !0, t6.displayName = \"ForwardRef(\" + (n8.displayName || n8.name) + \")\", t6;\n}\nvar $dc040a17866866fa$var$N = function(n9, t8) {\n    return null == n9 ? null : (0, $fb96b826c0c5f37a$export$47e4c5b300681277)((0, $fb96b826c0c5f37a$export$47e4c5b300681277)(n9).map(t8));\n}, $dc040a17866866fa$export$dca3b0875bd9a954 = {\n    map: $dc040a17866866fa$var$N,\n    forEach: $dc040a17866866fa$var$N,\n    count: function(n10) {\n        return n10 ? (0, $fb96b826c0c5f37a$export$47e4c5b300681277)(n10).length : 0;\n    },\n    only: function(n11) {\n        var t9 = (0, $fb96b826c0c5f37a$export$47e4c5b300681277)(n11);\n        if (1 !== t9.length) throw \"Children.only\";\n        return t9[0];\n    },\n    toArray: (0, $fb96b826c0c5f37a$export$47e4c5b300681277)\n}, $dc040a17866866fa$var$A = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__e;\n(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__e = function(n12, t10, e6) {\n    if (n12.then) {\n        for(var r5, u1 = t10; u1 = u1.__;)if ((r5 = u1.__c) && r5.__c) return null == t10.__e && (t10.__e = e6.__e, t10.__k = e6.__k), r5.__c(n12, t10);\n    }\n    $dc040a17866866fa$var$A(n12, t10, e6);\n};\nvar $dc040a17866866fa$var$O = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).unmount;\nfunction $dc040a17866866fa$export$74bf444e3cd11ea5() {\n    this.__u = 0, this.t = null, this.__b = null;\n}\nfunction $dc040a17866866fa$var$U(n13) {\n    var t11 = n13.__.__c;\n    return t11 && t11.__e && t11.__e(n13);\n}\nfunction $dc040a17866866fa$export$488013bae63b21da(n14) {\n    var t12, e7, r6;\n    function u2(u3) {\n        if (t12 || (t12 = n14()).then(function(n15) {\n            e7 = n15.default || n15;\n        }, function(n16) {\n            r6 = n16;\n        }), r6) throw r6;\n        if (!e7) throw t12;\n        return (0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d)(e7, u3);\n    }\n    return u2.displayName = \"Lazy\", u2.__f = !0, u2;\n}\nfunction $dc040a17866866fa$export$998bcd577473dd93() {\n    this.u = null, this.o = null;\n}\n(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).unmount = function(n17) {\n    var t13 = n17.__c;\n    t13 && t13.__R && t13.__R(), t13 && !0 === n17.__h && (n17.type = null), $dc040a17866866fa$var$O && $dc040a17866866fa$var$O(n17);\n}, ($dc040a17866866fa$export$74bf444e3cd11ea5.prototype = new (0, $fb96b826c0c5f37a$export$16fa2f45be04daa8)).__c = function(n18, t14) {\n    var e8 = t14.__c, r7 = this;\n    null == r7.t && (r7.t = []), r7.t.push(e8);\n    var u4 = $dc040a17866866fa$var$U(r7.__v), o1 = !1, i1 = function() {\n        o1 || (o1 = !0, e8.__R = null, u4 ? u4(l1) : l1());\n    };\n    e8.__R = i1;\n    var l1 = function() {\n        if (!--r7.__u) {\n            if (r7.state.__e) {\n                var n19 = r7.state.__e;\n                r7.__v.__k[0] = function n22(t17, e9, r8) {\n                    return t17 && (t17.__v = null, t17.__k = t17.__k && t17.__k.map(function(t18) {\n                        return n22(t18, e9, r8);\n                    }), t17.__c && t17.__c.__P === e9 && (t17.__e && r8.insertBefore(t17.__e, t17.__d), t17.__c.__e = !0, t17.__c.__P = r8)), t17;\n                }(n19, n19.__c.__P, n19.__c.__O);\n            }\n            var t15;\n            for(r7.setState({\n                __e: r7.__b = null\n            }); t15 = r7.t.pop();)t15.forceUpdate();\n        }\n    }, c1 = !0 === t14.__h;\n    (r7.__u++) || c1 || r7.setState({\n        __e: r7.__b = r7.__v.__k[0]\n    }), n18.then(i1, i1);\n}, $dc040a17866866fa$export$74bf444e3cd11ea5.prototype.componentWillUnmount = function() {\n    this.t = [];\n}, $dc040a17866866fa$export$74bf444e3cd11ea5.prototype.render = function(n23, t19) {\n    if (this.__b) {\n        if (this.__v.__k) {\n            var e10 = document.createElement(\"div\"), r9 = this.__v.__k[0].__c;\n            this.__v.__k[0] = function n24(t20, e13, r12) {\n                return t20 && (t20.__c && t20.__c.__H && (t20.__c.__H.__.forEach(function(n25) {\n                    \"function\" == typeof n25.__c && n25.__c();\n                }), t20.__c.__H = null), null != (t20 = $dc040a17866866fa$var$S({}, t20)).__c && (t20.__c.__P === r12 && (t20.__c.__P = e13), t20.__c = null), t20.__k = t20.__k && t20.__k.map(function(t21) {\n                    return n24(t21, e13, r12);\n                })), t20;\n            }(this.__b, e10, r9.__O = r9.__P);\n        }\n        this.__b = null;\n    }\n    var u5 = t19.__e && (0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d)((0, $fb96b826c0c5f37a$export$ffb0004e005737fa), null, n23.fallback);\n    return u5 && (u5.__h = null), [\n        (0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d)((0, $fb96b826c0c5f37a$export$ffb0004e005737fa), null, t19.__e ? null : n23.children),\n        u5\n    ];\n};\nvar $dc040a17866866fa$var$T = function(n26, t22, e14) {\n    if (++e14[1] === e14[0] && n26.o.delete(t22), n26.props.revealOrder && (\"t\" !== n26.props.revealOrder[0] || !n26.o.size)) for(e14 = n26.u; e14;){\n        for(; e14.length > 3;)e14.pop()();\n        if (e14[1] < e14[0]) break;\n        n26.u = e14 = e14[2];\n    }\n};\nfunction $dc040a17866866fa$var$D(n27) {\n    return this.getChildContext = function() {\n        return n27.context;\n    }, n27.children;\n}\nfunction $dc040a17866866fa$var$I(n28) {\n    var t23 = this, e15 = n28.i;\n    t23.componentWillUnmount = function() {\n        (0, $fb96b826c0c5f37a$export$b3890eb0ae9dca99)(null, t23.l), t23.l = null, t23.i = null;\n    }, t23.i && t23.i !== e15 && t23.componentWillUnmount(), n28.__v ? (t23.l || (t23.i = e15, t23.l = {\n        nodeType: 1,\n        parentNode: e15,\n        childNodes: [],\n        appendChild: function(n29) {\n            this.childNodes.push(n29), t23.i.appendChild(n29);\n        },\n        insertBefore: function(n30, e) {\n            this.childNodes.push(n30), t23.i.appendChild(n30);\n        },\n        removeChild: function(n31) {\n            this.childNodes.splice(this.childNodes.indexOf(n31) >>> 1, 1), t23.i.removeChild(n31);\n        }\n    }), (0, $fb96b826c0c5f37a$export$b3890eb0ae9dca99)((0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d)($dc040a17866866fa$var$D, {\n        context: t23.context\n    }, n28.__v), t23.l)) : t23.l && t23.componentWillUnmount();\n}\nfunction $dc040a17866866fa$export$d39a5bbd09211389(n32, t24) {\n    return (0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d)($dc040a17866866fa$var$I, {\n        __v: n32,\n        i: t24\n    });\n}\n($dc040a17866866fa$export$998bcd577473dd93.prototype = new (0, $fb96b826c0c5f37a$export$16fa2f45be04daa8)).__e = function(n33) {\n    var t25 = this, e16 = $dc040a17866866fa$var$U(t25.__v), r13 = t25.o.get(n33);\n    return r13[0]++, function(u6) {\n        var o2 = function() {\n            t25.props.revealOrder ? (r13.push(u6), $dc040a17866866fa$var$T(t25, n33, r13)) : u6();\n        };\n        e16 ? e16(o2) : o2();\n    };\n}, $dc040a17866866fa$export$998bcd577473dd93.prototype.render = function(n34) {\n    this.u = null, this.o = new Map;\n    var t26 = (0, $fb96b826c0c5f37a$export$47e4c5b300681277)(n34.children);\n    n34.revealOrder && \"b\" === n34.revealOrder[0] && t26.reverse();\n    for(var e17 = t26.length; e17--;)this.o.set(t26[e17], this.u = [\n        1,\n        0,\n        this.u\n    ]);\n    return n34.children;\n}, $dc040a17866866fa$export$998bcd577473dd93.prototype.componentDidUpdate = $dc040a17866866fa$export$998bcd577473dd93.prototype.componentDidMount = function() {\n    var n35 = this;\n    this.o.forEach(function(t27, e18) {\n        $dc040a17866866fa$var$T(n35, e18, t27);\n    });\n};\nvar $dc040a17866866fa$var$j = \"undefined\" != typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103, $dc040a17866866fa$var$P = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/, $dc040a17866866fa$var$V = \"undefined\" != typeof document, $dc040a17866866fa$var$z = function(n36) {\n    return (\"undefined\" != typeof Symbol && \"symbol\" == typeof Symbol() ? /fil|che|rad/i : /fil|che|ra/i).test(n36);\n};\nfunction $dc040a17866866fa$export$b3890eb0ae9dca99(n37, t28, e19) {\n    return null == t28.__k && (t28.textContent = \"\"), (0, $fb96b826c0c5f37a$export$b3890eb0ae9dca99)(n37, t28), \"function\" == typeof e19 && e19(), n37 ? n37.__c : null;\n}\nfunction $dc040a17866866fa$export$fa8d919ba61d84db(n38, t29, e20) {\n    return (0, $fb96b826c0c5f37a$export$fa8d919ba61d84db)(n38, t29), \"function\" == typeof e20 && e20(), n38 ? n38.__c : null;\n}\n(0, $fb96b826c0c5f37a$export$16fa2f45be04daa8).prototype.isReactComponent = {}, [\n    \"componentWillMount\",\n    \"componentWillReceiveProps\",\n    \"componentWillUpdate\"\n].forEach(function(n39) {\n    Object.defineProperty((0, $fb96b826c0c5f37a$export$16fa2f45be04daa8).prototype, n39, {\n        configurable: !0,\n        get: function() {\n            return this[\"UNSAFE_\" + n39];\n        },\n        set: function(t30) {\n            Object.defineProperty(this, n39, {\n                configurable: !0,\n                writable: !0,\n                value: t30\n            });\n        }\n    });\n});\nvar $dc040a17866866fa$var$H = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).event;\nfunction $dc040a17866866fa$var$Z() {}\nfunction $dc040a17866866fa$var$Y() {\n    return this.cancelBubble;\n}\nfunction $dc040a17866866fa$var$q() {\n    return this.defaultPrevented;\n}\n(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).event = function(n40) {\n    return $dc040a17866866fa$var$H && (n40 = $dc040a17866866fa$var$H(n40)), n40.persist = $dc040a17866866fa$var$Z, n40.isPropagationStopped = $dc040a17866866fa$var$Y, n40.isDefaultPrevented = $dc040a17866866fa$var$q, n40.nativeEvent = n40;\n};\nvar $dc040a17866866fa$var$G, $dc040a17866866fa$var$J = {\n    configurable: !0,\n    get: function() {\n        return this.class;\n    }\n}, $dc040a17866866fa$var$K = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).vnode;\n(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).vnode = function(n41) {\n    var t31 = n41.type, e21 = n41.props, r14 = e21;\n    if (\"string\" == typeof t31) {\n        var u7 = -1 === t31.indexOf(\"-\");\n        for(var o3 in r14 = {}, e21){\n            var i2 = e21[o3];\n            $dc040a17866866fa$var$V && \"children\" === o3 && \"noscript\" === t31 || \"value\" === o3 && \"defaultValue\" in e21 && null == i2 || (\"defaultValue\" === o3 && \"value\" in e21 && null == e21.value ? o3 = \"value\" : \"download\" === o3 && !0 === i2 ? i2 = \"\" : /ondoubleclick/i.test(o3) ? o3 = \"ondblclick\" : /^onchange(textarea|input)/i.test(o3 + t31) && !$dc040a17866866fa$var$z(e21.type) ? o3 = \"oninput\" : /^onfocus$/i.test(o3) ? o3 = \"onfocusin\" : /^onblur$/i.test(o3) ? o3 = \"onfocusout\" : /^on(Ani|Tra|Tou|BeforeInp)/.test(o3) ? o3 = o3.toLowerCase() : u7 && $dc040a17866866fa$var$P.test(o3) ? o3 = o3.replace(/[A-Z0-9]/, \"-$&\").toLowerCase() : null === i2 && (i2 = void 0), r14[o3] = i2);\n        }\n        \"select\" == t31 && r14.multiple && Array.isArray(r14.value) && (r14.value = (0, $fb96b826c0c5f37a$export$47e4c5b300681277)(e21.children).forEach(function(n42) {\n            n42.props.selected = -1 != r14.value.indexOf(n42.props.value);\n        })), \"select\" == t31 && null != r14.defaultValue && (r14.value = (0, $fb96b826c0c5f37a$export$47e4c5b300681277)(e21.children).forEach(function(n43) {\n            n43.props.selected = r14.multiple ? -1 != r14.defaultValue.indexOf(n43.props.value) : r14.defaultValue == n43.props.value;\n        })), n41.props = r14, e21.class != e21.className && ($dc040a17866866fa$var$J.enumerable = \"className\" in e21, null != e21.className && (r14.class = e21.className), Object.defineProperty(r14, \"className\", $dc040a17866866fa$var$J));\n    }\n    n41.$$typeof = $dc040a17866866fa$var$j, $dc040a17866866fa$var$K && $dc040a17866866fa$var$K(n41);\n};\nvar $dc040a17866866fa$var$Q = (0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__r;\n(0, $fb96b826c0c5f37a$export$41c562ebe57d11e2).__r = function(n44) {\n    $dc040a17866866fa$var$Q && $dc040a17866866fa$var$Q(n44), $dc040a17866866fa$var$G = n44.__c;\n};\nvar $dc040a17866866fa$export$ae55be85d98224ed = {\n    ReactCurrentDispatcher: {\n        current: {\n            readContext: function(n45) {\n                return $dc040a17866866fa$var$G.__n[n45.__c].props.value;\n            }\n        }\n    }\n}, $dc040a17866866fa$export$83d89fbfd8236492 = \"17.0.2\";\nfunction $dc040a17866866fa$export$d38cd72104c1f0e9(n46) {\n    return (0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d).bind(null, n46);\n}\nfunction $dc040a17866866fa$export$a8257692ac88316c(n47) {\n    return !!n47 && n47.$$typeof === $dc040a17866866fa$var$j;\n}\nfunction $dc040a17866866fa$export$e530037191fcd5d7(n48) {\n    return $dc040a17866866fa$export$a8257692ac88316c(n48) ? (0, $fb96b826c0c5f37a$export$e530037191fcd5d7).apply(null, arguments) : n48;\n}\nfunction $dc040a17866866fa$export$502457920280e6be(n49) {\n    return !!n49.__k && ((0, $fb96b826c0c5f37a$export$b3890eb0ae9dca99)(null, n49), !0);\n}\nfunction $dc040a17866866fa$export$466bfc07425424d5(n50) {\n    return n50 && (n50.base || 1 === n50.nodeType && n50) || null;\n}\nvar $dc040a17866866fa$export$c78a37762a8d58e1 = function(n51, t32) {\n    return n51(t32);\n}, $dc040a17866866fa$export$cd75ccfd720a3cd4 = function(n52, t33) {\n    return n52(t33);\n}, $dc040a17866866fa$export$5f8d39834fd61797 = (0, $fb96b826c0c5f37a$export$ffb0004e005737fa);\nvar $dc040a17866866fa$export$2e2bcd8739ae039 = {\n    useState: (0, $1a9a8ef576b7773d$export$60241385465d0a34),\n    useReducer: (0, $1a9a8ef576b7773d$export$13e3392192263954),\n    useEffect: (0, $1a9a8ef576b7773d$export$6d9c69b0de29b591),\n    useLayoutEffect: (0, $1a9a8ef576b7773d$export$e5c5a5f917a5871c),\n    useRef: (0, $1a9a8ef576b7773d$export$b8f5890fc79d6aca),\n    useImperativeHandle: (0, $1a9a8ef576b7773d$export$d5a552a76deda3c2),\n    useMemo: (0, $1a9a8ef576b7773d$export$1538c33de8887b59),\n    useCallback: (0, $1a9a8ef576b7773d$export$35808ee640e87ca7),\n    useContext: (0, $1a9a8ef576b7773d$export$fae74005e78b1a27),\n    useDebugValue: (0, $1a9a8ef576b7773d$export$dc8fbce3eb94dc1e),\n    version: \"17.0.2\",\n    Children: $dc040a17866866fa$export$dca3b0875bd9a954,\n    render: $dc040a17866866fa$export$b3890eb0ae9dca99,\n    hydrate: $dc040a17866866fa$export$fa8d919ba61d84db,\n    unmountComponentAtNode: $dc040a17866866fa$export$502457920280e6be,\n    createPortal: $dc040a17866866fa$export$d39a5bbd09211389,\n    createElement: (0, $fb96b826c0c5f37a$export$c8a8987d4410bf2d),\n    createContext: (0, $fb96b826c0c5f37a$export$fd42f52fd3ae1109),\n    createFactory: $dc040a17866866fa$export$d38cd72104c1f0e9,\n    cloneElement: $dc040a17866866fa$export$e530037191fcd5d7,\n    createRef: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43),\n    Fragment: (0, $fb96b826c0c5f37a$export$ffb0004e005737fa),\n    isValidElement: $dc040a17866866fa$export$a8257692ac88316c,\n    findDOMNode: $dc040a17866866fa$export$466bfc07425424d5,\n    Component: (0, $fb96b826c0c5f37a$export$16fa2f45be04daa8),\n    PureComponent: $dc040a17866866fa$export$221d75b3f55bb0bd,\n    memo: $dc040a17866866fa$export$7c73462e0d25e514,\n    forwardRef: $dc040a17866866fa$export$257a8862b851cb5b,\n    flushSync: $dc040a17866866fa$export$cd75ccfd720a3cd4,\n    unstable_batchedUpdates: $dc040a17866866fa$export$c78a37762a8d58e1,\n    StrictMode: (0, $fb96b826c0c5f37a$export$ffb0004e005737fa),\n    Suspense: $dc040a17866866fa$export$74bf444e3cd11ea5,\n    SuspenseList: $dc040a17866866fa$export$998bcd577473dd93,\n    lazy: $dc040a17866866fa$export$488013bae63b21da,\n    __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: $dc040a17866866fa$export$ae55be85d98224ed\n};\n\n\n\n\nconst $ec8c39fdad15601a$var$THEME_ICONS = {\n    light: \"outline\",\n    dark: \"solid\"\n};\nclass $ec8c39fdad15601a$export$2e2bcd8739ae039 extends (0, $dc040a17866866fa$export$221d75b3f55bb0bd) {\n    renderIcon(category) {\n        const { icon: icon  } = category;\n        if (icon) {\n            if (icon.svg) return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n                class: \"flex\",\n                dangerouslySetInnerHTML: {\n                    __html: icon.svg\n                }\n            });\n            if (icon.src) return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"img\", {\n                src: icon.src\n            });\n        }\n        const categoryIcons = (0, $fcccfb36ed0cde68$export$2e2bcd8739ae039).categories[category.id] || (0, $fcccfb36ed0cde68$export$2e2bcd8739ae039).categories.custom;\n        const style = this.props.icons == \"auto\" ? $ec8c39fdad15601a$var$THEME_ICONS[this.props.theme] : this.props.icons;\n        return categoryIcons[style] || categoryIcons;\n    }\n    render() {\n        let selectedCategoryIndex = null;\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"nav\", {\n            id: \"nav\",\n            class: \"padding\",\n            \"data-position\": this.props.position,\n            dir: this.props.dir,\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                class: \"flex relative\",\n                children: [\n                    this.categories.map((category, i)=>{\n                        const title = category.name || (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).categories[category.id];\n                        const selected = !this.props.unfocused && category.id == this.state.categoryId;\n                        if (selected) selectedCategoryIndex = i;\n                        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"button\", {\n                            \"aria-label\": title,\n                            \"aria-selected\": selected || undefined,\n                            title: title,\n                            type: \"button\",\n                            class: \"flex flex-grow flex-center\",\n                            onMouseDown: (e)=>e.preventDefault(),\n                            onClick: ()=>{\n                                this.props.onClick({\n                                    category: category,\n                                    i: i\n                                });\n                            },\n                            children: this.renderIcon(category)\n                        });\n                    }),\n                    /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                        class: \"bar\",\n                        style: {\n                            width: `${100 / this.categories.length}%`,\n                            opacity: selectedCategoryIndex == null ? 0 : 1,\n                            transform: this.props.dir === \"rtl\" ? `scaleX(-1) translateX(${selectedCategoryIndex * 100}%)` : `translateX(${selectedCategoryIndex * 100}%)`\n                        }\n                    })\n                ]\n            })\n        });\n    }\n    constructor(){\n        super();\n        this.categories = (0, $7adb23b0109cc36a$export$2d0294657ab35f1b).categories.filter((category)=>{\n            return !category.target;\n        });\n        this.state = {\n            categoryId: this.categories[0].id\n        };\n    }\n}\n\n\n\n\n\nclass $e0d4dda61265ff1e$export$2e2bcd8739ae039 extends (0, $dc040a17866866fa$export$221d75b3f55bb0bd) {\n    shouldComponentUpdate(nextProps) {\n        for(let k in nextProps){\n            if (k == \"children\") continue;\n            if (nextProps[k] != this.props[k]) return true;\n        }\n        return false;\n    }\n    render() {\n        return this.props.children;\n    }\n}\n\n\n\n\nconst $89bd6bb200cc8fef$var$Performance = {\n    rowsPerRender: 10\n};\nclass $89bd6bb200cc8fef$export$2e2bcd8739ae039 extends (0, $fb96b826c0c5f37a$export$16fa2f45be04daa8) {\n    getInitialState(props = this.props) {\n        return {\n            skin: (0, $f72b75cf796873c7$export$2e2bcd8739ae039).get(\"skin\") || props.skin,\n            theme: this.initTheme(props.theme)\n        };\n    }\n    componentWillMount() {\n        this.dir = (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).rtl ? \"rtl\" : \"ltr\";\n        this.refs = {\n            menu: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)(),\n            navigation: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)(),\n            scroll: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)(),\n            search: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)(),\n            searchInput: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)(),\n            skinToneButton: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)(),\n            skinToneRadio: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)()\n        };\n        this.initGrid();\n        if (this.props.stickySearch == false && this.props.searchPosition == \"sticky\") {\n            console.warn(\"[EmojiMart] Deprecation warning: `stickySearch` has been renamed `searchPosition`.\");\n            this.props.searchPosition = \"static\";\n        }\n    }\n    componentDidMount() {\n        this.register();\n        this.shadowRoot = this.base.parentNode;\n        if (this.props.autoFocus) {\n            const { searchInput: searchInput  } = this.refs;\n            if (searchInput.current) searchInput.current.focus();\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        this.nextState || (this.nextState = {});\n        for(const k1 in nextProps)this.nextState[k1] = nextProps[k1];\n        clearTimeout(this.nextStateTimer);\n        this.nextStateTimer = setTimeout(()=>{\n            let requiresGridReset = false;\n            for(const k in this.nextState){\n                this.props[k] = this.nextState[k];\n                if (k === \"custom\" || k === \"categories\") requiresGridReset = true;\n            }\n            delete this.nextState;\n            const nextState = this.getInitialState();\n            if (requiresGridReset) return this.reset(nextState);\n            this.setState(nextState);\n        });\n    }\n    componentWillUnmount() {\n        this.unregister();\n    }\n    async reset(nextState = {}) {\n        await (0, $7adb23b0109cc36a$export$2cd8252107eb640b)(this.props);\n        this.initGrid();\n        this.unobserve();\n        this.setState(nextState, ()=>{\n            this.observeCategories();\n            this.observeRows();\n        });\n    }\n    register() {\n        document.addEventListener(\"click\", this.handleClickOutside);\n        this.observe();\n    }\n    unregister() {\n        document.removeEventListener(\"click\", this.handleClickOutside);\n        this.darkMedia?.removeEventListener(\"change\", this.darkMediaCallback);\n        this.unobserve();\n    }\n    observe() {\n        this.observeCategories();\n        this.observeRows();\n    }\n    unobserve({ except: except = []  } = {}) {\n        if (!Array.isArray(except)) except = [\n            except\n        ];\n        for (const observer of this.observers){\n            if (except.includes(observer)) continue;\n            observer.disconnect();\n        }\n        this.observers = [].concat(except);\n    }\n    initGrid() {\n        const { categories: categories  } = (0, $7adb23b0109cc36a$export$2d0294657ab35f1b);\n        this.refs.categories = new Map();\n        const navKey = (0, $7adb23b0109cc36a$export$2d0294657ab35f1b).categories.map((category)=>category.id).join(\",\");\n        if (this.navKey && this.navKey != navKey) this.refs.scroll.current && (this.refs.scroll.current.scrollTop = 0);\n        this.navKey = navKey;\n        this.grid = [];\n        this.grid.setsize = 0;\n        const addRow = (rows, category)=>{\n            const row = [];\n            row.__categoryId = category.id;\n            row.__index = rows.length;\n            this.grid.push(row);\n            const rowIndex = this.grid.length - 1;\n            const rowRef = rowIndex % $89bd6bb200cc8fef$var$Performance.rowsPerRender ? {} : (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)();\n            rowRef.index = rowIndex;\n            rowRef.posinset = this.grid.setsize + 1;\n            rows.push(rowRef);\n            return row;\n        };\n        for (let category1 of categories){\n            const rows = [];\n            let row = addRow(rows, category1);\n            for (let emoji of category1.emojis){\n                if (row.length == this.getPerLine()) row = addRow(rows, category1);\n                this.grid.setsize += 1;\n                row.push(emoji);\n            }\n            this.refs.categories.set(category1.id, {\n                root: (0, $fb96b826c0c5f37a$export$7d1e3a5e95ceca43)(),\n                rows: rows\n            });\n        }\n    }\n    initTheme(theme) {\n        if (theme != \"auto\") return theme;\n        if (!this.darkMedia) {\n            this.darkMedia = matchMedia(\"(prefers-color-scheme: dark)\");\n            if (this.darkMedia.media.match(/^not/)) return \"light\";\n            this.darkMedia.addEventListener(\"change\", this.darkMediaCallback);\n        }\n        return this.darkMedia.matches ? \"dark\" : \"light\";\n    }\n    initDynamicPerLine(props = this.props) {\n        if (!props.dynamicWidth) return;\n        const { element: element , emojiButtonSize: emojiButtonSize  } = props;\n        const calculatePerLine = ()=>{\n            const { width: width  } = element.getBoundingClientRect();\n            return Math.floor(width / emojiButtonSize);\n        };\n        const observer = new ResizeObserver(()=>{\n            this.unobserve({\n                except: observer\n            });\n            this.setState({\n                perLine: calculatePerLine()\n            }, ()=>{\n                this.initGrid();\n                this.forceUpdate(()=>{\n                    this.observeCategories();\n                    this.observeRows();\n                });\n            });\n        });\n        observer.observe(element);\n        this.observers.push(observer);\n        return calculatePerLine();\n    }\n    getPerLine() {\n        return this.state.perLine || this.props.perLine;\n    }\n    getEmojiByPos([p1, p2]) {\n        const grid = this.state.searchResults || this.grid;\n        const emoji = grid[p1] && grid[p1][p2];\n        if (!emoji) return;\n        return (0, $c4d155af13ad4d4b$export$2e2bcd8739ae039).get(emoji);\n    }\n    observeCategories() {\n        const navigation = this.refs.navigation.current;\n        if (!navigation) return;\n        const visibleCategories = new Map();\n        const setFocusedCategory = (categoryId)=>{\n            if (categoryId != navigation.state.categoryId) navigation.setState({\n                categoryId: categoryId\n            });\n        };\n        const observerOptions = {\n            root: this.refs.scroll.current,\n            threshold: [\n                0.0,\n                1.0\n            ]\n        };\n        const observer = new IntersectionObserver((entries)=>{\n            for (const entry of entries){\n                const id = entry.target.dataset.id;\n                visibleCategories.set(id, entry.intersectionRatio);\n            }\n            const ratios = [\n                ...visibleCategories\n            ];\n            for (const [id, ratio] of ratios)if (ratio) {\n                setFocusedCategory(id);\n                break;\n            }\n        }, observerOptions);\n        for (const { root: root  } of this.refs.categories.values())observer.observe(root.current);\n        this.observers.push(observer);\n    }\n    observeRows() {\n        const visibleRows = {\n            ...this.state.visibleRows\n        };\n        const observer = new IntersectionObserver((entries)=>{\n            for (const entry of entries){\n                const index = parseInt(entry.target.dataset.index);\n                if (entry.isIntersecting) visibleRows[index] = true;\n                else delete visibleRows[index];\n            }\n            this.setState({\n                visibleRows: visibleRows\n            });\n        }, {\n            root: this.refs.scroll.current,\n            rootMargin: `${this.props.emojiButtonSize * ($89bd6bb200cc8fef$var$Performance.rowsPerRender + 5)}px 0px ${this.props.emojiButtonSize * $89bd6bb200cc8fef$var$Performance.rowsPerRender}px`\n        });\n        for (const { rows: rows  } of this.refs.categories.values()){\n            for (const row of rows)if (row.current) observer.observe(row.current);\n        }\n        this.observers.push(observer);\n    }\n    preventDefault(e) {\n        e.preventDefault();\n    }\n    unfocusSearch() {\n        const input = this.refs.searchInput.current;\n        if (!input) return;\n        input.blur();\n    }\n    navigate({ e: e , input: input , left: left , right: right , up: up , down: down  }) {\n        const grid = this.state.searchResults || this.grid;\n        if (!grid.length) return;\n        let [p1, p2] = this.state.pos;\n        const pos = (()=>{\n            if (p1 == 0) {\n                if (p2 == 0 && !e.repeat && (left || up)) return null;\n            }\n            if (p1 == -1) {\n                if (!e.repeat && (right || down) && input.selectionStart == input.value.length) return [\n                    0,\n                    0\n                ];\n                return null;\n            }\n            if (left || right) {\n                let row = grid[p1];\n                const increment = left ? -1 : 1;\n                p2 += increment;\n                if (!row[p2]) {\n                    p1 += increment;\n                    row = grid[p1];\n                    if (!row) {\n                        p1 = left ? 0 : grid.length - 1;\n                        p2 = left ? 0 : grid[p1].length - 1;\n                        return [\n                            p1,\n                            p2\n                        ];\n                    }\n                    p2 = left ? row.length - 1 : 0;\n                }\n                return [\n                    p1,\n                    p2\n                ];\n            }\n            if (up || down) {\n                p1 += up ? -1 : 1;\n                const row = grid[p1];\n                if (!row) {\n                    p1 = up ? 0 : grid.length - 1;\n                    p2 = up ? 0 : grid[p1].length - 1;\n                    return [\n                        p1,\n                        p2\n                    ];\n                }\n                if (!row[p2]) p2 = row.length - 1;\n                return [\n                    p1,\n                    p2\n                ];\n            }\n        })();\n        if (pos) e.preventDefault();\n        else {\n            if (this.state.pos[0] > -1) this.setState({\n                pos: [\n                    -1,\n                    -1\n                ]\n            });\n            return;\n        }\n        this.setState({\n            pos: pos,\n            keyboard: true\n        }, ()=>{\n            this.scrollTo({\n                row: pos[0]\n            });\n        });\n    }\n    scrollTo({ categoryId: categoryId , row: row  }) {\n        const grid = this.state.searchResults || this.grid;\n        if (!grid.length) return;\n        const scroll = this.refs.scroll.current;\n        const scrollRect = scroll.getBoundingClientRect();\n        let scrollTop = 0;\n        if (row >= 0) categoryId = grid[row].__categoryId;\n        if (categoryId) {\n            const ref = this.refs[categoryId] || this.refs.categories.get(categoryId).root;\n            const categoryRect = ref.current.getBoundingClientRect();\n            scrollTop = categoryRect.top - (scrollRect.top - scroll.scrollTop) + 1;\n        }\n        if (row >= 0) {\n            if (!row) scrollTop = 0;\n            else {\n                const rowIndex = grid[row].__index;\n                const rowTop = scrollTop + rowIndex * this.props.emojiButtonSize;\n                const rowBot = rowTop + this.props.emojiButtonSize + this.props.emojiButtonSize * 0.88;\n                if (rowTop < scroll.scrollTop) scrollTop = rowTop;\n                else if (rowBot > scroll.scrollTop + scrollRect.height) scrollTop = rowBot - scrollRect.height;\n                else return;\n            }\n        }\n        this.ignoreMouse();\n        scroll.scrollTop = scrollTop;\n    }\n    ignoreMouse() {\n        this.mouseIsIgnored = true;\n        clearTimeout(this.ignoreMouseTimer);\n        this.ignoreMouseTimer = setTimeout(()=>{\n            delete this.mouseIsIgnored;\n        }, 100);\n    }\n    handleEmojiOver(pos) {\n        if (this.mouseIsIgnored || this.state.showSkins) return;\n        this.setState({\n            pos: pos || [\n                -1,\n                -1\n            ],\n            keyboard: false\n        });\n    }\n    handleEmojiClick({ e: e , emoji: emoji , pos: pos  }) {\n        if (!this.props.onEmojiSelect) return;\n        if (!emoji && pos) emoji = this.getEmojiByPos(pos);\n        if (emoji) {\n            const emojiData = (0, $693b183b0a78708f$export$d10ac59fbe52a745)(emoji, {\n                skinIndex: this.state.skin - 1\n            });\n            if (this.props.maxFrequentRows) (0, $b22cfd0a55410b4f$export$2e2bcd8739ae039).add(emojiData, this.props);\n            this.props.onEmojiSelect(emojiData, e);\n        }\n    }\n    closeSkins() {\n        if (!this.state.showSkins) return;\n        this.setState({\n            showSkins: null,\n            tempSkin: null\n        });\n        this.base.removeEventListener(\"click\", this.handleBaseClick);\n        this.base.removeEventListener(\"keydown\", this.handleBaseKeydown);\n    }\n    handleSkinMouseOver(tempSkin) {\n        this.setState({\n            tempSkin: tempSkin\n        });\n    }\n    handleSkinClick(skin) {\n        this.ignoreMouse();\n        this.closeSkins();\n        this.setState({\n            skin: skin,\n            tempSkin: null\n        });\n        (0, $f72b75cf796873c7$export$2e2bcd8739ae039).set(\"skin\", skin);\n    }\n    renderNav() {\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)((0, $ec8c39fdad15601a$export$2e2bcd8739ae039), {\n            ref: this.refs.navigation,\n            icons: this.props.icons,\n            theme: this.state.theme,\n            dir: this.dir,\n            unfocused: !!this.state.searchResults,\n            position: this.props.navPosition,\n            onClick: this.handleCategoryClick\n        }, this.navKey);\n    }\n    renderPreview() {\n        const emoji = this.getEmojiByPos(this.state.pos);\n        const noSearchResults = this.state.searchResults && !this.state.searchResults.length;\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n            id: \"preview\",\n            class: \"flex flex-middle\",\n            dir: this.dir,\n            \"data-position\": this.props.previewPosition,\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    class: \"flex flex-middle flex-grow\",\n                    children: [\n                        /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                            class: \"flex flex-auto flex-middle flex-center\",\n                            style: {\n                                height: this.props.emojiButtonSize,\n                                fontSize: this.props.emojiButtonSize\n                            },\n                            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)((0, $254755d3f438722f$export$2e2bcd8739ae039), {\n                                emoji: emoji,\n                                id: noSearchResults ? this.props.noResultsEmoji || \"cry\" : this.props.previewEmoji || (this.props.previewPosition == \"top\" ? \"point_down\" : \"point_up\"),\n                                set: this.props.set,\n                                size: this.props.emojiButtonSize,\n                                skin: this.state.tempSkin || this.state.skin,\n                                spritesheet: true,\n                                getSpritesheetURL: this.props.getSpritesheetURL\n                            })\n                        }),\n                        /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                            class: `margin-${this.dir[0]}`,\n                            children: emoji || noSearchResults ? /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                                class: `padding-${this.dir[2]} align-${this.dir[0]}`,\n                                children: [\n                                    /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                                        class: \"preview-title ellipsis\",\n                                        children: emoji ? emoji.name : (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).search_no_results_1\n                                    }),\n                                    /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                                        class: \"preview-subtitle ellipsis color-c\",\n                                        children: emoji ? emoji.skins[0].shortcodes : (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).search_no_results_2\n                                    })\n                                ]\n                            }) : /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                                class: \"preview-placeholder color-c\",\n                                children: (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).pick\n                            })\n                        })\n                    ]\n                }),\n                !emoji && this.props.skinTonePosition == \"preview\" && this.renderSkinToneButton()\n            ]\n        });\n    }\n    renderEmojiButton(emoji, { pos: pos , posinset: posinset , grid: grid  }) {\n        const size = this.props.emojiButtonSize;\n        const skin = this.state.tempSkin || this.state.skin;\n        const emojiSkin = emoji.skins[skin - 1] || emoji.skins[0];\n        const native = emojiSkin.native;\n        const selected = (0, $693b183b0a78708f$export$9cb4719e2e525b7a)(this.state.pos, pos);\n        const key = pos.concat(emoji.id).join(\"\");\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)((0, $e0d4dda61265ff1e$export$2e2bcd8739ae039), {\n            selected: selected,\n            skin: skin,\n            size: size,\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"button\", {\n                \"aria-label\": native,\n                \"aria-selected\": selected || undefined,\n                \"aria-posinset\": posinset,\n                \"aria-setsize\": grid.setsize,\n                \"data-keyboard\": this.state.keyboard,\n                title: this.props.previewPosition == \"none\" ? emoji.name : undefined,\n                type: \"button\",\n                class: \"flex flex-center flex-middle\",\n                tabindex: \"-1\",\n                onClick: (e)=>this.handleEmojiClick({\n                        e: e,\n                        emoji: emoji\n                    }),\n                onMouseEnter: ()=>this.handleEmojiOver(pos),\n                onMouseLeave: ()=>this.handleEmojiOver(),\n                style: {\n                    width: this.props.emojiButtonSize,\n                    height: this.props.emojiButtonSize,\n                    fontSize: this.props.emojiSize,\n                    lineHeight: 0\n                },\n                children: [\n                    /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                        \"aria-hidden\": \"true\",\n                        class: \"background\",\n                        style: {\n                            borderRadius: this.props.emojiButtonRadius,\n                            backgroundColor: this.props.emojiButtonColors ? this.props.emojiButtonColors[(posinset - 1) % this.props.emojiButtonColors.length] : undefined\n                        }\n                    }),\n                    /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)((0, $254755d3f438722f$export$2e2bcd8739ae039), {\n                        emoji: emoji,\n                        set: this.props.set,\n                        size: this.props.emojiSize,\n                        skin: skin,\n                        spritesheet: true,\n                        getSpritesheetURL: this.props.getSpritesheetURL\n                    })\n                ]\n            })\n        }, key);\n    }\n    renderSearch() {\n        const renderSkinTone = this.props.previewPosition == \"none\" || this.props.skinTonePosition == \"search\";\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    class: \"spacer\"\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    class: \"flex flex-middle\",\n                    children: [\n                        /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                            class: \"search relative flex-grow\",\n                            children: [\n                                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"input\", {\n                                    type: \"search\",\n                                    ref: this.refs.searchInput,\n                                    placeholder: (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).search,\n                                    onClick: this.handleSearchClick,\n                                    onInput: this.handleSearchInput,\n                                    onKeyDown: this.handleSearchKeyDown,\n                                    autoComplete: \"off\"\n                                }),\n                                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n                                    class: \"icon loupe flex\",\n                                    children: (0, $fcccfb36ed0cde68$export$2e2bcd8739ae039).search.loupe\n                                }),\n                                this.state.searchResults && /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"button\", {\n                                    title: \"Clear\",\n                                    \"aria-label\": \"Clear\",\n                                    type: \"button\",\n                                    class: \"icon delete flex\",\n                                    onClick: this.clearSearch,\n                                    onMouseDown: this.preventDefault,\n                                    children: (0, $fcccfb36ed0cde68$export$2e2bcd8739ae039).search.delete\n                                })\n                            ]\n                        }),\n                        renderSkinTone && this.renderSkinToneButton()\n                    ]\n                })\n            ]\n        });\n    }\n    renderSearchResults() {\n        const { searchResults: searchResults  } = this.state;\n        if (!searchResults) return null;\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n            class: \"category\",\n            ref: this.refs.search,\n            children: [\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    class: `sticky padding-small align-${this.dir[0]}`,\n                    children: (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).categories.search\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    children: !searchResults.length ? /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                        class: `padding-small align-${this.dir[0]}`,\n                        children: this.props.onAddCustomEmoji && /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"a\", {\n                            onClick: this.props.onAddCustomEmoji,\n                            children: (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).add_custom\n                        })\n                    }) : searchResults.map((row, i)=>{\n                        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                            class: \"flex\",\n                            children: row.map((emoji, ii)=>{\n                                return this.renderEmojiButton(emoji, {\n                                    pos: [\n                                        i,\n                                        ii\n                                    ],\n                                    posinset: i * this.props.perLine + ii + 1,\n                                    grid: searchResults\n                                });\n                            })\n                        });\n                    })\n                })\n            ]\n        });\n    }\n    renderCategories() {\n        const { categories: categories  } = (0, $7adb23b0109cc36a$export$2d0294657ab35f1b);\n        const hidden = !!this.state.searchResults;\n        const perLine = this.getPerLine();\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n            style: {\n                visibility: hidden ? \"hidden\" : undefined,\n                display: hidden ? \"none\" : undefined,\n                height: \"100%\"\n            },\n            children: categories.map((category)=>{\n                const { root: root , rows: rows  } = this.refs.categories.get(category.id);\n                return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    \"data-id\": category.target ? category.target.id : category.id,\n                    class: \"category\",\n                    ref: root,\n                    children: [\n                        /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                            class: `sticky padding-small align-${this.dir[0]}`,\n                            children: category.name || (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).categories[category.id]\n                        }),\n                        /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                            class: \"relative\",\n                            style: {\n                                height: rows.length * this.props.emojiButtonSize\n                            },\n                            children: rows.map((row, i)=>{\n                                const targetRow = row.index - row.index % $89bd6bb200cc8fef$var$Performance.rowsPerRender;\n                                const visible = this.state.visibleRows[targetRow];\n                                const ref = \"current\" in row ? row : undefined;\n                                if (!visible && !ref) return null;\n                                const start = i * perLine;\n                                const end = start + perLine;\n                                const emojiIds = category.emojis.slice(start, end);\n                                if (emojiIds.length < perLine) emojiIds.push(...new Array(perLine - emojiIds.length));\n                                return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                                    \"data-index\": row.index,\n                                    ref: ref,\n                                    class: \"flex row\",\n                                    style: {\n                                        top: i * this.props.emojiButtonSize\n                                    },\n                                    children: visible && emojiIds.map((emojiId, ii)=>{\n                                        if (!emojiId) return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                                            style: {\n                                                width: this.props.emojiButtonSize,\n                                                height: this.props.emojiButtonSize\n                                            }\n                                        });\n                                        const emoji = (0, $c4d155af13ad4d4b$export$2e2bcd8739ae039).get(emojiId);\n                                        return this.renderEmojiButton(emoji, {\n                                            pos: [\n                                                row.index,\n                                                ii\n                                            ],\n                                            posinset: row.posinset + ii,\n                                            grid: this.grid\n                                        });\n                                    })\n                                }, row.index);\n                            })\n                        })\n                    ]\n                });\n            })\n        });\n    }\n    renderSkinToneButton() {\n        if (this.props.skinTonePosition == \"none\") return null;\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n            class: \"flex flex-auto flex-center flex-middle\",\n            style: {\n                position: \"relative\",\n                width: this.props.emojiButtonSize,\n                height: this.props.emojiButtonSize\n            },\n            children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"button\", {\n                type: \"button\",\n                ref: this.refs.skinToneButton,\n                class: \"skin-tone-button flex flex-auto flex-center flex-middle\",\n                \"aria-selected\": this.state.showSkins ? \"\" : undefined,\n                \"aria-label\": (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).skins.choose,\n                title: (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).skins.choose,\n                onClick: this.openSkins,\n                style: {\n                    width: this.props.emojiSize,\n                    height: this.props.emojiSize\n                },\n                children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n                    class: `skin-tone skin-tone-${this.state.skin}`\n                })\n            })\n        });\n    }\n    renderLiveRegion() {\n        const emoji = this.getEmojiByPos(this.state.pos);\n        const contents = emoji ? emoji.name : \"\";\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n            \"aria-live\": \"polite\",\n            class: \"sr-only\",\n            children: contents\n        });\n    }\n    renderSkins() {\n        const skinToneButton = this.refs.skinToneButton.current;\n        const skinToneButtonRect = skinToneButton.getBoundingClientRect();\n        const baseRect = this.base.getBoundingClientRect();\n        const position = {};\n        if (this.dir == \"ltr\") position.right = baseRect.right - skinToneButtonRect.right - 3;\n        else position.left = skinToneButtonRect.left - baseRect.left - 3;\n        if (this.props.previewPosition == \"bottom\" && this.props.skinTonePosition == \"preview\") position.bottom = baseRect.bottom - skinToneButtonRect.top + 6;\n        else {\n            position.top = skinToneButtonRect.bottom - baseRect.top + 3;\n            position.bottom = \"auto\";\n        }\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n            ref: this.refs.menu,\n            role: \"radiogroup\",\n            dir: this.dir,\n            \"aria-label\": (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).skins.choose,\n            class: \"menu hidden\",\n            \"data-position\": position.top ? \"top\" : \"bottom\",\n            style: position,\n            children: [\n                ...Array(6).keys()\n            ].map((i)=>{\n                const skin = i + 1;\n                const checked = this.state.skin == skin;\n                return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    children: [\n                        /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"input\", {\n                            type: \"radio\",\n                            name: \"skin-tone\",\n                            value: skin,\n                            \"aria-label\": (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).skins[skin],\n                            ref: checked ? this.refs.skinToneRadio : null,\n                            defaultChecked: checked,\n                            onChange: ()=>this.handleSkinMouseOver(skin),\n                            onKeyDown: (e)=>{\n                                if (e.code == \"Enter\" || e.code == \"Space\" || e.code == \"Tab\") {\n                                    e.preventDefault();\n                                    this.handleSkinClick(skin);\n                                }\n                            }\n                        }),\n                        /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"button\", {\n                            \"aria-hidden\": \"true\",\n                            tabindex: \"-1\",\n                            onClick: ()=>this.handleSkinClick(skin),\n                            onMouseEnter: ()=>this.handleSkinMouseOver(skin),\n                            onMouseLeave: ()=>this.handleSkinMouseOver(),\n                            class: \"option flex flex-grow flex-middle\",\n                            children: [\n                                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n                                    class: `skin-tone skin-tone-${skin}`\n                                }),\n                                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"span\", {\n                                    class: \"margin-small-lr\",\n                                    children: (0, $7adb23b0109cc36a$export$dbe3113d60765c1a).skins[skin]\n                                })\n                            ]\n                        })\n                    ]\n                });\n            })\n        });\n    }\n    render() {\n        const lineWidth = this.props.perLine * this.props.emojiButtonSize;\n        return /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"section\", {\n            id: \"root\",\n            class: \"flex flex-column\",\n            dir: this.dir,\n            style: {\n                width: this.props.dynamicWidth ? \"100%\" : `calc(${lineWidth}px + (var(--padding) + var(--sidebar-width)))`\n            },\n            \"data-emoji-set\": this.props.set,\n            \"data-theme\": this.state.theme,\n            \"data-menu\": this.state.showSkins ? \"\" : undefined,\n            children: [\n                this.props.previewPosition == \"top\" && this.renderPreview(),\n                this.props.navPosition == \"top\" && this.renderNav(),\n                this.props.searchPosition == \"sticky\" && /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    class: \"padding-lr\",\n                    children: this.renderSearch()\n                }),\n                /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                    ref: this.refs.scroll,\n                    class: \"scroll flex-grow padding-lr\",\n                    children: /*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)(\"div\", {\n                        style: {\n                            width: this.props.dynamicWidth ? \"100%\" : lineWidth,\n                            height: \"100%\"\n                        },\n                        children: [\n                            this.props.searchPosition == \"static\" && this.renderSearch(),\n                            this.renderSearchResults(),\n                            this.renderCategories()\n                        ]\n                    })\n                }),\n                this.props.navPosition == \"bottom\" && this.renderNav(),\n                this.props.previewPosition == \"bottom\" && this.renderPreview(),\n                this.state.showSkins && this.renderSkins(),\n                this.renderLiveRegion()\n            ]\n        });\n    }\n    constructor(props){\n        super();\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"darkMediaCallback\", ()=>{\n            if (this.props.theme != \"auto\") return;\n            this.setState({\n                theme: this.darkMedia.matches ? \"dark\" : \"light\"\n            });\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"handleClickOutside\", (e)=>{\n            const { element: element  } = this.props;\n            if (e.target != element) {\n                if (this.state.showSkins) this.closeSkins();\n                if (this.props.onClickOutside) this.props.onClickOutside(e);\n            }\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"handleBaseClick\", (e)=>{\n            if (!this.state.showSkins) return;\n            if (!e.target.closest(\".menu\")) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                this.closeSkins();\n            }\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"handleBaseKeydown\", (e)=>{\n            if (!this.state.showSkins) return;\n            if (e.key == \"Escape\") {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                this.closeSkins();\n            }\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"handleSearchClick\", ()=>{\n            const emoji = this.getEmojiByPos(this.state.pos);\n            if (!emoji) return;\n            this.setState({\n                pos: [\n                    -1,\n                    -1\n                ]\n            });\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"handleSearchInput\", async ()=>{\n            const input = this.refs.searchInput.current;\n            if (!input) return;\n            const { value: value  } = input;\n            const searchResults = await (0, $c4d155af13ad4d4b$export$2e2bcd8739ae039).search(value);\n            const afterRender = ()=>{\n                if (!this.refs.scroll.current) return;\n                this.refs.scroll.current.scrollTop = 0;\n            };\n            if (!searchResults) return this.setState({\n                searchResults: searchResults,\n                pos: [\n                    -1,\n                    -1\n                ]\n            }, afterRender);\n            const pos = input.selectionStart == input.value.length ? [\n                0,\n                0\n            ] : [\n                -1,\n                -1\n            ];\n            const grid = [];\n            grid.setsize = searchResults.length;\n            let row = null;\n            for (let emoji of searchResults){\n                if (!grid.length || row.length == this.getPerLine()) {\n                    row = [];\n                    row.__categoryId = \"search\";\n                    row.__index = grid.length;\n                    grid.push(row);\n                }\n                row.push(emoji);\n            }\n            this.ignoreMouse();\n            this.setState({\n                searchResults: grid,\n                pos: pos\n            }, afterRender);\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"handleSearchKeyDown\", (e)=>{\n            // const specialKey = e.altKey || e.ctrlKey || e.metaKey\n            const input = e.currentTarget;\n            e.stopImmediatePropagation();\n            switch(e.key){\n                case \"ArrowLeft\":\n                    // if (specialKey) return\n                    // e.preventDefault()\n                    this.navigate({\n                        e: e,\n                        input: input,\n                        left: true\n                    });\n                    break;\n                case \"ArrowRight\":\n                    // if (specialKey) return\n                    // e.preventDefault()\n                    this.navigate({\n                        e: e,\n                        input: input,\n                        right: true\n                    });\n                    break;\n                case \"ArrowUp\":\n                    // if (specialKey) return\n                    // e.preventDefault()\n                    this.navigate({\n                        e: e,\n                        input: input,\n                        up: true\n                    });\n                    break;\n                case \"ArrowDown\":\n                    // if (specialKey) return\n                    // e.preventDefault()\n                    this.navigate({\n                        e: e,\n                        input: input,\n                        down: true\n                    });\n                    break;\n                case \"Enter\":\n                    e.preventDefault();\n                    this.handleEmojiClick({\n                        e: e,\n                        pos: this.state.pos\n                    });\n                    break;\n                case \"Escape\":\n                    e.preventDefault();\n                    if (this.state.searchResults) this.clearSearch();\n                    else this.unfocusSearch();\n                    break;\n                default:\n                    break;\n            }\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"clearSearch\", ()=>{\n            const input = this.refs.searchInput.current;\n            if (!input) return;\n            input.value = \"\";\n            input.focus();\n            this.handleSearchInput();\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"handleCategoryClick\", ({ category: category , i: i  })=>{\n            this.scrollTo(i == 0 ? {\n                row: -1\n            } : {\n                categoryId: category.id\n            });\n        });\n        (0, $c770c458706daa72$export$2e2bcd8739ae039)(this, \"openSkins\", (e)=>{\n            const { currentTarget: currentTarget  } = e;\n            const rect = currentTarget.getBoundingClientRect();\n            this.setState({\n                showSkins: rect\n            }, async ()=>{\n                // Firefox requires 2 frames for the transition to consistenly work\n                await (0, $693b183b0a78708f$export$e772c8ff12451969)(2);\n                const menu = this.refs.menu.current;\n                if (!menu) return;\n                menu.classList.remove(\"hidden\");\n                this.refs.skinToneRadio.current.focus();\n                this.base.addEventListener(\"click\", this.handleBaseClick, true);\n                this.base.addEventListener(\"keydown\", this.handleBaseKeydown, true);\n            });\n        });\n        this.observers = [];\n        this.state = {\n            pos: [\n                -1,\n                -1\n            ],\n            perLine: this.initDynamicPerLine(props),\n            visibleRows: {\n                0: true\n            },\n            ...this.getInitialState(props)\n        };\n    }\n}\n\n\n\n\n\n\n\n\n\nclass $efa000751917694d$export$2e2bcd8739ae039 extends (0, $26f27c338a96b1a6$export$2e2bcd8739ae039) {\n    async connectedCallback() {\n        const props = (0, $7adb23b0109cc36a$export$75fe5f91d452f94b)(this.props, (0, $b247ea80b67298d5$export$2e2bcd8739ae039), this);\n        props.element = this;\n        props.ref = (component)=>{\n            this.component = component;\n        };\n        await (0, $7adb23b0109cc36a$export$2cd8252107eb640b)(props);\n        if (this.disconnected) return;\n        (0, $fb96b826c0c5f37a$export$b3890eb0ae9dca99)(/*#__PURE__*/ (0, $bd9dd35321b03dd4$export$34b9dba7ce09269b)((0, $89bd6bb200cc8fef$export$2e2bcd8739ae039), {\n            ...props\n        }), this.shadowRoot);\n    }\n    constructor(props){\n        super(props, {\n            styles: (0, (/*@__PURE__*/$parcel$interopDefault($329d53ba9fd7125f$exports)))\n        });\n    }\n}\n(0, $c770c458706daa72$export$2e2bcd8739ae039)($efa000751917694d$export$2e2bcd8739ae039, \"Props\", (0, $b247ea80b67298d5$export$2e2bcd8739ae039));\nif (typeof customElements !== \"undefined\" && !customElements.get(\"em-emoji-picker\")) customElements.define(\"em-emoji-picker\", $efa000751917694d$export$2e2bcd8739ae039);\n\n\nvar $329d53ba9fd7125f$exports = {};\n$329d53ba9fd7125f$exports = \":host {\\n  width: min-content;\\n  height: 435px;\\n  min-height: 230px;\\n  border-radius: var(--border-radius);\\n  box-shadow: var(--shadow);\\n  --border-radius: 10px;\\n  --category-icon-size: 18px;\\n  --font-family: -apple-system, BlinkMacSystemFont, \\\"Helvetica Neue\\\", sans-serif;\\n  --font-size: 15px;\\n  --preview-placeholder-size: 21px;\\n  --preview-title-size: 1.1em;\\n  --preview-subtitle-size: .9em;\\n  --shadow-color: 0deg 0% 0%;\\n  --shadow: .3px .5px 2.7px hsl(var(--shadow-color) / .14), .4px .8px 1px -3.2px hsl(var(--shadow-color) / .14), 1px 2px 2.5px -4.5px hsl(var(--shadow-color) / .14);\\n  display: flex;\\n}\\n\\n[data-theme=\\\"light\\\"] {\\n  --em-rgb-color: var(--rgb-color, 34, 36, 39);\\n  --em-rgb-accent: var(--rgb-accent, 34, 102, 237);\\n  --em-rgb-background: var(--rgb-background, 255, 255, 255);\\n  --em-rgb-input: var(--rgb-input, 255, 255, 255);\\n  --em-color-border: var(--color-border, rgba(0, 0, 0, .05));\\n  --em-color-border-over: var(--color-border-over, rgba(0, 0, 0, .1));\\n}\\n\\n[data-theme=\\\"dark\\\"] {\\n  --em-rgb-color: var(--rgb-color, 222, 222, 221);\\n  --em-rgb-accent: var(--rgb-accent, 58, 130, 247);\\n  --em-rgb-background: var(--rgb-background, 21, 22, 23);\\n  --em-rgb-input: var(--rgb-input, 0, 0, 0);\\n  --em-color-border: var(--color-border, rgba(255, 255, 255, .1));\\n  --em-color-border-over: var(--color-border-over, rgba(255, 255, 255, .2));\\n}\\n\\n#root {\\n  --color-a: rgb(var(--em-rgb-color));\\n  --color-b: rgba(var(--em-rgb-color), .65);\\n  --color-c: rgba(var(--em-rgb-color), .45);\\n  --padding: 12px;\\n  --padding-small: calc(var(--padding) / 2);\\n  --sidebar-width: 16px;\\n  --duration: 225ms;\\n  --duration-fast: 125ms;\\n  --duration-instant: 50ms;\\n  --easing: cubic-bezier(.4, 0, .2, 1);\\n  width: 100%;\\n  text-align: left;\\n  border-radius: var(--border-radius);\\n  background-color: rgb(var(--em-rgb-background));\\n  position: relative;\\n}\\n\\n@media (prefers-reduced-motion) {\\n  #root {\\n    --duration: 0;\\n    --duration-fast: 0;\\n    --duration-instant: 0;\\n  }\\n}\\n\\n#root[data-menu] button {\\n  cursor: auto;\\n}\\n\\n#root[data-menu] .menu button {\\n  cursor: pointer;\\n}\\n\\n:host, #root, input, button {\\n  color: rgb(var(--em-rgb-color));\\n  font-family: var(--font-family);\\n  font-size: var(--font-size);\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  line-height: normal;\\n}\\n\\n*, :before, :after {\\n  box-sizing: border-box;\\n  min-width: 0;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.relative {\\n  position: relative;\\n}\\n\\n.flex {\\n  display: flex;\\n}\\n\\n.flex-auto {\\n  flex: none;\\n}\\n\\n.flex-center {\\n  justify-content: center;\\n}\\n\\n.flex-column {\\n  flex-direction: column;\\n}\\n\\n.flex-grow {\\n  flex: auto;\\n}\\n\\n.flex-middle {\\n  align-items: center;\\n}\\n\\n.flex-wrap {\\n  flex-wrap: wrap;\\n}\\n\\n.padding {\\n  padding: var(--padding);\\n}\\n\\n.padding-t {\\n  padding-top: var(--padding);\\n}\\n\\n.padding-lr {\\n  padding-left: var(--padding);\\n  padding-right: var(--padding);\\n}\\n\\n.padding-r {\\n  padding-right: var(--padding);\\n}\\n\\n.padding-small {\\n  padding: var(--padding-small);\\n}\\n\\n.padding-small-b {\\n  padding-bottom: var(--padding-small);\\n}\\n\\n.padding-small-lr {\\n  padding-left: var(--padding-small);\\n  padding-right: var(--padding-small);\\n}\\n\\n.margin {\\n  margin: var(--padding);\\n}\\n\\n.margin-r {\\n  margin-right: var(--padding);\\n}\\n\\n.margin-l {\\n  margin-left: var(--padding);\\n}\\n\\n.margin-small-l {\\n  margin-left: var(--padding-small);\\n}\\n\\n.margin-small-lr {\\n  margin-left: var(--padding-small);\\n  margin-right: var(--padding-small);\\n}\\n\\n.align-l {\\n  text-align: left;\\n}\\n\\n.align-r {\\n  text-align: right;\\n}\\n\\n.color-a {\\n  color: var(--color-a);\\n}\\n\\n.color-b {\\n  color: var(--color-b);\\n}\\n\\n.color-c {\\n  color: var(--color-c);\\n}\\n\\n.ellipsis {\\n  white-space: nowrap;\\n  max-width: 100%;\\n  width: auto;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n}\\n\\n.sr-only {\\n  width: 1px;\\n  height: 1px;\\n  position: absolute;\\n  top: auto;\\n  left: -10000px;\\n  overflow: hidden;\\n}\\n\\na {\\n  cursor: pointer;\\n  color: rgb(var(--em-rgb-accent));\\n}\\n\\na:hover {\\n  text-decoration: underline;\\n}\\n\\n.spacer {\\n  height: 10px;\\n}\\n\\n[dir=\\\"rtl\\\"] .scroll {\\n  padding-left: 0;\\n  padding-right: var(--padding);\\n}\\n\\n.scroll {\\n  padding-right: 0;\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n}\\n\\n.scroll::-webkit-scrollbar {\\n  width: var(--sidebar-width);\\n  height: var(--sidebar-width);\\n}\\n\\n.scroll::-webkit-scrollbar-track {\\n  border: 0;\\n}\\n\\n.scroll::-webkit-scrollbar-button {\\n  width: 0;\\n  height: 0;\\n  display: none;\\n}\\n\\n.scroll::-webkit-scrollbar-corner {\\n  background-color: rgba(0, 0, 0, 0);\\n}\\n\\n.scroll::-webkit-scrollbar-thumb {\\n  min-height: 20%;\\n  min-height: 65px;\\n  border: 4px solid rgb(var(--em-rgb-background));\\n  border-radius: 8px;\\n}\\n\\n.scroll::-webkit-scrollbar-thumb:hover {\\n  background-color: var(--em-color-border-over) !important;\\n}\\n\\n.scroll:hover::-webkit-scrollbar-thumb {\\n  background-color: var(--em-color-border);\\n}\\n\\n.sticky {\\n  z-index: 1;\\n  background-color: rgba(var(--em-rgb-background), .9);\\n  -webkit-backdrop-filter: blur(4px);\\n  backdrop-filter: blur(4px);\\n  font-weight: 500;\\n  position: sticky;\\n  top: -1px;\\n}\\n\\n[dir=\\\"rtl\\\"] .search input[type=\\\"search\\\"] {\\n  padding: 10px 2.2em 10px 2em;\\n}\\n\\n[dir=\\\"rtl\\\"] .search .loupe {\\n  left: auto;\\n  right: .7em;\\n}\\n\\n[dir=\\\"rtl\\\"] .search .delete {\\n  left: .7em;\\n  right: auto;\\n}\\n\\n.search {\\n  z-index: 2;\\n  position: relative;\\n}\\n\\n.search input, .search button {\\n  font-size: calc(var(--font-size)  - 1px);\\n}\\n\\n.search input[type=\\\"search\\\"] {\\n  width: 100%;\\n  background-color: var(--em-color-border);\\n  transition-duration: var(--duration);\\n  transition-property: background-color, box-shadow;\\n  transition-timing-function: var(--easing);\\n  border: 0;\\n  border-radius: 10px;\\n  outline: 0;\\n  padding: 10px 2em 10px 2.2em;\\n  display: block;\\n}\\n\\n.search input[type=\\\"search\\\"]::-ms-input-placeholder {\\n  color: inherit;\\n  opacity: .6;\\n}\\n\\n.search input[type=\\\"search\\\"]::placeholder {\\n  color: inherit;\\n  opacity: .6;\\n}\\n\\n.search input[type=\\\"search\\\"], .search input[type=\\\"search\\\"]::-webkit-search-decoration, .search input[type=\\\"search\\\"]::-webkit-search-cancel-button, .search input[type=\\\"search\\\"]::-webkit-search-results-button, .search input[type=\\\"search\\\"]::-webkit-search-results-decoration {\\n  -webkit-appearance: none;\\n  -ms-appearance: none;\\n  appearance: none;\\n}\\n\\n.search input[type=\\\"search\\\"]:focus {\\n  background-color: rgb(var(--em-rgb-input));\\n  box-shadow: inset 0 0 0 1px rgb(var(--em-rgb-accent)), 0 1px 3px rgba(65, 69, 73, .2);\\n}\\n\\n.search .icon {\\n  z-index: 1;\\n  color: rgba(var(--em-rgb-color), .7);\\n  position: absolute;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n.search .loupe {\\n  pointer-events: none;\\n  left: .7em;\\n}\\n\\n.search .delete {\\n  right: .7em;\\n}\\n\\nsvg {\\n  fill: currentColor;\\n  width: 1em;\\n  height: 1em;\\n}\\n\\nbutton {\\n  -webkit-appearance: none;\\n  -ms-appearance: none;\\n  appearance: none;\\n  cursor: pointer;\\n  color: currentColor;\\n  background-color: rgba(0, 0, 0, 0);\\n  border: 0;\\n}\\n\\n#nav {\\n  z-index: 2;\\n  padding-top: 12px;\\n  padding-bottom: 12px;\\n  padding-right: var(--sidebar-width);\\n  position: relative;\\n}\\n\\n#nav button {\\n  color: var(--color-b);\\n  transition: color var(--duration) var(--easing);\\n}\\n\\n#nav button:hover {\\n  color: var(--color-a);\\n}\\n\\n#nav svg, #nav img {\\n  width: var(--category-icon-size);\\n  height: var(--category-icon-size);\\n}\\n\\n#nav[dir=\\\"rtl\\\"] .bar {\\n  left: auto;\\n  right: 0;\\n}\\n\\n#nav .bar {\\n  width: 100%;\\n  height: 3px;\\n  background-color: rgb(var(--em-rgb-accent));\\n  transition: transform var(--duration) var(--easing);\\n  border-radius: 3px 3px 0 0;\\n  position: absolute;\\n  bottom: -12px;\\n  left: 0;\\n}\\n\\n#nav button[aria-selected] {\\n  color: rgb(var(--em-rgb-accent));\\n}\\n\\n#preview {\\n  z-index: 2;\\n  padding: calc(var(--padding)  + 4px) var(--padding);\\n  padding-right: var(--sidebar-width);\\n  position: relative;\\n}\\n\\n#preview .preview-placeholder {\\n  font-size: var(--preview-placeholder-size);\\n}\\n\\n#preview .preview-title {\\n  font-size: var(--preview-title-size);\\n}\\n\\n#preview .preview-subtitle {\\n  font-size: var(--preview-subtitle-size);\\n}\\n\\n#nav:before, #preview:before {\\n  content: \\\"\\\";\\n  height: 2px;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n}\\n\\n#nav[data-position=\\\"top\\\"]:before, #preview[data-position=\\\"top\\\"]:before {\\n  background: linear-gradient(to bottom, var(--em-color-border), transparent);\\n  top: 100%;\\n}\\n\\n#nav[data-position=\\\"bottom\\\"]:before, #preview[data-position=\\\"bottom\\\"]:before {\\n  background: linear-gradient(to top, var(--em-color-border), transparent);\\n  bottom: 100%;\\n}\\n\\n.category:last-child {\\n  min-height: calc(100% + 1px);\\n}\\n\\n.category button {\\n  font-family: -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;\\n  position: relative;\\n}\\n\\n.category button > * {\\n  position: relative;\\n}\\n\\n.category button .background {\\n  opacity: 0;\\n  background-color: var(--em-color-border);\\n  transition: opacity var(--duration-fast) var(--easing) var(--duration-instant);\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n\\n.category button:hover .background {\\n  transition-duration: var(--duration-instant);\\n  transition-delay: 0s;\\n}\\n\\n.category button[aria-selected] .background {\\n  opacity: 1;\\n}\\n\\n.category button[data-keyboard] .background {\\n  transition: none;\\n}\\n\\n.row {\\n  width: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.skin-tone-button {\\n  border: 1px solid rgba(0, 0, 0, 0);\\n  border-radius: 100%;\\n}\\n\\n.skin-tone-button:hover {\\n  border-color: var(--em-color-border);\\n}\\n\\n.skin-tone-button:active .skin-tone {\\n  transform: scale(.85) !important;\\n}\\n\\n.skin-tone-button .skin-tone {\\n  transition: transform var(--duration) var(--easing);\\n}\\n\\n.skin-tone-button[aria-selected] {\\n  background-color: var(--em-color-border);\\n  border-top-color: rgba(0, 0, 0, .05);\\n  border-bottom-color: rgba(0, 0, 0, 0);\\n  border-left-width: 0;\\n  border-right-width: 0;\\n}\\n\\n.skin-tone-button[aria-selected] .skin-tone {\\n  transform: scale(.9);\\n}\\n\\n.menu {\\n  z-index: 2;\\n  white-space: nowrap;\\n  border: 1px solid var(--em-color-border);\\n  background-color: rgba(var(--em-rgb-background), .9);\\n  -webkit-backdrop-filter: blur(4px);\\n  backdrop-filter: blur(4px);\\n  transition-property: opacity, transform;\\n  transition-duration: var(--duration);\\n  transition-timing-function: var(--easing);\\n  border-radius: 10px;\\n  padding: 4px;\\n  position: absolute;\\n  box-shadow: 1px 1px 5px rgba(0, 0, 0, .05);\\n}\\n\\n.menu.hidden {\\n  opacity: 0;\\n}\\n\\n.menu[data-position=\\\"bottom\\\"] {\\n  transform-origin: 100% 100%;\\n}\\n\\n.menu[data-position=\\\"bottom\\\"].hidden {\\n  transform: scale(.9)rotate(-3deg)translateY(5%);\\n}\\n\\n.menu[data-position=\\\"top\\\"] {\\n  transform-origin: 100% 0;\\n}\\n\\n.menu[data-position=\\\"top\\\"].hidden {\\n  transform: scale(.9)rotate(3deg)translateY(-5%);\\n}\\n\\n.menu input[type=\\\"radio\\\"] {\\n  clip: rect(0 0 0 0);\\n  width: 1px;\\n  height: 1px;\\n  border: 0;\\n  margin: 0;\\n  padding: 0;\\n  position: absolute;\\n  overflow: hidden;\\n}\\n\\n.menu input[type=\\\"radio\\\"]:checked + .option {\\n  box-shadow: 0 0 0 2px rgb(var(--em-rgb-accent));\\n}\\n\\n.option {\\n  width: 100%;\\n  border-radius: 6px;\\n  padding: 4px 6px;\\n}\\n\\n.option:hover {\\n  color: #fff;\\n  background-color: rgb(var(--em-rgb-accent));\\n}\\n\\n.skin-tone {\\n  width: 16px;\\n  height: 16px;\\n  border-radius: 100%;\\n  display: inline-block;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\n.skin-tone:after {\\n  content: \\\"\\\";\\n  mix-blend-mode: overlay;\\n  background: linear-gradient(rgba(255, 255, 255, .2), rgba(0, 0, 0, 0));\\n  border: 1px solid rgba(0, 0, 0, .8);\\n  border-radius: 100%;\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  box-shadow: inset 0 -2px 3px #000, inset 0 1px 2px #fff;\\n}\\n\\n.skin-tone-1 {\\n  background-color: #ffc93a;\\n}\\n\\n.skin-tone-2 {\\n  background-color: #ffdab7;\\n}\\n\\n.skin-tone-3 {\\n  background-color: #e7b98f;\\n}\\n\\n.skin-tone-4 {\\n  background-color: #c88c61;\\n}\\n\\n.skin-tone-5 {\\n  background-color: #a46134;\\n}\\n\\n.skin-tone-6 {\\n  background-color: #5d4437;\\n}\\n\\n[data-index] {\\n  justify-content: space-between;\\n}\\n\\n[data-emoji-set=\\\"twitter\\\"] .skin-tone:after {\\n  box-shadow: none;\\n  border-color: rgba(0, 0, 0, .5);\\n}\\n\\n[data-emoji-set=\\\"twitter\\\"] .skin-tone-1 {\\n  background-color: #fade72;\\n}\\n\\n[data-emoji-set=\\\"twitter\\\"] .skin-tone-2 {\\n  background-color: #f3dfd0;\\n}\\n\\n[data-emoji-set=\\\"twitter\\\"] .skin-tone-3 {\\n  background-color: #eed3a8;\\n}\\n\\n[data-emoji-set=\\\"twitter\\\"] .skin-tone-4 {\\n  background-color: #cfad8d;\\n}\\n\\n[data-emoji-set=\\\"twitter\\\"] .skin-tone-5 {\\n  background-color: #a8805d;\\n}\\n\\n[data-emoji-set=\\\"twitter\\\"] .skin-tone-6 {\\n  background-color: #765542;\\n}\\n\\n[data-emoji-set=\\\"google\\\"] .skin-tone:after {\\n  box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, .4);\\n}\\n\\n[data-emoji-set=\\\"google\\\"] .skin-tone-1 {\\n  background-color: #f5c748;\\n}\\n\\n[data-emoji-set=\\\"google\\\"] .skin-tone-2 {\\n  background-color: #f1d5aa;\\n}\\n\\n[data-emoji-set=\\\"google\\\"] .skin-tone-3 {\\n  background-color: #d4b48d;\\n}\\n\\n[data-emoji-set=\\\"google\\\"] .skin-tone-4 {\\n  background-color: #aa876b;\\n}\\n\\n[data-emoji-set=\\\"google\\\"] .skin-tone-5 {\\n  background-color: #916544;\\n}\\n\\n[data-emoji-set=\\\"google\\\"] .skin-tone-6 {\\n  background-color: #61493f;\\n}\\n\\n[data-emoji-set=\\\"facebook\\\"] .skin-tone:after {\\n  border-color: rgba(0, 0, 0, .4);\\n  box-shadow: inset 0 -2px 3px #000, inset 0 1px 4px #fff;\\n}\\n\\n[data-emoji-set=\\\"facebook\\\"] .skin-tone-1 {\\n  background-color: #f5c748;\\n}\\n\\n[data-emoji-set=\\\"facebook\\\"] .skin-tone-2 {\\n  background-color: #f1d5aa;\\n}\\n\\n[data-emoji-set=\\\"facebook\\\"] .skin-tone-3 {\\n  background-color: #d4b48d;\\n}\\n\\n[data-emoji-set=\\\"facebook\\\"] .skin-tone-4 {\\n  background-color: #aa876b;\\n}\\n\\n[data-emoji-set=\\\"facebook\\\"] .skin-tone-5 {\\n  background-color: #916544;\\n}\\n\\n[data-emoji-set=\\\"facebook\\\"] .skin-tone-6 {\\n  background-color: #61493f;\\n}\\n\\n\";\n\n\n\n\n\n\n\n\n\n\nexport {$efa000751917694d$export$2e2bcd8739ae039 as Picker, $331b4160623139bf$export$2e2bcd8739ae039 as Emoji, $b22cfd0a55410b4f$export$2e2bcd8739ae039 as FrequentlyUsed, $e6eae5155b87f591$export$bcb25aa587e9cb13 as SafeFlags, $c4d155af13ad4d4b$export$2e2bcd8739ae039 as SearchIndex, $f72b75cf796873c7$export$2e2bcd8739ae039 as Store, $7adb23b0109cc36a$export$2cd8252107eb640b as init, $7adb23b0109cc36a$export$2d0294657ab35f1b as Data, $7adb23b0109cc36a$export$dbe3113d60765c1a as I18n, $693b183b0a78708f$export$5ef5574deca44bc0 as getEmojiDataFromNative};\n//# sourceMappingURL=module.js.map\n","export default class Helper {\n  static getDescendantProperty(object, path, list = []) {\n    let firstSegment;\n    let remaining;\n    let dotIndex;\n    let value;\n    let index;\n    let length;\n\n    if (path) {\n      dotIndex = path.indexOf('.');\n\n      if (dotIndex === -1) {\n        firstSegment = path;\n      } else {\n        firstSegment = path.slice(0, dotIndex);\n        remaining = path.slice(dotIndex + 1);\n      }\n\n      value = object[firstSegment];\n      if (value !== null && typeof value !== 'undefined') {\n        if (! remaining && (typeof value === 'string' || typeof value === 'number')) {\n          list.push(value);\n        } else if (Object.prototype.toString.call(value) === '[object Array]') {\n          for (index = 0, length = value.length; index < length; index++) {\n            Helper.getDescendantProperty(value[index], remaining, list);\n          }\n        } else if (remaining) {\n          Helper.getDescendantProperty(value, remaining, list);\n        }\n      }\n    } else {\n      list.push(object);\n    }\n\n    return list;\n  }\n}\n","import Helper from './Helper';\n\nexport default class FuzzySearch {\n  constructor(haystack = [], keys = [], options = {}) {\n    if (! Array.isArray(keys)) {\n      options = keys;\n      keys = [];\n    }\n\n    this.haystack = haystack;\n    this.keys = keys;\n    this.options = Object.assign({\n      caseSensitive: false,\n      sort: false,\n    }, options);\n  }\n\n  search(query = '') {\n    if (query === '') {\n      return this.haystack;\n    }\n\n    const results = [];\n\n    for (let i = 0; i < this.haystack.length; i++) {\n      const item = this.haystack[i];\n\n      if (this.keys.length === 0) {\n        const score = FuzzySearch.isMatch(item, query, this.options.caseSensitive);\n\n        if (score) {\n          results.push({ item, score });\n        }\n      } else {\n        for (let y = 0; y < this.keys.length; y++) {\n          const propertyValues = Helper.getDescendantProperty(item, this.keys[y]);\n\n          let found = false;\n\n          for (let z = 0; z < propertyValues.length; z++) {\n            const score = FuzzySearch.isMatch(propertyValues[z], query, this.options.caseSensitive);\n\n            if (score) {\n              found = true;\n\n              results.push({ item, score });\n\n              break;\n            }\n          }\n\n          if (found) {\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.options.sort) {\n      results.sort((a, b) => a.score - b.score);\n    }\n\n    return results.map(result => result.item);\n  }\n\n  static isMatch(item, query, caseSensitive) {\n    item = String(item);\n    query = String(query);\n\n    if (! caseSensitive) {\n      item = item.toLocaleLowerCase();\n      query = query.toLocaleLowerCase();\n    }\n\n    const indexes = FuzzySearch.nearestIndexesFor(item, query);\n\n    if (! indexes) {\n      return false;\n    }\n\n    // Exact matches should be first.\n    if (item === query) {\n      return 1;\n    }\n\n    // If we have more than 2 letters, matches close to each other should be first.\n    if (indexes.length > 1) {\n      return 2 + (indexes[indexes.length - 1] - indexes[0]);\n    }\n\n    // Matches closest to the start of the string should be first.\n    return 2 + indexes[0];\n  }\n\n  static nearestIndexesFor(item, query) {\n    const letters = query.split('');\n    let indexes = [];\n\n    const indexesOfFirstLetter = FuzzySearch.indexesOfFirstLetter(item, query);\n\n    indexesOfFirstLetter.forEach((startingIndex, loopingIndex) => {\n      let index = startingIndex + 1;\n\n      indexes[loopingIndex] = [startingIndex];\n\n      for (let i = 1; i < letters.length; i++) {\n        const letter = letters[i];\n\n        index = item.indexOf(letter, index);\n\n        if (index === -1) {\n          indexes[loopingIndex] = false;\n\n          break;\n        }\n\n        indexes[loopingIndex].push(index);\n\n        index++;\n      }\n    });\n\n    indexes = indexes.filter(letterIndexes => letterIndexes !== false);\n\n    if (! indexes.length) {\n      return false;\n    }\n\n    return indexes.sort((a, b) => {\n      if (a.length === 1) {\n        return a[0] - b[0];\n      }\n\n      a = a[a.length - 1] - a[0];\n      b = b[b.length - 1] - b[0];\n\n      return a - b;\n    })[0];\n  }\n\n  static indexesOfFirstLetter(item, query) {\n    const match = query[0];\n\n    return item.split('').map((letter, index) => {\n      if (letter !== match) {\n        return false;\n      }\n\n      return index;\n    }).filter(index => index !== false);\n  }\n}\n","import RawData from \"@emoji-mart/data\";\nimport type { EmojiMartData, Skin } from \"@emoji-mart/data\";\nimport { init, Data } from \"emoji-mart\";\nimport FuzzySearch from \"fuzzy-search\";\nimport capitalize from \"lodash/capitalize\";\nimport sortBy from \"lodash/sortBy\";\nimport { Emoji, EmojiCategory, EmojiSkinTone, EmojiVariants } from \"../types\";\n\ninit({ data: RawData });\n\n// Data has the pre-processed \"search\" terms.\nconst TypedData = Data as EmojiMartData;\n\n// Slightly modified version of https://github.com/koala-interactive/is-emoji-supported/blob/master/src/is-emoji-supported.ts\nconst isFlagEmojiSupported = (): boolean => {\n  const emoji = \"🇺🇸\";\n  let ctx = null;\n  try {\n    ctx = document\n      .createElement(\"canvas\")\n      .getContext(\"2d\", { willReadFrequently: true });\n\n    if (!ctx) {\n      return false;\n    }\n\n    const CANVAS_HEIGHT = 25;\n    const CANVAS_WIDTH = 20;\n    const textSize = Math.floor(CANVAS_HEIGHT / 2);\n\n    // Initialize convas context\n    ctx.font = textSize + \"px Arial, Sans-Serif\";\n    ctx.textBaseline = \"top\";\n    ctx.canvas.width = CANVAS_WIDTH * 2;\n    ctx.canvas.height = CANVAS_HEIGHT;\n\n    // Draw in red on the left\n    ctx.fillStyle = \"#FF0000\";\n    ctx.fillText(emoji, 0, 22);\n\n    // Draw in blue on right\n    ctx.fillStyle = \"#0000FF\";\n    ctx.fillText(emoji, CANVAS_WIDTH, 22);\n\n    const a = ctx.getImageData(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT).data;\n    const count = a.length;\n    let i = 0;\n\n    // Search the first visible pixel\n    // eslint-disable-next-line curly\n    for (; i < count && !a[i + 3]; i += 4);\n\n    // No visible pixel\n    if (i >= count) {\n      return false;\n    }\n\n    // Emoji has immutable color, so we check the color of the emoji in two different colors\n    // the result show be the same.\n    const x = CANVAS_WIDTH + ((i / 4) % CANVAS_WIDTH);\n    const y = Math.floor(i / 4 / CANVAS_WIDTH);\n    const b = ctx.getImageData(x, y, 1, 1).data;\n\n    if (a[i] !== b[0] || a[i + 2] !== b[2]) {\n      return false;\n    }\n\n    // Some emojis are a contraction of different ones, so if it's not\n    // supported, it will show multiple characters\n    if (ctx.measureText(emoji).width >= CANVAS_WIDTH) {\n      return false;\n    }\n  } catch {\n    return false;\n  }\n\n  // Supported\n  return true;\n};\n\nconst allowFlagEmoji = isFlagEmojiSupported();\n\nconst flagEmojiIds =\n  TypedData.categories\n    .filter(({ id }) => id === EmojiCategory.Flags.toLowerCase())\n    .map(({ emojis }) => emojis)[0] ?? [];\n\nconst Categories = allowFlagEmoji\n  ? TypedData.categories\n  : TypedData.categories.filter(\n      ({ id }) => capitalize(id) !== EmojiCategory.Flags\n    );\n\nconst Emojis = allowFlagEmoji\n  ? TypedData.emojis\n  : Object.fromEntries(\n      Object.entries(TypedData.emojis).filter(\n        ([id]) => !flagEmojiIds.includes(id)\n      )\n    );\n\nconst searcher = new FuzzySearch(Object.values(Emojis), [\"search\"], {\n  caseSensitive: false,\n  sort: true,\n});\n\n// Codes defined by unicode.org\nconst SKINTONE_CODE_TO_ENUM = {\n  \"1f3fb\": EmojiSkinTone.Light,\n  \"1f3fc\": EmojiSkinTone.MediumLight,\n  \"1f3fd\": EmojiSkinTone.Medium,\n  \"1f3fe\": EmojiSkinTone.MediumDark,\n  \"1f3ff\": EmojiSkinTone.Dark,\n};\n\ntype GetVariantsProps = {\n  id: string;\n  name: string;\n  skins: Skin[];\n};\n\nconst getVariants = ({ id, name, skins }: GetVariantsProps): EmojiVariants =>\n  skins.reduce((obj, skin) => {\n    const skinToneCode = skin.unified.split(\n      \"-\"\n    )[1] as keyof typeof SKINTONE_CODE_TO_ENUM;\n    const skinToneType =\n      SKINTONE_CODE_TO_ENUM[skinToneCode] ?? EmojiSkinTone.Default;\n    obj[skinToneType] = { id, name, value: skin.native } satisfies Emoji;\n    return obj;\n  }, {} as EmojiVariants);\n\nconst EMOJI_ID_TO_VARIANTS = Object.entries(Emojis).reduce(\n  (obj, [id, emoji]) => {\n    obj[id] = getVariants({\n      id,\n      name: emoji.name,\n      skins: emoji.skins,\n    });\n    return obj;\n  },\n  {} as Record<string, EmojiVariants>\n);\n\nconst CATEGORY_TO_EMOJI_IDS: Record<EmojiCategory, string[]> =\n  Categories.reduce((obj, { id, emojis }) => {\n    const key = capitalize(id) as EmojiCategory;\n    const category = EmojiCategory[key];\n    if (!category) {\n      return obj;\n    }\n    obj[category] = emojis;\n    return obj;\n  }, {} as Record<EmojiCategory, string[]>);\n\nexport const getEmojis = ({\n  ids,\n  skinTone,\n}: {\n  ids: string[];\n  skinTone: EmojiSkinTone;\n}): Emoji[] =>\n  ids.map(\n    (id) =>\n      EMOJI_ID_TO_VARIANTS[id][skinTone] ??\n      EMOJI_ID_TO_VARIANTS[id][EmojiSkinTone.Default]\n  );\n\nexport const getEmojisWithCategory = ({\n  skinTone,\n}: {\n  skinTone: EmojiSkinTone;\n}): Record<EmojiCategory, Emoji[]> =>\n  Object.keys(CATEGORY_TO_EMOJI_IDS).reduce((obj, category: EmojiCategory) => {\n    const emojiIds = CATEGORY_TO_EMOJI_IDS[category];\n    const emojis = emojiIds.map(\n      (emojiId) =>\n        EMOJI_ID_TO_VARIANTS[emojiId][skinTone] ??\n        EMOJI_ID_TO_VARIANTS[emojiId][EmojiSkinTone.Default]\n    );\n    obj[category] = emojis;\n    return obj;\n  }, {} as Record<EmojiCategory, Emoji[]>);\n\nexport const getEmojiVariants = ({ id }: { id: string }) =>\n  EMOJI_ID_TO_VARIANTS[id];\n\nexport const search = ({\n  query,\n  skinTone,\n}: {\n  query: string;\n  skinTone?: EmojiSkinTone;\n}) => {\n  const queryLowercase = query.toLowerCase();\n  const emojiSkinTone = skinTone ?? EmojiSkinTone.Default;\n\n  const matchedEmojis = searcher\n    .search(queryLowercase)\n    .map(\n      (emoji) =>\n        EMOJI_ID_TO_VARIANTS[emoji.id][emojiSkinTone] ??\n        EMOJI_ID_TO_VARIANTS[emoji.id][EmojiSkinTone.Default]\n    );\n  return sortBy(matchedEmojis, (emoji) => {\n    const nlc = emoji.name.toLowerCase();\n    return query === nlc ? -1 : nlc.startsWith(queryLowercase) ? 0 : 1;\n  });\n};\n\n/**\n * Get am emoji's human-readable ID from its string.\n *\n * @param emoji - The string representation of the emoji.\n * @returns The emoji id, if found.\n */\nexport const getEmojiId = (emoji: string): string | undefined =>\n  searcher.search(emoji)[0]?.id;\n","export var canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { canUseDOM } from './utils';\n\nvar Portal = function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  function Portal() {\n    _classCallCheck(this, Portal);\n\n    return _possibleConstructorReturn(this, (Portal.__proto__ || Object.getPrototypeOf(Portal)).apply(this, arguments));\n  }\n\n  _createClass(Portal, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.defaultNode) {\n        document.body.removeChild(this.defaultNode);\n      }\n      this.defaultNode = null;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!canUseDOM) {\n        return null;\n      }\n      if (!this.props.node && !this.defaultNode) {\n        this.defaultNode = document.createElement('div');\n        document.body.appendChild(this.defaultNode);\n      }\n      return ReactDOM.createPortal(this.props.children, this.props.node || this.defaultNode);\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  node: PropTypes.any\n};\n\nexport default Portal;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// This file is a fallback for a consumer who is not yet on React 16\n// as createPortal was introduced in React 16\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nvar Portal = function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  function Portal() {\n    _classCallCheck(this, Portal);\n\n    return _possibleConstructorReturn(this, (Portal.__proto__ || Object.getPrototypeOf(Portal)).apply(this, arguments));\n  }\n\n  _createClass(Portal, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.renderPortal();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(props) {\n      this.renderPortal();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      ReactDOM.unmountComponentAtNode(this.defaultNode || this.props.node);\n      if (this.defaultNode) {\n        document.body.removeChild(this.defaultNode);\n      }\n      this.defaultNode = null;\n      this.portal = null;\n    }\n  }, {\n    key: 'renderPortal',\n    value: function renderPortal(props) {\n      if (!this.props.node && !this.defaultNode) {\n        this.defaultNode = document.createElement('div');\n        document.body.appendChild(this.defaultNode);\n      }\n\n      var children = this.props.children;\n      // https://gist.github.com/jimfb/d99e0678e9da715ccf6454961ef04d1b\n      if (typeof this.props.children.type === 'function') {\n        children = React.cloneElement(this.props.children);\n      }\n\n      this.portal = ReactDOM.unstable_renderSubtreeIntoContainer(this, children, this.props.node || this.defaultNode);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\nexport default Portal;\n\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  node: PropTypes.any\n};","import ReactDOM from 'react-dom';\n\nimport Portalv4 from './Portal';\nimport LegacyPortal from './LegacyPortal';\n\nvar Portal = void 0;\n\nif (ReactDOM.createPortal) {\n  Portal = Portalv4;\n} else {\n  Portal = LegacyPortal;\n}\n\nexport default Portal;","import * as React from \"react\";\nimport { Portal as ReactPortal } from \"react-portal\";\n\n/**\n * A React context that provides a dom node for portals to be rendered into.\n */\nexport const PortalContext = React.createContext<\n  HTMLElement | null | undefined\n>(undefined);\n\n/**\n * A hook that returns the portal context value.\n */\nexport const usePortalContext = () => React.useContext(PortalContext);\n\n/**\n * A portal component that uses context to render into a different dom node\n * or the root of body if no context is available.\n */\nexport function Portal(props: { children: React.ReactNode }) {\n  const node = React.useContext(PortalContext);\n  return <ReactPortal node={node}>{props.children}</ReactPortal>;\n}\n","import { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport scrollIntoView from \"scroll-into-view-if-needed\";\nimport styled from \"styled-components\";\nimport MenuItem from \"~/components/ContextMenu/MenuItem\";\nimport { usePortalContext } from \"~/components/Portal\";\n\nexport type Props = {\n  /** Whether the item is selected */\n  selected: boolean;\n  /** Whether the item is disabled */\n  disabled?: boolean;\n  /** Callback when the item is clicked */\n  onClick: (event: React.SyntheticEvent) => void;\n  /** Callback when the item is hovered */\n  onPointerMove?: (event: React.SyntheticEvent) => void;\n  /** An optional icon for the item */\n  icon?: React.ReactNode;\n  /** The title of the item */\n  title: React.ReactNode;\n  /** An optional subtitle for the item */\n  subtitle?: React.ReactNode;\n  /** A string representing the keyboard shortcut for the item */\n  shortcut?: string;\n};\n\nfunction SuggestionsMenuItem({\n  selected,\n  disabled,\n  onClick,\n  onPointerMove,\n  title,\n  subtitle,\n  shortcut,\n  icon,\n}: Props) {\n  const portal = usePortalContext();\n  const ref = React.useCallback(\n    (node) => {\n      if (selected && node) {\n        scrollIntoView(node, {\n          scrollMode: \"if-needed\",\n          block: \"nearest\",\n          boundary: (parent) =>\n            // All the parent elements of your target are checked until they\n            // reach the portal context. Prevents body and other parent\n            // elements from being scrolled\n            parent !== portal,\n        });\n      }\n    },\n    [selected, portal]\n  );\n\n  return (\n    <MenuItem\n      ref={ref}\n      active={selected}\n      onClick={disabled ? undefined : onClick}\n      onPointerMove={disabled ? undefined : onPointerMove}\n      icon={icon}\n    >\n      {title}\n      {subtitle && <Subtitle $active={selected}>&middot; {subtitle}</Subtitle>}\n      {shortcut && <Shortcut $active={selected}>{shortcut}</Shortcut>}\n    </MenuItem>\n  );\n}\n\nconst Subtitle = styled.span<{ $active?: boolean }>`\n  color: ${(props) =>\n    props.$active\n      ? transparentize(0.35, props.theme.accentText)\n      : props.theme.textTertiary};\n`;\n\nconst Shortcut = styled.span<{ $active?: boolean }>`\n  color: ${(props) =>\n    props.$active\n      ? transparentize(0.35, props.theme.accentText)\n      : props.theme.textTertiary};\n  flex-grow: 1;\n  text-align: right;\n`;\n\nexport default SuggestionsMenuItem;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport SuggestionsMenuItem, {\n  Props as SuggestionsMenuItemProps,\n} from \"./SuggestionsMenuItem\";\n\nconst Emoji = styled.span`\n  font-size: 16px;\n  line-height: 1.6em;\n`;\n\ntype EmojiMenuItemProps = Omit<\n  SuggestionsMenuItemProps,\n  \"shortcut\" | \"theme\"\n> & {\n  emoji: string;\n};\n\nexport default function EmojiMenuItem({ emoji, ...rest }: EmojiMenuItemProps) {\n  return (\n    <SuggestionsMenuItem\n      {...rest}\n      icon={<Emoji className=\"emoji\">{emoji}</Emoji>}\n    />\n  );\n}\n","import { EmbedDescriptor } from \"../embeds\";\nimport { MenuItem } from \"../types\";\n\ntype Item = MenuItem | EmbedDescriptor;\n\nexport default function filterExcessSeparators<T extends Item>(\n  items: T[]\n): T[] {\n  return items\n    .reduce((acc, item) => {\n      // trim separator if the previous item was a separator\n      if (\n        item.name === \"separator\" &&\n        acc[acc.length - 1]?.name === \"separator\"\n      ) {\n        return acc;\n      }\n      return [...acc, item];\n    }, [] as T[])\n    .filter((item, index, arr) => {\n      if (\n        item.name === \"separator\" &&\n        (index === 0 || index === arr.length - 1)\n      ) {\n        return false;\n      }\n      return true;\n    });\n}\n","import * as React from \"react\";\nimport { Editor } from \"../\";\n\nconst EditorContext = React.createContext<Editor>({} as Editor);\n\nexport const useEditor = () => React.useContext(EditorContext);\n\nexport default EditorContext;\n","import { transparentize } from \"polished\";\nimport styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\n\nconst Input = styled.input`\n  font-size: 15px;\n  background: ${s(\"inputBorder\")};\n  color: ${s(\"text\")};\n  border-radius: 2px;\n  padding: 3px 8px;\n  border: 0;\n  margin: 0;\n  outline: none;\n  flex-grow: 1;\n  min-width: 0;\n\n  &::placeholder {\n    color: ${(props) => transparentize(0.5, props.theme.text)};\n  }\n\n  @media (hover: none) and (pointer: coarse) {\n    font-size: 16px;\n  }\n`;\n\nexport default Input;\n","import commandScore from \"command-score\";\nimport capitalize from \"lodash/capitalize\";\nimport orderBy from \"lodash/orderBy\";\nimport * as React from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport { toast } from \"sonner\";\nimport styled from \"styled-components\";\nimport insertFiles from \"@shared/editor/commands/insertFiles\";\nimport { EmbedDescriptor } from \"@shared/editor/embeds\";\nimport filterExcessSeparators from \"@shared/editor/lib/filterExcessSeparators\";\nimport { findParentNode } from \"@shared/editor/queries/findParentNode\";\nimport { MenuItem } from \"@shared/editor/types\";\nimport { depths, s } from \"@shared/styles\";\nimport { getEventFiles } from \"@shared/utils/files\";\nimport { AttachmentValidation } from \"@shared/validations\";\nimport Header from \"~/components/ContextMenu/Header\";\nimport { Portal } from \"~/components/Portal\";\nimport Scrollable from \"~/components/Scrollable\";\nimport useDictionary from \"~/hooks/useDictionary\";\nimport Logger from \"~/utils/Logger\";\nimport { useEditor } from \"./EditorContext\";\nimport Input from \"./Input\";\n\ntype TopAnchor = {\n  top: number;\n  bottom: undefined;\n};\n\ntype BottomAnchor = {\n  top: undefined;\n  bottom: number;\n};\n\ntype LeftAnchor = {\n  left: number;\n  right: undefined;\n};\n\ntype RightAnchor = {\n  left: undefined;\n  right: number;\n};\n\ntype Position = ((TopAnchor | BottomAnchor) & (LeftAnchor | RightAnchor)) & {\n  isAbove: boolean;\n};\n\nconst defaultPosition: Position = {\n  top: 0,\n  bottom: undefined,\n  left: -10000,\n  right: undefined,\n  isAbove: false,\n};\n\nexport type Props<T extends MenuItem = MenuItem> = {\n  rtl: boolean;\n  isActive: boolean;\n  search: string;\n  trigger: string;\n  uploadFile?: (file: File) => Promise<string>;\n  onFileUploadStart?: () => void;\n  onFileUploadStop?: () => void;\n  /** Callback when the menu is closed */\n  onClose: (insertNewLine?: boolean) => void;\n  /** Optional callback when a suggestion is selected */\n  onSelect?: (item: MenuItem) => void;\n  embeds?: EmbedDescriptor[];\n  renderMenuItem: (\n    item: T,\n    index: number,\n    options: {\n      selected: boolean;\n      onClick: (event: React.SyntheticEvent) => void;\n    }\n  ) => React.ReactNode;\n  filterable?: boolean;\n  items: T[];\n};\n\nfunction SuggestionsMenu<T extends MenuItem>(props: Props<T>) {\n  const { view, commands, props: editorProps } = useEditor();\n  const dictionary = useDictionary();\n  const { t } = useTranslation();\n  const hasActivated = React.useRef(false);\n  const pointerRef = React.useRef<{ clientX: number; clientY: number }>({\n    clientX: 0,\n    clientY: 0,\n  });\n  const menuRef = React.useRef<HTMLDivElement>(null);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const [position, setPosition] = React.useState<Position>(defaultPosition);\n  const [insertItem, setInsertItem] = React.useState<\n    MenuItem | EmbedDescriptor\n  >();\n  const [selectedIndex, setSelectedIndex] = React.useState(0);\n\n  React.useEffect(() => {\n    if (props.isActive) {\n      hasActivated.current = true;\n    }\n  }, [props.isActive]);\n\n  const calculatePosition = React.useCallback(\n    (props: Props) => {\n      if (!props.isActive) {\n        return defaultPosition;\n      }\n\n      const caretPosition = () => {\n        let fromPos;\n        let toPos;\n        try {\n          fromPos = view.coordsAtPos(selection.from);\n          toPos = view.coordsAtPos(selection.to, -1);\n        } catch (err) {\n          Logger.warn(\"Unable to calculate caret position\", err);\n          return {\n            top: 0,\n            bottom: 0,\n            left: 0,\n            right: 0,\n          };\n        }\n\n        // ensure that start < end for the menu to be positioned correctly\n        return {\n          top: Math.min(fromPos.top, toPos.top),\n          bottom: Math.max(fromPos.bottom, toPos.bottom),\n          left: Math.min(fromPos.left, toPos.left),\n          right: Math.max(fromPos.right, toPos.right),\n        };\n      };\n\n      const { selection } = view.state;\n      const ref = menuRef.current;\n      const offsetWidth = ref ? ref.offsetWidth : 0;\n      const offsetHeight = ref ? ref.offsetHeight : 0;\n      const { top, bottom, right, left } = caretPosition();\n      const margin = 12;\n\n      const offsetParent = ref?.offsetParent\n        ? ref.offsetParent.getBoundingClientRect()\n        : ({\n            width: 0,\n            height: 0,\n            top: 0,\n            left: 0,\n          } as DOMRect);\n\n      let leftPos = Math.min(\n        left - offsetParent.left,\n        window.innerWidth - offsetParent.left - offsetWidth - margin\n      );\n      if (props.rtl) {\n        leftPos = right - offsetWidth;\n      }\n\n      if (top - offsetHeight > margin) {\n        return {\n          left: leftPos,\n          top: undefined,\n          bottom: offsetParent.bottom - top,\n          right: undefined,\n          isAbove: false,\n        };\n      } else {\n        return {\n          left: leftPos,\n          top: bottom - offsetParent.top,\n          bottom: undefined,\n          right: undefined,\n          isAbove: true,\n        };\n      }\n    },\n    [view]\n  );\n\n  const handleClearSearch = React.useCallback(() => {\n    const { state, dispatch } = view;\n    const poss = state.doc.cut(\n      state.selection.from - (props.search ?? \"\").length - props.trigger.length,\n      state.selection.from\n    );\n    const trimTrigger = poss.textContent.startsWith(props.trigger);\n\n    if (!props.search && !trimTrigger) {\n      return;\n    }\n\n    // clear search input\n    dispatch(\n      state.tr.insertText(\n        \"\",\n        Math.max(\n          0,\n          state.selection.from -\n            (props.search ?? \"\").length -\n            (trimTrigger ? props.trigger.length : 0)\n        ),\n        state.selection.to\n      )\n    );\n  }, [props.search, props.trigger, view]);\n\n  React.useEffect(() => {\n    if (!props.isActive) {\n      return;\n    }\n\n    // reset scroll position to top when opening menu as the contents are\n    // hidden, not unrendered\n    if (menuRef.current) {\n      menuRef.current.scroll({ top: 0 });\n    }\n\n    setPosition(calculatePosition(props));\n    setSelectedIndex(0);\n    setInsertItem(undefined);\n  }, [calculatePosition, props.isActive]);\n\n  React.useEffect(() => {\n    setSelectedIndex(0);\n  }, [props.search]);\n\n  const insertNode = React.useCallback(\n    (item: MenuItem | EmbedDescriptor) => {\n      handleClearSearch();\n\n      const command = item.name ? commands[item.name] : undefined;\n      const attrs =\n        typeof item.attrs === \"function\" ? item.attrs(view.state) : item.attrs;\n\n      if (item.name === \"noop\") {\n        // Do nothing\n      } else if (command) {\n        command(attrs);\n      } else {\n        commands[`create${capitalize(item.name)}`](attrs);\n      }\n      if (\"appendSpace\" in item) {\n        const { dispatch } = view;\n        dispatch(view.state.tr.insertText(\" \"));\n      }\n\n      props.onClose();\n    },\n    [commands, handleClearSearch, props, view]\n  );\n\n  const handleClickItem = React.useCallback(\n    (item) => {\n      props.onSelect?.(item);\n\n      switch (item.name) {\n        case \"link\":\n          insertNode({\n            ...item,\n            name: \"mention\",\n          });\n          void editorProps.onCreateLink?.({\n            title: item.attrs.label,\n            id: item.attrs.modelId,\n          });\n          return;\n        case \"image\":\n          return triggerFilePick(\n            AttachmentValidation.imageContentTypes.join(\", \")\n          );\n        case \"video\":\n          return triggerFilePick(\"video/*\");\n        case \"attachment\":\n          return triggerFilePick(\"*\");\n        case \"embed\":\n          return triggerLinkInput(item);\n        default:\n          insertNode(item);\n      }\n    },\n    [editorProps, props, insertNode]\n  );\n\n  const close = React.useCallback(() => {\n    props.onClose();\n    view.focus();\n  }, [props, view]);\n\n  const handleLinkInputKeydown = (\n    event: React.KeyboardEvent<HTMLInputElement>\n  ) => {\n    if (event.nativeEvent.isComposing) {\n      return;\n    }\n    if (!props.isActive) {\n      return;\n    }\n    if (!insertItem) {\n      return;\n    }\n\n    if (event.key === \"Enter\") {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const href = event.currentTarget.value;\n      const matches = \"matcher\" in insertItem && insertItem.matcher(href);\n\n      if (!matches) {\n        toast.error(dictionary.embedInvalidLink);\n        return;\n      }\n\n      insertNode({\n        name: \"embed\",\n        attrs: {\n          href,\n        },\n      });\n    }\n\n    if (event.key === \"Escape\") {\n      props.onClose();\n      view.focus();\n    }\n  };\n\n  const handleLinkInputPaste = (\n    event: React.ClipboardEvent<HTMLInputElement>\n  ) => {\n    if (!props.isActive) {\n      return;\n    }\n    if (!insertItem) {\n      return;\n    }\n\n    const href = event.clipboardData.getData(\"text/plain\");\n    const matches = \"matcher\" in insertItem && insertItem.matcher(href);\n\n    if (matches) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      insertNode({\n        name: \"embed\",\n        attrs: {\n          href,\n        },\n      });\n    }\n  };\n\n  const triggerFilePick = (accept: string) => {\n    if (inputRef.current) {\n      if (accept) {\n        inputRef.current.accept = accept;\n      }\n      inputRef.current.click();\n    }\n  };\n\n  const triggerLinkInput = (item: MenuItem) => {\n    setInsertItem(item);\n  };\n\n  const handleFilesPicked = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    // Re-focus the editor as it loses focus when file picker is opened on iOS\n    view.focus();\n\n    const { uploadFile, onFileUploadStart, onFileUploadStop } = props;\n    const files = getEventFiles(event);\n    const parent = findParentNode((node) => !!node)(view.state.selection);\n\n    handleClearSearch();\n\n    if (!uploadFile) {\n      throw new Error(\"uploadFile prop is required to replace files\");\n    }\n\n    if (parent) {\n      await insertFiles(view, event, parent.pos, files, {\n        uploadFile,\n        onFileUploadStart,\n        onFileUploadStop,\n        dictionary,\n        isAttachment: inputRef.current?.accept === \"*\",\n      });\n    }\n\n    if (inputRef.current) {\n      inputRef.current.value = \"\";\n    }\n\n    props.onClose();\n  };\n\n  const filtered = React.useMemo(() => {\n    const { embeds = [], search = \"\", uploadFile, filterable = true } = props;\n    let items: (EmbedDescriptor | MenuItem)[] = [...props.items];\n    const embedItems: EmbedDescriptor[] = [];\n\n    for (const embed of embeds) {\n      if (embed.title && embed.visible !== false) {\n        embedItems.push(\n          new EmbedDescriptor({\n            ...embed,\n            name: \"embed\",\n          })\n        );\n      }\n    }\n\n    if (embedItems.length) {\n      items = items.concat(\n        {\n          name: \"separator\",\n        },\n        embedItems\n      );\n    }\n\n    const searchInput = search.toLowerCase();\n    const filtered = items.filter((item) => {\n      if (item.name === \"separator\") {\n        return true;\n      }\n\n      if (item.visible === false) {\n        return false;\n      }\n\n      // Some extensions may be disabled, remove corresponding menu items\n      if (\n        item.name &&\n        !commands[item.name] &&\n        !commands[`create${capitalize(item.name)}`] &&\n        item.name !== \"noop\"\n      ) {\n        return false;\n      }\n\n      // If no image upload callback has been passed, filter the image block out\n      if (!uploadFile && item.name === \"image\") {\n        return false;\n      }\n\n      // some items (defaultHidden) are not visible until a search query exists\n      if (!search) {\n        return !item.defaultHidden;\n      }\n\n      if (!filterable) {\n        return item;\n      }\n\n      return (\n        (item.name || \"\").toLocaleLowerCase().includes(searchInput) ||\n        (item.title || \"\").toLocaleLowerCase().includes(searchInput) ||\n        (item.keywords || \"\").toLocaleLowerCase().includes(searchInput)\n      );\n    });\n\n    return filterExcessSeparators(\n      orderBy(\n        filtered.map((item) => ({\n          item,\n          section:\n            \"section\" in item && item.section && \"priority\" in item.section\n              ? (item.section.priority as number) ?? 0\n              : 0,\n          priority: \"priority\" in item ? item.priority : 0,\n          score:\n            searchInput && item.title\n              ? commandScore(item.title, searchInput)\n              : 0,\n        })),\n        [\"section\", \"priority\", \"score\"],\n        [\"desc\", \"desc\", \"desc\"]\n      ).map(({ item }) => item)\n    );\n  }, [commands, props]);\n\n  React.useEffect(() => {\n    const handleMouseDown = (event: MouseEvent) => {\n      if (\n        !menuRef.current ||\n        menuRef.current.contains(event.target as Element)\n      ) {\n        return;\n      }\n\n      props.onClose();\n    };\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.isComposing) {\n        return;\n      }\n      if (!props.isActive) {\n        return;\n      }\n\n      if (event.key === \"Enter\") {\n        event.preventDefault();\n\n        const item = filtered[selectedIndex];\n\n        if (item) {\n          handleClickItem(item);\n        } else {\n          props.onClose(true);\n        }\n      }\n\n      if (\n        event.key === \"ArrowUp\" ||\n        (event.key === \"Tab\" && event.shiftKey) ||\n        (event.ctrlKey && event.key === \"p\")\n      ) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (filtered.length) {\n          const prevIndex = selectedIndex - 1;\n          const prev = filtered[prevIndex];\n\n          setSelectedIndex(\n            Math.max(0, prev?.name === \"separator\" ? prevIndex - 1 : prevIndex)\n          );\n        } else {\n          close();\n        }\n      }\n\n      if (\n        event.key === \"ArrowDown\" ||\n        (event.key === \"Tab\" && !event.shiftKey) ||\n        (event.ctrlKey && event.key === \"n\")\n      ) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (filtered.length) {\n          const total = filtered.length - 1;\n          const nextIndex = selectedIndex + 1;\n          const next = filtered[nextIndex];\n\n          setSelectedIndex(\n            Math.min(\n              next?.name === \"separator\" ? nextIndex + 1 : nextIndex,\n              total\n            )\n          );\n        } else {\n          close();\n        }\n      }\n\n      if (event.key === \"Escape\") {\n        event.preventDefault();\n        close();\n      }\n    };\n\n    window.addEventListener(\"mousedown\", handleMouseDown);\n    window.addEventListener(\"keydown\", handleKeyDown, {\n      capture: true,\n    });\n\n    return () => {\n      window.removeEventListener(\"mousedown\", handleMouseDown);\n      window.removeEventListener(\"keydown\", handleKeyDown, {\n        capture: true,\n      });\n    };\n  }, [close, filtered, handleClickItem, props, selectedIndex]);\n\n  const { isActive, uploadFile } = props;\n  const items = filtered;\n  let previousHeading: string | undefined;\n\n  return (\n    <Portal>\n      <Wrapper active={isActive} ref={menuRef} hiddenScrollbars {...position}>\n        {(isActive || hasActivated.current) && (\n          <>\n            {insertItem ? (\n              <LinkInputWrapper>\n                <LinkInput\n                  type=\"text\"\n                  placeholder={\n                    \"placeholder\" in insertItem\n                      ? insertItem.placeholder\n                      : insertItem.title\n                      ? dictionary.pasteLinkWithTitle(insertItem.title)\n                      : dictionary.pasteLink\n                  }\n                  onKeyDown={handleLinkInputKeydown}\n                  onPaste={handleLinkInputPaste}\n                  autoFocus\n                />\n              </LinkInputWrapper>\n            ) : (\n              <List>\n                {items.map((item, index) => {\n                  if (item.name === \"separator\") {\n                    return (\n                      <ListItem key={index}>\n                        <hr />\n                      </ListItem>\n                    );\n                  }\n\n                  if (!item.title) {\n                    return null;\n                  }\n\n                  const handlePointerMove = (ev: React.PointerEvent) => {\n                    if (\n                      selectedIndex !== index &&\n                      // Safari triggers pointermove with identical coordinates when the pointer has not moved.\n                      // This causes the menu selection to flicker when the pointer is over the menu but not moving.\n                      (pointerRef.current.clientX !== ev.clientX ||\n                        pointerRef.current.clientY !== ev.clientY)\n                    ) {\n                      setSelectedIndex(index);\n                    }\n                    pointerRef.current = {\n                      clientX: ev.clientX,\n                      clientY: ev.clientY,\n                    };\n                  };\n\n                  const handlePointerDown = () => {\n                    if (selectedIndex !== index) {\n                      setSelectedIndex(index);\n                    }\n                  };\n\n                  const currentHeading =\n                    \"section\" in item ? item.section?.({ t }) : undefined;\n\n                  const response = (\n                    <>\n                      {currentHeading !== previousHeading && (\n                        <Header key={currentHeading}>{currentHeading}</Header>\n                      )}\n                      <ListItem\n                        key={index}\n                        onPointerMove={handlePointerMove}\n                        onPointerDown={handlePointerDown}\n                      >\n                        {props.renderMenuItem(item as any, index, {\n                          selected: index === selectedIndex,\n                          onClick: () => handleClickItem(item),\n                        })}\n                      </ListItem>\n                    </>\n                  );\n\n                  previousHeading = currentHeading;\n                  return response;\n                })}\n                {items.length === 0 && (\n                  <ListItem>\n                    <Empty>{dictionary.noResults}</Empty>\n                  </ListItem>\n                )}\n              </List>\n            )}\n            {uploadFile && (\n              <VisuallyHidden>\n                <label>\n                  <Trans>Import document</Trans>\n                  <input\n                    type=\"file\"\n                    ref={inputRef}\n                    onChange={handleFilesPicked}\n                    multiple\n                  />\n                </label>\n              </VisuallyHidden>\n            )}\n          </>\n        )}\n      </Wrapper>\n    </Portal>\n  );\n}\n\nconst LinkInputWrapper = styled.div`\n  margin: 8px;\n`;\n\nconst LinkInput = styled(Input)`\n  height: 32px;\n  width: 100%;\n  color: ${s(\"textSecondary\")};\n`;\n\nconst List = styled.ol`\n  list-style: none;\n  text-align: left;\n  height: 100%;\n  padding: 6px;\n  margin: 0;\n`;\n\nconst ListItem = styled.li`\n  padding: 0;\n  margin: 0;\n`;\n\nconst Empty = styled.div`\n  display: flex;\n  align-items: center;\n  color: ${s(\"textSecondary\")};\n  font-weight: 500;\n  font-size: 14px;\n  height: 32px;\n  padding: 0 16px;\n`;\n\nexport const Wrapper = styled(Scrollable)<{\n  active: boolean;\n  top?: number;\n  bottom?: number;\n  left?: number;\n  isAbove: boolean;\n}>`\n  color: ${s(\"textSecondary\")};\n  font-family: ${s(\"fontFamily\")};\n  position: absolute;\n  z-index: ${depths.editorToolbar};\n  ${(props) => props.top !== undefined && `top: ${props.top}px`};\n  ${(props) => props.bottom !== undefined && `bottom: ${props.bottom}px`};\n  left: ${(props) => props.left}px;\n  background: ${s(\"menuBackground\")};\n  border-radius: 6px;\n  box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px,\n    rgba(0, 0, 0, 0.08) 0px 4px 8px, rgba(0, 0, 0, 0.08) 0px 2px 4px;\n  opacity: 0;\n  transform: scale(0.95);\n  transition: opacity 150ms cubic-bezier(0.175, 0.885, 0.32, 1.275),\n    transform 150ms cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  transition-delay: 150ms;\n  line-height: 0;\n  box-sizing: border-box;\n  pointer-events: none;\n  white-space: nowrap;\n  width: 280px;\n  height: auto;\n  max-height: 324px;\n\n  * {\n    box-sizing: border-box;\n  }\n\n  hr {\n    border: 0;\n    height: 0;\n    border-top: 1px solid ${s(\"divider\")};\n  }\n\n  ${({ active, isAbove }) =>\n    active &&\n    `\n    transform: translateY(${isAbove ? \"6px\" : \"-6px\"}) scale(1);\n    pointer-events: all;\n    opacity: 1;\n  `};\n\n  @media print {\n    display: none;\n  }\n`;\n\nexport default SuggestionsMenu;\n","import capitalize from \"lodash/capitalize\";\nimport React from \"react\";\nimport { emojiMartToGemoji, snakeCase } from \"@shared/editor/lib/emoji\";\nimport { search as emojiSearch } from \"@shared/utils/emoji\";\nimport EmojiMenuItem from \"./EmojiMenuItem\";\nimport SuggestionsMenu, {\n  Props as SuggestionsMenuProps,\n} from \"./SuggestionsMenu\";\n\ntype Emoji = {\n  name: string;\n  title: string;\n  emoji: string;\n  description: string;\n  attrs: { markup: string; \"data-name\": string };\n};\n\ntype Props = Omit<\n  SuggestionsMenuProps<Emoji>,\n  \"renderMenuItem\" | \"items\" | \"embeds\"\n>;\n\nconst EmojiMenu = (props: Props) => {\n  const { search = \"\" } = props;\n\n  const items = React.useMemo(\n    () =>\n      emojiSearch({ query: search })\n        .map((item) => {\n          // We snake_case the shortcode for backwards compatability with gemoji to\n          // avoid multiple formats being written into documents.\n          // @ts-expect-error emojiMartToGemoji key\n          const shortcode = snakeCase(emojiMartToGemoji[item.id] || item.id);\n          const emoji = item.value;\n\n          return {\n            name: \"emoji\",\n            title: emoji,\n            description: capitalize(item.name.toLowerCase()),\n            emoji,\n            attrs: { markup: shortcode, \"data-name\": shortcode },\n          };\n        })\n        .slice(0, 15),\n    [search]\n  );\n\n  return (\n    <SuggestionsMenu\n      {...props}\n      filterable={false}\n      renderMenuItem={(item, _index, options) => (\n        <EmojiMenuItem\n          onClick={options.onClick}\n          selected={options.selected}\n          title={item.description}\n          emoji={item.emoji}\n        />\n      )}\n      items={items}\n    />\n  );\n};\n\nexport default EmojiMenu;\n","import { action } from \"mobx\";\nimport * as React from \"react\";\nimport { WidgetProps } from \"@shared/editor/lib/Extension\";\nimport { isBrowser } from \"@shared/utils/browser\";\nimport Suggestion from \"~/editor/extensions/Suggestion\";\nimport EmojiMenu from \"../components/EmojiMenu\";\n\n/**\n * Languages using the colon character with a space in front in standard\n * punctuation. In this case the trigger is only matched once there is additional\n * text after the colon.\n */\nconst languagesUsingColon = [\"fr\"];\n\nexport default class EmojiMenuExtension extends Suggestion {\n  get defaultOptions() {\n    const languageIsUsingColon = isBrowser\n      ? languagesUsingColon.includes(window.navigator.language.slice(0, 2))\n      : false;\n\n    return {\n      trigger: \":\",\n      allowSpaces: false,\n      requireSearchTerm: languageIsUsingColon,\n      enabledInCode: false,\n    };\n  }\n\n  get name() {\n    return \"emoji-menu\";\n  }\n\n  widget = ({ rtl }: WidgetProps) => (\n    <EmojiMenu\n      rtl={rtl}\n      trigger={this.options.trigger}\n      isActive={this.state.open}\n      search={this.state.query}\n      onClose={action(() => {\n        this.state.open = false;\n      })}\n    />\n  );\n}\n","import { GapCursor } from \"prosemirror-gapcursor\";\nimport {\n  Plugin,\n  Selection,\n  AllSelection,\n  TextSelection,\n  EditorState,\n  Command,\n} from \"prosemirror-state\";\nimport Extension from \"@shared/editor/lib/Extension\";\nimport { isInCode } from \"@shared/editor/queries/isInCode\";\n\nexport default class Keys extends Extension {\n  get name() {\n    return \"keys\";\n  }\n\n  keys(): Record<string, Command> {\n    const onCancel = () => {\n      if (this.editor.props.onCancel) {\n        this.editor.props.onCancel();\n        return true;\n      }\n      return false;\n    };\n\n    return {\n      // Shortcuts for when editor has separate edit mode\n      \"Mod-Escape\": onCancel,\n      \"Shift-Escape\": onCancel,\n      \"Mod-s\": () => {\n        if (this.editor.props.onSave) {\n          this.editor.props.onSave({ done: false });\n          return true;\n        }\n        return false;\n      },\n      \"Mod-Enter\": (state: EditorState) => {\n        if (!isInCode(state) && this.editor.props.onSave) {\n          this.editor.props.onSave({ done: true });\n          return true;\n        }\n        return false;\n      },\n      Escape: () => {\n        (this.editor.view.dom as HTMLElement).blur();\n        return true;\n      },\n    };\n  }\n\n  get plugins() {\n    return [\n      new Plugin({\n        props: {\n          // we can't use the keys bindings for this as we want to preventDefault\n          // on the original keyboard event when handled\n          handleKeyDown: (view, event) => {\n            if (view.state.selection instanceof AllSelection) {\n              if (event.key === \"ArrowUp\") {\n                const selection = Selection.atStart(view.state.doc);\n                view.dispatch(view.state.tr.setSelection(selection));\n                return true;\n              }\n              if (event.key === \"ArrowDown\") {\n                const selection = Selection.atEnd(view.state.doc);\n                view.dispatch(view.state.tr.setSelection(selection));\n                return true;\n              }\n            }\n\n            // edge case where horizontal gap cursor does nothing if Enter key\n            // is pressed. Insert a newline and then move the cursor into it.\n            if (view.state.selection instanceof GapCursor) {\n              if (event.key === \"Enter\") {\n                view.dispatch(\n                  view.state.tr.insert(\n                    view.state.selection.from,\n                    view.state.schema.nodes.paragraph.create({})\n                  )\n                );\n                view.dispatch(\n                  view.state.tr.setSelection(\n                    TextSelection.near(\n                      view.state.doc.resolve(view.state.selection.from),\n                      -1\n                    )\n                  )\n                );\n                return true;\n              }\n            }\n\n            return false;\n          },\n        },\n      }),\n    ];\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = assertString;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction assertString(input) {\n  var isString = typeof input === 'string' || input instanceof String;\n  if (!isString) {\n    var invalidType = _typeof(input);\n    if (input === null) invalidType = 'null';else if (invalidType === 'object') invalidType = input.constructor.name;\n    throw new TypeError(\"Expected a string but received a \".concat(invalidType));\n  }\n}\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = merge;\nfunction merge() {\n  var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaults = arguments.length > 1 ? arguments[1] : undefined;\n  for (var key in defaults) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = defaults[key];\n    }\n  }\n  return obj;\n}\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isByteLength;\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n/* eslint-disable prefer-rest-params */\nfunction isByteLength(str, options) {\n  (0, _assertString.default)(str);\n  var min;\n  var max;\n  if (_typeof(options) === 'object') {\n    min = options.min || 0;\n    max = options.max;\n  } else {\n    // backwards compatibility: isByteLength(str, min [, max])\n    min = arguments[1];\n    max = arguments[2];\n  }\n  var len = encodeURI(str).split(/%..|./).length - 1;\n  return len >= min && (typeof max === 'undefined' || len <= max);\n}\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isFQDN;\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\nvar _merge = _interopRequireDefault(require(\"./util/merge\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar default_fqdn_options = {\n  require_tld: true,\n  allow_underscores: false,\n  allow_trailing_dot: false,\n  allow_numeric_tld: false,\n  allow_wildcard: false,\n  ignore_max_length: false\n};\nfunction isFQDN(str, options) {\n  (0, _assertString.default)(str);\n  options = (0, _merge.default)(options, default_fqdn_options);\n\n  /* Remove the optional trailing dot before checking validity */\n  if (options.allow_trailing_dot && str[str.length - 1] === '.') {\n    str = str.substring(0, str.length - 1);\n  }\n\n  /* Remove the optional wildcard before checking validity */\n  if (options.allow_wildcard === true && str.indexOf('*.') === 0) {\n    str = str.substring(2);\n  }\n  var parts = str.split('.');\n  var tld = parts[parts.length - 1];\n  if (options.require_tld) {\n    // disallow fqdns without tld\n    if (parts.length < 2) {\n      return false;\n    }\n    if (!options.allow_numeric_tld && !/^([a-z\\u00A1-\\u00A8\\u00AA-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(tld)) {\n      return false;\n    }\n\n    // disallow spaces\n    if (/\\s/.test(tld)) {\n      return false;\n    }\n  }\n\n  // reject numeric TLDs\n  if (!options.allow_numeric_tld && /^\\d+$/.test(tld)) {\n    return false;\n  }\n  return parts.every(function (part) {\n    if (part.length > 63 && !options.ignore_max_length) {\n      return false;\n    }\n    if (!/^[a-z_\\u00a1-\\uffff0-9-]+$/i.test(part)) {\n      return false;\n    }\n\n    // disallow full-width chars\n    if (/[\\uff01-\\uff5e]/.test(part)) {\n      return false;\n    }\n\n    // disallow parts starting or ending with hyphen\n    if (/^-|-$/.test(part)) {\n      return false;\n    }\n    if (!options.allow_underscores && /_/.test(part)) {\n      return false;\n    }\n    return true;\n  });\n}\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isIP;\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n11.3.  Examples\n\n   The following addresses\n\n             fe80::1234 (on the 1st link of the node)\n             ff02::5678 (on the 5th link of the node)\n             ff08::9abc (on the 10th organization of the node)\n\n   would be represented as follows:\n\n             fe80::1234%1\n             ff02::5678%5\n             ff08::9abc%10\n\n   (Here we assume a natural translation from a zone index to the\n   <zone_id> part, where the Nth zone of any scope is translated into\n   \"N\".)\n\n   If we use interface names as <zone_id>, those addresses could also be\n   represented as follows:\n\n            fe80::1234%ne0\n            ff02::5678%pvc1.3\n            ff08::9abc%interface10\n\n   where the interface \"ne0\" belongs to the 1st link, \"pvc1.3\" belongs\n   to the 5th link, and \"interface10\" belongs to the 10th organization.\n * * */\nvar IPv4SegmentFormat = '(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])';\nvar IPv4AddressFormat = \"(\".concat(IPv4SegmentFormat, \"[.]){3}\").concat(IPv4SegmentFormat);\nvar IPv4AddressRegExp = new RegExp(\"^\".concat(IPv4AddressFormat, \"$\"));\nvar IPv6SegmentFormat = '(?:[0-9a-fA-F]{1,4})';\nvar IPv6AddressRegExp = new RegExp('^(' + \"(?:\".concat(IPv6SegmentFormat, \":){7}(?:\").concat(IPv6SegmentFormat, \"|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){6}(?:\").concat(IPv4AddressFormat, \"|:\").concat(IPv6SegmentFormat, \"|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){5}(?::\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,2}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){4}(?:(:\").concat(IPv6SegmentFormat, \"){0,1}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,3}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){3}(?:(:\").concat(IPv6SegmentFormat, \"){0,2}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,4}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){2}(?:(:\").concat(IPv6SegmentFormat, \"){0,3}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,5}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){1}(?:(:\").concat(IPv6SegmentFormat, \"){0,4}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,6}|:)|\") + \"(?::((?::\".concat(IPv6SegmentFormat, \"){0,5}:\").concat(IPv4AddressFormat, \"|(?::\").concat(IPv6SegmentFormat, \"){1,7}|:))\") + ')(%[0-9a-zA-Z-.:]{1,})?$');\nfunction isIP(str) {\n  var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  (0, _assertString.default)(str);\n  version = String(version);\n  if (!version) {\n    return isIP(str, 4) || isIP(str, 6);\n  }\n  if (version === '4') {\n    return IPv4AddressRegExp.test(str);\n  }\n  if (version === '6') {\n    return IPv6AddressRegExp.test(str);\n  }\n  return false;\n}\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmail;\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\nvar _isByteLength = _interopRequireDefault(require(\"./isByteLength\"));\nvar _isFQDN = _interopRequireDefault(require(\"./isFQDN\"));\nvar _isIP = _interopRequireDefault(require(\"./isIP\"));\nvar _merge = _interopRequireDefault(require(\"./util/merge\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar default_email_options = {\n  allow_display_name: false,\n  allow_underscores: false,\n  require_display_name: false,\n  allow_utf8_local_part: true,\n  require_tld: true,\n  blacklisted_chars: '',\n  ignore_max_length: false,\n  host_blacklist: [],\n  host_whitelist: []\n};\n\n/* eslint-disable max-len */\n/* eslint-disable no-control-regex */\nvar splitNameAddress = /^([^\\x00-\\x1F\\x7F-\\x9F\\cX]+)</i;\nvar emailUserPart = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]+$/i;\nvar gmailUserPart = /^[a-z\\d]+$/;\nvar quotedEmailUser = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]))*$/i;\nvar emailUserUtf8Part = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\u00A1-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+$/i;\nvar quotedEmailUserUtf8 = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*$/i;\nvar defaultMaxEmailLength = 254;\n/* eslint-enable max-len */\n/* eslint-enable no-control-regex */\n\n/**\n * Validate display name according to the RFC2822: https://tools.ietf.org/html/rfc2822#appendix-A.1.2\n * @param {String} display_name\n */\nfunction validateDisplayName(display_name) {\n  var display_name_without_quotes = display_name.replace(/^\"(.+)\"$/, '$1');\n  // display name with only spaces is not valid\n  if (!display_name_without_quotes.trim()) {\n    return false;\n  }\n\n  // check whether display name contains illegal character\n  var contains_illegal = /[\\.\";<>]/.test(display_name_without_quotes);\n  if (contains_illegal) {\n    // if contains illegal characters,\n    // must to be enclosed in double-quotes, otherwise it's not a valid display name\n    if (display_name_without_quotes === display_name) {\n      return false;\n    }\n\n    // the quotes in display name must start with character symbol \\\n    var all_start_with_back_slash = display_name_without_quotes.split('\"').length === display_name_without_quotes.split('\\\\\"').length;\n    if (!all_start_with_back_slash) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isEmail(str, options) {\n  (0, _assertString.default)(str);\n  options = (0, _merge.default)(options, default_email_options);\n  if (options.require_display_name || options.allow_display_name) {\n    var display_email = str.match(splitNameAddress);\n    if (display_email) {\n      var display_name = display_email[1];\n\n      // Remove display name and angle brackets to get email address\n      // Can be done in the regex but will introduce a ReDOS (See  #1597 for more info)\n      str = str.replace(display_name, '').replace(/(^<|>$)/g, '');\n\n      // sometimes need to trim the last space to get the display name\n      // because there may be a space between display name and email address\n      // eg. myname <address@gmail.com>\n      // the display name is `myname` instead of `myname `, so need to trim the last space\n      if (display_name.endsWith(' ')) {\n        display_name = display_name.slice(0, -1);\n      }\n      if (!validateDisplayName(display_name)) {\n        return false;\n      }\n    } else if (options.require_display_name) {\n      return false;\n    }\n  }\n  if (!options.ignore_max_length && str.length > defaultMaxEmailLength) {\n    return false;\n  }\n  var parts = str.split('@');\n  var domain = parts.pop();\n  var lower_domain = domain.toLowerCase();\n  if (options.host_blacklist.includes(lower_domain)) {\n    return false;\n  }\n  if (options.host_whitelist.length > 0 && !options.host_whitelist.includes(lower_domain)) {\n    return false;\n  }\n  var user = parts.join('@');\n  if (options.domain_specific_validation && (lower_domain === 'gmail.com' || lower_domain === 'googlemail.com')) {\n    /*\n      Previously we removed dots for gmail addresses before validating.\n      This was removed because it allows `multiple..dots@gmail.com`\n      to be reported as valid, but it is not.\n      Gmail only normalizes single dots, removing them from here is pointless,\n      should be done in normalizeEmail\n    */\n    user = user.toLowerCase();\n\n    // Removing sub-address from username before gmail validation\n    var username = user.split('+')[0];\n\n    // Dots are not included in gmail length restriction\n    if (!(0, _isByteLength.default)(username.replace(/\\./g, ''), {\n      min: 6,\n      max: 30\n    })) {\n      return false;\n    }\n    var _user_parts = username.split('.');\n    for (var i = 0; i < _user_parts.length; i++) {\n      if (!gmailUserPart.test(_user_parts[i])) {\n        return false;\n      }\n    }\n  }\n  if (options.ignore_max_length === false && (!(0, _isByteLength.default)(user, {\n    max: 64\n  }) || !(0, _isByteLength.default)(domain, {\n    max: 254\n  }))) {\n    return false;\n  }\n  if (!(0, _isFQDN.default)(domain, {\n    require_tld: options.require_tld,\n    ignore_max_length: options.ignore_max_length,\n    allow_underscores: options.allow_underscores\n  })) {\n    if (!options.allow_ip_domain) {\n      return false;\n    }\n    if (!(0, _isIP.default)(domain)) {\n      if (!domain.startsWith('[') || !domain.endsWith(']')) {\n        return false;\n      }\n      var noBracketdomain = domain.slice(1, -1);\n      if (noBracketdomain.length === 0 || !(0, _isIP.default)(noBracketdomain)) {\n        return false;\n      }\n    }\n  }\n  if (user[0] === '\"') {\n    user = user.slice(1, user.length - 1);\n    return options.allow_utf8_local_part ? quotedEmailUserUtf8.test(user) : quotedEmailUser.test(user);\n  }\n  var pattern = options.allow_utf8_local_part ? emailUserUtf8Part : emailUserPart;\n  var user_parts = user.split('.');\n  for (var _i = 0; _i < user_parts.length; _i++) {\n    if (!pattern.test(user_parts[_i])) {\n      return false;\n    }\n  }\n  if (options.blacklisted_chars) {\n    if (user.search(new RegExp(\"[\".concat(options.blacklisted_chars, \"]+\"), 'g')) !== -1) return false;\n  }\n  return true;\n}\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","import { buildMessage, ValidateBy } from '../common/ValidateBy';\nimport isEmailValidator from 'validator/lib/isEmail';\nexport var IS_EMAIL = 'isEmail';\n/**\n * Checks if the string is an email.\n * If given value is not a string, then it returns false.\n */\nexport function isEmail(value, options) {\n    return typeof value === 'string' && isEmailValidator(value, options);\n}\n/**\n * Checks if the string is an email.\n * If given value is not a string, then it returns false.\n */\nexport function IsEmail(options, validationOptions) {\n    return ValidateBy({\n        name: IS_EMAIL,\n        constraints: [options],\n        validator: {\n            validate: function (value, args) { return isEmail(value, args === null || args === void 0 ? void 0 : args.constraints[0]); },\n            defaultMessage: buildMessage(function (eachPrefix) { return eachPrefix + '$property must be an email'; }, validationOptions),\n        },\n    }, validationOptions);\n}\n//# sourceMappingURL=IsEmail.js.map","import sharedEnv from \"../env\";\n\n/**\n * Parse the likely document identifier from a given url.\n *\n * @param url The url to parse.\n * @returns A document identifier or undefined if not found.\n */\nexport default function parseDocumentSlug(url: string) {\n  let parsed;\n\n  if (url[0] === \"/\") {\n    url = `${sharedEnv.URL}${url}`;\n  }\n\n  try {\n    parsed = new URL(url).pathname;\n  } catch (err) {\n    return;\n  }\n\n  const split = parsed.split(\"/\");\n  const indexOfDoc = split.indexOf(\"doc\");\n  return split[indexOfDoc + 1] ?? undefined;\n}\n","import * as React from \"react\";\nimport useIsMounted from \"./useIsMounted\";\n\ntype RequestResponse<T> = {\n  /** The return value of the request function. */\n  data: T | undefined;\n  /** The request error, if any. */\n  error: unknown;\n  /** Whether the request is currently in progress. */\n  loading: boolean;\n  /** Whether the request has completed - useful to check if the request has completed at least once. */\n  loaded: boolean;\n  /** Function to start the request. */\n  request: () => Promise<T | undefined>;\n};\n\n/**\n * A hook to make an API request and track its state within a component.\n *\n * @param requestFn The function to call to make the request, it should return a promise.\n * @param makeRequestOnMount Whether to make the request when the component mounts.\n * @returns An object containing the request state and a function to start the request.\n */\nexport default function useRequest<T = unknown>(\n  requestFn: () => Promise<T>,\n  makeRequestOnMount = false\n): RequestResponse<T> {\n  const isMounted = useIsMounted();\n  const [data, setData] = React.useState<T>();\n  const [loading, setLoading] = React.useState<boolean>(false);\n  const [loaded, setLoaded] = React.useState<boolean>(false);\n  const [error, setError] = React.useState();\n\n  const request = React.useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await requestFn();\n\n      if (isMounted()) {\n        setData(response);\n        setError(undefined);\n        setLoaded(true);\n      }\n      return response;\n    } catch (err) {\n      if (isMounted()) {\n        setError(err);\n      }\n    } finally {\n      if (isMounted()) {\n        setLoading(false);\n      }\n    }\n\n    return undefined;\n  }, [requestFn, isMounted]);\n\n  React.useEffect(() => {\n    if (makeRequestOnMount) {\n      void request();\n    }\n  }, [request, makeRequestOnMount]);\n\n  return { data, loading, loaded, error, request };\n}\n","import { isEmail } from \"class-validator\";\nimport { observer } from \"mobx-react\";\nimport { DocumentIcon, PlusIcon, CollectionIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocation } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport { v4 } from \"uuid\";\nimport Icon from \"@shared/components/Icon\";\nimport { MenuItem } from \"@shared/editor/types\";\nimport { MentionType } from \"@shared/types\";\nimport parseDocumentSlug from \"@shared/utils/parseDocumentSlug\";\nimport { Avatar, AvatarSize } from \"~/components/Avatar\";\nimport Flex from \"~/components/Flex\";\nimport {\n  DocumentsSection,\n  UserSection,\n  CollectionsSection,\n} from \"~/actions/sections\";\nimport useRequest from \"~/hooks/useRequest\";\nimport useStores from \"~/hooks/useStores\";\nimport { client } from \"~/utils/ApiClient\";\nimport SuggestionsMenu, {\n  Props as SuggestionsMenuProps,\n} from \"./SuggestionsMenu\";\nimport SuggestionsMenuItem from \"./SuggestionsMenuItem\";\n\ninterface MentionItem extends MenuItem {\n  attrs: {\n    id: string;\n    type: MentionType;\n    modelId: string;\n    label: string;\n    actorId?: string;\n  };\n}\n\ntype Props = Omit<\n  SuggestionsMenuProps<MentionItem>,\n  \"renderMenuItem\" | \"items\" | \"embeds\"\n>;\n\nfunction MentionMenu({ search, isActive, ...rest }: Props) {\n  const [loaded, setLoaded] = React.useState(false);\n  const [items, setItems] = React.useState<MentionItem[]>([]);\n  const { t } = useTranslation();\n  const { auth, documents, users, collections } = useStores();\n  const actorId = auth.currentUserId;\n  const location = useLocation();\n  const documentId = parseDocumentSlug(location.pathname);\n  const maxResultsInSection = search ? 25 : 5;\n\n  const { loading, request } = useRequest(\n    React.useCallback(async () => {\n      const res = await client.post(\"/suggestions.mention\", { query: search });\n\n      res.data.documents.map(documents.add);\n      res.data.users.map(users.add);\n      res.data.collections.map(collections.add);\n    }, [search, documents, users])\n  );\n\n  React.useEffect(() => {\n    if (isActive) {\n      void request();\n    }\n  }, [request, isActive]);\n\n  React.useEffect(() => {\n    if (actorId && !loading) {\n      const items = users\n        .findByQuery(search, { maxResults: maxResultsInSection })\n        .map(\n          (user) =>\n            ({\n              name: \"mention\",\n              icon: (\n                <Flex\n                  align=\"center\"\n                  justify=\"center\"\n                  style={{ width: 24, height: 24 }}\n                >\n                  <Avatar\n                    model={user}\n                    alt={t(\"Profile picture\")}\n                    size={AvatarSize.Small}\n                  />\n                </Flex>\n              ),\n              title: user.name,\n              section: UserSection,\n              appendSpace: true,\n              attrs: {\n                id: v4(),\n                type: MentionType.User,\n                modelId: user.id,\n                actorId,\n                label: user.name,\n              },\n            } as MentionItem)\n        )\n        .concat(\n          documents\n            .findByQuery(search, { maxResults: maxResultsInSection })\n            .map(\n              (doc) =>\n                ({\n                  name: \"mention\",\n                  icon: doc.icon ? (\n                    <Icon value={doc.icon} color={doc.color ?? undefined} />\n                  ) : (\n                    <DocumentIcon />\n                  ),\n                  title: doc.title,\n                  subtitle: doc.collection?.name,\n                  section: DocumentsSection,\n                  appendSpace: true,\n                  attrs: {\n                    id: v4(),\n                    type: MentionType.Document,\n                    modelId: doc.id,\n                    actorId,\n                    label: doc.title,\n                  },\n                } as MentionItem)\n            )\n        )\n        .concat(\n          collections\n            .findByQuery(search, { maxResults: maxResultsInSection })\n            .map(\n              (collection) =>\n                ({\n                  name: \"mention\",\n                  icon: collection.icon ? (\n                    <Icon\n                      value={collection.icon}\n                      color={collection.color ?? undefined}\n                    />\n                  ) : (\n                    <CollectionIcon />\n                  ),\n                  title: collection.name,\n                  section: CollectionsSection,\n                  appendSpace: true,\n                  attrs: {\n                    id: v4(),\n                    type: MentionType.Collection,\n                    modelId: collection.id,\n                    actorId,\n                    label: collection.name,\n                  },\n                } as MentionItem)\n            )\n        )\n        .concat([\n          {\n            name: \"link\",\n            icon: <PlusIcon />,\n            title: search?.trim(),\n            section: DocumentsSection,\n            subtitle: t(\"Create a new doc\"),\n            visible: !!search && !isEmail(search),\n            priority: -1,\n            appendSpace: true,\n            attrs: {\n              id: v4(),\n              type: MentionType.Document,\n              modelId: v4(),\n              actorId,\n              label: search,\n            },\n          } as MentionItem,\n        ]);\n\n      setItems(items);\n      setLoaded(true);\n    }\n  }, [t, actorId, loading, search, users, documents, maxResultsInSection]);\n\n  const handleSelect = React.useCallback(\n    async (item: MentionItem) => {\n      if (\n        item.attrs.type === MentionType.Document ||\n        item.attrs.type === MentionType.Collection\n      ) {\n        return;\n      }\n      if (!documentId) {\n        return;\n      }\n      // Check if the mentioned user has access to the document\n      const res = await client.post(\"/documents.users\", {\n        id: documentId,\n        userId: item.attrs.modelId,\n      });\n\n      if (!res.data.length) {\n        const user = users.get(item.attrs.modelId);\n        toast.message(\n          t(\n            \"{{ userName }} won't be notified, as they do not have access to this document\",\n            {\n              userName: item.attrs.label,\n            }\n          ),\n          {\n            icon: <Avatar model={user} size={AvatarSize.Toast} />,\n            duration: 10000,\n          }\n        );\n      }\n    },\n    [t, users, documentId]\n  );\n\n  // Prevent showing the menu until we have data otherwise it will be positioned\n  // incorrectly due to the height being unknown.\n  if (!loaded) {\n    return null;\n  }\n\n  return (\n    <SuggestionsMenu\n      {...rest}\n      isActive={isActive}\n      filterable={false}\n      search={search}\n      onSelect={handleSelect}\n      renderMenuItem={(item, _index, options) => (\n        <SuggestionsMenuItem\n          onClick={options.onClick}\n          selected={options.selected}\n          subtitle={item.subtitle}\n          title={item.title}\n          icon={item.icon}\n        />\n      )}\n      items={items}\n    />\n  );\n}\n\nexport default observer(MentionMenu);\n","import { action } from \"mobx\";\nimport * as React from \"react\";\nimport { WidgetProps } from \"@shared/editor/lib/Extension\";\nimport Suggestion from \"~/editor/extensions/Suggestion\";\nimport MentionMenu from \"../components/MentionMenu\";\n\nexport default class MentionMenuExtension extends Suggestion {\n  get defaultOptions() {\n    return {\n      trigger: \"@\",\n      allowSpaces: true,\n      requireSearchTerm: false,\n      enabledInCode: false,\n    };\n  }\n\n  get name() {\n    return \"mention-menu\";\n  }\n\n  widget = ({ rtl }: WidgetProps) => (\n    <MentionMenu\n      rtl={rtl}\n      trigger={this.options.trigger}\n      isActive={this.state.open}\n      search={this.state.query}\n      onClose={action(() => {\n        this.state.open = false;\n      })}\n    />\n  );\n}\n","export default function isMarkdown(text: string): boolean {\n  let signals = 0;\n  const lines = text.split(\"\\n\").length;\n  const minConfidence = Math.min(3, Math.floor(lines / 5));\n\n  // code-ish\n  const fences = text.match(/^```/gm);\n  if (fences && fences.length > 1) {\n    signals += fences.length;\n  }\n\n  // latex-ish\n  const latex = text.match(/\\$(.+)\\$/g);\n  if (latex && latex.length > 0) {\n    signals += latex.length;\n  }\n\n  // link-ish\n  const links = text.match(/\\[[^]+\\]\\(https?:\\/\\/\\S+\\)/gm);\n  if (links) {\n    signals += links.length * 2;\n  }\n\n  const relativeLinks = text.match(/\\[[^]+\\]\\(\\/\\S+\\)/gm);\n  if (relativeLinks) {\n    signals += relativeLinks.length * 2;\n  }\n\n  // heading-ish\n  const headings = text.match(/^#{1,6}\\s+\\S+/gm);\n  if (headings) {\n    signals += headings.length;\n  }\n\n  // list-ish\n  const listItems = text.match(/^[-*]\\s\\S+/gm);\n  if (listItems) {\n    signals += listItems.length;\n  }\n\n  // table header-ish\n  const tables = text.match(/\\|\\s?[:-]+\\s?\\|/gm);\n  if (tables) {\n    signals += tables.length;\n  }\n\n  return signals > minConfidence;\n}\n","/**\n * Add support for additional syntax that users paste even though it isn't\n * supported by the markdown parser directly by massaging the text content.\n *\n * @param text The incoming pasted plain text\n */\nexport default function normalizePastedMarkdown(text: string): string {\n  const CHECKBOX_REGEX = /^\\s?(\\[(X|\\s|_|-)\\]\\s(.*)?)/gim;\n\n  // find checkboxes not contained in a list and wrap them in list items\n  while (text.match(CHECKBOX_REGEX)) {\n    text = text.replace(CHECKBOX_REGEX, (match) => `- ${match.trim()}`);\n  }\n\n  // find multiple newlines and insert a hard break to ensure they are respected\n  text = text.replace(/\\n{3,}/g, \"\\n\\n\\\\\\n\");\n\n  // find single newlines and insert an extra to ensure they are treated as paragraphs\n  text = text.replace(/\\b\\n\\b/g, \"\\n\\n\");\n\n  return text;\n}\n","import { LinkIcon } from \"outline-icons\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { EmbedDescriptor } from \"@shared/editor/embeds\";\nimport SuggestionsMenu, {\n  Props as SuggestionsMenuProps,\n} from \"./SuggestionsMenu\";\nimport SuggestionsMenuItem from \"./SuggestionsMenuItem\";\n\ntype Props = Omit<\n  SuggestionsMenuProps,\n  \"renderMenuItem\" | \"items\" | \"embeds\" | \"trigger\"\n> & {\n  pastedText: string;\n  embeds: EmbedDescriptor[];\n};\n\nconst PasteMenu = ({ embeds, ...props }: Props) => {\n  const { t } = useTranslation();\n\n  const embed = React.useMemo(() => {\n    for (const e of embeds) {\n      const matches = e.matcher(props.pastedText);\n      if (matches) {\n        return e;\n      }\n    }\n    return;\n  }, [embeds, props.pastedText]);\n\n  const items = React.useMemo(\n    () => [\n      {\n        name: \"noop\",\n        title: t(\"Keep as link\"),\n        icon: <LinkIcon />,\n      },\n      {\n        name: \"embed\",\n        title: t(\"Embed\"),\n        icon: embed?.icon,\n        keywords: embed?.keywords,\n      },\n    ],\n    [embed, t]\n  );\n\n  return (\n    <SuggestionsMenu\n      {...props}\n      trigger=\"\"\n      filterable={false}\n      renderMenuItem={(item, _index, options) => (\n        <SuggestionsMenuItem\n          onClick={() => {\n            props.onSelect?.(item);\n          }}\n          selected={options.selected}\n          title={item.title}\n          icon={item.icon}\n        />\n      )}\n      items={items}\n    />\n  );\n};\n\nexport default PasteMenu;\n","import { action, observable } from \"mobx\";\nimport { toggleMark } from \"prosemirror-commands\";\nimport { Slice } from \"prosemirror-model\";\nimport {\n  EditorState,\n  Plugin,\n  PluginKey,\n  TextSelection,\n} from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport * as React from \"react\";\nimport { v4 } from \"uuid\";\nimport Extension, { WidgetProps } from \"@shared/editor/lib/Extension\";\nimport { codeLanguages } from \"@shared/editor/lib/code\";\nimport isMarkdown from \"@shared/editor/lib/isMarkdown\";\nimport normalizePastedMarkdown from \"@shared/editor/lib/markdown/normalize\";\nimport { isRemoteTransaction } from \"@shared/editor/lib/multiplayer\";\nimport { recreateTransform } from \"@shared/editor/lib/prosemirror-recreate-transform\";\nimport { isInCode } from \"@shared/editor/queries/isInCode\";\nimport { MenuItem } from \"@shared/editor/types\";\nimport { IconType, MentionType } from \"@shared/types\";\nimport { determineIconType } from \"@shared/utils/icon\";\nimport parseCollectionSlug from \"@shared/utils/parseCollectionSlug\";\nimport parseDocumentSlug from \"@shared/utils/parseDocumentSlug\";\nimport { isCollectionUrl, isDocumentUrl, isUrl } from \"@shared/utils/urls\";\nimport stores from \"~/stores\";\nimport PasteMenu from \"../components/PasteMenu\";\n\nexport default class PasteHandler extends Extension {\n  state: {\n    open: boolean;\n    query: string;\n    pastedText: string;\n  } = observable({\n    open: false,\n    query: \"\",\n    pastedText: \"\",\n  });\n\n  get name() {\n    return \"paste-handler\";\n  }\n\n  private key = new PluginKey(this.name);\n\n  get plugins() {\n    return [\n      new Plugin({\n        key: this.key,\n        props: {\n          transformPastedHTML(html: string) {\n            if (isDropboxPaper(html)) {\n              // Fixes double paragraphs when pasting from Dropbox Paper\n              html = html.replace(/<div><br><\\/div>/gi, \"<p></p>\");\n            }\n            return html;\n          },\n          handleDOMEvents: {\n            keydown: (_, event) => {\n              if (event.key === \"Shift\") {\n                this.shiftKey = true;\n              }\n              return false;\n            },\n            keyup: (_, event) => {\n              if (event.key === \"Shift\") {\n                this.shiftKey = false;\n              }\n              return false;\n            },\n          },\n          handlePaste: (view, event: ClipboardEvent) => {\n            // Do nothing if the document isn't currently editable or there is no clipboard data\n            if (!view.editable || !event.clipboardData) {\n              return false;\n            }\n\n            const { state, dispatch } = view;\n            const iframeSrc = parseSingleIframeSrc(\n              event.clipboardData.getData(\"text/plain\")\n            );\n            const text =\n              iframeSrc && !isInCode(state)\n                ? iframeSrc\n                : event.clipboardData.getData(\"text/plain\");\n            const html = event.clipboardData.getData(\"text/html\");\n            const vscode = event.clipboardData.getData(\"vscode-editor-data\");\n\n            // If the users selection is currently in a code block then paste\n            // as plain text, ignore all formatting and HTML content.\n            if (isInCode(state)) {\n              event.preventDefault();\n              view.dispatch(state.tr.insertText(text));\n              return true;\n            }\n\n            // Because VSCode is an especially popular editor that places metadata\n            // on the clipboard, we can parse it to find out what kind of content\n            // was pasted.\n            const vscodeMeta = vscode ? JSON.parse(vscode) : undefined;\n            const pasteCodeLanguage = vscodeMeta?.mode;\n            const supportsCodeBlock = !!state.schema.nodes.code_block;\n            const supportsCodeMark = !!state.schema.marks.code_inline;\n\n            if (!this.shiftKey) {\n              // If the HTML on the clipboard is from Prosemirror then the best\n              // compatability is to just use the HTML parser, regardless of\n              // whether it \"looks\" like Markdown, see: outline/outline#2416\n              if (html?.includes(\"data-pm-slice\")) {\n                return false;\n              }\n\n              // Check if the clipboard contents can be parsed as a single url\n              if (isUrl(text)) {\n                // If there is selected text then we want to wrap it in a link to the url\n                if (!state.selection.empty) {\n                  toggleMark(this.editor.schema.marks.link, { href: text })(\n                    state,\n                    dispatch\n                  );\n                  return true;\n                }\n\n                // Is the link a link to a document? If so, we can grab the title and insert it.\n                const containsHash = text.includes(\"#\");\n\n                if (isDocumentUrl(text)) {\n                  const slug = parseDocumentSlug(text);\n\n                  if (slug) {\n                    void stores.documents\n                      .fetch(slug)\n                      .then((document) => {\n                        if (view.isDestroyed) {\n                          return;\n                        }\n                        if (document) {\n                          if (state.schema.nodes.mention && !containsHash) {\n                            view.dispatch(\n                              view.state.tr.replaceWith(\n                                state.selection.from,\n                                state.selection.to,\n                                state.schema.nodes.mention.create({\n                                  type: MentionType.Document,\n                                  modelId: document.id,\n                                  label: document.titleWithDefault,\n                                  id: v4(),\n                                })\n                              )\n                            );\n                          } else {\n                            const { hash } = new URL(text);\n                            const hasEmoji =\n                              determineIconType(document.icon) ===\n                              IconType.Emoji;\n\n                            const title = `${\n                              hasEmoji ? document.icon + \" \" : \"\"\n                            }${document.titleWithDefault}`;\n\n                            this.insertLink(`${document.path}${hash}`, title);\n                          }\n                        }\n                      })\n                      .catch(() => {\n                        if (view.isDestroyed) {\n                          return;\n                        }\n                        this.insertLink(text);\n                      });\n                  }\n                } else if (isCollectionUrl(text)) {\n                  const slug = parseCollectionSlug(text);\n\n                  if (slug) {\n                    stores.collections\n                      .fetch(slug)\n                      .then((collection) => {\n                        if (view.isDestroyed) {\n                          return;\n                        }\n                        if (collection) {\n                          if (state.schema.nodes.mention && !containsHash) {\n                            view.dispatch(\n                              view.state.tr.replaceWith(\n                                state.selection.from,\n                                state.selection.to,\n                                state.schema.nodes.mention.create({\n                                  type: MentionType.Collection,\n                                  modelId: collection.id,\n                                  label: collection.name,\n                                  id: v4(),\n                                })\n                              )\n                            );\n                          } else {\n                            const { hash } = new URL(text);\n                            const hasEmoji =\n                              determineIconType(collection.icon) ===\n                              IconType.Emoji;\n\n                            const title = `${\n                              hasEmoji ? collection.icon + \" \" : \"\"\n                            }${collection.name}`;\n\n                            this.insertLink(`${collection.path}${hash}`, title);\n                          }\n                        }\n                      })\n                      .catch(() => {\n                        if (view.isDestroyed) {\n                          return;\n                        }\n                        this.insertLink(text);\n                      });\n                  }\n                } else {\n                  this.insertLink(text);\n                }\n\n                return true;\n              }\n\n              if (pasteCodeLanguage && pasteCodeLanguage !== \"markdown\") {\n                if (text.includes(\"\\n\") && supportsCodeBlock) {\n                  event.preventDefault();\n                  view.dispatch(\n                    state.tr\n                      .replaceSelectionWith(\n                        state.schema.nodes.code_block.create({\n                          language: Object.keys(codeLanguages).includes(\n                            vscodeMeta.mode\n                          )\n                            ? vscodeMeta.mode\n                            : null,\n                        })\n                      )\n                      .insertText(text)\n                  );\n                  return true;\n                }\n\n                if (supportsCodeMark) {\n                  event.preventDefault();\n                  view.dispatch(\n                    state.tr\n                      .insertText(\n                        text,\n                        state.selection.from,\n                        state.selection.to\n                      )\n                      .addMark(\n                        state.selection.from,\n                        state.selection.to + text.length,\n                        state.schema.marks.code_inline.create()\n                      )\n                  );\n                  return true;\n                }\n              }\n            }\n\n            // If the text on the clipboard looks like Markdown OR there is no\n            // html on the clipboard then try to parse content as Markdown\n            if (\n              (isMarkdown(text) &&\n                !isDropboxPaper(html) &&\n                !isContainingImage(html)) ||\n              pasteCodeLanguage === \"markdown\" ||\n              this.shiftKey ||\n              !html\n            ) {\n              event.preventDefault();\n\n              // get pasted content as slice\n              const paste = this.editor.pasteParser.parse(\n                normalizePastedMarkdown(text)\n              );\n              if (!paste) {\n                return false;\n              }\n\n              const slice = paste.slice(0);\n              const tr = view.state.tr;\n              let currentPos = view.state.selection.from;\n\n              // If the pasted content is a single paragraph then we loop over\n              // it's content and insert each node one at a time to allow it to\n              // be pasted inline with surrounding content.\n              const singleNode = sliceSingleNode(slice);\n              if (singleNode?.type === this.editor.schema.nodes.paragraph) {\n                singleNode.forEach((node) => {\n                  tr.insert(currentPos, node);\n                  currentPos += node.nodeSize;\n                });\n              } else {\n                singleNode\n                  ? tr.replaceSelectionWith(singleNode, this.shiftKey)\n                  : tr.replaceSelection(slice);\n              }\n\n              view.dispatch(\n                tr\n                  .scrollIntoView()\n                  .setMeta(\"paste\", true)\n                  .setMeta(\"uiEvent\", \"paste\")\n              );\n              return true;\n            }\n\n            // otherwise use the default HTML parser which will handle all paste\n            // \"from the web\" events\n            return false;\n          },\n        },\n        state: {\n          init: () => DecorationSet.empty,\n          apply: (tr, set) => {\n            let mapping = tr.mapping;\n\n            // See if the transaction adds or removes any placeholders\n            const meta = tr.getMeta(this.key);\n            const hasDecorations = set.find().length;\n\n            // We only want a single paste placeholder at a time, so if we're adding a new\n            // placeholder we can just return a new DecorationSet and avoid mapping logic.\n            if (meta?.add) {\n              const { from, to, id } = meta.add;\n              const decorations = [\n                Decoration.inline(\n                  from,\n                  to,\n                  {\n                    class: \"paste-placeholder\",\n                  },\n                  {\n                    id,\n                  }\n                ),\n              ];\n              return DecorationSet.create(tr.doc, decorations);\n            }\n\n            if (hasDecorations && (isRemoteTransaction(tr) || meta)) {\n              try {\n                mapping = recreateTransform(tr.before, tr.doc, {\n                  complexSteps: true,\n                  wordDiffs: false,\n                  simplifyDiff: true,\n                }).mapping;\n              } catch (err) {\n                // eslint-disable-next-line no-console\n                console.warn(\"Failed to recreate transform: \", err);\n              }\n            }\n\n            set = set.map(mapping, tr.doc);\n\n            if (meta?.remove) {\n              const { id } = meta.remove;\n              const decorations = set.find(\n                undefined,\n                undefined,\n                (spec) => spec.id === id\n              );\n              return set.remove(decorations);\n            }\n\n            return set;\n          },\n        },\n      }),\n    ];\n  }\n\n  private shiftKey = false;\n\n  private showPasteMenu = action((text: string) => {\n    this.state.pastedText = text;\n    this.state.open = true;\n  });\n\n  private hidePasteMenu = action(() => {\n    this.state.open = false;\n  });\n\n  private insertLink(href: string, title?: string) {\n    const { view } = this.editor;\n    const { state } = view;\n    const { from } = state.selection;\n    const to = from + (title ?? href).length;\n\n    const transaction = view.state.tr\n      .insertText(title ?? href, state.selection.from, state.selection.to)\n      .addMark(from, to, state.schema.marks.link.create({ href }))\n      .setMeta(this.key, { add: { from, to, id: href } });\n    view.dispatch(transaction);\n    this.showPasteMenu(href);\n  }\n\n  private insertEmbed = () => {\n    const { view } = this.editor;\n    const { state } = view;\n    const result = this.findPlaceholder(state, this.state.pastedText);\n\n    if (result) {\n      const tr = state.tr.deleteRange(result[0], result[1]);\n      view.dispatch(\n        tr.setSelection(TextSelection.near(tr.doc.resolve(result[0])))\n      );\n    }\n\n    this.editor.commands.embed({\n      href: this.state.pastedText,\n    });\n  };\n\n  private removePlaceholder = () => {\n    const { view } = this.editor;\n    const { state } = view;\n    const result = this.findPlaceholder(state, this.state.pastedText);\n\n    if (result) {\n      view.dispatch(\n        state.tr.setMeta(this.key, {\n          remove: { id: this.state.pastedText },\n        })\n      );\n    }\n  };\n\n  private findPlaceholder = (\n    state: EditorState,\n    id: string\n  ): [number, number] | null => {\n    const decos = this.key.getState(state) as DecorationSet;\n    const found = decos?.find(undefined, undefined, (spec) => spec.id === id);\n    return found?.length ? [found[0].from, found[0].to] : null;\n  };\n\n  private handleSelect = (item: MenuItem) => {\n    switch (item.name) {\n      case \"noop\": {\n        this.hidePasteMenu();\n        this.removePlaceholder();\n        break;\n      }\n      case \"embed\": {\n        this.hidePasteMenu();\n        this.insertEmbed();\n        break;\n      }\n      default:\n        break;\n    }\n  };\n\n  keys() {\n    return {\n      Backspace: () => {\n        this.hidePasteMenu();\n        return false;\n      },\n      \"Mod-z\": () => {\n        this.hidePasteMenu();\n        return false;\n      },\n    };\n  }\n\n  widget = ({ rtl }: WidgetProps) => (\n    <PasteMenu\n      rtl={rtl}\n      embeds={this.editor.props.embeds}\n      pastedText={this.state.pastedText}\n      isActive={this.state.open}\n      search={this.state.query}\n      onClose={this.hidePasteMenu}\n      onSelect={this.handleSelect}\n    />\n  );\n}\n\n/**\n * Checks if the HTML string is likely coming from Dropbox Paper.\n *\n * @param html The HTML string to check.\n * @returns True if the HTML string is likely coming from Dropbox Paper.\n */\nfunction isDropboxPaper(html: string): boolean {\n  return html?.includes(\"usually-unique-id\");\n}\n\n/**\n * Checks if the HTML string contains an image.\n *\n * @param html The HTML string to check.\n * @returns True if the HTML string contains an image.\n */\nfunction isContainingImage(html: string): boolean {\n  return html?.includes(\"<img\");\n}\n\nfunction sliceSingleNode(slice: Slice) {\n  return slice.openStart === 0 &&\n    slice.openEnd === 0 &&\n    slice.content.childCount === 1\n    ? slice.content.firstChild\n    : null;\n}\n\n/**\n * Parses the text contents of an HTML string and returns the src of the first\n * iframe if it exists.\n *\n * @param text The HTML string to parse.\n * @returns The src of the first iframe if it exists, or undefined.\n */\nfunction parseSingleIframeSrc(html: string) {\n  try {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    if (\n      doc.body.children.length === 1 &&\n      doc.body.firstElementChild?.tagName === \"IFRAME\"\n    ) {\n      const iframe = doc.body.firstElementChild;\n      const src = iframe.getAttribute(\"src\");\n      if (src) {\n        return src;\n      }\n    }\n  } catch (e) {\n    // Ignore the million ways parsing could fail.\n  }\n  return undefined;\n}\n","import sharedEnv from \"../env\";\n\n/**\n * Parse the likely collection identifier from a given url.\n *\n * @param url The url to parse.\n * @returns A collection identifier or undefined if not found.\n */\nexport default function parseCollectionSlug(url: string) {\n  let parsed;\n\n  if (url[0] === \"/\") {\n    url = `${sharedEnv.URL}${url}`;\n  }\n\n  try {\n    parsed = new URL(url).pathname;\n  } catch (err) {\n    return;\n  }\n\n  const split = parsed.split(\"/\");\n  const indexOfCollection = split.indexOf(\"collection\");\n  return split[indexOfCollection + 1] ?? undefined;\n}\n","import { Command } from \"prosemirror-state\";\nimport Extension from \"@shared/editor/lib/Extension\";\n\nexport default class PreventTab extends Extension {\n  get name() {\n    return \"preventTab\";\n  }\n\n  keys(): Record<string, Command> {\n    return {\n      // No-ops prevent Tab escaping the editor bounds\n      Tab: () => true,\n      \"Shift-Tab\": () => true,\n    };\n  }\n}\n","import { InputRule as ProsemirrorInputRule } from \"prosemirror-inputrules\";\nimport { EditorState } from \"prosemirror-state\";\nimport { isInCode } from \"../queries/isInCode\";\n\n/**\n * A factory function for creating Prosemirror input rules that automatically insert text\n * that matches a given regular expression unless the selection is inside a code block or code mark.\n */\nexport class InputRule extends ProsemirrorInputRule {\n  constructor(rule: RegExp, insert: string) {\n    super(\n      rule,\n      (\n        state: EditorState,\n        match: RegExpMatchArray,\n        start: number,\n        end: number\n      ) => {\n        if (isInCode(state)) {\n          return null;\n        }\n\n        if (match[1]) {\n          const offset = match[0].lastIndexOf(match[1]);\n          insert += match[0].slice(offset + match[1].length);\n          start += offset;\n          const cutOff = start - end;\n          if (cutOff > 0) {\n            insert = match[0].slice(offset - cutOff, offset) + insert;\n            start = end;\n          }\n        }\n\n        return state.tr.insertText(insert, start, end);\n      }\n    );\n  }\n}\n","import Extension from \"@shared/editor/lib/Extension\";\nimport { InputRule } from \"@shared/editor/lib/InputRule\";\n\nconst rightArrow = new InputRule(/->$/, \"→\");\nconst emdash = new InputRule(/--$/, \"—\");\nconst oneHalf = new InputRule(/(?:^|\\s)(1\\/2)$/, \"½\");\nconst threeQuarters = new InputRule(/(?:^|\\s)(3\\/4)$/, \"¾\");\nconst copyright = new InputRule(/\\(c\\)$/, \"©️\");\nconst registered = new InputRule(/\\(r\\)$/, \"®️\");\nconst trademarked = new InputRule(/\\(tm\\)$/, \"™️\");\nconst ellipsis = new InputRule(/\\.\\.\\.$/, \"…\");\n\n// Double quotes\nconst openDoubleQuote = new InputRule(\n  /(?:^|[\\s\\{\\[\\(\\<'\"\\u2018\\u201C])(\")$/,\n  \"“\"\n);\nconst closeDoubleQuote = new InputRule(/^(?!.*`)[\\s\\S]*(\")$/, \"”\");\n\n// Single quotes\nconst openSingleQuote = new InputRule(\n  /(?:^|[\\s\\{\\[\\(\\<'\"\\u2018\\u201C])(')$/,\n  \"‘\"\n);\nconst closeSingleQuote = new InputRule(/^(?!.*`)[\\s\\S]*(')$/, \"’\");\n\nexport default class SmartText extends Extension {\n  get name() {\n    return \"smart_text\";\n  }\n\n  inputRules() {\n    if (this.options.userPreferences?.enableSmartText ?? true) {\n      return [\n        rightArrow,\n        emdash,\n        oneHalf,\n        threeQuarters,\n        copyright,\n        registered,\n        trademarked,\n        ellipsis,\n        openDoubleQuote,\n        closeDoubleQuote,\n        openSingleQuote,\n        closeSingleQuote,\n      ];\n    }\n\n    return [];\n  }\n}\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { basicExtensions, withComments } from \"@shared/editor/nodes\";\nimport HardBreak from \"@shared/editor/nodes/HardBreak\";\nimport Editor, { Props as EditorProps } from \"~/components/Editor\";\nimport type { Editor as SharedEditor } from \"~/editor\";\nimport ClipboardTextSerializer from \"~/editor/extensions/ClipboardTextSerializer\";\nimport EmojiMenuExtension from \"~/editor/extensions/EmojiMenu\";\nimport Keys from \"~/editor/extensions/Keys\";\nimport MentionMenuExtension from \"~/editor/extensions/MentionMenu\";\nimport PasteHandler from \"~/editor/extensions/PasteHandler\";\nimport PreventTab from \"~/editor/extensions/PreventTab\";\nimport SmartText from \"~/editor/extensions/SmartText\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\n\nconst extensions = [\n  ...withComments(basicExtensions),\n  HardBreak,\n  SmartText,\n  PasteHandler,\n  ClipboardTextSerializer,\n  EmojiMenuExtension,\n  MentionMenuExtension,\n  // Order these default key handlers last\n  PreventTab,\n  Keys,\n];\n\nconst CommentEditor = (\n  props: EditorProps,\n  ref: React.RefObject<SharedEditor>\n) => {\n  const user = useCurrentUser({ rejectOnEmpty: false });\n\n  return (\n    <Editor extensions={extensions} userId={user?.id} {...props} ref={ref} />\n  );\n};\n\nexport default observer(React.forwardRef(CommentEditor));\n","import styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\n\nexport const UnreadBadge = styled.div`\n  width: 8px;\n  height: 8px;\n  background: ${s(\"accent\")};\n  border-radius: 8px;\n  align-self: center;\n  position: absolute;\n  right: 4px;\n`;\n","import { toJS } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { s, hover, truncateMultiline } from \"@shared/styles\";\nimport Notification from \"~/models/Notification\";\nimport CommentEditor from \"~/scenes/Document/components/CommentEditor\";\nimport useStores from \"~/hooks/useStores\";\nimport { Avatar, AvatarSize } from \"../Avatar\";\nimport Flex from \"../Flex\";\nimport Text from \"../Text\";\nimport Time from \"../Time\";\nimport { UnreadBadge } from \"../UnreadBadge\";\n\ntype Props = {\n  notification: Notification;\n  onNavigate: () => void;\n};\n\nfunction NotificationListItem({ notification, onNavigate }: Props) {\n  const { t } = useTranslation();\n  const { collections } = useStores();\n  const collectionId = notification.document?.collectionId;\n  const collection = collectionId ? collections.get(collectionId) : undefined;\n\n  const handleClick: React.MouseEventHandler<HTMLAnchorElement> = (event) => {\n    if (event.altKey) {\n      event.preventDefault();\n      event.stopPropagation();\n      void notification.toggleRead();\n      return;\n    }\n\n    void notification.markAsRead();\n\n    onNavigate();\n  };\n\n  return (\n    <StyledLink to={notification.path ?? \"\"} onClick={handleClick}>\n      <Container gap={8} $unread={!notification.viewedAt}>\n        <StyledAvatar model={notification.actor} size={AvatarSize.Large} />\n        <Flex column>\n          <Text as=\"div\" size=\"small\">\n            <Text weight=\"bold\">\n              {notification.actor?.name ?? t(\"Unknown\")}\n            </Text>{\" \"}\n            {notification.eventText(t)}{\" \"}\n            <Text weight=\"bold\">{notification.subject}</Text>\n          </Text>\n          <Text type=\"tertiary\" size=\"xsmall\">\n            <Time dateTime={notification.createdAt} addSuffix />{\" \"}\n            {collection && <>&middot; {collection.name}</>}\n          </Text>\n          {notification.comment && (\n            <StyledCommentEditor\n              defaultValue={toJS(notification.comment.data)}\n            />\n          )}\n        </Flex>\n        {notification.viewedAt ? null : <UnreadBadge style={{ right: 20 }} />}\n      </Container>\n    </StyledLink>\n  );\n}\n\nconst StyledLink = styled(Link)`\n  display: block;\n  margin: 0 8px;\n  cursor: var(--pointer);\n`;\n\nconst StyledCommentEditor = styled(CommentEditor)`\n  font-size: 0.9em;\n  margin-top: 4px;\n\n  ${truncateMultiline(3)}\n`;\n\nconst StyledAvatar = styled(Avatar)`\n  margin-top: 4px;\n`;\n\nconst Container = styled(Flex)<{ $unread: boolean }>`\n  position: relative;\n  padding: 8px 12px;\n  padding-right: 40px;\n  border-radius: 4px;\n\n  &:${hover},\n  &:active {\n    background: ${s(\"listItemHoverBackground\")};\n  }\n`;\n\nexport default observer(NotificationListItem);\n","import { observer } from \"mobx-react\";\nimport { MarkAsReadIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { s, hover } from \"@shared/styles\";\nimport Notification from \"~/models/Notification\";\nimport { markNotificationsAsRead } from \"~/actions/definitions/notifications\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport useStores from \"~/hooks/useStores\";\nimport NotificationMenu from \"~/menus/NotificationMenu\";\nimport Desktop from \"~/utils/Desktop\";\nimport Empty from \"../Empty\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport Flex from \"../Flex\";\nimport NudeButton from \"../NudeButton\";\nimport PaginatedList from \"../PaginatedList\";\nimport Scrollable from \"../Scrollable\";\nimport Text from \"../Text\";\nimport Tooltip from \"../Tooltip\";\nimport NotificationListItem from \"./NotificationListItem\";\n\ntype Props = {\n  /** Callback when the notification panel wants to close. */\n  onRequestClose: () => void;\n  /** Whether the panel is open or not. */\n  isOpen: boolean;\n};\n\n/**\n * A panel containing a list of notifications and controls to manage them.\n */\nfunction Notifications(\n  { onRequestClose, isOpen }: Props,\n  ref: React.RefObject<HTMLDivElement>\n) {\n  const context = useActionContext();\n  const { notifications } = useStores();\n  const { t } = useTranslation();\n  const isEmpty = notifications.orderedData.length === 0;\n\n  // Update the notification count in the dock icon, if possible.\n  React.useEffect(() => {\n    // Account for old versions of the desktop app that don't have the\n    // setNotificationCount method on the bridge.\n    if (Desktop.bridge && \"setNotificationCount\" in Desktop.bridge) {\n      void Desktop.bridge.setNotificationCount(\n        notifications.approximateUnreadCount\n      );\n    }\n\n    // PWA badging\n    if (\"setAppBadge\" in navigator) {\n      if (notifications.approximateUnreadCount) {\n        void navigator.setAppBadge(notifications.approximateUnreadCount);\n      } else {\n        void navigator.clearAppBadge();\n      }\n    }\n  }, [notifications.approximateUnreadCount]);\n\n  return (\n    <ErrorBoundary>\n      <Flex style={{ width: \"100%\" }} column>\n        <Header justify=\"space-between\">\n          <Text weight=\"bold\" as=\"span\">\n            {t(\"Notifications\")}\n          </Text>\n          <Flex gap={8}>\n            {notifications.approximateUnreadCount > 0 && (\n              <Tooltip content={t(\"Mark all as read\")}>\n                <Button action={markNotificationsAsRead} context={context}>\n                  <MarkAsReadIcon />\n                </Button>\n              </Tooltip>\n            )}\n            <NotificationMenu />\n          </Flex>\n        </Header>\n        <React.Suspense fallback={null}>\n          <Scrollable ref={ref} flex topShadow>\n            <PaginatedList\n              fetch={notifications.fetchPage}\n              options={{ archived: false }}\n              items={isOpen ? notifications.orderedData : undefined}\n              renderItem={(item: Notification) => (\n                <NotificationListItem\n                  key={item.id}\n                  notification={item}\n                  onNavigate={onRequestClose}\n                />\n              )}\n            />\n          </Scrollable>\n        </React.Suspense>\n        {isEmpty && (\n          <EmptyNotifications>{t(\"You're all caught up\")}.</EmptyNotifications>\n        )}\n      </Flex>\n    </ErrorBoundary>\n  );\n}\n\nconst EmptyNotifications = styled(Empty)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 200px;\n`;\n\nconst Button = styled(NudeButton)`\n  color: ${s(\"textSecondary\")};\n\n  &:${hover},\n  &:active {\n    color: ${s(\"text\")};\n    background: ${s(\"sidebarControlHoverBackground\")};\n  }\n`;\n\nconst Header = styled(Flex)`\n  padding: 8px 12px 12px;\n  min-height: 44px;\n\n  ${Button} {\n    opacity: 0.75;\n    transition: opacity 250ms ease-in-out;\n  }\n\n  &:${hover},\n  &:focus-within {\n    ${Button} {\n      opacity: 1;\n    }\n  }\n`;\n\nexport default observer(React.forwardRef(Notifications));\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { usePopoverState, PopoverDisclosure } from \"reakit/Popover\";\nimport styled from \"styled-components\";\nimport { depths } from \"@shared/styles\";\nimport Popover from \"~/components/Popover\";\nimport Notifications from \"./Notifications\";\n\ntype Props = {\n  children?: React.ReactNode;\n};\n\nconst NotificationsPopover: React.FC = ({ children }: Props) => {\n  const { t } = useTranslation();\n  const scrollableRef = React.useRef<HTMLDivElement>(null);\n\n  const popover = usePopoverState({\n    gutter: 0,\n    placement: \"top-start\",\n    unstable_fixed: true,\n  });\n\n  // Reset scroll position to the top when popover is opened\n  React.useEffect(() => {\n    if (popover.visible && scrollableRef.current) {\n      scrollableRef.current.scrollTop = 0;\n    }\n  }, [popover.visible]);\n\n  return (\n    <>\n      <PopoverDisclosure {...popover}>{children}</PopoverDisclosure>\n      <StyledPopover\n        {...popover}\n        scrollable={false}\n        mobilePosition=\"bottom\"\n        aria-label={t(\"Notifications\")}\n        unstable_initialFocusRef={scrollableRef}\n        shrink\n        flex\n      >\n        <Notifications\n          onRequestClose={popover.hide}\n          isOpen={popover.visible}\n          ref={scrollableRef}\n        />\n      </StyledPopover>\n    </>\n  );\n};\n\nconst StyledPopover = styled(Popover)`\n  z-index: ${depths.menu};\n`;\n\nexport default observer(NotificationsPopover);\n","import styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport { undraggableOnDesktop } from \"~/styles\";\n\nconst ResizeBorder = styled.div<{ dir?: \"left\" | \"right\" }>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: ${(props) => (props.dir !== \"right\" ? \"-1px\" : \"auto\")};\n  left: ${(props) => (props.dir === \"right\" ? \"-1px\" : \"auto\")};\n  width: 2px;\n  cursor: col-resize;\n  ${undraggableOnDesktop()}\n\n  &:hover {\n    transition-delay: 500ms;\n    transition: background 250ms ease-in-out;\n    background: ${s(\"sidebarActiveBackground\")};\n  }\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: -4px;\n    width: 10px;\n    ${undraggableOnDesktop()}\n  }\n`;\n\nexport default ResizeBorder;\n","import { MoreIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { extraArea, s } from \"@shared/styles\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\nimport { draggableOnDesktop, undraggableOnDesktop } from \"~/styles\";\nimport Desktop from \"~/utils/Desktop\";\n\nexport type SidebarButtonProps = React.ComponentProps<typeof Button> & {\n  position: \"top\" | \"bottom\";\n  title: React.ReactNode;\n  image: React.ReactNode;\n  showMoreMenu?: boolean;\n  onClick: React.MouseEventHandler<HTMLButtonElement>;\n  children?: React.ReactNode;\n};\n\nconst SidebarButton = React.forwardRef<HTMLButtonElement, SidebarButtonProps>(\n  function _SidebarButton(\n    {\n      position = \"top\",\n      showMoreMenu,\n      image,\n      title,\n      children,\n      ...rest\n    }: SidebarButtonProps,\n    ref\n  ) {\n    return (\n      <Container\n        justify=\"space-between\"\n        align=\"center\"\n        shrink={false}\n        $position={position}\n      >\n        <Button\n          {...rest}\n          $position={position}\n          as=\"button\"\n          ref={ref}\n          role=\"button\"\n        >\n          <Content gap={8} align=\"center\">\n            {image}\n            {title && <Title>{title}</Title>}\n          </Content>\n          {showMoreMenu && <StyledMoreIcon />}\n        </Button>\n        {children}\n      </Container>\n    );\n  }\n);\n\nconst StyledMoreIcon = styled(MoreIcon)`\n  flex-shrink: 0;\n`;\n\nconst Container = styled(Flex)<{ $position: \"top\" | \"bottom\" }>`\n  overflow: hidden;\n  padding-top: ${(props) =>\n    props.$position === \"top\" && Desktop.hasInsetTitlebar() ? 36 : 0}px;\n  ${draggableOnDesktop()}\n`;\n\nconst Title = styled(Text)`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst Content = styled(Flex)`\n  flex-shrink: 1;\n  flex-grow: 1;\n`;\n\nconst Button = styled(Flex)<{\n  $position: \"top\" | \"bottom\";\n}>`\n  flex: 1;\n  color: ${s(\"textTertiary\")};\n  align-items: center;\n  padding: 4px;\n  font-size: 15px;\n  font-weight: 500;\n  border-radius: 4px;\n  border: 0;\n  margin: ${(props) => (props.$position === \"top\" ? 16 : 8)}px 0;\n  background: none;\n  flex-shrink: 0;\n\n  -webkit-appearance: none;\n  text-decoration: none;\n  text-align: left;\n  user-select: none;\n  cursor: var(--pointer);\n  position: relative;\n\n  ${undraggableOnDesktop()}\n  ${extraArea(4)}\n\n  &:active,\n  &:hover,\n  &[aria-expanded=\"true\"] {\n    color: ${s(\"sidebarText\")};\n    background: ${s(\"sidebarActiveBackground\")};\n  }\n\n  &:last-child {\n    margin-right: 8px;\n  }\n\n  &:first-child {\n    margin-left: 8px;\n  }\n`;\n\nexport default SidebarButton;\n","import styled from \"styled-components\";\nimport { hover } from \"@shared/styles\";\nimport SidebarButton from \"./SidebarButton\";\n\nconst ToggleButton = styled(SidebarButton)`\n  opacity: 0;\n  transition: opacity 100ms ease-in-out;\n\n  &:${hover},\n  &:active {\n    opacity: 1;\n  }\n`;\n\nexport default ToggleButton;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport styled, { css, useTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { depths, s } from \"@shared/styles\";\nimport { Avatar } from \"~/components/Avatar\";\nimport Flex from \"~/components/Flex\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useMenuContext from \"~/hooks/useMenuContext\";\nimport useMobile from \"~/hooks/useMobile\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport useStores from \"~/hooks/useStores\";\nimport AccountMenu from \"~/menus/AccountMenu\";\nimport { fadeOnDesktopBackgrounded } from \"~/styles\";\nimport { fadeIn } from \"~/styles/animations\";\nimport Desktop from \"~/utils/Desktop\";\nimport NotificationIcon from \"../Notifications/NotificationIcon\";\nimport NotificationsPopover from \"../Notifications/NotificationsPopover\";\nimport { TooltipProvider } from \"../TooltipContext\";\nimport ResizeBorder from \"./components/ResizeBorder\";\nimport SidebarButton, { SidebarButtonProps } from \"./components/SidebarButton\";\nimport ToggleButton from \"./components/ToggleButton\";\n\nconst ANIMATION_MS = 250;\n\ntype Props = {\n  children: React.ReactNode;\n  hidden?: boolean;\n  className?: string;\n};\n\nconst Sidebar = React.forwardRef<HTMLDivElement, Props>(function _Sidebar(\n  { children, hidden = false, className }: Props,\n  ref: React.RefObject<HTMLDivElement>\n) {\n  const [isCollapsing, setCollapsing] = React.useState(false);\n  const theme = useTheme();\n  const { ui } = useStores();\n  const location = useLocation();\n  const previousLocation = usePrevious(location);\n  const { isMenuOpen } = useMenuContext();\n  const user = useCurrentUser({ rejectOnEmpty: false });\n  const isMobile = useMobile();\n  const width = ui.sidebarWidth;\n  const collapsed = ui.sidebarIsClosed && !isMenuOpen;\n  const maxWidth = theme.sidebarMaxWidth;\n  const minWidth = theme.sidebarMinWidth + 16; // padding\n\n  const [offset, setOffset] = React.useState(0);\n  const [isHovering, setHovering] = React.useState(false);\n  const [isAnimating, setAnimating] = React.useState(false);\n  const [isResizing, setResizing] = React.useState(false);\n  const [hasPointerMoved, setPointerMoved] = React.useState(false);\n  const isSmallerThanMinimum = width < minWidth;\n\n  const handleDrag = React.useCallback(\n    (event: MouseEvent) => {\n      // suppresses text selection\n      event.preventDefault();\n      // this is simple because the sidebar is always against the left edge\n      const width = Math.min(event.pageX - offset, maxWidth);\n      const isSmallerThanCollapsePoint = width < minWidth / 2;\n\n      ui.set({\n        sidebarWidth: isSmallerThanCollapsePoint\n          ? theme.sidebarCollapsedWidth\n          : width,\n      });\n    },\n    [ui, theme, offset, minWidth, maxWidth]\n  );\n\n  const handleStopDrag = React.useCallback(() => {\n    setResizing(false);\n\n    if (document.activeElement instanceof HTMLElement) {\n      document.activeElement.blur();\n    }\n\n    if (isSmallerThanMinimum) {\n      const isSmallerThanCollapsePoint = width < minWidth / 2;\n\n      if (isSmallerThanCollapsePoint) {\n        setAnimating(false);\n        setCollapsing(true);\n        ui.collapseSidebar();\n      } else {\n        ui.set({ sidebarWidth: minWidth });\n        setAnimating(true);\n      }\n    } else {\n      ui.set({ sidebarWidth: width });\n    }\n  }, [ui, isSmallerThanMinimum, minWidth, width]);\n\n  const handleBlur = React.useCallback(() => {\n    setHovering(false);\n  }, []);\n\n  const handleMouseDown = React.useCallback(\n    (event) => {\n      event.preventDefault();\n      if (!document.hasFocus()) {\n        return;\n      }\n\n      setOffset(event.pageX - width);\n      setResizing(true);\n      setAnimating(false);\n    },\n    [width]\n  );\n\n  const handlePointerActivity = React.useCallback(() => {\n    if (ui.sidebarIsClosed) {\n      setHovering(document.hasFocus());\n      setPointerMoved(true);\n    }\n  }, [ui.sidebarIsClosed]);\n\n  const handlePointerLeave = React.useCallback(\n    (ev) => {\n      if (hasPointerMoved) {\n        setHovering(\n          document.hasFocus() &&\n            ev.pageX < width &&\n            ev.pageY < window.innerHeight &&\n            ev.pageY > 0\n        );\n      }\n    },\n    [width, hasPointerMoved]\n  );\n\n  React.useEffect(() => {\n    if (ui.sidebarIsClosed) {\n      setHovering(false);\n      setPointerMoved(false);\n    }\n  }, [ui.sidebarIsClosed]);\n\n  React.useEffect(() => {\n    if (isAnimating) {\n      setTimeout(() => setAnimating(false), ANIMATION_MS);\n    }\n  }, [isAnimating]);\n\n  React.useEffect(() => {\n    if (isCollapsing) {\n      setTimeout(() => {\n        ui.set({ sidebarWidth: minWidth });\n        setCollapsing(false);\n      }, ANIMATION_MS);\n    }\n  }, [ui, minWidth, isCollapsing]);\n\n  React.useEffect(() => {\n    if (isResizing) {\n      document.body.style.cursor = \"col-resize\";\n      document.addEventListener(\"mousemove\", handleDrag);\n      document.addEventListener(\"mouseup\", handleStopDrag);\n    } else {\n      document.body.style.cursor = \"initial\";\n    }\n\n    window.addEventListener(\"blur\", handleBlur);\n\n    return () => {\n      window.removeEventListener(\"blur\", handleBlur);\n      document.removeEventListener(\"mousemove\", handleDrag);\n      document.removeEventListener(\"mouseup\", handleStopDrag);\n    };\n  }, [isResizing, handleDrag, handleBlur, handleStopDrag]);\n\n  const handleReset = React.useCallback(() => {\n    ui.set({ sidebarWidth: theme.sidebarWidth });\n  }, [ui, theme.sidebarWidth]);\n\n  React.useEffect(() => {\n    ui.setSidebarResizing(isResizing);\n  }, [ui, isResizing]);\n\n  React.useEffect(() => {\n    if (location !== previousLocation) {\n      ui.hideMobileSidebar();\n    }\n  }, [ui, location, previousLocation]);\n\n  const style = React.useMemo(\n    () => ({\n      width: `${width}px`,\n    }),\n    [width]\n  );\n\n  return (\n    <TooltipProvider>\n      <Container\n        id=\"sidebar\"\n        ref={ref}\n        style={style}\n        $hidden={hidden}\n        $isHovering={isHovering}\n        $isAnimating={isAnimating}\n        $isSmallerThanMinimum={isSmallerThanMinimum}\n        $mobileSidebarVisible={ui.mobileSidebarVisible}\n        $collapsed={collapsed}\n        $isMobile={isMobile}\n        className={className}\n        onPointerDown={handlePointerActivity}\n        onPointerMove={handlePointerActivity}\n        onPointerLeave={handlePointerLeave}\n        column\n      >\n        {children}\n\n        {user && (\n          <AccountMenu>\n            {(props: SidebarButtonProps) => (\n              <SidebarButton\n                {...props}\n                showMoreMenu\n                title={user.name}\n                position=\"bottom\"\n                image={\n                  <Avatar\n                    alt={user.name}\n                    model={user}\n                    size={24}\n                    style={{ marginLeft: 4 }}\n                  />\n                }\n              >\n                <Notifications />\n              </SidebarButton>\n            )}\n          </AccountMenu>\n        )}\n        <ResizeBorder\n          onMouseDown={handleMouseDown}\n          onDoubleClick={ui.sidebarIsClosed ? undefined : handleReset}\n        />\n      </Container>\n      {ui.mobileSidebarVisible && <Backdrop onClick={ui.toggleMobileSidebar} />}\n    </TooltipProvider>\n  );\n});\n\nconst Notifications = () => (\n  <NotificationsPopover>\n    {(rest: SidebarButtonProps) => (\n      <SidebarButton {...rest} position=\"bottom\" image={<NotificationIcon />} />\n    )}\n  </NotificationsPopover>\n);\n\nconst Backdrop = styled.a`\n  animation: ${fadeIn} 250ms ease-in-out;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  cursor: default;\n  z-index: ${depths.mobileSidebar - 1};\n  background: ${s(\"backdrop\")};\n`;\n\ntype ContainerProps = {\n  $mobileSidebarVisible: boolean;\n  $isAnimating: boolean;\n  $isSmallerThanMinimum: boolean;\n  $isHovering: boolean;\n  $collapsed: boolean;\n  $hidden: boolean;\n  $isMobile: boolean;\n};\n\nconst hoverStyles = (props: ContainerProps) => `\n  transform: none;\n  box-shadow: ${\n    props.$collapsed\n      ? \"rgba(0, 0, 0, 0.2) 1px 0 4px\"\n      : props.$isSmallerThanMinimum\n      ? \"rgba(0, 0, 0, 0.1) inset -1px 0 2px\"\n      : \"none\"\n  };\n\n  ${ToggleButton} {\n    opacity: 1;\n  }\n`;\n\nconst Container = styled(Flex)<ContainerProps>`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  background: ${s(\"sidebarBackground\")};\n  transition: box-shadow 150ms ease-in-out, transform 150ms ease-out,\n    ${(props: ContainerProps) =>\n      props.$isAnimating ? `,width ${ANIMATION_MS}ms ease-out` : \"\"};\n  transform: translateX(\n    ${(props) => (props.$mobileSidebarVisible ? 0 : \"-100%\")}\n  );\n  z-index: ${depths.mobileSidebar};\n  max-width: 80%;\n  min-width: 280px;\n  ${fadeOnDesktopBackgrounded()}\n\n  @media print {\n    display: none;\n    transform: none;\n  }\n\n  & > div {\n    transition: opacity 150ms ease-in-out;\n    opacity: ${(props) => {\n      if (props.$hidden) {\n        return \"0\";\n      }\n      if (props.$isHovering) {\n        return \"1\";\n      }\n      if (props.$isMobile) {\n        return props.$mobileSidebarVisible ? \"1\" : \"0\";\n      } else {\n        return props.$collapsed ? \"0\" : \"1\";\n      }\n    }};\n  }\n\n  ${breakpoint(\"tablet\")`\n    z-index: ${depths.sidebar};\n    margin: 0;\n    min-width: 0;\n    transform: translateX(${(props: ContainerProps) =>\n      props.$collapsed\n        ? `calc(-100% + ${Desktop.hasInsetTitlebar() ? 8 : 16}px)`\n        : 0});\n\n    ${(props: ContainerProps) => props.$isHovering && css(hoverStyles)}\n\n    &:hover {\n      ${ToggleButton} {\n        opacity: 1;\n      }\n    }\n\n    &:focus-within {\n      ${hoverStyles}\n\n      & > div {\n        opacity: 1;\n      }\n    }\n  `};\n`;\n\nexport default observer(Sidebar);\n","import { MoreIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { MenuButton } from \"reakit/Menu\";\nimport NudeButton from \"~/components/NudeButton\";\n\ntype Props = React.ComponentProps<typeof MenuButton> & {\n  className?: string;\n};\n\nexport default function OverflowMenuButton({ className, ...rest }: Props) {\n  return (\n    <MenuButton {...rest}>\n      {(props) => (\n        <NudeButton className={className} {...props}>\n          <MoreIcon />\n        </NudeButton>\n      )}\n    </MenuButton>\n  );\n}\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Icon from \"@shared/components/Icon\";\nimport { randomElement } from \"@shared/random\";\nimport { CollectionPermission } from \"@shared/types\";\nimport { IconLibrary } from \"@shared/utils/IconLibrary\";\nimport { colorPalette } from \"@shared/utils/collections\";\nimport { CollectionValidation } from \"@shared/validations\";\nimport Collection from \"~/models/Collection\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport Input from \"~/components/Input\";\nimport InputSelectPermission from \"~/components/InputSelectPermission\";\nimport Switch from \"~/components/Switch\";\nimport Text from \"~/components/Text\";\nimport useBoolean from \"~/hooks/useBoolean\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport { EmptySelectValue } from \"~/types\";\n\nconst IconPicker = React.lazy(() => import(\"~/components/IconPicker\"));\n\nexport interface FormData {\n  name: string;\n  icon: string;\n  color: string | null;\n  sharing: boolean;\n  permission: CollectionPermission | undefined;\n}\n\nexport const CollectionForm = observer(function CollectionForm_({\n  handleSubmit,\n  collection,\n}: {\n  handleSubmit: (data: FormData) => void;\n  collection?: Collection;\n}) {\n  const team = useCurrentTeam();\n  const { t } = useTranslation();\n\n  const [hasOpenedIconPicker, setHasOpenedIconPicker] = useBoolean(false);\n\n  const iconColor = React.useMemo(\n    () => collection?.color ?? randomElement(colorPalette),\n    [collection?.color]\n  );\n\n  const fallbackIcon = <Icon value=\"collection\" color={iconColor} />;\n\n  const {\n    register,\n    handleSubmit: formHandleSubmit,\n    formState,\n    watch,\n    control,\n    setValue,\n    setFocus,\n  } = useForm<FormData>({\n    mode: \"all\",\n    defaultValues: {\n      name: collection?.name ?? \"\",\n      icon: collection?.icon,\n      sharing: collection?.sharing ?? true,\n      permission: collection?.permission,\n      color: iconColor,\n    },\n  });\n\n  const values = watch();\n\n  React.useEffect(() => {\n    // If the user hasn't picked an icon yet, go ahead and suggest one based on\n    // the name of the collection. It's the little things sometimes.\n    if (!hasOpenedIconPicker && !collection) {\n      setValue(\n        \"icon\",\n        IconLibrary.findIconByKeyword(values.name) ??\n          values.icon ??\n          \"collection\"\n      );\n    }\n  }, [collection, hasOpenedIconPicker, setValue, values.name, values.icon]);\n\n  React.useEffect(() => {\n    setTimeout(() => setFocus(\"name\", { shouldSelect: true }), 100);\n  }, [setFocus]);\n\n  const handleIconChange = React.useCallback(\n    (icon: string, color: string | null) => {\n      if (icon !== values.icon) {\n        setFocus(\"name\");\n      }\n\n      setValue(\"icon\", icon);\n      setValue(\"color\", color);\n    },\n    [setFocus, setValue, values.icon]\n  );\n\n  return (\n    <form onSubmit={formHandleSubmit(handleSubmit)}>\n      <Text as=\"p\">\n        <Trans>\n          Collections are used to group documents and choose permissions\n        </Trans>\n        .\n      </Text>\n      <Flex gap={8}>\n        <Input\n          type=\"text\"\n          placeholder={t(\"Name\")}\n          {...register(\"name\", {\n            required: true,\n            maxLength: CollectionValidation.maxNameLength,\n          })}\n          prefix={\n            <React.Suspense fallback={fallbackIcon}>\n              <StyledIconPicker\n                icon={values.icon}\n                color={values.color ?? iconColor}\n                initial={values.name[0]}\n                popoverPosition=\"right\"\n                onOpen={setHasOpenedIconPicker}\n                onChange={handleIconChange}\n              />\n            </React.Suspense>\n          }\n          autoComplete=\"off\"\n          autoFocus\n          flex\n        />\n      </Flex>\n\n      {/* Following controls are available in create flow, but moved elsewhere for edit */}\n      {!collection && (\n        <Controller\n          control={control}\n          name=\"permission\"\n          render={({ field }) => (\n            <InputSelectPermission\n              ref={field.ref}\n              value={field.value}\n              onChange={(\n                value: CollectionPermission | typeof EmptySelectValue\n              ) => {\n                field.onChange(value === EmptySelectValue ? null : value);\n              }}\n              note={t(\n                \"The default access for workspace members, you can share with more users or groups later.\"\n              )}\n            />\n          )}\n        />\n      )}\n\n      {team.sharing && (\n        <Switch\n          id=\"sharing\"\n          label={t(\"Public document sharing\")}\n          note={t(\n            \"Allow documents within this collection to be shared publicly on the internet.\"\n          )}\n          {...register(\"sharing\")}\n        />\n      )}\n\n      <Flex justify=\"flex-end\">\n        <Button\n          type=\"submit\"\n          disabled={formState.isSubmitting || !formState.isValid}\n        >\n          {collection\n            ? formState.isSubmitting\n              ? `${t(\"Saving\")}…`\n              : t(\"Save\")\n            : formState.isSubmitting\n            ? `${t(\"Creating\")}…`\n            : t(\"Create\")}\n        </Button>\n      </Flex>\n    </form>\n  );\n});\n\nconst StyledIconPicker = styled(IconPicker)`\n  margin-left: 4px;\n  margin-right: 4px;\n`;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { toast } from \"sonner\";\nimport useStores from \"~/hooks/useStores\";\nimport { CollectionForm, FormData } from \"./CollectionForm\";\n\ntype Props = {\n  collectionId: string;\n  onSubmit: () => void;\n};\n\nexport const CollectionEdit = observer(function CollectionEdit_({\n  collectionId,\n  onSubmit,\n}: Props) {\n  const { collections } = useStores();\n  const collection = collections.get(collectionId);\n\n  const handleSubmit = React.useCallback(\n    async (data: FormData) => {\n      try {\n        await collection?.save(data);\n        onSubmit?.();\n      } catch (error) {\n        toast.error(error.message);\n      }\n    },\n    [collection, onSubmit]\n  );\n\n  return <CollectionForm collection={collection} handleSubmit={handleSubmit} />;\n});\n","import { runInAction } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { toast } from \"sonner\";\nimport useStores from \"~/hooks/useStores\";\nimport history from \"~/utils/history\";\nimport { CollectionForm, FormData } from \"./CollectionForm\";\n\ntype Props = {\n  onSubmit: () => void;\n};\n\nexport const CollectionNew = observer(function CollectionNew_({\n  onSubmit,\n}: Props) {\n  const { collections } = useStores();\n  const handleSubmit = React.useCallback(\n    async (data: FormData) => {\n      try {\n        const collection = await collections.save(data);\n        // Avoid flash of loading state for the new collection, we know it's empty.\n        runInAction(() => {\n          collection.documents = [];\n        });\n        onSubmit?.();\n        history.push(collection.path);\n      } catch (error) {\n        toast.error(error.message);\n      }\n    },\n    [collections, onSubmit]\n  );\n\n  return <CollectionForm handleSubmit={handleSubmit} />;\n});\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport Collection from \"~/models/Collection\";\nimport ConfirmationDialog from \"~/components/ConfirmationDialog\";\nimport Text from \"~/components/Text\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport useStores from \"~/hooks/useStores\";\nimport { homePath } from \"~/utils/routeHelpers\";\n\ntype Props = {\n  collection: Collection;\n  onSubmit: () => void;\n};\n\nfunction CollectionDeleteDialog({ collection, onSubmit }: Props) {\n  const team = useCurrentTeam();\n  const { ui } = useStores();\n  const history = useHistory();\n  const { t } = useTranslation();\n\n  const handleSubmit = async () => {\n    const redirect = collection.id === ui.activeCollectionId;\n\n    if (redirect) {\n      history.push(homePath());\n    }\n\n    await collection.delete();\n    onSubmit();\n    toast.success(t(\"Collection deleted\"));\n  };\n\n  return (\n    <ConfirmationDialog\n      onSubmit={handleSubmit}\n      submitText={t(\"I’m sure – Delete\")}\n      savingText={`${t(\"Deleting\")}…`}\n      danger\n    >\n      <>\n        <Text as=\"p\" type=\"secondary\">\n          <Trans\n            defaults=\"Are you sure about that? Deleting the <em>{{collectionName}}</em> collection is permanent and cannot be restored, however all published documents within will be moved to the trash.\"\n            values={{\n              collectionName: collection.name,\n            }}\n            components={{\n              em: <strong />,\n            }}\n          />\n        </Text>\n        {team.defaultCollectionId === collection.id ? (\n          <Text as=\"p\" type=\"secondary\">\n            <Trans\n              defaults=\"Also, <em>{{collectionName}}</em> is being used as the start view – deleting it will reset the start view to the Home page.\"\n              values={{\n                collectionName: collection.name,\n              }}\n              components={{\n                em: <strong />,\n              }}\n            />\n          </Text>\n        ) : null}\n      </>\n    </ConfirmationDialog>\n  );\n}\n\nexport default observer(CollectionDeleteDialog);\n","import { darken } from \"polished\";\nimport styled from \"styled-components\";\nimport Flex from \"@shared/components/Flex\";\nimport { s, hover } from \"@shared/styles\";\nimport NudeButton from \"~/components/NudeButton\";\n\n// TODO: Temp until Button/NudeButton styles are normalized\nexport const Wrapper = styled.div`\n  ${NudeButton}:${hover},\n  ${NudeButton}[aria-expanded=\"true\"] {\n    background: ${(props) => darken(0.05, props.theme.buttonNeutralBackground)};\n  }\n`;\n\nexport const Separator = styled.div`\n  border-top: 1px dashed ${s(\"divider\")};\n  margin: 8px 0;\n`;\n\nexport const HeaderInput = styled(Flex)`\n  position: sticky;\n  z-index: 1;\n  top: 0;\n  background: ${s(\"menuBackground\")};\n  color: ${s(\"textTertiary\")};\n  border-bottom: 1px solid ${s(\"inputBorder\")};\n  padding: 0 24px 12px;\n  margin-top: 0;\n  margin-left: -24px;\n  margin-right: -24px;\n  margin-bottom: 12px;\n  cursor: text;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: -20px;\n    height: 20px;\n    background: ${s(\"menuBackground\")};\n  }\n`;\n\nexport const presence = {\n  initial: {\n    opacity: 0,\n    width: 0,\n    marginRight: 0,\n  },\n  animate: {\n    opacity: 1,\n    width: \"auto\",\n    marginRight: 8,\n    transition: {\n      type: \"spring\",\n      duration: 0.2,\n      bounce: 0,\n    },\n  },\n  exit: {\n    opacity: 0,\n    width: 0,\n    marginRight: 0,\n  },\n};\n","import copy from \"copy-to-clipboard\";\nimport * as React from \"react\";\nimport { mergeRefs } from \"react-merge-refs\";\nimport env from \"~/env\";\n\ntype Props = {\n  text: string;\n  children?: React.ReactElement;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  onCopy?: () => void;\n};\n\nfunction CopyToClipboard(props: Props, ref: React.Ref<HTMLElement>) {\n  const { text, onCopy, children, ...rest } = props;\n\n  const onClick = React.useCallback(\n    (ev: React.MouseEvent<HTMLElement>) => {\n      const elem = React.Children.only(children);\n\n      copy(text, {\n        debug: env.ENVIRONMENT !== \"production\",\n        format: \"text/plain\",\n      });\n\n      onCopy?.();\n\n      if (elem && elem.props && typeof elem.props.onClick === \"function\") {\n        elem.props.onClick(ev);\n      } else {\n        ev.preventDefault();\n        ev.stopPropagation();\n      }\n    },\n    [children, onCopy, text]\n  );\n\n  const elem = React.Children.only(children);\n  if (!elem) {\n    return null;\n  }\n\n  return React.cloneElement(elem, {\n    ...rest,\n    ref:\n      \"ref\" in elem\n        ? mergeRefs([elem.ref as React.MutableRefObject<HTMLElement>, ref])\n        : ref,\n    onClick,\n  });\n}\n\nexport default React.forwardRef(CopyToClipboard);\n","import { LinkIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport CopyToClipboard from \"~/components/CopyToClipboard\";\nimport NudeButton from \"~/components/NudeButton\";\nimport Tooltip from \"~/components/Tooltip\";\n\nexport function CopyLinkButton({\n  url,\n  onCopy,\n}: {\n  url: string;\n  onCopy: () => void;\n}) {\n  const { t } = useTranslation();\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>();\n\n  const handleCopied = React.useCallback(() => {\n    onCopy();\n\n    timeout.current = setTimeout(() => {\n      toast.message(t(\"Link copied to clipboard\"));\n    }, 100);\n\n    return () => {\n      if (timeout.current) {\n        clearTimeout(timeout.current);\n      }\n    };\n  }, [onCopy, t]);\n\n  return (\n    <Tooltip content={t(\"Copy link\")} placement=\"top\">\n      <CopyToClipboard text={url} onCopy={handleCopied}>\n        <NudeButton type=\"button\">\n          <LinkIcon size={20} />\n        </NudeButton>\n      </CopyToClipboard>\n    </Tooltip>\n  );\n}\n","import styled from \"styled-components\";\nimport Button, { Inner } from \"./Button\";\n\nconst ButtonSmall = styled(Button)`\n  font-size: 13px;\n  height: 26px;\n\n  ${Inner} {\n    padding: 0 6px;\n    line-height: 26px;\n    min-height: 26px;\n  }\n`;\n\nexport default ButtonSmall;\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport InputSelect, { Props as SelectProps } from \"~/components/InputSelect\";\nimport { EmptySelectValue, Permission } from \"~/types\";\n\nexport default function InputMemberPermissionSelect(\n  props: Partial<SelectProps> & { permissions: Permission[] }\n) {\n  const { value, onChange, ...rest } = props;\n  const { t } = useTranslation();\n\n  return (\n    <Select\n      label={t(\"Permissions\")}\n      options={props.permissions}\n      ariaLabel={t(\"Permissions\")}\n      onChange={onChange}\n      value={value || EmptySelectValue}\n      labelHidden\n      nude\n      {...rest}\n    />\n  );\n}\n\nconst Select = styled(InputSelect)`\n  margin: 0;\n  font-size: 14px;\n  border-color: transparent;\n  box-shadow: none;\n  color: ${s(\"textSecondary\")};\n\n  select {\n    margin: 0;\n  }\n` as React.ComponentType<SelectProps>;\n","import * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Flex from \"@shared/components/Flex\";\nimport { CollectionPermission, DocumentPermission } from \"@shared/types\";\nimport { Inner } from \"~/components/Button\";\nimport ButtonSmall from \"~/components/ButtonSmall\";\nimport Fade from \"~/components/Fade\";\nimport InputMemberPermissionSelect from \"~/components/InputMemberPermissionSelect\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport { Action, Permission } from \"~/types\";\n\nexport function PermissionAction({\n  permission,\n  permissions,\n  action,\n  onChange,\n}: {\n  permission: CollectionPermission | DocumentPermission;\n  permissions: Permission[];\n  action: Action;\n  onChange: (permission: CollectionPermission | DocumentPermission) => void;\n}) {\n  const { t } = useTranslation();\n  const context = useActionContext();\n\n  return (\n    <Fade timing=\"150ms\" key=\"invite\">\n      <Flex gap={4}>\n        <InputPermissionSelect\n          permissions={permissions}\n          onChange={onChange}\n          value={permission}\n          labelHidden\n          nude\n        />\n        <ButtonSmall action={action} context={context}>\n          {t(\"Add\")}\n        </ButtonSmall>\n      </Flex>\n    </Fade>\n  );\n}\n\nconst InputPermissionSelect = styled(InputMemberPermissionSelect)`\n  font-size: 13px;\n  height: 26px;\n\n  ${Inner} {\n    line-height: 26px;\n    min-height: 26px;\n  }\n`;\n","import { AnimatePresence } from \"framer-motion\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { mergeRefs } from \"react-merge-refs\";\nimport Flex from \"~/components/Flex\";\nimport useMobile from \"~/hooks/useMobile\";\nimport Input, { NativeInput } from \"../../Input\";\nimport { HeaderInput } from \"../components\";\n\ntype Props = {\n  query: string;\n  onChange: React.ChangeEventHandler;\n  onClick: React.MouseEventHandler;\n  onKeyDown: React.KeyboardEventHandler;\n  back: React.ReactNode;\n  action: React.ReactNode;\n};\n\nexport const SearchInput = React.forwardRef(function _SearchInput(\n  { onChange, onClick, onKeyDown, query, back, action }: Props,\n  ref: React.Ref<HTMLInputElement>\n) {\n  const { t } = useTranslation();\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const isMobile = useMobile();\n\n  const focusInput = React.useCallback(\n    (event) => {\n      if (event.target.closest(\"button\")) {\n        return;\n      }\n      inputRef.current?.focus();\n      onClick(event);\n    },\n    [onClick]\n  );\n\n  return isMobile ? (\n    <Flex align=\"center\" style={{ marginBottom: 12 }} auto>\n      {back}\n      <Input\n        key=\"input\"\n        placeholder={`${t(\"Add or invite\")}…`}\n        value={query}\n        onChange={onChange}\n        onClick={onClick}\n        onKeyDown={onKeyDown}\n        autoFocus\n        margin={0}\n        flex\n      >\n        {action}\n      </Input>\n    </Flex>\n  ) : (\n    <HeaderInput align=\"center\" onClick={focusInput}>\n      <AnimatePresence initial={false}>\n        {back}\n        <NativeInput\n          key=\"input\"\n          ref={mergeRefs([inputRef, ref])}\n          placeholder={`${t(\"Add or invite\")}…`}\n          value={query}\n          onChange={onChange}\n          onClick={onClick}\n          onKeyDown={onKeyDown}\n          style={{ padding: \"6px 0\" }}\n        />\n        {action}\n      </AnimatePresence>\n    </HeaderInput>\n  );\n});\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var arrayPush = require('./_arrayPush'),\n    baseFlatten = require('./_baseFlatten'),\n    copyArray = require('./_copyArray'),\n    isArray = require('./isArray');\n\n/**\n * Creates a new array concatenating `array` with any additional arrays\n * and/or values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to concatenate.\n * @param {...*} [values] The values to concatenate.\n * @returns {Array} Returns the new concatenated array.\n * @example\n *\n * var array = [1];\n * var other = _.concat(array, 2, [3], [[4]]);\n *\n * console.log(other);\n * // => [1, 2, 3, [4]]\n *\n * console.log(array);\n * // => [1]\n */\nfunction concat() {\n  var length = arguments.length;\n  if (!length) {\n    return [];\n  }\n  var args = Array(length - 1),\n      array = arguments[0],\n      index = length;\n\n  while (index--) {\n    args[index - 1] = arguments[index];\n  }\n  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n}\n\nmodule.exports = concat;\n","import * as React from \"react\";\nimport useWindowSize from \"./useWindowSize\";\n\n/**\n * Hook to calculate the maximum height for an element based on its position and viewport size.\n *\n * @param options Configuration options\n * @param options.elementRef A ref pointing to the element to calculate max height for\n * @param options.maxViewportPercentage The maximum height of the element as a percentage of the viewport\n * @param options.margin The margin to apply to the positioning\n * @returns Object containing the calculated maxHeight and a function to recalculate it\n */\nconst useMaxHeight = ({\n  elementRef,\n  maxViewportPercentage = 90,\n  margin = 16,\n}: {\n  /** The maximum height of the element as a percentage of the viewport. */\n  maxViewportPercentage?: number;\n  /** A ref pointing to the element. */\n  elementRef?: React.RefObject<HTMLElement | null>;\n  /** The margin to apply to the positioning. */\n  margin?: number;\n}) => {\n  const [maxHeight, setMaxHeight] = React.useState<number | undefined>(10);\n  const { height: windowHeight } = useWindowSize();\n\n  const calcMaxHeight = React.useCallback(() => {\n    if (elementRef?.current) {\n      const mxHeight = (windowHeight / 100) * maxViewportPercentage - margin;\n\n      setMaxHeight(\n        Math.min(\n          mxHeight,\n          elementRef?.current\n            ? windowHeight -\n                elementRef.current.getBoundingClientRect().top -\n                margin\n            : 0\n        )\n      );\n    } else {\n      setMaxHeight(0);\n    }\n  }, [elementRef, windowHeight, margin, maxViewportPercentage]);\n\n  React.useLayoutEffect(calcMaxHeight, [calcMaxHeight]);\n\n  return { maxHeight, calcMaxHeight };\n};\n\nexport default useMaxHeight;\n","import { PlusIcon } from \"outline-icons\";\nimport styled from \"styled-components\";\nimport { hover } from \"@shared/styles\";\nimport BaseListItem from \"~/components/List/Item\";\n\nexport const InviteIcon = styled(PlusIcon)`\n  opacity: 0;\n`;\n\nexport const ListItem = styled(BaseListItem).attrs({\n  small: true,\n  border: false,\n})`\n  margin: 0 -16px;\n  padding: 6px 16px;\n  border-radius: 8px;\n\n  &: ${hover} ${InviteIcon},\n  &:focus ${InviteIcon},\n  &:focus-within ${InviteIcon} {\n    opacity: 1;\n  }\n`;\n","import { isEmail } from \"class-validator\";\nimport concat from \"lodash/concat\";\nimport { observer } from \"mobx-react\";\nimport { CheckmarkIcon, CloseIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { s, hover } from \"@shared/styles\";\nimport { stringToColor } from \"@shared/utils/color\";\nimport Collection from \"~/models/Collection\";\nimport Document from \"~/models/Document\";\nimport Group from \"~/models/Group\";\nimport User from \"~/models/User\";\nimport ArrowKeyNavigation from \"~/components/ArrowKeyNavigation\";\nimport { Avatar, GroupAvatar, AvatarSize, IAvatar } from \"~/components/Avatar\";\nimport Empty from \"~/components/Empty\";\nimport Placeholder from \"~/components/List/Placeholder\";\nimport Scrollable from \"~/components/Scrollable\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useMaxHeight from \"~/hooks/useMaxHeight\";\nimport useStores from \"~/hooks/useStores\";\nimport useThrottledCallback from \"~/hooks/useThrottledCallback\";\nimport { InviteIcon, ListItem } from \"./ListItem\";\n\ntype Suggestion = IAvatar & {\n  id: string;\n};\n\ntype Props = {\n  /** The document being shared. */\n  document?: Document;\n  /** The collection being shared. */\n  collection?: Collection;\n  /** The search query to filter users by. */\n  query: string;\n  /** A list of pending user ids that have not yet been invited. */\n  pendingIds: string[];\n  /** Callback to add a user to the pending list. */\n  addPendingId: (id: string) => void;\n  /** Callback to remove a user from the pending list. */\n  removePendingId: (id: string) => void;\n  /** Handles escape from suggestions list */\n  onEscape?: (ev: React.KeyboardEvent<HTMLDivElement>) => void;\n};\n\nexport const Suggestions = observer(\n  React.forwardRef(function _Suggestions(\n    {\n      document,\n      collection,\n      query,\n      pendingIds,\n      addPendingId,\n      removePendingId,\n      onEscape,\n    }: Props,\n    ref: React.Ref<HTMLDivElement>\n  ) {\n    const neverRenderedList = React.useRef(false);\n    const { users, groups } = useStores();\n    const { t } = useTranslation();\n    const user = useCurrentUser();\n    const containerRef = React.useRef<HTMLDivElement | null>(null);\n    const { maxHeight } = useMaxHeight({\n      elementRef: containerRef,\n      maxViewportPercentage: 70,\n    });\n\n    const fetchUsersByQuery = useThrottledCallback(\n      (query: string) => {\n        void users.fetchPage({ query });\n        void groups.fetchPage({ query });\n      },\n      250,\n      undefined,\n      {\n        leading: true,\n      }\n    );\n\n    const getSuggestionForEmail = React.useCallback(\n      (email: string) => ({\n        id: email,\n        name: email,\n        avatarUrl: \"\",\n        color: stringToColor(email),\n        initial: email[0].toUpperCase(),\n        email: t(\"Invite to workspace\"),\n      }),\n      [t]\n    );\n\n    const suggestions = React.useMemo(() => {\n      const filtered: Suggestion[] = (\n        document\n          ? users.notInDocument(document.id, query)\n          : collection\n          ? users.notInCollection(collection.id, query)\n          : users.activeOrInvited\n      ).filter((u) => !u.isSuspended && u.id !== user.id);\n\n      if (isEmail(query)) {\n        filtered.push(getSuggestionForEmail(query));\n      }\n\n      return [\n        ...(document\n          ? groups.notInDocument(document.id, query)\n          : collection\n          ? groups.notInCollection(collection.id, query)\n          : []),\n        ...filtered,\n      ];\n    }, [\n      getSuggestionForEmail,\n      users,\n      users.activeOrInvited,\n      groups,\n      groups.orderedData,\n      document?.id,\n      document?.members,\n      collection?.id,\n      user.id,\n      query,\n      t,\n    ]);\n\n    const pending = React.useMemo(\n      () =>\n        pendingIds\n          .map((id) =>\n            isEmail(id)\n              ? getSuggestionForEmail(id)\n              : users.get(id) ?? groups.get(id)\n          )\n          .filter(Boolean) as User[],\n      [users, groups, getSuggestionForEmail, pendingIds]\n    );\n\n    React.useEffect(() => {\n      void fetchUsersByQuery(query);\n    }, [query, fetchUsersByQuery]);\n\n    function getListItemProps(suggestion: User | Group) {\n      if (suggestion instanceof Group) {\n        return {\n          title: suggestion.name,\n          subtitle: t(\"{{ count }} member\", {\n            count: suggestion.memberCount,\n          }),\n          image: <GroupAvatar group={suggestion} />,\n        };\n      }\n      return {\n        title: suggestion.name,\n        subtitle: suggestion.email\n          ? suggestion.email\n          : suggestion.isViewer\n          ? t(\"Viewer\")\n          : t(\"Editor\"),\n        image: <Avatar model={suggestion} size={AvatarSize.Medium} />,\n      };\n    }\n\n    const isEmpty = suggestions.length === 0;\n    const suggestionsWithPending = suggestions.filter(\n      (u) => !pendingIds.includes(u.id)\n    );\n\n    if (users.isFetching && isEmpty && neverRenderedList.current) {\n      return <Placeholder />;\n    }\n\n    neverRenderedList.current = false;\n\n    return (\n      <ScrollableContainer\n        ref={containerRef}\n        hiddenScrollbars\n        style={{ maxHeight }}\n      >\n        <ArrowKeyNavigation\n          ref={ref}\n          onEscape={onEscape}\n          aria-label={t(\"Suggestions for invitation\")}\n          items={concat(pending, suggestionsWithPending)}\n        >\n          {() => [\n            ...pending.map((suggestion) => (\n              <PendingListItem\n                keyboardNavigation\n                {...getListItemProps(suggestion)}\n                key={suggestion.id}\n                onClick={() => removePendingId(suggestion.id)}\n                onKeyDown={(ev) => {\n                  if (ev.key === \"Enter\") {\n                    ev.preventDefault();\n                    ev.stopPropagation();\n                    removePendingId(suggestion.id);\n                  }\n                }}\n                actions={\n                  <>\n                    <InvitedIcon />\n                    <RemoveIcon />\n                  </>\n                }\n              />\n            )),\n            pending.length > 0 &&\n              (suggestionsWithPending.length > 0 || isEmpty) && <Separator />,\n            ...suggestionsWithPending.map((suggestion) => (\n              <ListItem\n                keyboardNavigation\n                {...getListItemProps(suggestion as User)}\n                key={suggestion.id}\n                onClick={() => addPendingId(suggestion.id)}\n                onKeyDown={(ev) => {\n                  if (ev.key === \"Enter\") {\n                    ev.preventDefault();\n                    ev.stopPropagation();\n                    addPendingId(suggestion.id);\n                  }\n                }}\n                actions={<InviteIcon />}\n              />\n            )),\n            isEmpty && (\n              <Empty style={{ marginTop: 22 }}>{t(\"No matches\")}</Empty>\n            ),\n          ]}\n        </ArrowKeyNavigation>\n      </ScrollableContainer>\n    );\n  })\n);\n\nconst InvitedIcon = styled(CheckmarkIcon)`\n  color: ${s(\"accent\")};\n`;\n\nconst RemoveIcon = styled(CloseIcon)`\n  display: none;\n`;\n\nconst PendingListItem = styled(ListItem)`\n  &: ${hover} {\n    ${InvitedIcon} {\n      display: none;\n    }\n\n    ${RemoveIcon} {\n      display: block;\n    }\n  }\n`;\n\nconst Separator = styled.div`\n  border-top: 1px dashed ${s(\"divider\")};\n  margin: 12px 0;\n`;\n\nconst ScrollableContainer = styled(Scrollable)`\n  padding: 12px 24px;\n  margin: -12px -24px;\n`;\n","import times from \"lodash/times\";\nimport * as React from \"react\";\nimport { AvatarSize } from \"~/components/Avatar\";\nimport Fade from \"~/components/Fade\";\nimport PlaceholderText from \"~/components/PlaceholderText\";\nimport { ListItem } from \"../components/ListItem\";\n\ntype Props = {\n  count?: number;\n};\n\n/**\n * Placeholder for a list item in the share popover.\n */\nexport function Placeholder({ count = 1 }: Props) {\n  return (\n    <Fade>\n      {times(count, (index) => (\n        <ListItem\n          key={index}\n          image={\n            <PlaceholderText\n              width={AvatarSize.Medium}\n              height={AvatarSize.Medium}\n            />\n          }\n          title={\n            <PlaceholderText\n              maxWidth={50}\n              minWidth={30}\n              height={14}\n              style={{ marginTop: 4, marginBottom: 4 }}\n            />\n          }\n          subtitle={\n            <PlaceholderText\n              maxWidth={75}\n              minWidth={50}\n              height={12}\n              style={{ marginBottom: 4 }}\n            />\n          }\n        />\n      ))}\n    </Fade>\n  );\n}\n","import { observer } from \"mobx-react\";\nimport { UserIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport styled, { useTheme } from \"styled-components\";\nimport Squircle from \"@shared/components/Squircle\";\nimport { CollectionPermission } from \"@shared/types\";\nimport Collection from \"~/models/Collection\";\nimport { Avatar, GroupAvatar, AvatarSize } from \"~/components/Avatar\";\nimport InputMemberPermissionSelect from \"~/components/InputMemberPermissionSelect\";\nimport InputSelectPermission from \"~/components/InputSelectPermission\";\nimport Scrollable from \"~/components/Scrollable\";\nimport useMaxHeight from \"~/hooks/useMaxHeight\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport useRequest from \"~/hooks/useRequest\";\nimport useStores from \"~/hooks/useStores\";\nimport { EmptySelectValue, Permission } from \"~/types\";\nimport { ListItem } from \"../components/ListItem\";\nimport { Placeholder } from \"../components/Placeholder\";\n\ntype Props = {\n  /** Collection to which team members are supposed to be invited */\n  collection: Collection;\n  /** Children to be rendered before the list of members */\n  children?: React.ReactNode;\n  /** List of users and groups that have been invited during the current editing session */\n  invitedInSession: string[];\n};\n\nexport const AccessControlList = observer(\n  ({ collection, invitedInSession }: Props) => {\n    const { memberships, groupMemberships } = useStores();\n    const can = usePolicy(collection);\n    const { t } = useTranslation();\n    const theme = useTheme();\n    const collectionId = collection.id;\n\n    const { request: fetchMemberships, loading: membershipLoading } =\n      useRequest(\n        React.useCallback(\n          () => memberships.fetchAll({ id: collectionId }),\n          [memberships, collectionId]\n        )\n      );\n\n    const { request: fetchGroupMemberships, loading: groupMembershipLoading } =\n      useRequest(\n        React.useCallback(\n          () => groupMemberships.fetchAll({ collectionId }),\n          [groupMemberships, collectionId]\n        )\n      );\n\n    const groupMembershipsInCollection =\n      groupMemberships.inCollection(collectionId);\n    const membershipsInCollection = memberships.inCollection(collectionId);\n    const hasMemberships =\n      groupMembershipsInCollection.length > 0 ||\n      membershipsInCollection.length > 0;\n    const showLoading =\n      !hasMemberships && (membershipLoading || groupMembershipLoading);\n\n    React.useEffect(() => {\n      void fetchMemberships();\n      void fetchGroupMemberships();\n    }, [fetchMemberships, fetchGroupMemberships]);\n\n    const containerRef = React.useRef<HTMLDivElement | null>(null);\n    const { maxHeight, calcMaxHeight } = useMaxHeight({\n      elementRef: containerRef,\n      maxViewportPercentage: 70,\n    });\n\n    React.useEffect(() => {\n      calcMaxHeight();\n    });\n\n    const permissions = React.useMemo(\n      () =>\n        [\n          {\n            label: t(\"View only\"),\n            value: CollectionPermission.Read,\n          },\n          {\n            label: t(\"Can edit\"),\n            value: CollectionPermission.ReadWrite,\n          },\n          {\n            label: t(\"Manage\"),\n            value: CollectionPermission.Admin,\n          },\n          {\n            divider: true,\n            label: t(\"Remove\"),\n            value: EmptySelectValue,\n          },\n        ] as Permission[],\n      [t]\n    );\n\n    return (\n      <ScrollableContainer\n        ref={containerRef}\n        hiddenScrollbars\n        style={{ maxHeight }}\n      >\n        {showLoading ? (\n          <Placeholder count={2} />\n        ) : (\n          <>\n            <ListItem\n              image={\n                <Squircle color={theme.accent} size={AvatarSize.Medium}>\n                  <UserIcon color={theme.accentText} size={16} />\n                </Squircle>\n              }\n              title={t(\"All members\")}\n              subtitle={t(\"Everyone in the workspace\")}\n              actions={\n                <div style={{ marginRight: -8 }}>\n                  <InputSelectPermission\n                    style={{ margin: 0 }}\n                    onChange={(\n                      value: CollectionPermission | typeof EmptySelectValue\n                    ) => {\n                      void collection.save({\n                        permission: value === EmptySelectValue ? null : value,\n                      });\n                    }}\n                    disabled={!can.update}\n                    value={collection?.permission}\n                    labelHidden\n                    nude\n                  />\n                </div>\n              }\n            />\n            {groupMembershipsInCollection\n              .filter((membership) => membership.group)\n              .sort((a, b) =>\n                (\n                  (invitedInSession.includes(a.group.id) ? \"_\" : \"\") +\n                  a.group.name\n                ).localeCompare(b.group.name)\n              )\n              .map((membership) => (\n                <ListItem\n                  key={membership.id}\n                  image={\n                    <GroupAvatar\n                      group={membership.group}\n                      backgroundColor={theme.modalBackground}\n                    />\n                  }\n                  title={membership.group.name}\n                  subtitle={t(\"{{ count }} member\", {\n                    count: membership.group.memberCount,\n                  })}\n                  actions={\n                    <div style={{ marginRight: -8 }}>\n                      <InputMemberPermissionSelect\n                        style={{ margin: 0 }}\n                        permissions={permissions}\n                        onChange={async (\n                          permission:\n                            | CollectionPermission\n                            | typeof EmptySelectValue\n                        ) => {\n                          try {\n                            if (permission === EmptySelectValue) {\n                              await groupMemberships.delete({\n                                collectionId: collection.id,\n                                groupId: membership.groupId,\n                              });\n                            } else {\n                              await groupMemberships.create({\n                                collectionId: collection.id,\n                                groupId: membership.groupId,\n                                permission,\n                              });\n                            }\n                          } catch (err) {\n                            toast.error(err.message);\n                            return false;\n                          }\n                          return true;\n                        }}\n                        disabled={!can.update}\n                        value={membership.permission}\n                        labelHidden\n                        nude\n                      />\n                    </div>\n                  }\n                />\n              ))}\n            {membershipsInCollection\n              .filter((membership) => membership.user)\n              .sort((a, b) =>\n                (\n                  (invitedInSession.includes(a.user.id) ? \"_\" : \"\") +\n                  a.user.name\n                ).localeCompare(b.user.name)\n              )\n              .map((membership) => (\n                <ListItem\n                  key={membership.id}\n                  image={\n                    <Avatar model={membership.user} size={AvatarSize.Medium} />\n                  }\n                  title={membership.user.name}\n                  subtitle={membership.user.email}\n                  actions={\n                    <div style={{ marginRight: -8 }}>\n                      <InputMemberPermissionSelect\n                        style={{ margin: 0 }}\n                        permissions={permissions}\n                        onChange={async (\n                          permission:\n                            | CollectionPermission\n                            | typeof EmptySelectValue\n                        ) => {\n                          try {\n                            if (permission === EmptySelectValue) {\n                              await memberships.delete({\n                                collectionId: collection.id,\n                                userId: membership.userId,\n                              });\n                            } else {\n                              await memberships.create({\n                                collectionId: collection.id,\n                                userId: membership.userId,\n                                permission,\n                              });\n                            }\n                          } catch (err) {\n                            toast.error(err.message);\n                            return false;\n                          }\n                          return true;\n                        }}\n                        disabled={!can.update}\n                        value={membership.permission}\n                        labelHidden\n                        nude\n                      />\n                    </div>\n                  }\n                />\n              ))}\n          </>\n        )}\n      </ScrollableContainer>\n    );\n  }\n);\n\nconst ScrollableContainer = styled(Scrollable)`\n  padding: 12px 24px;\n  margin: -12px -24px;\n`;\n","import { isEmail } from \"class-validator\";\nimport { m } from \"framer-motion\";\nimport { observer } from \"mobx-react\";\nimport { BackIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport { CollectionPermission } from \"@shared/types\";\nimport Collection from \"~/models/Collection\";\nimport Group from \"~/models/Group\";\nimport User from \"~/models/User\";\nimport { Avatar, AvatarSize } from \"~/components/Avatar\";\nimport NudeButton from \"~/components/NudeButton\";\nimport { createAction } from \"~/actions\";\nimport { UserSection } from \"~/actions/sections\";\nimport useBoolean from \"~/hooks/useBoolean\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport useKeyDown from \"~/hooks/useKeyDown\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport useStores from \"~/hooks/useStores\";\nimport { Permission } from \"~/types\";\nimport { collectionPath, urlify } from \"~/utils/routeHelpers\";\nimport { Wrapper, presence } from \"../components\";\nimport { CopyLinkButton } from \"../components/CopyLinkButton\";\nimport { PermissionAction } from \"../components/PermissionAction\";\nimport { SearchInput } from \"../components/SearchInput\";\nimport { Suggestions } from \"../components/Suggestions\";\nimport { AccessControlList } from \"./AccessControlList\";\n\ntype Props = {\n  /** The collection to share. */\n  collection: Collection;\n  /** Callback fired when the popover requests to be closed. */\n  onRequestClose: () => void;\n  /** Whether the popover is visible. */\n  visible: boolean;\n};\n\nfunction SharePopover({ collection, visible, onRequestClose }: Props) {\n  const team = useCurrentTeam();\n  const { groupMemberships, users, groups, memberships } = useStores();\n  const { t } = useTranslation();\n  const can = usePolicy(collection);\n  const [query, setQuery] = React.useState(\"\");\n  const [picker, showPicker, hidePicker] = useBoolean();\n  const [hasRendered, setHasRendered] = React.useState(visible);\n  const [pendingIds, setPendingIds] = React.useState<string[]>([]);\n  const [invitedInSession, setInvitedInSession] = React.useState<string[]>([]);\n  const [permission, setPermission] = React.useState<CollectionPermission>(\n    CollectionPermission.Read\n  );\n\n  const prevPendingIds = usePrevious(pendingIds);\n\n  const suggestionsRef = React.useRef<HTMLDivElement | null>(null);\n  const searchInputRef = React.useRef<HTMLInputElement | null>(null);\n\n  useKeyDown(\n    \"Escape\",\n    (ev) => {\n      if (!visible) {\n        return;\n      }\n      ev.preventDefault();\n      ev.stopImmediatePropagation();\n\n      if (picker) {\n        hidePicker();\n      } else {\n        onRequestClose();\n      }\n    },\n    {\n      allowInInput: true,\n    }\n  );\n\n  // Hide the picker when the popover is closed\n  React.useEffect(() => {\n    if (visible) {\n      setPendingIds([]);\n      hidePicker();\n    }\n  }, [hidePicker, visible]);\n\n  // Clear the query when picker is closed\n  React.useEffect(() => {\n    if (!picker) {\n      setQuery(\"\");\n    }\n  }, [picker]);\n\n  React.useEffect(() => {\n    if (visible) {\n      setHasRendered(true);\n    }\n  }, [visible]);\n\n  React.useEffect(() => {\n    if (prevPendingIds && pendingIds.length > prevPendingIds.length) {\n      setQuery(\"\");\n      searchInputRef.current?.focus();\n    } else if (prevPendingIds && pendingIds.length < prevPendingIds.length) {\n      const firstPending = suggestionsRef.current?.firstElementChild;\n\n      if (firstPending) {\n        (firstPending as HTMLAnchorElement).focus();\n      }\n    }\n  }, [pendingIds, prevPendingIds]);\n\n  const handleQuery = React.useCallback(\n    (event) => {\n      showPicker();\n      setQuery(event.target.value);\n    },\n    [showPicker, setQuery]\n  );\n\n  const handleAddPendingId = React.useCallback(\n    (id: string) => {\n      setPendingIds((prev) => [...prev, id]);\n    },\n    [setPendingIds]\n  );\n\n  const handleRemovePendingId = React.useCallback(\n    (id: string) => {\n      setPendingIds((prev) => prev.filter((i) => i !== id));\n    },\n    [setPendingIds]\n  );\n\n  const handleKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLInputElement>) => {\n      if (ev.nativeEvent.isComposing) {\n        return;\n      }\n      if (ev.key === \"ArrowDown\" && !ev.shiftKey) {\n        ev.preventDefault();\n\n        if (ev.currentTarget.value) {\n          const length = ev.currentTarget.value.length;\n          const selectionStart = ev.currentTarget.selectionStart || 0;\n          if (selectionStart < length) {\n            ev.currentTarget.selectionStart = length;\n            ev.currentTarget.selectionEnd = length;\n            return;\n          }\n        }\n\n        const firstSuggestion = suggestionsRef.current?.firstElementChild;\n\n        if (firstSuggestion) {\n          (firstSuggestion as HTMLAnchorElement).focus();\n        }\n      }\n    },\n    []\n  );\n\n  const handleEscape = React.useCallback(\n    () => searchInputRef.current?.focus(),\n    []\n  );\n\n  const inviteAction = React.useMemo(\n    () =>\n      createAction({\n        name: t(\"Invite\"),\n        section: UserSection,\n        perform: async () => {\n          const invited = await Promise.all(\n            pendingIds.map(async (idOrEmail) => {\n              let user, group;\n\n              // convert email to user\n              if (isEmail(idOrEmail)) {\n                const response = await users.invite([\n                  {\n                    email: idOrEmail,\n                    name: idOrEmail,\n                    role: team.defaultUserRole,\n                  },\n                ]);\n                user = response[0];\n              } else {\n                user = users.get(idOrEmail);\n                group = groups.get(idOrEmail);\n              }\n\n              if (user) {\n                await memberships.create({\n                  collectionId: collection.id,\n                  userId: user.id,\n                  permission,\n                });\n                return user;\n              }\n\n              if (group) {\n                await groupMemberships.create({\n                  collectionId: collection.id,\n                  groupId: group.id,\n                  permission,\n                });\n                return group;\n              }\n\n              return;\n            })\n          );\n\n          const invitedUsers = invited.filter(\n            (item) => item instanceof User\n          ) as User[];\n          const invitedGroups = invited.filter(\n            (item) => item instanceof Group\n          ) as Group[];\n\n          // Special case for the common action of adding a single user.\n          if (invitedUsers.length === 1 && invited.length === 1) {\n            const user = invitedUsers[0];\n            toast.message(\n              t(\"{{ userName }} was added to the collection\", {\n                userName: user.name,\n              }),\n              {\n                icon: <Avatar model={user} size={AvatarSize.Toast} />,\n              }\n            );\n          } else if (invitedGroups.length === 1 && invited.length === 1) {\n            const group = invitedGroups[0];\n            toast.success(\n              t(\"{{ userName }} was added to the collection\", {\n                userName: group.name,\n              })\n            );\n          } else if (invitedGroups.length === 0) {\n            toast.success(\n              t(\"{{ count }} people added to the collection\", {\n                count: invitedUsers.length,\n              })\n            );\n          } else {\n            toast.success(\n              t(\n                \"{{ count }} people and {{ count2 }} groups added to the collection\",\n                {\n                  count: invitedUsers.length,\n                  count2: invitedGroups.length,\n                }\n              )\n            );\n          }\n\n          setInvitedInSession((prev) => [...prev, ...pendingIds]);\n          setPendingIds([]);\n          hidePicker();\n        },\n      }),\n    [\n      collection.id,\n      groupMemberships,\n      groups,\n      hidePicker,\n      memberships,\n      pendingIds,\n      permission,\n      t,\n      team.defaultUserRole,\n      users,\n    ]\n  );\n\n  const permissions = React.useMemo(\n    () =>\n      [\n        {\n          label: t(\"View only\"),\n          value: CollectionPermission.Read,\n        },\n        {\n          label: t(\"Can edit\"),\n          value: CollectionPermission.ReadWrite,\n        },\n        {\n          label: t(\"Manage\"),\n          value: CollectionPermission.Admin,\n        },\n      ] as Permission[],\n    [t]\n  );\n\n  if (!hasRendered) {\n    return null;\n  }\n\n  const backButton = (\n    <>\n      {picker && (\n        <NudeButton\n          key=\"back\"\n          as={m.button}\n          {...presence}\n          onClick={(event) => {\n            event.preventDefault();\n            event.stopPropagation();\n            hidePicker();\n          }}\n        >\n          <BackIcon />\n        </NudeButton>\n      )}\n    </>\n  );\n\n  const rightButton = picker ? (\n    pendingIds.length ? (\n      <PermissionAction\n        key=\"invite\"\n        permission={permission}\n        permissions={permissions}\n        action={inviteAction}\n        onChange={(value: CollectionPermission) => setPermission(value)}\n      />\n    ) : null\n  ) : (\n    <CopyLinkButton\n      key=\"copy-link\"\n      url={urlify(collectionPath(collection.path))}\n      onCopy={onRequestClose}\n    />\n  );\n\n  return (\n    <Wrapper>\n      {can.update && (\n        <SearchInput\n          ref={searchInputRef}\n          onChange={handleQuery}\n          onClick={showPicker}\n          onKeyDown={handleKeyDown}\n          query={query}\n          back={backButton}\n          action={rightButton}\n        />\n      )}\n\n      {picker && (\n        <Suggestions\n          ref={suggestionsRef}\n          query={query}\n          collection={collection}\n          pendingIds={pendingIds}\n          addPendingId={handleAddPendingId}\n          removePendingId={handleRemovePendingId}\n          onEscape={handleEscape}\n        />\n      )}\n\n      <div style={{ display: picker ? \"none\" : \"block\" }}>\n        <AccessControlList\n          collection={collection}\n          invitedInSession={invitedInSession}\n        />\n      </div>\n    </Wrapper>\n  );\n}\n\nexport default observer(SharePopover);\n","import { CollapsedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport usePersistedState from \"~/hooks/usePersistedState\";\nimport { undraggableOnDesktop } from \"~/styles\";\n\ntype Props = {\n  /** Unique header id – if passed the header will become toggleable */\n  id?: string;\n  title: React.ReactNode;\n  children?: React.ReactNode;\n};\n\nexport function getHeaderExpandedKey(id: string) {\n  return `sidebar-header-${id}`;\n}\n\n/**\n * Toggleable sidebar header\n */\nexport const Header: React.FC<Props> = ({ id, title, children }: Props) => {\n  const [firstRender, setFirstRender] = React.useState(true);\n  const [expanded, setExpanded] = usePersistedState<boolean>(\n    getHeaderExpandedKey(id ?? \"\"),\n    true\n  );\n\n  React.useEffect(() => {\n    if (!expanded) {\n      setFirstRender(false);\n    }\n  }, [expanded]);\n\n  const handleClick = React.useCallback(() => {\n    setExpanded(!expanded);\n  }, [expanded, setExpanded]);\n\n  return (\n    <>\n      <H3>\n        <Button onClick={handleClick} disabled={!id}>\n          {title}\n          {id && <Disclosure expanded={expanded} size={20} />}\n        </Button>\n      </H3>\n      {expanded && (firstRender ? children : <Fade>{children}</Fade>)}\n    </>\n  );\n};\n\nexport const fadeAndSlideDown = keyframes`\n  from {\n    opacity: 0;\n    transform: translateY(-8px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0px);\n  }\n`;\n\nconst Fade = styled.span`\n  animation: ${fadeAndSlideDown} 100ms ease-in-out;\n`;\n\nconst Button = styled.button`\n  display: inline-flex;\n  align-items: center;\n  font-size: 13px;\n  font-weight: 600;\n  user-select: none;\n  color: ${s(\"textTertiary\")};\n  letter-spacing: 0.03em;\n  margin: 0;\n  padding: 4px 2px 4px 12px;\n  height: 22px;\n  border: 0;\n  background: none;\n  border-radius: 4px;\n  -webkit-appearance: none;\n  transition: all 100ms ease;\n  ${undraggableOnDesktop()}\n\n  &:not(:disabled):hover,\n  &:not(:disabled):active {\n    color: ${s(\"textSecondary\")};\n    cursor: var(--pointer);\n  }\n`;\n\nconst Disclosure = styled(CollapsedIcon)<{ expanded?: boolean }>`\n  transition: opacity 100ms ease, transform 100ms ease, fill 50ms !important;\n  ${({ expanded }) => !expanded && \"transform: rotate(-90deg);\"};\n  opacity: 0;\n`;\n\nconst H3 = styled.h3`\n  margin: 0;\n\n  &:hover {\n    ${Disclosure} {\n      opacity: 1;\n    }\n  }\n`;\n\nexport default Header;\n","import {\n  ArchiveIcon,\n  CollectionIcon,\n  EditIcon,\n  PadlockIcon,\n  PlusIcon,\n  RestoreIcon,\n  SearchIcon,\n  ShapesIcon,\n  StarredIcon,\n  SubscribeIcon,\n  TrashIcon,\n  UnstarredIcon,\n  UnsubscribeIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { toast } from \"sonner\";\nimport Collection from \"~/models/Collection\";\nimport { CollectionEdit } from \"~/components/Collection/CollectionEdit\";\nimport { CollectionNew } from \"~/components/Collection/CollectionNew\";\nimport CollectionDeleteDialog from \"~/components/CollectionDeleteDialog\";\nimport ConfirmationDialog from \"~/components/ConfirmationDialog\";\nimport DynamicCollectionIcon from \"~/components/Icons/CollectionIcon\";\nimport SharePopover from \"~/components/Sharing/Collection/SharePopover\";\nimport { getHeaderExpandedKey } from \"~/components/Sidebar/components/Header\";\nimport { createAction } from \"~/actions\";\nimport { ActiveCollectionSection, CollectionSection } from \"~/actions/sections\";\nimport { setPersistedState } from \"~/hooks/usePersistedState\";\nimport history from \"~/utils/history\";\nimport { newTemplatePath, searchPath } from \"~/utils/routeHelpers\";\n\nconst ColorCollectionIcon = ({ collection }: { collection: Collection }) => (\n  <DynamicCollectionIcon collection={collection} />\n);\n\nexport const openCollection = createAction({\n  name: ({ t }) => t(\"Open collection\"),\n  analyticsName: \"Open collection\",\n  section: CollectionSection,\n  shortcut: [\"o\", \"c\"],\n  icon: <CollectionIcon />,\n  children: ({ stores }) => {\n    const collections = stores.collections.orderedData;\n    return collections.map((collection) => ({\n      // Note: using url which includes the slug rather than id here to bust\n      // cache if the collection is renamed\n      id: collection.path,\n      name: collection.name,\n      icon: <ColorCollectionIcon collection={collection} />,\n      section: CollectionSection,\n      perform: () => history.push(collection.path),\n    }));\n  },\n});\n\nexport const createCollection = createAction({\n  name: ({ t }) => t(\"New collection\"),\n  analyticsName: \"New collection\",\n  section: CollectionSection,\n  icon: <PlusIcon />,\n  keywords: \"create\",\n  visible: ({ stores }) =>\n    stores.policies.abilities(stores.auth.team?.id || \"\").createCollection,\n  perform: ({ t, event, stores }) => {\n    event?.preventDefault();\n    event?.stopPropagation();\n    stores.dialogs.openModal({\n      title: t(\"Create a collection\"),\n      content: <CollectionNew onSubmit={stores.dialogs.closeAllModals} />,\n    });\n  },\n});\n\nexport const editCollection = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? `${t(\"Edit\")}…` : t(\"Edit collection\"),\n  analyticsName: \"Edit collection\",\n  section: ActiveCollectionSection,\n  icon: <EditIcon />,\n  visible: ({ activeCollectionId, stores }) =>\n    !!activeCollectionId &&\n    stores.policies.abilities(activeCollectionId).update,\n  perform: ({ t, activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    stores.dialogs.openModal({\n      title: t(\"Edit collection\"),\n      content: (\n        <CollectionEdit\n          onSubmit={stores.dialogs.closeAllModals}\n          collectionId={activeCollectionId}\n        />\n      ),\n    });\n  },\n});\n\nexport const editCollectionPermissions = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? `${t(\"Permissions\")}…` : t(\"Collection permissions\"),\n  analyticsName: \"Collection permissions\",\n  section: ActiveCollectionSection,\n  icon: <PadlockIcon />,\n  visible: ({ activeCollectionId, stores }) =>\n    !!activeCollectionId &&\n    stores.policies.abilities(activeCollectionId).update,\n  perform: ({ t, activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n    const collection = stores.collections.get(activeCollectionId);\n    if (!collection) {\n      return;\n    }\n\n    stores.dialogs.openModal({\n      title: t(\"Share this collection\"),\n      style: { marginBottom: -12 },\n      content: (\n        <SharePopover\n          collection={collection}\n          onRequestClose={stores.dialogs.closeAllModals}\n          visible\n        />\n      ),\n    });\n  },\n});\n\nexport const searchInCollection = createAction({\n  name: ({ t }) => t(\"Search in collection\"),\n  analyticsName: \"Search collection\",\n  section: ActiveCollectionSection,\n  icon: <SearchIcon />,\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n\n    if (!collection?.isActive) {\n      return false;\n    }\n\n    return stores.policies.abilities(activeCollectionId).readDocument;\n  },\n\n  perform: ({ activeCollectionId }) => {\n    history.push(searchPath({ collectionId: activeCollectionId }));\n  },\n});\n\nexport const starCollection = createAction({\n  name: ({ t }) => t(\"Star\"),\n  analyticsName: \"Star collection\",\n  section: ActiveCollectionSection,\n  icon: <StarredIcon />,\n  keywords: \"favorite bookmark\",\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n    const collection = stores.collections.get(activeCollectionId);\n    return (\n      !collection?.isStarred &&\n      stores.policies.abilities(activeCollectionId).star\n    );\n  },\n  perform: async ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n    await collection?.star();\n    setPersistedState(getHeaderExpandedKey(\"starred\"), true);\n  },\n});\n\nexport const unstarCollection = createAction({\n  name: ({ t }) => t(\"Unstar\"),\n  analyticsName: \"Unstar collection\",\n  section: ActiveCollectionSection,\n  icon: <UnstarredIcon />,\n  keywords: \"unfavorite unbookmark\",\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n    const collection = stores.collections.get(activeCollectionId);\n    return (\n      !!collection?.isStarred &&\n      stores.policies.abilities(activeCollectionId).unstar\n    );\n  },\n  perform: async ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n    await collection?.unstar();\n  },\n});\n\nexport const subscribeCollection = createAction({\n  name: ({ t }) => t(\"Subscribe\"),\n  analyticsName: \"Subscribe to collection\",\n  section: ActiveCollectionSection,\n  icon: <SubscribeIcon />,\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n\n    return (\n      !collection?.isSubscribed &&\n      stores.policies.abilities(activeCollectionId).subscribe\n    );\n  },\n  perform: async ({ activeCollectionId, stores, t }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n\n    await collection?.subscribe();\n\n    toast.success(t(\"Subscribed to document notifications\"));\n  },\n});\n\nexport const unsubscribeCollection = createAction({\n  name: ({ t }) => t(\"Unsubscribe\"),\n  analyticsName: \"Unsubscribe from collection\",\n  section: ActiveCollectionSection,\n  icon: <UnsubscribeIcon />,\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n\n    return (\n      !!collection?.isSubscribed &&\n      stores.policies.abilities(activeCollectionId).unsubscribe\n    );\n  },\n  perform: async ({ activeCollectionId, currentUserId, stores, t }) => {\n    if (!activeCollectionId || !currentUserId) {\n      return;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n\n    await collection?.unsubscribe();\n\n    toast.success(t(\"Unsubscribed from document notifications\"));\n  },\n});\n\nexport const archiveCollection = createAction({\n  name: ({ t }) => `${t(\"Archive\")}…`,\n  analyticsName: \"Archive collection\",\n  section: CollectionSection,\n  icon: <ArchiveIcon />,\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeCollectionId).archive;\n  },\n  perform: async ({ activeCollectionId, stores, t }) => {\n    const { dialogs, collections } = stores;\n    if (!activeCollectionId) {\n      return;\n    }\n    const collection = collections.get(activeCollectionId);\n    if (!collection) {\n      return;\n    }\n\n    dialogs.openModal({\n      title: t(\"Archive collection\"),\n      content: (\n        <ConfirmationDialog\n          onSubmit={async () => {\n            await collection.archive();\n            toast.success(t(\"Collection archived\"));\n          }}\n          submitText={t(\"Archive\")}\n          savingText={`${t(\"Archiving\")}…`}\n        >\n          {t(\n            \"Archiving this collection will also archive all documents within it. Documents from the collection will no longer be visible in search results.\"\n          )}\n        </ConfirmationDialog>\n      ),\n    });\n  },\n});\n\nexport const restoreCollection = createAction({\n  name: ({ t }) => t(\"Restore\"),\n  analyticsName: \"Restore collection\",\n  section: CollectionSection,\n  icon: <RestoreIcon />,\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeCollectionId).restore;\n  },\n  perform: async ({ activeCollectionId, stores, t }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n    const collection = stores.collections.get(activeCollectionId);\n    if (!collection) {\n      return;\n    }\n\n    await collection.restore();\n    toast.success(t(\"Collection restored\"));\n  },\n});\n\nexport const deleteCollection = createAction({\n  name: ({ t }) => `${t(\"Delete\")}…`,\n  analyticsName: \"Delete collection\",\n  section: ActiveCollectionSection,\n  dangerous: true,\n  icon: <TrashIcon />,\n  visible: ({ activeCollectionId, stores }) => {\n    if (!activeCollectionId) {\n      return false;\n    }\n    return stores.policies.abilities(activeCollectionId).delete;\n  },\n  perform: ({ activeCollectionId, t, stores }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n\n    const collection = stores.collections.get(activeCollectionId);\n    if (!collection) {\n      return;\n    }\n\n    stores.dialogs.openModal({\n      title: t(\"Delete collection\"),\n      content: (\n        <CollectionDeleteDialog\n          collection={collection}\n          onSubmit={stores.dialogs.closeAllModals}\n        />\n      ),\n    });\n  },\n});\n\nexport const createTemplate = createAction({\n  name: ({ t }) => t(\"New template\"),\n  analyticsName: \"New template\",\n  section: ActiveCollectionSection,\n  icon: <ShapesIcon />,\n  keywords: \"new create template\",\n  visible: ({ activeCollectionId, stores }) =>\n    !!(\n      !!activeCollectionId &&\n      stores.policies.abilities(activeCollectionId).createDocument\n    ),\n  perform: ({ activeCollectionId, event }) => {\n    if (!activeCollectionId) {\n      return;\n    }\n    event?.preventDefault();\n    event?.stopPropagation();\n    history.push(newTemplatePath(activeCollectionId));\n  },\n});\n\nexport const rootCollectionActions = [\n  openCollection,\n  createCollection,\n  starCollection,\n  unstarCollection,\n  subscribeCollection,\n  unsubscribeCollection,\n  deleteCollection,\n];\n","import * as React from \"react\";\nimport Document from \"~/models/Document\";\nimport User from \"~/models/User\";\n\nexport type SidebarContextType =\n  | \"collections\"\n  | \"shared\"\n  | \"archive\"\n  | `group-${string}`\n  | `starred-${string}`\n  | undefined;\n\nconst SidebarContext = React.createContext<SidebarContextType>(undefined);\n\nexport const useSidebarContext = () => React.useContext(SidebarContext);\n\nexport const groupSidebarContext = (groupId: string): SidebarContextType =>\n  `group-${groupId}`;\n\nexport const starredSidebarContext = (modelId: string): SidebarContextType =>\n  `starred-${modelId}`;\n\nexport const determineSidebarContext = ({\n  document,\n  user,\n  currentContext,\n}: {\n  document: Document;\n  user: User;\n  currentContext?: SidebarContextType;\n}): SidebarContextType => {\n  const isStarred = document.isStarred || !!document.collection?.isStarred;\n  const preferStarred = !currentContext || currentContext.startsWith(\"starred\");\n\n  if (isStarred && preferStarred) {\n    const currentlyInStarredCollection =\n      currentContext === starredSidebarContext(document.collectionId ?? \"\");\n\n    return document.isStarred && !currentlyInStarredCollection\n      ? starredSidebarContext(document.id)\n      : starredSidebarContext(document.collectionId!);\n  }\n\n  if (document.collection) {\n    return document.collection.isArchived ? \"archive\" : \"collections\";\n  } else if (\n    user.documentMemberships.find((m) => m.documentId === document.id)\n  ) {\n    return \"shared\";\n  } else {\n    const group = user.groupsWithDocumentMemberships.find(\n      (g) => !!g.documentMemberships.find((m) => m.documentId === document.id)\n    );\n    return groupSidebarContext(group?.id ?? \"\");\n  }\n};\n\nexport default SidebarContext;\n","import { CollapsedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled, { css } from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport NudeButton from \"~/components/NudeButton\";\n\ntype Props = React.ComponentProps<typeof Button> & {\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  expanded: boolean;\n  root?: boolean;\n};\n\nfunction Disclosure({ onClick, root, expanded, ...rest }: Props) {\n  const { t } = useTranslation();\n\n  return (\n    <Button\n      size={20}\n      onClick={onClick}\n      $root={root}\n      aria-label={expanded ? t(\"Collapse\") : t(\"Expand\")}\n      {...rest}\n    >\n      <StyledCollapsedIcon expanded={expanded} size={20} />\n    </Button>\n  );\n}\n\nconst Button = styled(NudeButton)<{ $root?: boolean }>`\n  position: absolute;\n  left: -24px;\n  flex-shrink: 0;\n  color: ${s(\"textSecondary\")};\n\n  &:hover {\n    color: ${s(\"text\")};\n    background: ${s(\"sidebarControlHoverBackground\")};\n  }\n\n  ${(props) =>\n    props.$root &&\n    css`\n      opacity: 0;\n      left: -18px;\n\n      &:hover {\n        opacity: 1;\n        background: none;\n      }\n    `}\n`;\n\nconst StyledCollapsedIcon = styled(CollapsedIcon)<{\n  expanded?: boolean;\n}>`\n  transition: opacity 100ms ease, transform 100ms ease, fill 50ms !important;\n  ${(props) => !props.expanded && \"transform: rotate(-90deg);\"};\n`;\n\n// Enables identifying this component within styled components\nconst StyledDisclosure = styled(Disclosure)``;\n\nexport default StyledDisclosure;\n","import { LocationDescriptor } from \"history\";\nimport * as React from \"react\";\nimport styled, { useTheme, css } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport EventBoundary from \"@shared/components/EventBoundary\";\nimport { s } from \"@shared/styles\";\nimport NudeButton from \"~/components/NudeButton\";\nimport { UnreadBadge } from \"~/components/UnreadBadge\";\nimport useUnmount from \"~/hooks/useUnmount\";\nimport { undraggableOnDesktop } from \"~/styles\";\nimport Disclosure from \"./Disclosure\";\nimport NavLink, { Props as NavLinkProps } from \"./NavLink\";\n\ntype Props = Omit<NavLinkProps, \"to\"> & {\n  to?: LocationDescriptor;\n  innerRef?: (ref: HTMLElement | null | undefined) => void;\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>;\n  /** Callback when we expect the user to click on the link. Used for prefetching data. */\n  onClickIntent?: () => void;\n  onDisclosureClick?: React.MouseEventHandler<HTMLButtonElement>;\n  icon?: React.ReactNode;\n  label?: React.ReactNode;\n  menu?: React.ReactNode;\n  unreadBadge?: boolean;\n  showActions?: boolean;\n  disabled?: boolean;\n  active?: boolean;\n  /** If set, a disclosure will be rendered to the left of any icon */\n  expanded?: boolean;\n  isActiveDrop?: boolean;\n  isDraft?: boolean;\n  depth?: number;\n  scrollIntoViewIfNeeded?: boolean;\n};\n\nconst activeDropStyle = {\n  fontWeight: 600,\n};\n\nfunction SidebarLink(\n  {\n    icon,\n    onClick,\n    onClickIntent,\n    to,\n    label,\n    active,\n    isActiveDrop,\n    isDraft,\n    menu,\n    showActions,\n    exact,\n    href,\n    depth,\n    className,\n    expanded,\n    onDisclosureClick,\n    disabled,\n    unreadBadge,\n    ...rest\n  }: Props,\n  ref: React.RefObject<HTMLAnchorElement>\n) {\n  const timer = React.useRef<number>();\n  const theme = useTheme();\n  const style = React.useMemo(\n    () => ({\n      paddingLeft: `${(depth || 0) * 16 + 12}px`,\n    }),\n    [depth]\n  );\n\n  const activeStyle = React.useMemo(\n    () => ({\n      color: theme.text,\n      background: theme.sidebarActiveBackground,\n      ...style,\n    }),\n    [theme.text, theme.sidebarActiveBackground, style]\n  );\n\n  const handleMouseEnter = React.useCallback(() => {\n    if (timer.current) {\n      clearTimeout(timer.current);\n    }\n\n    if (onClickIntent) {\n      timer.current = window.setTimeout(onClickIntent, 100);\n    }\n  }, [onClickIntent]);\n\n  const handleMouseLeave = React.useCallback(() => {\n    if (timer.current) {\n      clearTimeout(timer.current);\n    }\n  }, []);\n\n  useUnmount(() => {\n    if (timer.current) {\n      clearTimeout(timer.current);\n    }\n  });\n\n  return (\n    <>\n      <Link\n        $isActiveDrop={isActiveDrop}\n        $isDraft={isDraft}\n        $disabled={disabled}\n        activeStyle={isActiveDrop ? activeDropStyle : activeStyle}\n        style={active ? activeStyle : style}\n        onClick={onClick}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        // @ts-expect-error exact does not exist on div\n        exact={exact !== false}\n        to={to}\n        as={to ? undefined : href ? \"a\" : \"div\"}\n        href={href}\n        className={className}\n        ref={ref}\n        {...rest}\n      >\n        <Content>\n          {expanded !== undefined && (\n            <Disclosure\n              expanded={expanded}\n              onClick={onDisclosureClick}\n              root={depth === 0}\n              tabIndex={-1}\n            />\n          )}\n          {icon && <IconWrapper>{icon}</IconWrapper>}\n          <Label>{label}</Label>\n          {unreadBadge && <UnreadBadge />}\n        </Content>\n      </Link>\n      {menu && <Actions showActions={showActions}>{menu}</Actions>}\n    </>\n  );\n}\n\nconst Content = styled.span`\n  display: flex;\n  align-items: start;\n  position: relative;\n  width: 100%;\n\n  ${Disclosure} {\n    margin-top: 2px;\n    margin-left: 2px;\n  }\n`;\n\n// accounts for whitespace around icon\nexport const IconWrapper = styled.span`\n  margin-left: -4px;\n  margin-right: 4px;\n  height: 24px;\n  overflow: hidden;\n  flex-shrink: 0;\n`;\n\nconst Actions = styled(EventBoundary)<{ showActions?: boolean }>`\n  display: inline-flex;\n  visibility: ${(props) => (props.showActions ? \"visible\" : \"hidden\")};\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  gap: 4px;\n  color: ${s(\"textTertiary\")};\n  transition: opacity 50ms;\n  height: 24px;\n\n  svg {\n    color: ${s(\"textSecondary\")};\n    fill: currentColor;\n    opacity: 0.5;\n  }\n\n  &:hover {\n    visibility: visible;\n\n    svg {\n      opacity: 0.75;\n    }\n  }\n`;\n\nconst Link = styled(NavLink)<{\n  $isActiveDrop?: boolean;\n  $isDraft?: boolean;\n  $disabled?: boolean;\n}>`\n  display: flex;\n  position: relative;\n  text-overflow: ellipsis;\n  font-weight: 475;\n  padding: 6px 16px;\n  border-radius: 4px;\n  min-height: 32px;\n  user-select: none;\n  background: ${(props) =>\n    props.$isActiveDrop ? props.theme.slateDark : \"inherit\"};\n  color: ${(props) =>\n    props.$isActiveDrop ? props.theme.white : props.theme.sidebarText};\n  font-size: 16px;\n  cursor: var(--pointer);\n  overflow: hidden;\n  ${undraggableOnDesktop()}\n\n  ${(props) =>\n    props.$disabled &&\n    css`\n      pointer-events: none;\n      opacity: 0.75;\n    `}\n\n  ${(props) =>\n    props.$isDraft &&\n    css`\n      &:after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        pointer-events: none;\n        border-radius: 4px;\n        border: 1.5px dashed ${props.theme.sidebarDraftBorder};\n      }\n    `}\n\n  svg {\n    ${(props) => (props.$isActiveDrop ? `fill: ${props.theme.white};` : \"\")}\n    transition: fill 50ms;\n  }\n\n  &:hover svg {\n    display: inline;\n  }\n\n  & + ${Actions} {\n    background: ${s(\"sidebarBackground\")};\n\n    ${NudeButton} {\n      background: transparent;\n\n      &:hover,\n      &[aria-expanded=\"true\"] {\n        background: ${s(\"sidebarControlHoverBackground\")};\n      }\n    }\n  }\n\n  &[aria-current=\"page\"] + ${Actions} {\n    background: ${s(\"sidebarActiveBackground\")};\n  }\n\n  ${breakpoint(\"tablet\")`\n    padding: 4px 8px 4px 16px;\n    font-size: 14px;\n  `}\n\n  @media (hover: hover) {\n    &:hover + ${Actions}, &:active + ${Actions} {\n      visibility: visible;\n\n      svg {\n        opacity: 0.75;\n      }\n    }\n\n    &:hover {\n      color: ${(props) =>\n        props.$isActiveDrop ? props.theme.white : props.theme.text};\n    }\n  }\n\n  &:hover {\n    ${Disclosure} {\n      opacity: 1;\n    }\n  }\n`;\n\nconst Label = styled.div`\n  position: relative;\n  width: 100%;\n  max-height: 4.8em;\n  line-height: 24px;\n\n  * {\n    unicode-bidi: plaintext;\n  }\n`;\n\nexport default React.forwardRef<HTMLAnchorElement, Props>(SidebarLink);\n","// ref: https://github.com/ReactTraining/react-router/blob/master/packages/react-router-dom/modules/NavLink.js\n// This file is pulled almost 100% from react-router with the addition of one\n// thing, automatic scroll to the active link. It's worth the copy paste because\n// it avoids recalculating the link match again.\nimport { Location, createLocation, LocationDescriptor } from \"history\";\nimport * as React from \"react\";\nimport {\n  __RouterContext as RouterContext,\n  matchPath,\n  match,\n} from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport scrollIntoView from \"scroll-into-view-if-needed\";\nimport history from \"~/utils/history\";\n\nconst resolveToLocation = (\n  to: LocationDescriptor | ((location: Location) => LocationDescriptor),\n  currentLocation: Location\n) => (typeof to === \"function\" ? to(currentLocation) : to);\n\nconst normalizeToLocation = (\n  to: LocationDescriptor,\n  currentLocation: Location\n) =>\n  typeof to === \"string\"\n    ? createLocation(to, null, undefined, currentLocation)\n    : to;\n\nconst joinClassnames = (...classnames: (string | undefined)[]) =>\n  classnames.filter((i) => i).join(\" \");\n\nexport interface Props extends React.AnchorHTMLAttributes<HTMLAnchorElement> {\n  activeClassName?: string;\n  activeStyle?: React.CSSProperties;\n  scrollIntoViewIfNeeded?: boolean;\n  exact?: boolean;\n  replace?: boolean;\n  isActive?: (match: match | null, location: Location) => boolean;\n  location?: Location;\n  strict?: boolean;\n  to: LocationDescriptor;\n  onBeforeClick?: () => void;\n}\n\n/**\n * A <Link> wrapper that clicks extra fast and knows if it's \"active\" or not.\n */\nconst NavLink = ({\n  \"aria-current\": ariaCurrent = \"page\",\n  activeClassName = \"active\",\n  activeStyle,\n  className: classNameProp,\n  exact,\n  isActive: isActiveProp,\n  location: locationProp,\n  strict,\n  replace,\n  style: styleProp,\n  scrollIntoViewIfNeeded,\n  onClick,\n  onBeforeClick,\n  to,\n  ...rest\n}: Props) => {\n  const linkRef = React.useRef<HTMLAnchorElement>(null);\n  const context = React.useContext(RouterContext);\n  const [preActive, setPreActive] = React.useState<boolean | undefined>(\n    undefined\n  );\n  const currentLocation = locationProp || context.location;\n  const toLocation = normalizeToLocation(\n    resolveToLocation(to, currentLocation),\n    currentLocation\n  );\n  const { pathname: path } = toLocation;\n\n  const match = path\n    ? matchPath(currentLocation.pathname, {\n        // Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202\n        path: path.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\"),\n        exact,\n        strict,\n      })\n    : null;\n\n  const isActive =\n    preActive ??\n    !!(isActiveProp ? isActiveProp(match, currentLocation) : match);\n  const className = isActive\n    ? joinClassnames(classNameProp, activeClassName)\n    : classNameProp;\n  const style = isActive ? { ...styleProp, ...activeStyle } : styleProp;\n\n  React.useLayoutEffect(() => {\n    if (isActive && linkRef.current && scrollIntoViewIfNeeded !== false) {\n      scrollIntoView(linkRef.current, {\n        scrollMode: \"if-needed\",\n        behavior: \"auto\",\n        boundary: (parent) => parent.id !== \"sidebar\",\n      });\n    }\n  }, [linkRef, scrollIntoViewIfNeeded, isActive]);\n\n  const shouldFastClick = React.useCallback(\n    (event: React.MouseEvent<HTMLAnchorElement>): boolean =>\n      event.button === 0 && // Only intercept left clicks\n      !event.defaultPrevented &&\n      !rest.target &&\n      !event.altKey &&\n      !event.metaKey &&\n      !event.ctrlKey &&\n      !isActive,\n    [rest.target, isActive]\n  );\n\n  const navigateTo = React.useCallback(() => {\n    if (replace) {\n      history.replace(to);\n    } else {\n      history.push(to);\n    }\n  }, [to, replace]);\n\n  const handleClick = React.useCallback(\n    (event: React.MouseEvent<HTMLAnchorElement>) => {\n      onClick?.(event);\n\n      if (shouldFastClick(event)) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.currentTarget.focus();\n\n        setPreActive(true);\n\n        // Wait a frame until following the link\n        requestAnimationFrame(() => {\n          requestAnimationFrame(navigateTo);\n          event.currentTarget?.blur();\n        });\n      }\n    },\n    [onClick, navigateTo, shouldFastClick]\n  );\n\n  React.useEffect(() => {\n    setPreActive(undefined);\n  }, [currentLocation]);\n\n  return (\n    <Link\n      key={isActive ? \"active\" : \"inactive\"}\n      ref={linkRef}\n      onClick={handleClick}\n      onKeyDown={(event) => {\n        if ([\"Enter\", \" \"].includes(event.key)) {\n          navigateTo();\n          event.currentTarget?.blur();\n        }\n      }}\n      aria-current={(isActive && ariaCurrent) || undefined}\n      className={className}\n      style={style}\n      to={toLocation}\n      replace={replace}\n      {...rest}\n    />\n  );\n};\n\nexport default NavLink;\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport Document from \"~/models/Document\";\nimport Button from \"~/components/Button\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\nimport useStores from \"~/hooks/useStores\";\nimport {\n  collectionPath,\n  documentPath,\n  settingsPath,\n} from \"~/utils/routeHelpers\";\n\ntype Props = {\n  document: Document;\n  onSubmit: () => void;\n};\n\nfunction DocumentDelete({ document, onSubmit }: Props) {\n  const { t } = useTranslation();\n  const { ui, documents, collections } = useStores();\n  const history = useHistory();\n  const [isDeleting, setDeleting] = React.useState(false);\n  const [isArchiving, setArchiving] = React.useState(false);\n  const canArchive =\n    !document.isDraft && !document.isArchived && !document.template;\n  const collection = document.collectionId\n    ? collections.get(document.collectionId)\n    : undefined;\n  const nestedDocumentsCount = collection\n    ? collection.getChildrenForDocument(document.id).length\n    : 0;\n  const handleSubmit = React.useCallback(\n    async (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      setDeleting(true);\n\n      try {\n        await document.delete();\n\n        // only redirect if we're currently viewing the document that's deleted\n        if (ui.activeDocumentId === document.id) {\n          // If the document has a parent and it's available in the store then\n          // redirect to it\n          if (document.parentDocumentId) {\n            const parent = documents.get(document.parentDocumentId);\n\n            if (parent) {\n              history.push(documentPath(parent));\n              onSubmit();\n              return;\n            }\n          }\n\n          // If template, redirect to the template settings.\n          // Otherwise redirect to the collection (or) home.\n          const path = document.template\n            ? settingsPath(\"templates\")\n            : collectionPath(collection?.path || \"/\");\n          history.push(path);\n        }\n\n        onSubmit();\n      } catch (err) {\n        toast.error(err.message);\n      } finally {\n        setDeleting(false);\n      }\n    },\n    [onSubmit, ui, document, documents, history, collection]\n  );\n\n  const handleArchive = React.useCallback(\n    async (ev: React.SyntheticEvent) => {\n      ev.preventDefault();\n      setArchiving(true);\n\n      try {\n        await document.archive();\n        onSubmit();\n      } catch (err) {\n        toast.error(err.message);\n      } finally {\n        setArchiving(false);\n      }\n    },\n    [onSubmit, document]\n  );\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Text as=\"p\" type=\"secondary\">\n        {document.isTemplate ? (\n          <Trans\n            defaults=\"Are you sure you want to delete the <em>{{ documentTitle }}</em> template?\"\n            values={{\n              documentTitle: document.titleWithDefault,\n            }}\n            components={{\n              em: <strong />,\n            }}\n          />\n        ) : nestedDocumentsCount < 1 ? (\n          <Trans\n            defaults=\"Are you sure about that? Deleting the <em>{{ documentTitle }}</em> document will delete all of its history</em>.\"\n            values={{\n              documentTitle: document.titleWithDefault,\n            }}\n            components={{\n              em: <strong />,\n            }}\n          />\n        ) : (\n          <Trans\n            count={nestedDocumentsCount}\n            defaults=\"Are you sure about that? Deleting the <em>{{ documentTitle }}</em> document will delete all of its history and <em>{{ any }} nested document</em>.\"\n            values={{\n              documentTitle: document.titleWithDefault,\n              any: nestedDocumentsCount,\n            }}\n            components={{\n              em: <strong />,\n            }}\n          />\n        )}\n      </Text>\n      {canArchive && (\n        <Text as=\"p\" type=\"secondary\">\n          <Trans>\n            If you’d like the option of referencing or restoring the{\" \"}\n            {{\n              noun: document.noun,\n            }}{\" \"}\n            in the future, consider archiving it instead.\n          </Trans>\n        </Text>\n      )}\n\n      <Flex justify=\"flex-end\" gap={8}>\n        {canArchive && (\n          <Button type=\"button\" onClick={handleArchive} neutral>\n            {isArchiving ? `${t(\"Archiving\")}…` : t(\"Archive\")}\n          </Button>\n        )}\n        <Button type=\"submit\" danger>\n          {isDeleting ? `${t(\"Deleting\")}…` : t(\"I’m sure – Delete\")}\n        </Button>\n      </Flex>\n    </form>\n  );\n}\n\nexport default observer(DocumentDelete);\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nmodule.exports = baseClamp;\n","var baseClamp = require('./_baseClamp'),\n    toInteger = require('./toInteger');\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Converts `value` to an integer suitable for use as the length of an\n * array-like object.\n *\n * **Note:** This method is based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toLength(3.2);\n * // => 3\n *\n * _.toLength(Number.MIN_VALUE);\n * // => 0\n *\n * _.toLength(Infinity);\n * // => 4294967295\n *\n * _.toLength('3.2');\n * // => 3\n */\nfunction toLength(value) {\n  return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n}\n\nmodule.exports = toLength;\n","var toInteger = require('./toInteger'),\n    toLength = require('./toLength');\n\n/**\n * The base implementation of `_.fill` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to fill.\n * @param {*} value The value to fill `array` with.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns `array`.\n */\nfunction baseFill(array, value, start, end) {\n  var length = array.length;\n\n  start = toInteger(start);\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = (end === undefined || end > length) ? length : toInteger(end);\n  if (end < 0) {\n    end += length;\n  }\n  end = start > end ? 0 : toLength(end);\n  while (start < end) {\n    array[start++] = value;\n  }\n  return array;\n}\n\nmodule.exports = baseFill;\n","var baseFill = require('./_baseFill'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Fills elements of `array` with `value` from `start` up to, but not\n * including, `end`.\n *\n * **Note:** This method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 3.2.0\n * @category Array\n * @param {Array} array The array to fill.\n * @param {*} value The value to fill `array` with.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = [1, 2, 3];\n *\n * _.fill(array, 'a');\n * console.log(array);\n * // => ['a', 'a', 'a']\n *\n * _.fill(Array(3), 2);\n * // => [2, 2, 2]\n *\n * _.fill([4, 6, 8, 10], '*', 1, 3);\n * // => [4, '*', '*', 10]\n */\nfunction fill(array, value, start, end) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n    start = 0;\n    end = length;\n  }\n  return baseFill(array, value, start, end);\n}\n\nmodule.exports = fill;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","import { Component, createElement } from 'react';\n\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n * 5) Use 'export' statement over 'module.exports' assignment\n **/\n\n// Check `document` and `window` in case of server-side rendering\nlet windowObject;\nif (typeof window !== \"undefined\") {\n  windowObject = window;\n\n  // eslint-disable-next-line no-restricted-globals\n} else if (typeof self !== \"undefined\") {\n  // eslint-disable-next-line no-restricted-globals\n  windowObject = self;\n} else {\n  windowObject = global;\n}\nlet cancelFrame = null;\nlet requestFrame = null;\nconst TIMEOUT_DURATION = 20;\nconst clearTimeoutFn = windowObject.clearTimeout;\nconst setTimeoutFn = windowObject.setTimeout;\nconst cancelAnimationFrameFn = windowObject.cancelAnimationFrame || windowObject.mozCancelAnimationFrame || windowObject.webkitCancelAnimationFrame;\nconst requestAnimationFrameFn = windowObject.requestAnimationFrame || windowObject.mozRequestAnimationFrame || windowObject.webkitRequestAnimationFrame;\nif (cancelAnimationFrameFn == null || requestAnimationFrameFn == null) {\n  // For environments that don't support animation frame,\n  // fallback to a setTimeout based approach.\n  cancelFrame = clearTimeoutFn;\n  requestFrame = function requestAnimationFrameViaSetTimeout(callback) {\n    return setTimeoutFn(callback, TIMEOUT_DURATION);\n  };\n} else {\n  // Counter intuitively, environments that support animation frames can be trickier.\n  // Chrome's \"Throttle non-visible cross-origin iframes\" flag can prevent rAFs from being called.\n  // In this case, we should fallback to a setTimeout() implementation.\n  cancelFrame = function cancelFrame([animationFrameID, timeoutID]) {\n    cancelAnimationFrameFn(animationFrameID);\n    clearTimeoutFn(timeoutID);\n  };\n  requestFrame = function requestAnimationFrameWithSetTimeoutFallback(callback) {\n    const animationFrameID = requestAnimationFrameFn(function animationFrameCallback() {\n      clearTimeoutFn(timeoutID);\n      callback();\n    });\n    const timeoutID = setTimeoutFn(function timeoutCallback() {\n      cancelAnimationFrameFn(animationFrameID);\n      callback();\n    }, TIMEOUT_DURATION);\n    return [animationFrameID, timeoutID];\n  };\n}\nfunction createDetectElementResize(nonce) {\n  let animationKeyframes;\n  let animationName;\n  let animationStartEvent;\n  let animationStyle;\n  let checkTriggers;\n  let resetTriggers;\n  let scrollListener;\n  const attachEvent = typeof document !== \"undefined\" && document.attachEvent;\n  if (!attachEvent) {\n    resetTriggers = function (element) {\n      const triggers = element.__resizeTriggers__,\n        expand = triggers.firstElementChild,\n        contract = triggers.lastElementChild,\n        expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + \"px\";\n      expandChild.style.height = expand.offsetHeight + 1 + \"px\";\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n    checkTriggers = function (element) {\n      return element.offsetWidth !== element.__resizeLast__.width || element.offsetHeight !== element.__resizeLast__.height;\n    };\n    scrollListener = function (e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className && typeof e.target.className.indexOf === \"function\" && e.target.className.indexOf(\"contract-trigger\") < 0 && e.target.className.indexOf(\"expand-trigger\") < 0) {\n        return;\n      }\n      const element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function animationFrame() {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function forEachResizeListener(fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    let animation = false;\n    let keyframeprefix = \"\";\n    animationStartEvent = \"animationstart\";\n    const domPrefixes = \"Webkit Moz O ms\".split(\" \");\n    let startEvents = \"webkitAnimationStart animationstart oAnimationStart MSAnimationStart\".split(\" \");\n    let pfx = \"\";\n    {\n      const elm = document.createElement(\"fakeelement\");\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n      if (animation === false) {\n        for (let i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + \"AnimationName\"] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = \"-\" + pfx.toLowerCase() + \"-\";\n            animationStartEvent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n    animationName = \"resizeanim\";\n    animationKeyframes = \"@\" + keyframeprefix + \"keyframes \" + animationName + \" { from { opacity: 0; } to { opacity: 0; } } \";\n    animationStyle = keyframeprefix + \"animation: 1ms \" + animationName + \"; \";\n  }\n  const createStyles = function (doc) {\n    if (!doc.getElementById(\"detectElementResize\")) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      const css = (animationKeyframes ? animationKeyframes : \"\") + \".resize-triggers { \" + (animationStyle ? animationStyle : \"\") + \"visibility: hidden; opacity: 0; } \" + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n        head = doc.head || doc.getElementsByTagName(\"head\")[0],\n        style = doc.createElement(\"style\");\n      style.id = \"detectElementResize\";\n      style.type = \"text/css\";\n      if (nonce != null) {\n        style.setAttribute(\"nonce\", nonce);\n      }\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n      head.appendChild(style);\n    }\n  };\n  const addResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.attachEvent(\"onresize\", fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        const doc = element.ownerDocument;\n        const elementStyle = windowObject.getComputedStyle(element);\n        if (elementStyle && elementStyle.position === \"static\") {\n          element.style.position = \"relative\";\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement(\"div\")).className = \"resize-triggers\";\n        const expandTrigger = doc.createElement(\"div\");\n        expandTrigger.className = \"expand-trigger\";\n        expandTrigger.appendChild(doc.createElement(\"div\"));\n        const contractTrigger = doc.createElement(\"div\");\n        contractTrigger.className = \"contract-trigger\";\n        element.__resizeTriggers__.appendChild(expandTrigger);\n        element.__resizeTriggers__.appendChild(contractTrigger);\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener(\"scroll\", scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationStartEvent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName === animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n  const removeResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.detachEvent(\"onresize\", fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener(\"scroll\", scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n  return {\n    addResizeListener,\n    removeResizeListener\n  };\n}\n\nclass AutoSizer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      height: this.props.defaultHeight || 0,\n      scaledHeight: this.props.defaultHeight || 0,\n      scaledWidth: this.props.defaultWidth || 0,\n      width: this.props.defaultWidth || 0\n    };\n    this._autoSizer = null;\n    this._detectElementResize = null;\n    this._parentNode = null;\n    this._resizeObserver = null;\n    this._timeoutId = null;\n    this._onResize = () => {\n      this._timeoutId = null;\n      const {\n        disableHeight,\n        disableWidth,\n        onResize\n      } = this.props;\n      if (this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        const style = window.getComputedStyle(this._parentNode) || {};\n        const paddingLeft = parseFloat(style.paddingLeft || \"0\");\n        const paddingRight = parseFloat(style.paddingRight || \"0\");\n        const paddingTop = parseFloat(style.paddingTop || \"0\");\n        const paddingBottom = parseFloat(style.paddingBottom || \"0\");\n        const rect = this._parentNode.getBoundingClientRect();\n        const scaledHeight = rect.height - paddingTop - paddingBottom;\n        const scaledWidth = rect.width - paddingLeft - paddingRight;\n        const height = this._parentNode.offsetHeight - paddingTop - paddingBottom;\n        const width = this._parentNode.offsetWidth - paddingLeft - paddingRight;\n        if (!disableHeight && (this.state.height !== height || this.state.scaledHeight !== scaledHeight) || !disableWidth && (this.state.width !== width || this.state.scaledWidth !== scaledWidth)) {\n          this.setState({\n            height,\n            width,\n            scaledHeight,\n            scaledWidth\n          });\n          if (typeof onResize === \"function\") {\n            onResize({\n              height,\n              scaledHeight,\n              scaledWidth,\n              width\n            });\n          }\n        }\n      }\n    };\n    this._setRef = autoSizer => {\n      this._autoSizer = autoSizer;\n    };\n  }\n  componentDidMount() {\n    const {\n      nonce\n    } = this.props;\n    const parentNode = this._autoSizer ? this._autoSizer.parentNode : null;\n    if (parentNode != null && parentNode.ownerDocument && parentNode.ownerDocument.defaultView && parentNode instanceof parentNode.ownerDocument.defaultView.HTMLElement) {\n      // Delay access of parentNode until mount.\n      // This handles edge-cases where the component has already been unmounted before its ref has been set,\n      // As well as libraries like react-lite which have a slightly different lifecycle.\n      this._parentNode = parentNode;\n\n      // Use ResizeObserver from the same context where parentNode (which we will observe) was defined\n      // Using just global can result into onResize events not being emitted in cases with multiple realms\n      const ResizeObserverInstance = parentNode.ownerDocument.defaultView.ResizeObserver;\n      if (ResizeObserverInstance != null) {\n        this._resizeObserver = new ResizeObserverInstance(() => {\n          // Guard against \"ResizeObserver loop limit exceeded\" error;\n          // could be triggered if the state update causes the ResizeObserver handler to run long.\n          // See https://github.com/bvaughn/react-virtualized-auto-sizer/issues/55\n          this._timeoutId = setTimeout(this._onResize, 0);\n        });\n        this._resizeObserver.observe(parentNode);\n      } else {\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = createDetectElementResize(nonce);\n        this._detectElementResize.addResizeListener(parentNode, this._onResize);\n      }\n      this._onResize();\n    }\n  }\n  componentWillUnmount() {\n    if (this._parentNode) {\n      if (this._detectElementResize) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n      if (this._timeoutId !== null) {\n        clearTimeout(this._timeoutId);\n      }\n      if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n      }\n    }\n  }\n  render() {\n    const {\n      children,\n      defaultHeight,\n      defaultWidth,\n      disableHeight = false,\n      disableWidth = false,\n      doNotBailOutOnEmptyChildren = false,\n      nonce,\n      onResize,\n      style = {},\n      tagName = \"div\",\n      ...rest\n    } = this.props;\n    const {\n      height,\n      scaledHeight,\n      scaledWidth,\n      width\n    } = this.state;\n\n    // Outer div should not force width/height since that may prevent containers from shrinking.\n    // Inner component should overflow and use calculated width/height.\n    // See issue #68 for more information.\n    const outerStyle = {\n      overflow: \"visible\"\n    };\n    const childParams = {};\n\n    // Avoid rendering children before the initial measurements have been collected.\n    // At best this would just be wasting cycles.\n    let bailoutOnChildren = false;\n    if (!disableHeight) {\n      if (height === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.height = 0;\n      childParams.height = height;\n      childParams.scaledHeight = scaledHeight;\n    }\n    if (!disableWidth) {\n      if (width === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.width = 0;\n      childParams.width = width;\n      childParams.scaledWidth = scaledWidth;\n    }\n    if (doNotBailOutOnEmptyChildren) {\n      bailoutOnChildren = false;\n    }\n    return createElement(tagName, {\n      ref: this._setRef,\n      style: {\n        ...outerStyle,\n        ...style\n      },\n      ...rest\n    }, !bailoutOnChildren && children(childParams));\n  }\n}\n\nfunction isHeightAndWidthProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth !== true;\n}\nfunction isHeightOnlyProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth === true;\n}\nfunction isWidthOnlyProps(props) {\n  return props && props.disableHeight === true && props.disableWidth !== true;\n}\n\nexport { AutoSizer as default, isHeightAndWidthProps, isHeightOnlyProps, isWidthOnlyProps };\n","function areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (newInputs[i] !== lastInputs[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\n// Animation frame based implementation of setTimeout.\n// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js\nvar hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\nvar now = hasNativePerformanceNow ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nfunction cancelTimeout(timeoutID) {\n  cancelAnimationFrame(timeoutID.id);\n}\nfunction requestTimeout(callback, delay) {\n  var start = now();\n\n  function tick() {\n    if (now() - start >= delay) {\n      callback.call(null);\n    } else {\n      timeoutID.id = requestAnimationFrame(tick);\n    }\n  }\n\n  var timeoutID = {\n    id: requestAnimationFrame(tick)\n  };\n  return timeoutID;\n}\n\nvar size = -1; // This utility copied from \"dom-helpers\" package.\n\nfunction getScrollbarSize(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (size === -1 || recalculate) {\n    var div = document.createElement('div');\n    var style = div.style;\n    style.width = '50px';\n    style.height = '50px';\n    style.overflow = 'scroll';\n    document.body.appendChild(div);\n    size = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n  }\n\n  return size;\n}\nvar cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\n\nfunction getRTLOffsetType(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (cachedRTLResult === null || recalculate) {\n    var outerDiv = document.createElement('div');\n    var outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n    var innerDiv = document.createElement('div');\n    var innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n    outerDiv.appendChild(innerDiv);\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nvar defaultItemKey = function defaultItemKey(_ref) {\n  var columnIndex = _ref.columnIndex,\n      data = _ref.data,\n      rowIndex = _ref.rowIndex;\n  return rowIndex + \":\" + columnIndex;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsOverscanCount = null;\nvar devWarningsOverscanRowsColumnsCount = null;\nvar devWarningsTagName = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsOverscanCount = /*#__PURE__*/new WeakSet();\n    devWarningsOverscanRowsColumnsCount = /*#__PURE__*/new WeakSet();\n    devWarningsTagName = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createGridComponent(_ref2) {\n  var _class;\n\n  var getColumnOffset = _ref2.getColumnOffset,\n      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,\n      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,\n      getColumnWidth = _ref2.getColumnWidth,\n      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,\n      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,\n      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,\n      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,\n      getRowHeight = _ref2.getRowHeight,\n      getRowOffset = _ref2.getRowOffset,\n      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,\n      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,\n      initInstanceProps = _ref2.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref2.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(Grid, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function Grid(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._resetIsScrollingTimeoutId = null;\n      _this._outerRef = void 0;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        horizontalScrollDirection: 'forward',\n        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,\n        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,\n        scrollUpdateWasRequested: false,\n        verticalScrollDirection: 'forward'\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanColumnStartIndex: overscanColumnStartIndex,\n          overscanColumnStopIndex: overscanColumnStopIndex,\n          overscanRowStartIndex: overscanRowStartIndex,\n          overscanRowStopIndex: overscanRowStopIndex,\n          visibleColumnStartIndex: visibleColumnStartIndex,\n          visibleColumnStopIndex: visibleColumnStopIndex,\n          visibleRowStartIndex: visibleRowStartIndex,\n          visibleRowStopIndex: visibleRowStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          horizontalScrollDirection: horizontalScrollDirection,\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          verticalScrollDirection: verticalScrollDirection,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (rowIndex, columnIndex) {\n        var _this$props = _this.props,\n            columnWidth = _this$props.columnWidth,\n            direction = _this$props.direction,\n            rowHeight = _this$props.rowHeight;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);\n\n        var key = rowIndex + \":\" + columnIndex;\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(key)) {\n          style = itemStyleCache[key];\n        } else {\n          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);\n\n          var isRtl = direction === 'rtl';\n          itemStyleCache[key] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : _offset,\n            right: isRtl ? _offset : undefined,\n            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),\n            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),\n            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScroll = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientHeight = _event$currentTarget.clientHeight,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollTop = _event$currentTarget.scrollTop,\n            scrollHeight = _event$currentTarget.scrollHeight,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n\n          var calculatedScrollLeft = scrollLeft;\n\n          if (direction === 'rtl') {\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                calculatedScrollLeft = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));\n          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n            scrollLeft: calculatedScrollLeft,\n            scrollTop: calculatedScrollTop,\n            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1);\n        });\n      };\n\n      return _this;\n    }\n\n    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = Grid.prototype;\n\n    _proto.scrollTo = function scrollTo(_ref3) {\n      var scrollLeft = _ref3.scrollLeft,\n          scrollTop = _ref3.scrollTop;\n\n      if (scrollLeft !== undefined) {\n        scrollLeft = Math.max(0, scrollLeft);\n      }\n\n      if (scrollTop !== undefined) {\n        scrollTop = Math.max(0, scrollTop);\n      }\n\n      this.setState(function (prevState) {\n        if (scrollLeft === undefined) {\n          scrollLeft = prevState.scrollLeft;\n        }\n\n        if (scrollTop === undefined) {\n          scrollTop = prevState.scrollTop;\n        }\n\n        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n          return null;\n        }\n\n        return {\n          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          scrollUpdateWasRequested: true,\n          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(_ref4) {\n      var _ref4$align = _ref4.align,\n          align = _ref4$align === void 0 ? 'auto' : _ref4$align,\n          columnIndex = _ref4.columnIndex,\n          rowIndex = _ref4.rowIndex;\n      var _this$props2 = this.props,\n          columnCount = _this$props2.columnCount,\n          height = _this$props2.height,\n          rowCount = _this$props2.rowCount,\n          width = _this$props2.width;\n      var _this$state = this.state,\n          scrollLeft = _this$state.scrollLeft,\n          scrollTop = _this$state.scrollTop;\n      var scrollbarSize = getScrollbarSize();\n\n      if (columnIndex !== undefined) {\n        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));\n      }\n\n      if (rowIndex !== undefined) {\n        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));\n      }\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,\n      // to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n\n      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;\n      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;\n      this.scrollTo({\n        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,\n        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop\n      });\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          initialScrollLeft = _this$props3.initialScrollLeft,\n          initialScrollTop = _this$props3.initialScrollTop;\n\n      if (this._outerRef != null) {\n        var outerRef = this._outerRef;\n\n        if (typeof initialScrollLeft === 'number') {\n          outerRef.scrollLeft = initialScrollLeft;\n        }\n\n        if (typeof initialScrollTop === 'number') {\n          outerRef.scrollTop = initialScrollTop;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var direction = this.props.direction;\n      var _this$state2 = this.state,\n          scrollLeft = _this$state2.scrollLeft,\n          scrollTop = _this$state2.scrollTop,\n          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // So we need to determine which browser behavior we're dealing with, and mimic it.\n        var outerRef = this._outerRef;\n\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              outerRef.scrollLeft = -scrollLeft;\n              break;\n\n            case 'positive-ascending':\n              outerRef.scrollLeft = scrollLeft;\n              break;\n\n            default:\n              var clientWidth = outerRef.clientWidth,\n                  scrollWidth = outerRef.scrollWidth;\n              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        } else {\n          outerRef.scrollLeft = Math.max(0, scrollLeft);\n        }\n\n        outerRef.scrollTop = Math.max(0, scrollTop);\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          columnCount = _this$props4.columnCount,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          rowCount = _this$props4.rowCount,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling;\n\n      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),\n          columnStartIndex = _this$_getHorizontalR[0],\n          columnStopIndex = _this$_getHorizontalR[1];\n\n      var _this$_getVerticalRan = this._getVerticalRangeToRender(),\n          rowStartIndex = _this$_getVerticalRan[0],\n          rowStopIndex = _this$_getVerticalRan[1];\n\n      var items = [];\n\n      if (columnCount > 0 && rowCount) {\n        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {\n          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {\n            items.push(createElement(children, {\n              columnIndex: _columnIndex,\n              data: itemData,\n              isScrolling: useIsScrolling ? isScrolling : undefined,\n              key: itemKey({\n                columnIndex: _columnIndex,\n                data: itemData,\n                rowIndex: _rowIndex\n              }),\n              rowIndex: _rowIndex,\n              style: this._getItemStyle(_rowIndex, _columnIndex)\n            }));\n          }\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: this._onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: estimatedTotalHeight,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: estimatedTotalWidth\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      var _this$props5 = this.props,\n          columnCount = _this$props5.columnCount,\n          onItemsRendered = _this$props5.onItemsRendered,\n          onScroll = _this$props5.onScroll,\n          rowCount = _this$props5.rowCount;\n\n      if (typeof onItemsRendered === 'function') {\n        if (columnCount > 0 && rowCount > 0) {\n          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),\n              _overscanColumnStartIndex = _this$_getHorizontalR2[0],\n              _overscanColumnStopIndex = _this$_getHorizontalR2[1],\n              _visibleColumnStartIndex = _this$_getHorizontalR2[2],\n              _visibleColumnStopIndex = _this$_getHorizontalR2[3];\n\n          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),\n              _overscanRowStartIndex = _this$_getVerticalRan2[0],\n              _overscanRowStopIndex = _this$_getVerticalRan2[1],\n              _visibleRowStartIndex = _this$_getVerticalRan2[2],\n              _visibleRowStopIndex = _this$_getVerticalRan2[3];\n\n          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);\n        }\n      }\n\n      if (typeof onScroll === 'function') {\n        var _this$state3 = this.state,\n            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,\n            _scrollLeft = _this$state3.scrollLeft,\n            _scrollTop = _this$state3.scrollTop,\n            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,\n            _verticalScrollDirection = _this$state3.verticalScrollDirection;\n\n        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {\n      var _this$props6 = this.props,\n          columnCount = _this$props6.columnCount,\n          overscanColumnCount = _this$props6.overscanColumnCount,\n          overscanColumnsCount = _this$props6.overscanColumnsCount,\n          overscanCount = _this$props6.overscanCount,\n          rowCount = _this$props6.rowCount;\n      var _this$state4 = this.state,\n          horizontalScrollDirection = _this$state4.horizontalScrollDirection,\n          isScrolling = _this$state4.isScrolling,\n          scrollLeft = _this$state4.scrollLeft;\n      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);\n      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {\n      var _this$props7 = this.props,\n          columnCount = _this$props7.columnCount,\n          overscanCount = _this$props7.overscanCount,\n          overscanRowCount = _this$props7.overscanRowCount,\n          overscanRowsCount = _this$props7.overscanRowsCount,\n          rowCount = _this$props7.rowCount;\n      var _this$state5 = this.state,\n          isScrolling = _this$state5.isScrolling,\n          verticalScrollDirection = _this$state5.verticalScrollDirection,\n          scrollTop = _this$state5.scrollTop;\n      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);\n      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return Grid;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    useIsScrolling: false\n  }, _class;\n}\n\nvar validateSharedProps = function validateSharedProps(_ref5, _ref6) {\n  var children = _ref5.children,\n      direction = _ref5.direction,\n      height = _ref5.height,\n      innerTagName = _ref5.innerTagName,\n      outerTagName = _ref5.outerTagName,\n      overscanColumnsCount = _ref5.overscanColumnsCount,\n      overscanCount = _ref5.overscanCount,\n      overscanRowsCount = _ref5.overscanRowsCount,\n      width = _ref5.width;\n  var instance = _ref6.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof overscanCount === 'number') {\n      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {\n        devWarningsOverscanCount.add(instance);\n        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {\n      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {\n        devWarningsOverscanRowsColumnsCount.add(instance);\n        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    switch (direction) {\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    if (typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Grids must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    }\n\n    if (typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Grids must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE = 50;\n\nvar getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {\n  var rowCount = _ref.rowCount;\n  var rowMetadataMap = _ref2.rowMetadataMap,\n      estimatedRowHeight = _ref2.estimatedRowHeight,\n      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredRowIndex >= rowCount) {\n    lastMeasuredRowIndex = rowCount - 1;\n  }\n\n  if (lastMeasuredRowIndex >= 0) {\n    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {\n  var columnCount = _ref3.columnCount;\n  var columnMetadataMap = _ref4.columnMetadataMap,\n      estimatedColumnWidth = _ref4.estimatedColumnWidth,\n      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredColumnIndex >= columnCount) {\n    lastMeasuredColumnIndex = columnCount - 1;\n  }\n\n  if (lastMeasuredColumnIndex >= 0) {\n    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {\n  var itemMetadataMap, itemSize, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    itemSize = props.columnWidth;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    itemSize = props.rowHeight;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    if (itemType === 'column') {\n      instanceProps.lastMeasuredColumnIndex = index;\n    } else {\n      instanceProps.lastMeasuredRowIndex = index;\n    }\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {\n  var itemMetadataMap, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {\n  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n  var size = itemType === 'column' ? props.width : props.height;\n  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n  // To ensure it reflects actual measurements instead of just estimates.\n\n  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);\n  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);\n\n  if (align === 'smart') {\n    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n      align = 'auto';\n    } else {\n      align = 'center';\n    }\n  }\n\n  switch (align) {\n    case 'start':\n      return maxOffset;\n\n    case 'end':\n      return minOffset;\n\n    case 'center':\n      return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n    case 'auto':\n    default:\n      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n        return scrollOffset;\n      } else if (minOffset > maxOffset) {\n        // Because we only take into account the scrollbar size when calculating minOffset\n        // this value can be larger than maxOffset when at the end of the list\n        return minOffset;\n      } else if (scrollOffset < minOffset) {\n        return minOffset;\n      } else {\n        return maxOffset;\n      }\n\n  }\n};\n\nvar VariableSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(props, index, instanceProps) {\n    return getItemMetadata('column', props, index, instanceProps).offset;\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {\n    return findNearestItem('column', props, instanceProps, scrollLeft);\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {\n    var columnCount = props.columnCount,\n        width = props.width;\n    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);\n    var maxOffset = scrollLeft + width;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < columnCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  getColumnWidth: function getColumnWidth(props, index, instanceProps) {\n    return instanceProps.columnMetadataMap[index].size;\n  },\n  getEstimatedTotalHeight: getEstimatedTotalHeight,\n  getEstimatedTotalWidth: getEstimatedTotalWidth,\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getRowOffset: function getRowOffset(props, index, instanceProps) {\n    return getItemMetadata('row', props, index, instanceProps).offset;\n  },\n  getRowHeight: function getRowHeight(props, index, instanceProps) {\n    return instanceProps.rowMetadataMap[index].size;\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {\n    return findNearestItem('row', props, instanceProps, scrollTop);\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {\n    var rowCount = props.rowCount,\n        height = props.height;\n    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);\n    var maxOffset = scrollTop + height;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < rowCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref5 = props,\n        estimatedColumnWidth = _ref5.estimatedColumnWidth,\n        estimatedRowHeight = _ref5.estimatedRowHeight;\n    var instanceProps = {\n      columnMetadataMap: {},\n      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,\n      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,\n      lastMeasuredColumnIndex: -1,\n      lastMeasuredRowIndex: -1,\n      rowMetadataMap: {}\n    };\n\n    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        columnIndex: columnIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        rowIndex: rowIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterIndices = function (_ref6) {\n      var columnIndex = _ref6.columnIndex,\n          rowIndex = _ref6.rowIndex,\n          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,\n          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;\n\n      if (typeof columnIndex === 'number') {\n        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);\n      }\n\n      if (typeof rowIndex === 'number') {\n        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);\n      } // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref7) {\n    var columnWidth = _ref7.columnWidth,\n        rowHeight = _ref7.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'function') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      } else if (typeof rowHeight !== 'function') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;\n\nvar defaultItemKey$1 = function defaultItemKey(index, data) {\n  return index;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsDirection = null;\nvar devWarningsTagName$1 = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsDirection = /*#__PURE__*/new WeakSet();\n    devWarningsTagName$1 = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createListComponent(_ref) {\n  var _class;\n\n  var getItemOffset = _ref.getItemOffset,\n      getEstimatedTotalSize = _ref.getEstimatedTotalSize,\n      getItemSize = _ref.getItemSize,\n      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,\n      getStartIndexForOffset = _ref.getStartIndexForOffset,\n      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,\n      initInstanceProps = _ref.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(List, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function List(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._outerRef = void 0;\n      _this._resetIsScrollingTimeoutId = null;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        scrollDirection: 'forward',\n        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,\n        scrollUpdateWasRequested: false\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanStartIndex: overscanStartIndex,\n          overscanStopIndex: overscanStopIndex,\n          visibleStartIndex: visibleStartIndex,\n          visibleStopIndex: visibleStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          scrollDirection: scrollDirection,\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (index) {\n        var _this$props = _this.props,\n            direction = _this$props.direction,\n            itemSize = _this$props.itemSize,\n            layout = _this$props.layout;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);\n\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(index)) {\n          style = itemStyleCache[index];\n        } else {\n          var _offset = getItemOffset(_this.props, index, _this._instanceProps);\n\n          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction \"horizontal\"\n\n          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n          var isRtl = direction === 'rtl';\n          var offsetHorizontal = isHorizontal ? _offset : 0;\n          itemStyleCache[index] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : offsetHorizontal,\n            right: isRtl ? offsetHorizontal : undefined,\n            top: !isHorizontal ? _offset : 0,\n            height: !isHorizontal ? size : '100%',\n            width: isHorizontal ? size : '100%'\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScrollHorizontal = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollLeft) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction;\n          var scrollOffset = scrollLeft;\n\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                scrollOffset = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                scrollOffset = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._onScrollVertical = function (event) {\n        var _event$currentTarget2 = event.currentTarget,\n            clientHeight = _event$currentTarget2.clientHeight,\n            scrollHeight = _event$currentTarget2.scrollHeight,\n            scrollTop = _event$currentTarget2.scrollTop;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1, null);\n        });\n      };\n\n      return _this;\n    }\n\n    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps$1(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = List.prototype;\n\n    _proto.scrollTo = function scrollTo(scrollOffset) {\n      scrollOffset = Math.max(0, scrollOffset);\n      this.setState(function (prevState) {\n        if (prevState.scrollOffset === scrollOffset) {\n          return null;\n        }\n\n        return {\n          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: true\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(index, align) {\n      if (align === void 0) {\n        align = 'auto';\n      }\n\n      var _this$props2 = this.props,\n          itemCount = _this$props2.itemCount,\n          layout = _this$props2.layout;\n      var scrollOffset = this.state.scrollOffset;\n      index = Math.max(0, Math.min(index, itemCount - 1)); // The scrollbar size should be considered when scrolling an item into view, to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n      // This is an edge case for lists; normally they only scroll in the dominant direction.\n\n      var scrollbarSize = 0;\n\n      if (this._outerRef) {\n        var outerRef = this._outerRef;\n\n        if (layout === 'vertical') {\n          scrollbarSize = outerRef.scrollWidth > outerRef.clientWidth ? getScrollbarSize() : 0;\n        } else {\n          scrollbarSize = outerRef.scrollHeight > outerRef.clientHeight ? getScrollbarSize() : 0;\n        }\n      }\n\n      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps, scrollbarSize));\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          direction = _this$props3.direction,\n          initialScrollOffset = _this$props3.initialScrollOffset,\n          layout = _this$props3.layout;\n\n      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          outerRef.scrollLeft = initialScrollOffset;\n        } else {\n          outerRef.scrollTop = initialScrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var _this$props4 = this.props,\n          direction = _this$props4.direction,\n          layout = _this$props4.layout;\n      var _this$state = this.state,\n          scrollOffset = _this$state.scrollOffset,\n          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // So we need to determine which browser behavior we're dealing with, and mimic it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                outerRef.scrollLeft = -scrollOffset;\n                break;\n\n              case 'positive-ascending':\n                outerRef.scrollLeft = scrollOffset;\n                break;\n\n              default:\n                var clientWidth = outerRef.clientWidth,\n                    scrollWidth = outerRef.scrollWidth;\n                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;\n                break;\n            }\n          } else {\n            outerRef.scrollLeft = scrollOffset;\n          }\n        } else {\n          outerRef.scrollTop = scrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          className = _this$props5.className,\n          direction = _this$props5.direction,\n          height = _this$props5.height,\n          innerRef = _this$props5.innerRef,\n          innerElementType = _this$props5.innerElementType,\n          innerTagName = _this$props5.innerTagName,\n          itemCount = _this$props5.itemCount,\n          itemData = _this$props5.itemData,\n          _this$props5$itemKey = _this$props5.itemKey,\n          itemKey = _this$props5$itemKey === void 0 ? defaultItemKey$1 : _this$props5$itemKey,\n          layout = _this$props5.layout,\n          outerElementType = _this$props5.outerElementType,\n          outerTagName = _this$props5.outerTagName,\n          style = _this$props5.style,\n          useIsScrolling = _this$props5.useIsScrolling,\n          width = _this$props5.width;\n      var isScrolling = this.state.isScrolling; // TODO Deprecate direction \"horizontal\"\n\n      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;\n\n      var _this$_getRangeToRend = this._getRangeToRender(),\n          startIndex = _this$_getRangeToRend[0],\n          stopIndex = _this$_getRangeToRend[1];\n\n      var items = [];\n\n      if (itemCount > 0) {\n        for (var _index = startIndex; _index <= stopIndex; _index++) {\n          items.push(createElement(children, {\n            data: itemData,\n            key: itemKey(_index, itemData),\n            index: _index,\n            isScrolling: useIsScrolling ? isScrolling : undefined,\n            style: this._getItemStyle(_index)\n          }));\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: isHorizontal ? '100%' : estimatedTotalSize,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: isHorizontal ? estimatedTotalSize : '100%'\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      if (typeof this.props.onItemsRendered === 'function') {\n        var itemCount = this.props.itemCount;\n\n        if (itemCount > 0) {\n          var _this$_getRangeToRend2 = this._getRangeToRender(),\n              _overscanStartIndex = _this$_getRangeToRend2[0],\n              _overscanStopIndex = _this$_getRangeToRend2[1],\n              _visibleStartIndex = _this$_getRangeToRend2[2],\n              _visibleStopIndex = _this$_getRangeToRend2[3];\n\n          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);\n        }\n      }\n\n      if (typeof this.props.onScroll === 'function') {\n        var _this$state2 = this.state,\n            _scrollDirection = _this$state2.scrollDirection,\n            _scrollOffset = _this$state2.scrollOffset,\n            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getRangeToRender = function _getRangeToRender() {\n      var _this$props6 = this.props,\n          itemCount = _this$props6.itemCount,\n          overscanCount = _this$props6.overscanCount;\n      var _this$state3 = this.state,\n          isScrolling = _this$state3.isScrolling,\n          scrollDirection = _this$state3.scrollDirection,\n          scrollOffset = _this$state3.scrollOffset;\n\n      if (itemCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);\n      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;\n      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return List;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    layout: 'vertical',\n    overscanCount: 2,\n    useIsScrolling: false\n  }, _class;\n} // NOTE: I considered further wrapping individual items with a pure ListItem component.\n// This would avoid ever calling the render function for the same index more than once,\n// But it would also add the overhead of a lot of components/fibers.\n// I assume people already do this (render function returning a class component),\n// So my doing it would just unnecessarily double the wrappers.\n\nvar validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {\n  var children = _ref2.children,\n      direction = _ref2.direction,\n      height = _ref2.height,\n      layout = _ref2.layout,\n      innerTagName = _ref2.innerTagName,\n      outerTagName = _ref2.outerTagName,\n      width = _ref2.width;\n  var instance = _ref3.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {\n        devWarningsTagName$1.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    } // TODO Deprecate direction \"horizontal\"\n\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n\n    switch (direction) {\n      case 'horizontal':\n      case 'vertical':\n        if (devWarningsDirection && !devWarningsDirection.has(instance)) {\n          devWarningsDirection.add(instance);\n          console.warn('The direction prop should be either \"ltr\" (default) or \"rtl\". ' + 'Please use the layout prop to specify \"vertical\" (default) or \"horizontal\" orientation.');\n        }\n\n        break;\n\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    switch (layout) {\n      case 'horizontal':\n      case 'vertical':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"layout\" prop has been specified. ' + 'Value should be either \"horizontal\" or \"vertical\". ' + (\"\\\"\" + layout + \"\\\" was specified.\"));\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    if (isHorizontal && typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    } else if (!isHorizontal && typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;\n\nvar getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {\n  var _ref = props,\n      itemSize = _ref.itemSize;\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    instanceProps.lastMeasuredIndex = index;\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {\n  var itemCount = props.itemCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {\n  var itemCount = _ref2.itemCount;\n  var itemMetadataMap = _ref3.itemMetadataMap,\n      estimatedItemSize = _ref3.estimatedItemSize,\n      lastMeasuredIndex = _ref3.lastMeasuredIndex;\n  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredIndex >= itemCount) {\n    lastMeasuredIndex = itemCount - 1;\n  }\n\n  if (lastMeasuredIndex >= 0) {\n    var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;\n  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;\n};\n\nvar VariableSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(props, index, instanceProps) {\n    return getItemMetadata$1(props, index, instanceProps).offset;\n  },\n  getItemSize: function getItemSize(props, index, instanceProps) {\n    return instanceProps.itemMetadataMap[index].size;\n  },\n  getEstimatedTotalSize: getEstimatedTotalSize,\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    var direction = props.direction,\n        height = props.height,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n    // To ensure it reflects actual measurements instead of just estimates.\n\n    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);\n    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size + scrollbarSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {\n    return findNearestItem$1(props, instanceProps, offset);\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        itemCount = props.itemCount,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);\n    var maxOffset = scrollOffset + size;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < itemCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref4 = props,\n        estimatedItemSize = _ref4.estimatedItemSize;\n    var instanceProps = {\n      itemMetadataMap: {},\n      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,\n      lastMeasuredIndex: -1\n    };\n\n    instance.resetAfterIndex = function (index, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref5) {\n    var itemSize = _ref5.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'function') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(_ref, index) {\n    var columnWidth = _ref.columnWidth;\n    return index * columnWidth;\n  },\n  getColumnWidth: function getColumnWidth(_ref2, index) {\n    var columnWidth = _ref2.columnWidth;\n    return columnWidth;\n  },\n  getRowOffset: function getRowOffset(_ref3, index) {\n    var rowHeight = _ref3.rowHeight;\n    return index * rowHeight;\n  },\n  getRowHeight: function getRowHeight(_ref4, index) {\n    var rowHeight = _ref4.rowHeight;\n    return rowHeight;\n  },\n  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {\n    var rowCount = _ref5.rowCount,\n        rowHeight = _ref5.rowHeight;\n    return rowHeight * rowCount;\n  },\n  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {\n    var columnCount = _ref6.columnCount,\n        columnWidth = _ref6.columnWidth;\n    return columnWidth * columnCount;\n  },\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {\n    var columnCount = _ref7.columnCount,\n        columnWidth = _ref7.columnWidth,\n        width = _ref7.width;\n    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);\n    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);\n    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);\n\n    if (align === 'smart') {\n      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(width / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {\n          return lastColumnOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {\n          return scrollLeft;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollLeft < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {\n    var rowHeight = _ref8.rowHeight,\n        height = _ref8.height,\n        rowCount = _ref8.rowCount;\n    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);\n    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);\n    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);\n\n    if (align === 'smart') {\n      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(height / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {\n          return lastRowOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollTop >= minOffset && scrollTop <= maxOffset) {\n          return scrollTop;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollTop < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {\n    var columnWidth = _ref9.columnWidth,\n        columnCount = _ref9.columnCount;\n    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {\n    var columnWidth = _ref10.columnWidth,\n        columnCount = _ref10.columnCount,\n        width = _ref10.width;\n    var left = startIndex * columnWidth;\n    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);\n    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {\n    var rowHeight = _ref11.rowHeight,\n        rowCount = _ref11.rowCount;\n    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {\n    var rowHeight = _ref12.rowHeight,\n        rowCount = _ref12.rowCount,\n        height = _ref12.height;\n    var top = startIndex * rowHeight;\n    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);\n    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref13) {\n    var columnWidth = _ref13.columnWidth,\n        rowHeight = _ref13.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'number') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      }\n\n      if (typeof rowHeight !== 'number') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(_ref, index) {\n    var itemSize = _ref.itemSize;\n    return index * itemSize;\n  },\n  getItemSize: function getItemSize(_ref2, index) {\n    var itemSize = _ref2.itemSize;\n    return itemSize;\n  },\n  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {\n    var itemCount = _ref3.itemCount,\n        itemSize = _ref3.itemSize;\n    return itemSize * itemCount;\n  },\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    var direction = _ref4.direction,\n        height = _ref4.height,\n        itemCount = _ref4.itemCount,\n        itemSize = _ref4.itemSize,\n        layout = _ref4.layout,\n        width = _ref4.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var lastItemOffset = Math.max(0, itemCount * itemSize - size);\n    var maxOffset = Math.min(lastItemOffset, index * itemSize);\n    var minOffset = Math.max(0, index * itemSize - size + itemSize + scrollbarSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        {\n          // \"Centered\" offset is usually the average of the min and max.\n          // But near the edges of the list, this doesn't hold true.\n          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n          if (middleOffset < Math.ceil(size / 2)) {\n            return 0; // near the beginning\n          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {\n            return lastItemOffset; // near the end\n          } else {\n            return middleOffset;\n          }\n        }\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {\n    var itemCount = _ref5.itemCount,\n        itemSize = _ref5.itemSize;\n    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {\n    var direction = _ref6.direction,\n        height = _ref6.height,\n        itemCount = _ref6.itemCount,\n        itemSize = _ref6.itemSize,\n        layout = _ref6.layout,\n        width = _ref6.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var offset = startIndex * itemSize;\n    var size = isHorizontal ? width : height;\n    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);\n    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref7) {\n    var itemSize = _ref7.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'number') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nfunction shallowDiffers(prev, next) {\n  for (var attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n\n  for (var _attribute in next) {\n    if (prev[_attribute] !== next[_attribute]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar _excluded = [\"style\"],\n    _excluded2 = [\"style\"];\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-api.html#reactmemo\n\nfunction areEqual(prevProps, nextProps) {\n  var prevStyle = prevProps.style,\n      prevRest = _objectWithoutPropertiesLoose(prevProps, _excluded);\n\n  var nextStyle = nextProps.style,\n      nextRest = _objectWithoutPropertiesLoose(nextProps, _excluded2);\n\n  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate\n\nfunction shouldComponentUpdate(nextProps, nextState) {\n  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);\n}\n\nexport { FixedSizeGrid, FixedSizeList, VariableSizeGrid, VariableSizeList, areEqual, shouldComponentUpdate };\n//# sourceMappingURL=index.esm.js.map\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { s, ellipsis } from \"@shared/styles\";\nimport Flex from \"~/components/Flex\";\nimport Disclosure from \"~/components/Sidebar/components/Disclosure\";\nimport Text from \"~/components/Text\";\n\ntype Props = {\n  selected: boolean;\n  active: boolean;\n  style: React.CSSProperties;\n  expanded: boolean;\n  icon?: React.ReactNode;\n  title: string;\n  depth: number;\n  hasChildren: boolean;\n\n  onDisclosureClick: (ev: React.MouseEvent) => void;\n  onPointerMove: (ev: React.MouseEvent) => void;\n  onClick: (ev: React.MouseEvent) => void;\n};\n\nfunction DocumentExplorerNode(\n  {\n    selected,\n    active,\n    style,\n    expanded,\n    icon,\n    title,\n    depth,\n    hasChildren,\n    onDisclosureClick,\n    onPointerMove,\n    onClick,\n  }: Props,\n  ref: React.RefObject<HTMLSpanElement>\n) {\n  const { t } = useTranslation();\n  const OFFSET = 12;\n  const DISCLOSURE = 20;\n\n  const width = depth ? depth * DISCLOSURE + OFFSET : DISCLOSURE;\n\n  return (\n    <Node\n      ref={ref}\n      selected={selected}\n      active={active}\n      onClick={onClick}\n      style={style}\n      onPointerMove={onPointerMove}\n      role=\"option\"\n    >\n      <Spacer width={width}>\n        {hasChildren && (\n          <StyledDisclosure\n            expanded={expanded}\n            onClick={onDisclosureClick}\n            tabIndex={-1}\n          />\n        )}\n      </Spacer>\n      {icon}\n      <Title>{title || t(\"Untitled\")}</Title>\n    </Node>\n  );\n}\n\nconst Title = styled(Text)`\n  ${ellipsis()}\n  margin: 0 4px 0 4px;\n  color: inherit;\n`;\n\nconst StyledDisclosure = styled(Disclosure)`\n  position: relative;\n  left: auto;\n  margin-top: 2px;\n`;\n\nconst Spacer = styled(Flex)<{ width: number }>`\n  flex-direction: row-reverse;\n  flex-shrink: 0;\n  width: ${(props) => props.width}px;\n`;\n\nexport const Node = styled.span<{\n  active: boolean;\n  selected: boolean;\n  style: React.CSSProperties;\n}>`\n  display: flex;\n  user-select: none;\n  overflow: hidden;\n  font-size: 16px;\n  width: ${(props) => props.style.width};\n  color: ${s(\"text\")};\n  cursor: var(--pointer);\n  padding: 12px;\n  border-radius: 6px;\n  background: ${(props) =>\n    !props.selected && props.active && props.theme.listItemHoverBackground};\n\n  svg {\n    flex-shrink: 0;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  ${(props) =>\n    props.selected &&\n    `\n      background: ${props.theme.accent};\n      color: ${props.theme.white};\n\n      svg {\n        color: ${props.theme.white};\n        fill: ${props.theme.white};\n      }\n    `}\n\n  ${breakpoint(\"tablet\")`\n    padding: 4px;\n    font-size: 15px;\n  `}\n`;\n\nexport default observer(React.forwardRef(DocumentExplorerNode));\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport scrollIntoView from \"scroll-into-view-if-needed\";\nimport styled from \"styled-components\";\nimport { ellipsis } from \"@shared/styles\";\nimport { Node as SearchResult } from \"~/components/DocumentExplorerNode\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\n\ntype Props = {\n  selected: boolean;\n  active: boolean;\n  style: React.CSSProperties;\n  icon?: React.ReactNode;\n  title: string;\n  path?: string;\n\n  onPointerMove: (ev: React.MouseEvent) => void;\n  onClick: (ev: React.MouseEvent) => void;\n};\n\nfunction DocumentExplorerSearchResult({\n  selected,\n  active,\n  style,\n  icon,\n  title,\n  path,\n  onPointerMove,\n  onClick,\n}: Props) {\n  const { t } = useTranslation();\n\n  const ref = React.useCallback(\n    (node: HTMLSpanElement | null) => {\n      if (active && node) {\n        scrollIntoView(node, {\n          scrollMode: \"if-needed\",\n          behavior: \"auto\",\n          block: \"nearest\",\n        });\n      }\n    },\n    [active]\n  );\n\n  return (\n    <SearchResult\n      ref={ref}\n      selected={selected}\n      active={active}\n      onClick={onClick}\n      style={style}\n      onPointerMove={onPointerMove}\n      role=\"option\"\n    >\n      {icon}\n      <Flex>\n        <Title>{title || t(\"Untitled\")}</Title>\n        <Path $selected={selected} size=\"xsmall\">\n          {path}\n        </Path>\n      </Flex>\n    </SearchResult>\n  );\n}\n\nconst Title = styled(Text)`\n  flex-shrink: 0;\n  white-space: nowrap;\n  margin: 0 4px 0 4px;\n  color: inherit;\n`;\n\nconst Path = styled(Text)<{ $selected: boolean }>`\n  ${ellipsis()}\n  padding-top: 2px;\n  margin: 0 4px 0 8px;\n  color: ${(props) =>\n    props.$selected ? props.theme.white50 : props.theme.textTertiary};\n`;\n\nexport default observer(DocumentExplorerSearchResult);\n","import { NavigationNode } from \"@shared/types\";\n\nexport const flattenTree = (root: NavigationNode) => {\n  const flattened: NavigationNode[] = [];\n  if (!root) {\n    return flattened;\n  }\n\n  flattened.push(root);\n\n  root.children.forEach((child) => {\n    flattened.push(...flattenTree(child));\n  });\n\n  return flattened;\n};\n\nexport const ancestors = (node: NavigationNode | null) => {\n  const nodes: NavigationNode[] = [];\n  if (node) {\n    while (node.parent !== null) {\n      nodes.unshift(node.parent as NavigationNode);\n      node = node.parent as NavigationNode;\n    }\n  }\n  return nodes;\n};\n\nexport const descendants = (node: NavigationNode, depth = 0) => {\n  const allDescendants = flattenTree(node).slice(1);\n  return depth === 0\n    ? allDescendants\n    : allDescendants.filter(\n        (d) => (d.depth as number) <= (node.depth as number) + depth\n      );\n};\n","import FuzzySearch from \"fuzzy-search\";\nimport concat from \"lodash/concat\";\nimport difference from \"lodash/difference\";\nimport fill from \"lodash/fill\";\nimport filter from \"lodash/filter\";\nimport includes from \"lodash/includes\";\nimport map from \"lodash/map\";\nimport { observer } from \"mobx-react\";\nimport { StarredIcon, DocumentIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport scrollIntoView from \"scroll-into-view-if-needed\";\nimport styled, { useTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Icon from \"@shared/components/Icon\";\nimport { NavigationNode, NavigationNodeType } from \"@shared/types\";\nimport { isModKey } from \"@shared/utils/keyboard\";\nimport DocumentExplorerNode from \"~/components/DocumentExplorerNode\";\nimport DocumentExplorerSearchResult from \"~/components/DocumentExplorerSearchResult\";\nimport Flex from \"~/components/Flex\";\nimport CollectionIcon from \"~/components/Icons/CollectionIcon\";\nimport { Outline } from \"~/components/Input\";\nimport InputSearch from \"~/components/InputSearch\";\nimport Text from \"~/components/Text\";\nimport useMobile from \"~/hooks/useMobile\";\nimport useStores from \"~/hooks/useStores\";\nimport { ancestors, descendants } from \"~/utils/tree\";\n\ntype Props = {\n  /** Action taken upon submission of selected item, could be publish, move etc. */\n  onSubmit: () => void;\n  /** A side-effect of item selection */\n  onSelect: (item: NavigationNode | null) => void;\n  /** Items to be shown in explorer */\n  items: NavigationNode[];\n  /** Automatically expand to and select item with the given id */\n  defaultValue?: string;\n};\n\nfunction DocumentExplorer({ onSubmit, onSelect, items, defaultValue }: Props) {\n  const isMobile = useMobile();\n  const { collections, documents } = useStores();\n  const { t } = useTranslation();\n  const theme = useTheme();\n\n  const [searchTerm, setSearchTerm] = React.useState<string>();\n  const [selectedNode, selectNode] = React.useState<NavigationNode | null>(\n    () => {\n      const node =\n        defaultValue && items.find((item) => item.id === defaultValue);\n      return node || null;\n    }\n  );\n  const [initialScrollOffset, setInitialScrollOffset] =\n    React.useState<number>(0);\n  const [activeNode, setActiveNode] = React.useState<number>(0);\n  const [expandedNodes, setExpandedNodes] = React.useState<string[]>(() => {\n    if (defaultValue) {\n      const node = items.find((item) => item.id === defaultValue);\n      if (node) {\n        return ancestors(node).map((node) => node.id);\n      }\n    }\n    return [];\n  });\n\n  const [itemRefs, setItemRefs] = React.useState<\n    React.RefObject<HTMLSpanElement>[]\n  >([]);\n\n  const inputSearchRef = React.useRef<HTMLInputElement | HTMLTextAreaElement>(\n    null\n  );\n  const listRef = React.useRef<List<NavigationNode[]>>(null);\n\n  const VERTICAL_PADDING = 6;\n  const HORIZONTAL_PADDING = 24;\n\n  const recentlyViewedItemIds = documents.recentlyViewed\n    .slice(0, 5)\n    .map((item) => item.id);\n\n  const searchIndex = React.useMemo(\n    () =>\n      new FuzzySearch(items, [\"title\"], {\n        caseSensitive: false,\n      }),\n    [items]\n  );\n\n  React.useEffect(() => {\n    if (searchTerm) {\n      selectNode(null);\n      setExpandedNodes([]);\n    }\n    setActiveNode(0);\n  }, [searchTerm]);\n\n  React.useEffect(() => {\n    setItemRefs((itemRefs) =>\n      map(\n        fill(Array(items.length), 0),\n        (_, i) => itemRefs[i] || React.createRef()\n      )\n    );\n  }, [items.length]);\n\n  React.useEffect(() => {\n    onSelect(selectedNode);\n  }, [selectedNode, onSelect]);\n\n  React.useEffect(() => {\n    if (defaultValue && selectedNode && listRef) {\n      const index = nodes.findIndex((node) => node.id === selectedNode.id);\n      if (index > 0) {\n        setTimeout(() => listRef.current?.scrollToItem(index, \"center\"), 50);\n      }\n    }\n  }, []);\n\n  function getNodes() {\n    function includeDescendants(item: NavigationNode): NavigationNode[] {\n      return expandedNodes.includes(item.id)\n        ? [item, ...descendants(item, 1).flatMap(includeDescendants)]\n        : [item];\n    }\n\n    return searchTerm\n      ? searchIndex.search(searchTerm)\n      : items\n          .filter((item) => recentlyViewedItemIds.includes(item.id))\n          .concat(\n            items.filter((item) => item.type === NavigationNodeType.Collection)\n          )\n          .flatMap(includeDescendants);\n  }\n\n  const nodes = getNodes();\n  const baseDepth = nodes.reduce(\n    (min, node) => (node.depth ? Math.min(min, node.depth) : min),\n    Infinity\n  );\n\n  const scrollNodeIntoView = React.useCallback(\n    (node: number) => {\n      if (itemRefs[node] && itemRefs[node].current) {\n        scrollIntoView(itemRefs[node].current as HTMLSpanElement, {\n          behavior: \"auto\",\n          block: \"center\",\n        });\n      }\n    },\n    [itemRefs]\n  );\n\n  const handleSearch = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchTerm(ev.target.value);\n  };\n\n  const isExpanded = (node: number) => includes(expandedNodes, nodes[node].id);\n\n  const calculateInitialScrollOffset = (itemCount: number) => {\n    if (listRef.current) {\n      const { height, itemSize } = listRef.current.props;\n      const { scrollOffset } = listRef.current.state as {\n        scrollOffset: number;\n      };\n      const itemsHeight = itemCount * itemSize;\n      return itemsHeight < Number(height) ? 0 : scrollOffset;\n    }\n    return 0;\n  };\n\n  const collapse = (node: number) => {\n    const descendantIds = descendants(nodes[node]).map((des) => des.id);\n    setExpandedNodes(\n      difference(expandedNodes, [...descendantIds, nodes[node].id])\n    );\n\n    // remove children\n    const newNodes = filter(nodes, (node) => !includes(descendantIds, node.id));\n    const scrollOffset = calculateInitialScrollOffset(newNodes.length);\n    setInitialScrollOffset(scrollOffset);\n  };\n\n  const expand = (node: number) => {\n    setExpandedNodes(concat(expandedNodes, nodes[node].id));\n\n    // add children\n    const newNodes = nodes.slice();\n    newNodes.splice(node + 1, 0, ...descendants(nodes[node], 1));\n    const scrollOffset = calculateInitialScrollOffset(newNodes.length);\n    setInitialScrollOffset(scrollOffset);\n  };\n\n  React.useEffect(() => {\n    collections.orderedData\n      .filter(\n        (collection) => expandedNodes.includes(collection.id) || searchTerm\n      )\n      .forEach((collection) => {\n        void collection.fetchDocuments();\n      });\n  }, [collections, expandedNodes, searchTerm]);\n\n  const isSelected = (node: number) => {\n    if (!selectedNode) {\n      return false;\n    }\n    const selectedNodeId = selectedNode.id;\n    const nodeId = nodes[node].id;\n\n    return selectedNodeId === nodeId;\n  };\n\n  const hasChildren = (node: number) =>\n    nodes[node].children.length > 0 || nodes[node].type === \"collection\";\n\n  const toggleCollapse = (node: number) => {\n    if (!hasChildren(node)) {\n      return;\n    }\n    if (isExpanded(node)) {\n      collapse(node);\n    } else {\n      expand(node);\n    }\n  };\n\n  const toggleSelect = (node: number) => {\n    if (isSelected(node)) {\n      selectNode(null);\n    } else {\n      selectNode(nodes[node]);\n    }\n  };\n\n  const ListItem = observer(\n    ({\n      index,\n      data,\n      style,\n    }: {\n      index: number;\n      data: NavigationNode[];\n      style: React.CSSProperties;\n    }) => {\n      const node = data[index];\n      const isCollection = node.type === \"collection\";\n      let renderedIcon,\n        title: string,\n        icon: string | undefined,\n        color: string | undefined,\n        path;\n\n      if (isCollection) {\n        const col = collections.get(node.collectionId as string);\n        renderedIcon = col && (\n          <CollectionIcon collection={col} expanded={isExpanded(index)} />\n        );\n        title = node.title;\n      } else {\n        const doc = documents.get(node.id);\n        icon = doc?.icon ?? node.icon ?? node.emoji;\n        color = doc?.color ?? node.color;\n        title = doc?.title ?? node.title;\n\n        if (icon) {\n          renderedIcon = <Icon value={icon} color={color} />;\n        } else if (doc?.isStarred) {\n          renderedIcon = <StarredIcon color={theme.yellow} />;\n        } else {\n          renderedIcon = <DocumentIcon color={theme.textSecondary} />;\n        }\n\n        path = ancestors(node)\n          .map((a) => a.title)\n          .join(\" / \");\n      }\n\n      return searchTerm ? (\n        <DocumentExplorerSearchResult\n          selected={isSelected(index)}\n          active={activeNode === index}\n          style={{\n            ...style,\n            top: (style.top as number) + VERTICAL_PADDING,\n            left: (style.left as number) + HORIZONTAL_PADDING,\n            width: `calc(${style.width} - ${HORIZONTAL_PADDING * 2}px)`,\n          }}\n          onPointerMove={() => setActiveNode(index)}\n          onClick={() => toggleSelect(index)}\n          icon={renderedIcon}\n          title={title}\n          path={path}\n        />\n      ) : (\n        <DocumentExplorerNode\n          style={{\n            ...style,\n            top: (style.top as number) + VERTICAL_PADDING,\n            left: (style.left as number) + HORIZONTAL_PADDING,\n            width: `calc(${style.width} - ${HORIZONTAL_PADDING * 2}px)`,\n          }}\n          onPointerMove={() => setActiveNode(index)}\n          onClick={() => toggleSelect(index)}\n          onDisclosureClick={(ev) => {\n            ev.stopPropagation();\n            toggleCollapse(index);\n          }}\n          selected={isSelected(index)}\n          active={activeNode === index}\n          expanded={isExpanded(index)}\n          icon={renderedIcon}\n          title={title}\n          depth={(node.depth ?? 0) - baseDepth}\n          hasChildren={hasChildren(index)}\n          ref={itemRefs[index]}\n        />\n      );\n    }\n  );\n\n  const focusSearchInput = () => {\n    inputSearchRef.current?.focus();\n  };\n\n  const next = () => Math.min(activeNode + 1, nodes.length - 1);\n\n  const prev = () => Math.max(activeNode - 1, 0);\n\n  const handleKeyDown = (ev: React.KeyboardEvent<HTMLDivElement>) => {\n    switch (ev.key) {\n      case \"ArrowDown\": {\n        ev.preventDefault();\n        ev.stopPropagation();\n        setActiveNode(next());\n        scrollNodeIntoView(next());\n        break;\n      }\n      case \"ArrowUp\": {\n        ev.preventDefault();\n        ev.stopPropagation();\n        if (activeNode === 0) {\n          focusSearchInput();\n        } else {\n          setActiveNode(prev());\n          scrollNodeIntoView(prev());\n        }\n        break;\n      }\n      case \"ArrowLeft\": {\n        if (!searchTerm && isExpanded(activeNode)) {\n          toggleCollapse(activeNode);\n        }\n        break;\n      }\n      case \"ArrowRight\": {\n        if (!searchTerm) {\n          toggleCollapse(activeNode);\n          // let the nodes re-render first and then scroll\n          setTimeout(() => scrollNodeIntoView(activeNode), 0);\n        }\n        break;\n      }\n      case \"Enter\": {\n        if (isModKey(ev)) {\n          onSubmit();\n        } else {\n          toggleSelect(activeNode);\n        }\n        break;\n      }\n    }\n  };\n\n  const innerElementType = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement>\n  >(function innerElementType(\n    { style, ...rest }: React.HTMLAttributes<HTMLDivElement>,\n    ref\n  ) {\n    return (\n      <div\n        ref={ref}\n        style={{\n          ...style,\n          height: `${parseFloat(style?.height + \"\") + VERTICAL_PADDING * 2}px`,\n        }}\n        {...rest}\n      />\n    );\n  });\n\n  return (\n    <Container tabIndex={-1} onKeyDown={handleKeyDown}>\n      <ListSearch\n        ref={inputSearchRef}\n        onChange={handleSearch}\n        placeholder={`${t(\"Search collections & documents\")}…`}\n        autoFocus\n      />\n      <ListContainer>\n        {nodes.length ? (\n          <AutoSizer>\n            {({ width, height }: { width: number; height: number }) => (\n              <Flex role=\"listbox\" column>\n                <List\n                  ref={listRef}\n                  key={nodes.length}\n                  width={width}\n                  height={height}\n                  itemData={nodes}\n                  itemCount={nodes.length}\n                  itemSize={isMobile ? 48 : 32}\n                  innerElementType={innerElementType}\n                  initialScrollOffset={initialScrollOffset}\n                  itemKey={(index, results) => results[index].id}\n                >\n                  {ListItem}\n                </List>\n              </Flex>\n            )}\n          </AutoSizer>\n        ) : (\n          <FlexContainer>\n            <Text as=\"p\" type=\"secondary\">\n              {t(\"No results found\")}.\n            </Text>\n          </FlexContainer>\n        )}\n      </ListContainer>\n    </Container>\n  );\n}\n\nconst Container = styled.div``;\n\nconst FlexContainer = styled(Flex)`\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst ListSearch = styled(InputSearch)`\n  ${Outline} {\n    border-radius: 16px;\n  }\n  margin-bottom: 4px;\n  padding-left: 24px;\n  padding-right: 24px;\n`;\n\nconst ListContainer = styled.div`\n  height: 65vh;\n\n  ${breakpoint(\"tablet\")`\n    height: 40vh;\n  `}\n`;\n\nexport default observer(DocumentExplorer);\n","import * as React from \"react\";\nimport { NavigationNode, NavigationNodeType } from \"@shared/types\";\nimport { sortNavigationNodes } from \"@shared/utils/collections\";\nimport Collection from \"~/models/Collection\";\nimport useStores from \"~/hooks/useStores\";\n\n/**\n * React hook that modifies the document structure\n * of all collections present in store. Adds extra attributes\n * like type, depth and parent to each of the nodes in document\n * structure.\n *\n * @return {NavigationNode[]} collectionTrees root collection nodes of modified trees\n */\nexport default function useCollectionTrees(): NavigationNode[] {\n  const { collections } = useStores();\n\n  const getCollectionTree = (collection: Collection): NavigationNode => {\n    const addType = (node: NavigationNode): NavigationNode => {\n      if (node.children.length > 0) {\n        node.children = node.children.map(addType);\n      }\n\n      node.type = node.type ? node.type : NavigationNodeType.Document;\n      return node;\n    };\n\n    const addParent = (\n      node: NavigationNode,\n      parent: NavigationNode | null = null\n    ): NavigationNode => {\n      if (node.children.length > 0) {\n        node.children = node.children.map((child) => addParent(child, node));\n      }\n\n      node.parent = parent;\n      return node;\n    };\n\n    const addDepth = (node: NavigationNode, depth = 0): NavigationNode => {\n      if (node.children.length > 0) {\n        node.children = node.children.map((child) =>\n          addDepth(child, depth + 1)\n        );\n      }\n\n      node.depth = depth;\n      return node;\n    };\n\n    const addCollectionId = (\n      node: NavigationNode,\n      collectionId = collection.id\n    ): NavigationNode => {\n      if (node.children.length > 0) {\n        node.children = node.children.map((child) =>\n          addCollectionId(child, collectionId)\n        );\n      }\n\n      node.collectionId = collectionId;\n      return node;\n    };\n\n    const collectionNode: NavigationNode = {\n      id: collection.id,\n      title: collection.name,\n      url: collection.path,\n      type: NavigationNodeType.Collection,\n      children: collection.documents\n        ? sortNavigationNodes(collection.documents, collection.sort, true)\n        : [],\n      parent: null,\n    };\n\n    return addParent(addCollectionId(addDepth(addType(collectionNode))));\n  };\n\n  const key = collections.orderedData.map((o) => o.documents?.length).join(\"-\");\n  const collectionTrees = React.useMemo(\n    () => collections.orderedData.map(getCollectionTree),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [collections.orderedData, key]\n  );\n\n  return collectionTrees;\n}\n","import flatten from \"lodash/flatten\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport styled from \"styled-components\";\nimport { ellipsis } from \"@shared/styles\";\nimport { NavigationNode } from \"@shared/types\";\nimport Document from \"~/models/Document\";\nimport Button from \"~/components/Button\";\nimport DocumentExplorer from \"~/components/DocumentExplorer\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\nimport useCollectionTrees from \"~/hooks/useCollectionTrees\";\nimport useStores from \"~/hooks/useStores\";\nimport { flattenTree } from \"~/utils/tree\";\n\ntype Props = {\n  document: Document;\n};\n\nfunction DocumentMove({ document }: Props) {\n  const { dialogs, policies } = useStores();\n  const { t } = useTranslation();\n  const collectionTrees = useCollectionTrees();\n  const [selectedPath, selectPath] = React.useState<NavigationNode | null>(\n    null\n  );\n\n  const items = React.useMemo(() => {\n    // Recursively filter out the document itself and its existing parent doc, if any.\n    const filterSourceDocument = (node: NavigationNode): NavigationNode => ({\n      ...node,\n      children: node.children\n        ?.filter(\n          (c) => c.id !== document.id && c.id !== document.parentDocumentId\n        )\n        .map(filterSourceDocument),\n    });\n\n    // Filter out the document itself and its existing parent doc, if any.\n    const nodes = flatten(collectionTrees.map(flattenTree))\n      .filter(\n        (node) =>\n          node.id !== document.id && node.id !== document.parentDocumentId\n      )\n      .map(filterSourceDocument)\n      // Filter out collections that we don't have permission to create documents in.\n      .filter((node) =>\n        node.collectionId\n          ? policies.get(node.collectionId)?.abilities.createDocument\n          : true\n      );\n\n    // If the document we're moving is a template, only show collections as\n    // move targets.\n    if (document.isTemplate) {\n      return nodes\n        .filter((node) => node.type === \"collection\")\n        .map((node) => ({ ...node, children: [] }));\n    }\n    return nodes;\n  }, [\n    policies,\n    collectionTrees,\n    document.id,\n    document.parentDocumentId,\n    document.isTemplate,\n  ]);\n\n  const move = async () => {\n    if (!selectedPath) {\n      toast.message(t(\"Select a location to move\"));\n      return;\n    }\n\n    try {\n      const { type, id: parentDocumentId } = selectedPath;\n\n      const collectionId = selectedPath.collectionId as string;\n\n      if (type === \"document\") {\n        await document.move({ collectionId, parentDocumentId });\n      } else {\n        await document.move({ collectionId });\n      }\n\n      toast.success(t(\"Document moved\"));\n\n      dialogs.closeAllModals();\n    } catch (err) {\n      toast.error(t(\"Couldn’t move the document, try again?\"));\n    }\n  };\n\n  return (\n    <FlexContainer column>\n      <DocumentExplorer items={items} onSubmit={move} onSelect={selectPath} />\n      <Footer justify=\"space-between\" align=\"center\" gap={8}>\n        <StyledText type=\"secondary\">\n          {selectedPath ? (\n            <Trans\n              defaults=\"Move to <em>{{ location }}</em>\"\n              values={{\n                location: selectedPath.title,\n              }}\n              components={{\n                em: <strong />,\n              }}\n            />\n          ) : (\n            t(\"Select a location to move\")\n          )}\n        </StyledText>\n        <Button disabled={!selectedPath} onClick={move}>\n          {t(\"Move\")}\n        </Button>\n      </Footer>\n    </FlexContainer>\n  );\n}\n\nexport const FlexContainer = styled(Flex)`\n  margin-left: -24px;\n  margin-right: -24px;\n  margin-bottom: -24px;\n  outline: none;\n`;\n\nexport const Footer = styled(Flex)`\n  height: 64px;\n  border-top: 1px solid ${(props) => props.theme.horizontalRule};\n  padding-left: 24px;\n  padding-right: 24px;\n`;\n\nexport const StyledText = styled(Text)`\n  ${ellipsis()}\n  margin-bottom: 0;\n`;\n\nexport default observer(DocumentMove);\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport Document from \"~/models/Document\";\nimport ConfirmationDialog from \"~/components/ConfirmationDialog\";\nimport Flex from \"~/components/Flex\";\nimport useStores from \"~/hooks/useStores\";\n\ntype Props = {\n  document: Document;\n  onSubmit: () => void;\n};\n\nfunction DocumentPermanentDelete({ document, onSubmit }: Props) {\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const history = useHistory();\n\n  const handleSubmit = async () => {\n    await documents.delete(document, {\n      permanent: true,\n    });\n    toast.success(t(\"Document permanently deleted\"));\n    onSubmit();\n    history.push(\"/trash\");\n  };\n\n  return (\n    <Flex column>\n      <ConfirmationDialog\n        submitText={t(\"I’m sure – Delete\")}\n        savingText={`${t(\"Deleting\")}…`}\n        onSubmit={handleSubmit}\n        danger\n      >\n        <Trans\n          defaults=\"Are you sure you want to permanently delete the <em>{{ documentTitle }}</em> document? This action is immediate and cannot be undone.\"\n          values={{\n            documentTitle: document.titleWithDefault,\n          }}\n          components={{\n            em: <strong />,\n          }}\n        />\n      </ConfirmationDialog>\n    </Flex>\n  );\n}\n\nexport default observer(DocumentPermanentDelete);\n","import flatten from \"lodash/flatten\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport styled from \"styled-components\";\nimport { ellipsis } from \"@shared/styles\";\nimport { NavigationNode } from \"@shared/types\";\nimport Document from \"~/models/Document\";\nimport Button from \"~/components/Button\";\nimport DocumentExplorer from \"~/components/DocumentExplorer\";\nimport Flex from \"~/components/Flex\";\nimport Text from \"~/components/Text\";\nimport useCollectionTrees from \"~/hooks/useCollectionTrees\";\nimport useStores from \"~/hooks/useStores\";\nimport { flattenTree } from \"~/utils/tree\";\n\ntype Props = {\n  /** Document to publish */\n  document: Document;\n};\n\nfunction DocumentPublish({ document }: Props) {\n  const { dialogs, policies } = useStores();\n  const { t } = useTranslation();\n  const collectionTrees = useCollectionTrees();\n  const [selectedPath, selectPath] = React.useState<NavigationNode | null>(\n    null\n  );\n  const publishOptions = React.useMemo(\n    () =>\n      flatten(collectionTrees.map(flattenTree)).filter((node) =>\n        node.collectionId\n          ? policies.get(node.collectionId)?.abilities.createDocument\n          : true\n      ),\n    [policies, collectionTrees]\n  );\n\n  const publish = async () => {\n    if (!selectedPath) {\n      toast.message(t(\"Select a location to publish\"));\n      return;\n    }\n\n    try {\n      const { type, id: parentDocumentId } = selectedPath;\n\n      const collectionId = selectedPath.collectionId as string;\n\n      // Also move it under if selected path corresponds to another doc\n      if (type === \"document\") {\n        await document.move({ collectionId, parentDocumentId });\n      }\n\n      document.collectionId = collectionId;\n      await document.save(undefined, { publish: true });\n\n      toast.success(t(\"Document published\"));\n\n      dialogs.closeAllModals();\n    } catch (err) {\n      toast.error(t(\"Couldn’t publish the document, try again?\"));\n    }\n  };\n\n  return (\n    <FlexContainer column>\n      <DocumentExplorer\n        items={publishOptions}\n        onSubmit={publish}\n        onSelect={selectPath}\n      />\n      <Footer justify=\"space-between\" align=\"center\" gap={8}>\n        <StyledText type=\"secondary\">\n          {selectedPath ? (\n            <Trans\n              defaults=\"Publish in <em>{{ location }}</em>\"\n              values={{\n                location: selectedPath.title,\n              }}\n              components={{\n                em: <strong />,\n              }}\n            />\n          ) : (\n            t(\"Select a location to publish\")\n          )}\n        </StyledText>\n        <Button disabled={!selectedPath} onClick={publish}>\n          {t(\"Publish\")}\n        </Button>\n      </Footer>\n    </FlexContainer>\n  );\n}\n\nconst FlexContainer = styled(Flex)`\n  margin-left: -24px;\n  margin-right: -24px;\n  margin-bottom: -24px;\n  outline: none;\n`;\n\nconst Footer = styled(Flex)`\n  height: 64px;\n  border-top: 1px solid ${(props) => props.theme.horizontalRule};\n  padding-left: 24px;\n  padding-right: 24px;\n`;\n\nconst StyledText = styled(Text)`\n  ${ellipsis()}\n  margin-bottom: 0;\n`;\n\nexport default observer(DocumentPublish);\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport ConfirmationDialog from \"~/components/ConfirmationDialog\";\nimport Flex from \"~/components/Flex\";\nimport useStores from \"~/hooks/useStores\";\n\ntype Props = {\n  onSubmit: () => void;\n  shouldRedirect: boolean;\n};\n\nfunction DeleteDocumentsInTrash({ onSubmit, shouldRedirect }: Props) {\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const history = useHistory();\n\n  const handleSubmit = async () => {\n    await documents.emptyTrash();\n    toast.success(t(\"Trash emptied\"));\n    onSubmit();\n    if (shouldRedirect) {\n      history.push(\"/home\");\n    }\n  };\n\n  return (\n    <Flex column>\n      <ConfirmationDialog\n        submitText={t(\"I’m sure – Delete\")}\n        savingText={`${t(\"Deleting\")}…`}\n        onSubmit={handleSubmit}\n        danger\n      >\n        <Trans defaults=\"Are you sure you want to permanently delete all the documents in Trash? This action is immediate and cannot be undone.\" />\n      </ConfirmationDialog>\n    </Flex>\n  );\n}\n\nexport default observer(DeleteDocumentsInTrash);\n","import flatten from \"lodash/flatten\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport styled from \"styled-components\";\nimport { NavigationNode } from \"@shared/types\";\nimport Document from \"~/models/Document\";\nimport { FlexContainer, Footer, StyledText } from \"~/scenes/DocumentMove\";\nimport Button from \"~/components/Button\";\nimport DocumentExplorer from \"~/components/DocumentExplorer\";\nimport useCollectionTrees from \"~/hooks/useCollectionTrees\";\nimport useStores from \"~/hooks/useStores\";\nimport { flattenTree } from \"~/utils/tree\";\nimport Switch from \"./Switch\";\nimport Text from \"./Text\";\n\ntype Props = {\n  /** The original document to duplicate */\n  document: Document;\n  onSubmit: (documents: Document[]) => void;\n};\n\nfunction DocumentCopy({ document, onSubmit }: Props) {\n  const { t } = useTranslation();\n  const { policies } = useStores();\n  const collectionTrees = useCollectionTrees();\n  const [publish, setPublish] = React.useState<boolean>(!!document.publishedAt);\n  const [recursive, setRecursive] = React.useState<boolean>(true);\n  const [selectedPath, selectPath] = React.useState<NavigationNode | null>(\n    null\n  );\n\n  const items = React.useMemo(() => {\n    const nodes = flatten(collectionTrees.map(flattenTree)).filter((node) =>\n      node.collectionId\n        ? policies.get(node.collectionId)?.abilities.createDocument\n        : true\n    );\n\n    if (document.isTemplate) {\n      return nodes\n        .filter((node) => node.type === \"collection\")\n        .map((node) => ({ ...node, children: [] }));\n    }\n    return nodes;\n  }, [policies, collectionTrees, document.isTemplate]);\n\n  const handlePublishChange = React.useCallback(\n    (ev: React.ChangeEvent<HTMLInputElement>) => {\n      setPublish(ev.target.checked);\n    },\n    []\n  );\n\n  const handleRecursiveChange = React.useCallback(\n    (ev: React.ChangeEvent<HTMLInputElement>) => {\n      setRecursive(ev.target.checked);\n    },\n    []\n  );\n\n  const copy = async () => {\n    if (!selectedPath) {\n      toast.message(t(\"Select a location to copy\"));\n      return;\n    }\n\n    try {\n      const result = await document.duplicate({\n        publish,\n        recursive,\n        title: document.title,\n        collectionId: selectedPath.collectionId,\n        ...(selectedPath.type === \"document\"\n          ? { parentDocumentId: selectedPath.id }\n          : {}),\n      });\n\n      toast.success(t(\"Document copied\"));\n      onSubmit(result);\n    } catch (err) {\n      toast.error(t(\"Couldn’t copy the document, try again?\"));\n    }\n  };\n\n  return (\n    <FlexContainer column>\n      <DocumentExplorer\n        items={items}\n        onSubmit={copy}\n        onSelect={selectPath}\n        defaultValue={document.parentDocumentId || document.collectionId || \"\"}\n      />\n      <OptionsContainer>\n        {!document.isTemplate && (\n          <>\n            {document.collectionId && (\n              <Text size=\"small\">\n                <Switch\n                  name=\"publish\"\n                  label={t(\"Publish\")}\n                  labelPosition=\"right\"\n                  checked={publish}\n                  onChange={handlePublishChange}\n                />\n              </Text>\n            )}\n            {document.publishedAt && document.childDocuments.length > 0 && (\n              <Text size=\"small\">\n                <Switch\n                  name=\"recursive\"\n                  label={t(\"Include nested documents\")}\n                  labelPosition=\"right\"\n                  checked={recursive}\n                  onChange={handleRecursiveChange}\n                />\n              </Text>\n            )}\n          </>\n        )}\n      </OptionsContainer>\n      <Footer justify=\"space-between\" align=\"center\" gap={8}>\n        <StyledText type=\"secondary\">\n          {selectedPath ? (\n            <Trans\n              defaults=\"Copy to <em>{{ location }}</em>\"\n              values={{ location: selectedPath.title }}\n              components={{ em: <strong /> }}\n            />\n          ) : (\n            t(\"Select a location to copy\")\n          )}\n        </StyledText>\n        <Button disabled={!selectedPath} onClick={copy}>\n          {t(\"Copy\")}\n        </Button>\n      </Footer>\n    </FlexContainer>\n  );\n}\n\nconst OptionsContainer = styled.div`\n  margin: 16px 0 8px 0;\n  padding-left: 24px;\n  padding-right: 24px;\n`;\n\nexport default observer(DocumentCopy);\n","import * as React from \"react\";\n\ntype Props = {\n  /** The size of the icon, 24px is default to match standard icons */\n  size?: number;\n  /** The color of the icon, defaults to the current text color */\n  color?: string;\n};\n\nexport default function MarkdownIcon({\n  size = 24,\n  color = \"currentColor\",\n  ...rest\n}: Props) {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...rest}\n    >\n      <path\n        d=\"M19.2692 7H3.86538C3.38745 7 3 7.38476 3 7.85938V16.2812C3 16.7559 3.38745 17.1406 3.86538 17.1406H19.2692C19.7472 17.1406 20.1346 16.7559 20.1346 16.2812V7.85938C20.1346 7.38476 19.7472 7 19.2692 7Z\"\n        stroke={color}\n        strokeWidth=\"2\"\n      />\n      <path\n        d=\"M5.16345 14.9922V9.14844H6.89422L8.62499 11.2969L10.3558 9.14844H12.0865V14.9922H10.3558V11.6406L8.62499 13.7891L6.89422 11.6406V14.9922H5.16345ZM15.9808 14.9922L13.3846 12.1562H15.1154V9.14844H16.8461V12.1562H18.5769L15.9808 14.9922Z\"\n        fill={color}\n      />\n    </svg>\n  );\n}\n","import { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport { DocumentPermission } from \"@shared/types\";\nimport User from \"~/models/User\";\nimport UserMembership from \"~/models/UserMembership\";\nimport { Avatar, AvatarSize } from \"~/components/Avatar\";\nimport InputMemberPermissionSelect from \"~/components/InputMemberPermissionSelect\";\nimport Time from \"~/components/Time\";\nimport { EmptySelectValue, Permission } from \"~/types\";\nimport { ListItem } from \"../components/ListItem\";\n\ntype Props = {\n  user: User;\n  membership?: UserMembership | undefined;\n  onAdd?: () => void;\n  onRemove?: () => void;\n  onLeave?: () => void;\n  onUpdate?: (permission: DocumentPermission) => void;\n};\n\nconst DocumentMemberListItem = ({\n  user,\n  membership,\n  onRemove,\n  onLeave,\n  onUpdate,\n}: Props) => {\n  const { t } = useTranslation();\n\n  const handleChange = React.useCallback(\n    (permission: DocumentPermission | typeof EmptySelectValue) => {\n      if (permission === EmptySelectValue) {\n        onRemove?.();\n      } else {\n        onUpdate?.(permission);\n      }\n    },\n    [onRemove, onUpdate]\n  );\n\n  const permissions: Permission[] = [\n    {\n      label: t(\"View only\"),\n      value: DocumentPermission.Read,\n    },\n    {\n      label: t(\"Can edit\"),\n      value: DocumentPermission.ReadWrite,\n    },\n    {\n      label: t(\"Manage\"),\n      value: DocumentPermission.Admin,\n    },\n    {\n      divider: true,\n      label: t(\"Remove\"),\n      value: EmptySelectValue,\n    },\n  ];\n\n  const currentPermission = permissions.find(\n    (p) => p.value === membership?.permission\n  );\n  if (!currentPermission) {\n    return null;\n  }\n  const MaybeLink = membership?.source ? StyledLink : React.Fragment;\n\n  return (\n    <ListItem\n      title={user.name}\n      image={<Avatar model={user} size={AvatarSize.Medium} />}\n      subtitle={\n        membership?.sourceId ? (\n          <Trans>\n            Has access through{\" \"}\n            <MaybeLink\n              // @ts-expect-error to prop does not exist on React.Fragment\n              to={membership.source?.document?.path ?? \"\"}\n            >\n              parent\n            </MaybeLink>\n          </Trans>\n        ) : user.isSuspended ? (\n          t(\"Suspended\")\n        ) : user.isInvited ? (\n          t(\"Invited\")\n        ) : user.lastActiveAt ? (\n          <Trans>\n            Active <Time dateTime={user.lastActiveAt} /> ago\n          </Trans>\n        ) : (\n          t(\"Never signed in\")\n        )\n      }\n      actions={\n        <div style={{ marginRight: -8 }}>\n          <InputMemberPermissionSelect\n            permissions={\n              onLeave\n                ? [\n                    currentPermission,\n                    {\n                      label: `${t(\"Leave\")}…`,\n                      value: EmptySelectValue,\n                    },\n                  ]\n                : permissions\n            }\n            value={membership?.permission}\n            onChange={handleChange}\n            disabled={!onUpdate && !onLeave}\n          />\n        </div>\n      }\n    />\n  );\n};\n\nconst StyledLink = styled(Link)`\n  color: ${s(\"textTertiary\")};\n  text-decoration: underline;\n`;\n\nexport default observer(DocumentMemberListItem);\n","import orderBy from \"lodash/orderBy\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport styled, { useTheme } from \"styled-components\";\nimport { s } from \"@shared/styles\";\nimport { DocumentPermission } from \"@shared/types\";\nimport Document from \"~/models/Document\";\nimport UserMembership from \"~/models/UserMembership\";\nimport { GroupAvatar } from \"~/components/Avatar\";\nimport InputMemberPermissionSelect from \"~/components/InputMemberPermissionSelect\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport useStores from \"~/hooks/useStores\";\nimport { EmptySelectValue, Permission } from \"~/types\";\nimport { homePath } from \"~/utils/routeHelpers\";\nimport { ListItem } from \"../components/ListItem\";\nimport DocumentMemberListItem from \"./DocumentMemberListItem\";\n\ntype Props = {\n  /** Document to which team members are supposed to be invited */\n  document: Document;\n  /** Children to be rendered before the list of members */\n  children?: React.ReactNode;\n  /** List of users that have been invited during the current editing session */\n  invitedInSession: string[];\n};\n\nfunction DocumentMembersList({ document, invitedInSession }: Props) {\n  const { userMemberships, groupMemberships } = useStores();\n\n  const user = useCurrentUser();\n  const history = useHistory();\n  const can = usePolicy(document);\n  const { t } = useTranslation();\n  const theme = useTheme();\n\n  const handleRemoveUser = React.useCallback(\n    async (item) => {\n      try {\n        await userMemberships.delete({\n          documentId: document.id,\n          userId: item.id,\n        } as UserMembership);\n\n        if (item.id === user.id) {\n          history.push(homePath());\n        } else {\n          toast.success(\n            t(`{{ userName }} was removed from the document`, {\n              userName: item.name,\n            })\n          );\n        }\n      } catch (err) {\n        toast.error(t(\"Could not remove user\"));\n      }\n    },\n    [t, history, userMemberships, user, document]\n  );\n\n  const handleUpdateUser = React.useCallback(\n    async (user, permission) => {\n      try {\n        await userMemberships.create({\n          documentId: document.id,\n          userId: user.id,\n          permission,\n        });\n        toast.success(\n          t(`Permissions for {{ userName }} updated`, {\n            userName: user.name,\n          })\n        );\n      } catch (err) {\n        toast.error(t(\"Could not update user\"));\n      }\n    },\n    [t, userMemberships, document]\n  );\n\n  // Order newly added users first during the current editing session, on reload members are\n  // ordered by name\n  const members = React.useMemo(\n    () =>\n      orderBy(\n        document.members,\n        (user) =>\n          (invitedInSession.includes(user.id) ? \"_\" : \"\") +\n          user.name.toLocaleLowerCase(),\n        \"asc\"\n      ),\n    [document.members, invitedInSession]\n  );\n\n  const permissions = React.useMemo(\n    () =>\n      [\n        {\n          label: t(\"View only\"),\n          value: DocumentPermission.Read,\n        },\n        {\n          label: t(\"Can edit\"),\n          value: DocumentPermission.ReadWrite,\n        },\n        {\n          label: t(\"Manage\"),\n          value: DocumentPermission.Admin,\n        },\n        {\n          divider: true,\n          label: t(\"Remove\"),\n          value: EmptySelectValue,\n        },\n      ] as Permission[],\n    [t]\n  );\n\n  return (\n    <>\n      {groupMemberships\n        .inDocument(document.id)\n        .sort((a, b) =>\n          (\n            (invitedInSession.includes(a.group.id) ? \"_\" : \"\") + a.group.name\n          ).localeCompare(b.group.name)\n        )\n        .map((membership) => {\n          const MaybeLink = membership?.source ? StyledLink : React.Fragment;\n          return (\n            <ListItem\n              key={membership.id}\n              image={\n                <GroupAvatar\n                  group={membership.group}\n                  backgroundColor={theme.modalBackground}\n                />\n              }\n              title={membership.group.name}\n              subtitle={\n                membership.sourceId ? (\n                  <Trans>\n                    Has access through{\" \"}\n                    <MaybeLink\n                      // @ts-expect-error to prop does not exist on React.Fragment\n                      to={membership.source?.document?.path ?? \"\"}\n                    >\n                      parent\n                    </MaybeLink>\n                  </Trans>\n                ) : (\n                  t(\"{{ count }} member\", {\n                    count: membership.group.memberCount,\n                  })\n                )\n              }\n              actions={\n                <div style={{ marginRight: -8 }}>\n                  <InputMemberPermissionSelect\n                    style={{ margin: 0 }}\n                    permissions={permissions}\n                    onChange={async (\n                      permission: DocumentPermission | typeof EmptySelectValue\n                    ) => {\n                      if (permission === EmptySelectValue) {\n                        await groupMemberships.delete({\n                          documentId: document.id,\n                          groupId: membership.groupId,\n                        });\n                      } else {\n                        await groupMemberships.create({\n                          documentId: document.id,\n                          groupId: membership.groupId,\n                          permission,\n                        });\n                      }\n                    }}\n                    disabled={!can.manageUsers}\n                    value={membership.permission}\n                    labelHidden\n                    nude\n                  />\n                </div>\n              }\n            />\n          );\n        })}\n      {members.map((item) => (\n        <DocumentMemberListItem\n          key={item.id}\n          user={item}\n          membership={item.getMembership(document)}\n          onRemove={() => handleRemoveUser(item)}\n          onUpdate={\n            can.manageUsers\n              ? (permission) => handleUpdateUser(item, permission)\n              : undefined\n          }\n          onLeave={\n            item.id === user.id ? () => handleRemoveUser(item) : undefined\n          }\n        />\n      ))}\n    </>\n  );\n}\n\nconst StyledLink = styled(Link)`\n  color: ${s(\"textTertiary\")};\n  text-decoration: underline;\n`;\n\nexport default observer(DocumentMembersList);\n","import debounce from \"lodash/debounce\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { observer } from \"mobx-react\";\nimport { CopyIcon, GlobeIcon, InfoIcon, QuestionMarkIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport styled, { useTheme } from \"styled-components\";\nimport Flex from \"@shared/components/Flex\";\nimport Squircle from \"@shared/components/Squircle\";\nimport { s } from \"@shared/styles\";\nimport { UrlHelper } from \"@shared/utils/UrlHelper\";\nimport Document from \"~/models/Document\";\nimport Share from \"~/models/Share\";\nimport Input, { NativeInput } from \"~/components/Input\";\nimport Switch from \"~/components/Switch\";\nimport env from \"~/env\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport { AvatarSize } from \"../../Avatar\";\nimport CopyToClipboard from \"../../CopyToClipboard\";\nimport NudeButton from \"../../NudeButton\";\nimport { ResizingHeightContainer } from \"../../ResizingHeightContainer\";\nimport Text from \"../../Text\";\nimport Tooltip from \"../../Tooltip\";\nimport { ListItem } from \"../components/ListItem\";\n\ntype Props = {\n  /** The document to share. */\n  document: Document;\n  /** The existing share model, if any. */\n  share: Share | null | undefined;\n  /** The existing share parent model, if any. */\n  sharedParent: Share | null | undefined;\n  /** Ref to the Copy Link button */\n  copyButtonRef?: React.RefObject<HTMLButtonElement>;\n  onRequestClose?: () => void;\n};\n\nfunction PublicAccess({ document, share, sharedParent }: Props) {\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const [validationError, setValidationError] = React.useState(\"\");\n  const [urlId, setUrlId] = React.useState(share?.urlId);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const can = usePolicy(share);\n  const documentAbilities = usePolicy(document);\n  const canPublish = can.update && documentAbilities.share;\n\n  React.useEffect(() => {\n    setUrlId(share?.urlId);\n  }, [share?.urlId]);\n\n  const handleIndexingChanged = React.useCallback(\n    async (event) => {\n      try {\n        await share?.save({\n          allowIndexing: event.currentTarget.checked,\n        });\n      } catch (err) {\n        toast.error(err.message);\n      }\n    },\n    [share]\n  );\n\n  const handlePublishedChange = React.useCallback(\n    async (event) => {\n      try {\n        await share?.save({\n          published: event.currentTarget.checked,\n        });\n      } catch (err) {\n        toast.error(err.message);\n      }\n    },\n    [share]\n  );\n\n  const handleUrlChange = React.useMemo(\n    () =>\n      debounce(async (ev) => {\n        if (!share) {\n          return;\n        }\n\n        const val = ev.target.value;\n        setUrlId(val);\n        if (val && !UrlHelper.SHARE_URL_SLUG_REGEX.test(val)) {\n          setValidationError(\n            t(\"Only lowercase letters, digits and dashes allowed\")\n          );\n        } else {\n          setValidationError(\"\");\n          if (share.urlId !== val) {\n            try {\n              await share.save({\n                urlId: isEmpty(val) ? null : val,\n              });\n            } catch (err) {\n              if (err.message.includes(\"must be unique\")) {\n                setValidationError(t(\"Sorry, this link has already been used\"));\n              }\n            }\n          }\n        }\n      }, 500),\n    [t, share]\n  );\n\n  const handleCopied = React.useCallback(() => {\n    toast.success(t(\"Public link copied to clipboard\"));\n  }, [t]);\n\n  const documentTitle = sharedParent?.documentTitle;\n\n  const shareUrl = sharedParent?.url\n    ? `${sharedParent.url}${document.url}`\n    : share?.url ?? \"\";\n\n  const copyButton = (\n    <Tooltip content={t(\"Copy public link\")} placement=\"top\">\n      <CopyToClipboard text={shareUrl} onCopy={handleCopied}>\n        <NudeButton type=\"button\" disabled={!share} style={{ marginRight: 3 }}>\n          <CopyIcon color={theme.placeholder} size={18} />\n        </NudeButton>\n      </CopyToClipboard>\n    </Tooltip>\n  );\n\n  return (\n    <Wrapper>\n      <ListItem\n        title={t(\"Web\")}\n        subtitle={\n          <>\n            {sharedParent && !document.isDraft ? (\n              <Trans>\n                Anyone with the link can access because the parent document,{\" \"}\n                <StyledLink to={`/doc/${sharedParent.documentId}`}>\n                  {{ documentTitle }}\n                </StyledLink>\n                , is shared\n              </Trans>\n            ) : (\n              t(\"Allow anyone with the link to access\")\n            )}\n          </>\n        }\n        image={\n          <Squircle color={theme.text} size={AvatarSize.Medium}>\n            <GlobeIcon color={theme.background} size={18} />\n          </Squircle>\n        }\n        actions={\n          sharedParent && !document.isDraft ? null : (\n            <Switch\n              aria-label={t(\"Publish to internet\")}\n              checked={share?.published ?? false}\n              onChange={handlePublishedChange}\n              disabled={!canPublish}\n              width={26}\n              height={14}\n            />\n          )\n        }\n      />\n\n      <ResizingHeightContainer>\n        {share?.published && (\n          <ListItem\n            title={\n              <Text type=\"tertiary\" as={Flex}>\n                {t(\"Search engine indexing\")}&nbsp;\n                <Tooltip\n                  content={t(\n                    \"Disable this setting to discourage search engines from indexing the page\"\n                  )}\n                >\n                  <QuestionMarkIcon size={18} />\n                </Tooltip>\n              </Text>\n            }\n            actions={\n              <Switch\n                aria-label={t(\"Search engine indexing\")}\n                checked={share?.allowIndexing ?? false}\n                onChange={handleIndexingChanged}\n                width={26}\n                height={14}\n              />\n            }\n          />\n        )}\n\n        {sharedParent?.published ? (\n          <ShareLinkInput type=\"text\" disabled defaultValue={shareUrl}>\n            {copyButton}\n          </ShareLinkInput>\n        ) : share?.published ? (\n          <ShareLinkInput\n            type=\"text\"\n            ref={inputRef}\n            placeholder={share?.id}\n            onChange={handleUrlChange}\n            error={validationError}\n            defaultValue={urlId}\n            prefix={\n              <DomainPrefix onClick={() => inputRef.current?.focus()}>\n                {env.URL.replace(/https?:\\/\\//, \"\") + \"/s/\"}\n              </DomainPrefix>\n            }\n          >\n            {copyButton}\n          </ShareLinkInput>\n        ) : null}\n\n        {share?.published && !share.includeChildDocuments ? (\n          <Text as=\"p\" type=\"tertiary\" size=\"xsmall\">\n            <StyledInfoIcon size={18} />\n            <span>\n              {t(\n                \"Nested documents are not shared on the web. Toggle sharing to enable access, this will be the default behavior in the future\"\n              )}\n              .\n            </span>\n          </Text>\n        ) : null}\n      </ResizingHeightContainer>\n    </Wrapper>\n  );\n}\n\nconst StyledInfoIcon = styled(InfoIcon)`\n  vertical-align: bottom;\n  margin-right: 2px;\n`;\n\nconst Wrapper = styled.div`\n  padding-bottom: 8px;\n`;\n\nconst DomainPrefix = styled.span`\n  padding: 0 2px 0 8px;\n  flex: 0 1 auto;\n  cursor: text;\n  color: ${s(\"placeholder\")};\n  user-select: none;\n`;\n\nconst ShareLinkInput = styled(Input)`\n  margin-top: 12px;\n  min-width: 100px;\n  flex: 1;\n\n  ${NativeInput}:not(:first-child) {\n    padding: 4px 8px 4px 0;\n    flex: 1;\n  }\n`;\n\nconst StyledLink = styled(Link)`\n  color: ${s(\"textSecondary\")};\n  text-decoration: underline;\n`;\n\nexport default observer(PublicAccess);\n","import { observer } from \"mobx-react\";\nimport { MoreIcon, QuestionMarkIcon, UserIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled, { useTheme } from \"styled-components\";\nimport Squircle from \"@shared/components/Squircle\";\nimport { Pagination } from \"@shared/constants\";\nimport { s } from \"@shared/styles\";\nimport { CollectionPermission, IconType } from \"@shared/types\";\nimport { determineIconType } from \"@shared/utils/icon\";\nimport type Collection from \"~/models/Collection\";\nimport type Document from \"~/models/Document\";\nimport Share from \"~/models/Share\";\nimport Flex from \"~/components/Flex\";\nimport Scrollable from \"~/components/Scrollable\";\nimport Text from \"~/components/Text\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useMaxHeight from \"~/hooks/useMaxHeight\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport useRequest from \"~/hooks/useRequest\";\nimport useStores from \"~/hooks/useStores\";\nimport { Avatar, AvatarSize } from \"../../Avatar\";\nimport CollectionIcon from \"../../Icons/CollectionIcon\";\nimport Tooltip from \"../../Tooltip\";\nimport { Separator } from \"../components\";\nimport { ListItem } from \"../components/ListItem\";\nimport { Placeholder } from \"../components/Placeholder\";\nimport DocumentMemberList from \"./DocumentMemberList\";\nimport PublicAccess from \"./PublicAccess\";\n\ntype Props = {\n  /** The document being shared. */\n  document: Document;\n  /** List of users that have been invited during the current editing session */\n  invitedInSession: string[];\n  /** The existing share model, if any. */\n  share: Share | null | undefined;\n  /** The existing share parent model, if any. */\n  sharedParent: Share | null | undefined;\n  /** Callback fired when the popover requests to be closed. */\n  onRequestClose: () => void;\n  /** Whether the popover is visible. */\n  visible: boolean;\n};\n\nexport const AccessControlList = observer(\n  ({\n    document,\n    invitedInSession,\n    share,\n    sharedParent,\n    onRequestClose,\n    visible,\n  }: Props) => {\n    const { t } = useTranslation();\n    const theme = useTheme();\n    const collection = document.collection;\n    const usersInCollection = useUsersInCollection(collection);\n    const user = useCurrentUser();\n    const { userMemberships, groupMemberships } = useStores();\n    const collectionSharingDisabled = document.collection?.sharing === false;\n    const team = useCurrentTeam();\n    const can = usePolicy(document);\n    const canCollection = usePolicy(collection);\n    const documentId = document.id;\n\n    const containerRef = React.useRef<HTMLDivElement | null>(null);\n    const { maxHeight, calcMaxHeight } = useMaxHeight({\n      elementRef: containerRef,\n      maxViewportPercentage: 65,\n      margin: 24,\n    });\n\n    const { loading: userMembershipLoading, request: fetchUserMemberships } =\n      useRequest(\n        React.useCallback(\n          () =>\n            userMemberships.fetchDocumentMemberships({\n              id: documentId,\n              limit: Pagination.defaultLimit,\n            }),\n          [userMemberships, documentId]\n        )\n      );\n\n    const { loading: groupMembershipLoading, request: fetchGroupMemberships } =\n      useRequest(\n        React.useCallback(\n          () => groupMemberships.fetchAll({ documentId }),\n          [groupMemberships, documentId]\n        )\n      );\n\n    const hasMemberships =\n      groupMemberships.inDocument(documentId)?.length > 0 ||\n      document.members.length > 0;\n    const showLoading =\n      !hasMemberships && (groupMembershipLoading || userMembershipLoading);\n\n    React.useEffect(() => {\n      void fetchUserMemberships();\n      void fetchGroupMemberships();\n    }, [fetchUserMemberships, fetchGroupMemberships]);\n\n    React.useEffect(() => {\n      calcMaxHeight();\n    });\n\n    return (\n      <ScrollableContainer\n        ref={containerRef}\n        hiddenScrollbars\n        style={{ maxHeight }}\n      >\n        {showLoading ? (\n          <Placeholder />\n        ) : (\n          <>\n            {collection && canCollection.readDocument ? (\n              <>\n                {collection.permission ? (\n                  <ListItem\n                    image={\n                      <Squircle color={theme.accent} size={AvatarSize.Medium}>\n                        <UserIcon color={theme.accentText} size={16} />\n                      </Squircle>\n                    }\n                    title={t(\"All members\")}\n                    subtitle={t(\"Everyone in the workspace\")}\n                    actions={\n                      <AccessTooltip>\n                        {collection?.permission ===\n                        CollectionPermission.ReadWrite\n                          ? t(\"Can edit\")\n                          : t(\"Can view\")}\n                      </AccessTooltip>\n                    }\n                  />\n                ) : usersInCollection ? (\n                  <ListItem\n                    image={<CollectionSquircle collection={collection} />}\n                    title={collection.name}\n                    subtitle={t(\"Everyone in the collection\")}\n                    actions={<AccessTooltip>{t(\"Can view\")}</AccessTooltip>}\n                  />\n                ) : (\n                  <ListItem\n                    image={<Avatar model={user} />}\n                    title={user.name}\n                    subtitle={t(\"You have full access\")}\n                    actions={<AccessTooltip>{t(\"Can edit\")}</AccessTooltip>}\n                  />\n                )}\n                <DocumentMemberList\n                  document={document}\n                  invitedInSession={invitedInSession}\n                />\n              </>\n            ) : document.isDraft ? (\n              <>\n                <ListItem\n                  image={<Avatar model={document.createdBy} />}\n                  title={document.createdBy?.name}\n                  actions={\n                    <AccessTooltip content={t(\"Created the document\")}>\n                      {t(\"Can edit\")}\n                    </AccessTooltip>\n                  }\n                />\n                <DocumentMemberList\n                  document={document}\n                  invitedInSession={invitedInSession}\n                />\n              </>\n            ) : (\n              <>\n                <DocumentMemberList\n                  document={document}\n                  invitedInSession={invitedInSession}\n                />\n                <ListItem\n                  image={\n                    <Squircle color={theme.accent} size={AvatarSize.Medium}>\n                      <MoreIcon color={theme.accentText} size={16} />\n                    </Squircle>\n                  }\n                  title={t(\"Other people\")}\n                  subtitle={t(\"Other workspace members may have access\")}\n                  actions={\n                    <AccessTooltip\n                      content={t(\n                        \"This document may be shared with more workspace members through a parent document or collection you do not have access to\"\n                      )}\n                    />\n                  }\n                />\n              </>\n            )}\n          </>\n        )}\n        {team.sharing && can.share && !collectionSharingDisabled && visible && (\n          <Sticky>\n            {document.members.length ? <Separator /> : null}\n            <PublicAccess\n              document={document}\n              share={share}\n              sharedParent={sharedParent}\n              onRequestClose={onRequestClose}\n            />\n          </Sticky>\n        )}\n      </ScrollableContainer>\n    );\n  }\n);\n\nconst AccessTooltip = ({\n  children,\n  content,\n}: {\n  children?: React.ReactNode;\n  content?: string;\n}) => {\n  const { t } = useTranslation();\n\n  return (\n    <Flex align=\"center\" gap={2}>\n      <Text type=\"secondary\" size=\"small\">\n        {children}\n      </Text>\n      <Tooltip content={content ?? t(\"Access inherited from collection\")}>\n        <QuestionMarkIcon size={18} />\n      </Tooltip>\n    </Flex>\n  );\n};\n\nconst CollectionSquircle = ({ collection }: { collection: Collection }) => {\n  const theme = useTheme();\n  const iconType = determineIconType(collection.icon)!;\n  const squircleColor =\n    iconType === IconType.SVG ? collection.color! : theme.slateLight;\n  const iconSize = iconType === IconType.SVG ? 16 : 22;\n\n  return (\n    <Squircle color={squircleColor} size={AvatarSize.Medium}>\n      <CollectionIcon\n        collection={collection}\n        color={theme.white}\n        size={iconSize}\n      />\n    </Squircle>\n  );\n};\n\nfunction useUsersInCollection(collection?: Collection) {\n  const { users, memberships } = useStores();\n  const { request } = useRequest(() =>\n    memberships.fetchPage({ limit: 1, id: collection!.id })\n  );\n\n  React.useEffect(() => {\n    if (collection && !collection.permission) {\n      void request();\n    }\n  }, [collection]);\n\n  return collection\n    ? collection.permission\n      ? true\n      : users.inCollection(collection.id).length > 1\n    : false;\n}\n\nconst Sticky = styled.div`\n  background: ${s(\"menuBackground\")};\n  position: sticky;\n  bottom: -12px;\n`;\n\nconst ScrollableContainer = styled(Scrollable)`\n  padding: 12px 24px;\n  margin: -12px -24px;\n`;\n","import { isEmail } from \"class-validator\";\nimport { m } from \"framer-motion\";\nimport { observer } from \"mobx-react\";\nimport { BackIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport { DocumentPermission } from \"@shared/types\";\nimport Document from \"~/models/Document\";\nimport Group from \"~/models/Group\";\nimport User from \"~/models/User\";\nimport { Avatar, GroupAvatar, AvatarSize } from \"~/components/Avatar\";\nimport NudeButton from \"~/components/NudeButton\";\nimport { createAction } from \"~/actions\";\nimport { UserSection } from \"~/actions/sections\";\nimport useBoolean from \"~/hooks/useBoolean\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport useKeyDown from \"~/hooks/useKeyDown\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport usePrevious from \"~/hooks/usePrevious\";\nimport useStores from \"~/hooks/useStores\";\nimport { Permission } from \"~/types\";\nimport { documentPath, urlify } from \"~/utils/routeHelpers\";\nimport { Wrapper, presence } from \"../components\";\nimport { CopyLinkButton } from \"../components/CopyLinkButton\";\nimport { PermissionAction } from \"../components/PermissionAction\";\nimport { SearchInput } from \"../components/SearchInput\";\nimport { Suggestions } from \"../components/Suggestions\";\nimport { AccessControlList } from \"./AccessControlList\";\n\ntype Props = {\n  /** The document to share. */\n  document: Document;\n  /** Callback fired when the popover requests to be closed. */\n  onRequestClose: () => void;\n  /** Whether the popover is visible. */\n  visible: boolean;\n};\n\nfunction SharePopover({ document, onRequestClose, visible }: Props) {\n  const team = useCurrentTeam();\n  const { t } = useTranslation();\n  const can = usePolicy(document);\n  const { shares } = useStores();\n  const share = shares.getByDocumentId(document.id);\n  const sharedParent = shares.getByDocumentParents(document.id);\n  const [hasRendered, setHasRendered] = React.useState(visible);\n  const { users, userMemberships, groups, groupMemberships } = useStores();\n  const [query, setQuery] = React.useState(\"\");\n  const [picker, showPicker, hidePicker] = useBoolean();\n  const [invitedInSession, setInvitedInSession] = React.useState<string[]>([]);\n  const [pendingIds, setPendingIds] = React.useState<string[]>([]);\n  const [permission, setPermission] = React.useState<DocumentPermission>(\n    DocumentPermission.Read\n  );\n\n  const prevPendingIds = usePrevious(pendingIds);\n\n  const suggestionsRef = React.useRef<HTMLDivElement | null>(null);\n  const searchInputRef = React.useRef<HTMLInputElement | null>(null);\n\n  useKeyDown(\n    \"Escape\",\n    (ev) => {\n      if (!visible) {\n        return;\n      }\n      ev.preventDefault();\n      ev.stopImmediatePropagation();\n\n      if (picker) {\n        hidePicker();\n      } else {\n        onRequestClose();\n      }\n    },\n    {\n      allowInInput: true,\n    }\n  );\n\n  // Fetch sharefocus the link button when the popover is opened\n  React.useEffect(() => {\n    if (visible) {\n      void document.share();\n      setHasRendered(true);\n    }\n  }, [document, hidePicker, visible]);\n\n  // Hide the picker when the popover is closed\n  React.useEffect(() => {\n    if (visible) {\n      setPendingIds([]);\n      hidePicker();\n    }\n  }, [hidePicker, visible]);\n\n  // Clear the query when picker is closed\n  React.useEffect(() => {\n    if (!picker) {\n      setQuery(\"\");\n    }\n  }, [picker]);\n\n  React.useEffect(() => {\n    if (prevPendingIds && pendingIds.length > prevPendingIds.length) {\n      setQuery(\"\");\n      searchInputRef.current?.focus();\n    } else if (prevPendingIds && pendingIds.length < prevPendingIds.length) {\n      const firstPending = suggestionsRef.current?.firstElementChild;\n\n      if (firstPending) {\n        (firstPending as HTMLAnchorElement).focus();\n      }\n    }\n  }, [pendingIds, prevPendingIds]);\n\n  const inviteAction = React.useMemo(\n    () =>\n      createAction({\n        name: t(\"Invite\"),\n        section: UserSection,\n        perform: async () => {\n          const invited = await Promise.all(\n            pendingIds.map(async (idOrEmail) => {\n              let user, group;\n\n              // convert email to user\n              if (isEmail(idOrEmail)) {\n                const response = await users.invite([\n                  {\n                    email: idOrEmail,\n                    name: idOrEmail,\n                    role: team.defaultUserRole,\n                  },\n                ]);\n                user = response[0];\n              } else {\n                user = users.get(idOrEmail);\n                group = groups.get(idOrEmail);\n              }\n\n              if (user) {\n                await userMemberships.create({\n                  documentId: document.id,\n                  userId: user.id,\n                  permission,\n                });\n                return user;\n              }\n\n              if (group) {\n                await groupMemberships.create({\n                  documentId: document.id,\n                  groupId: group.id,\n                  permission,\n                });\n                return group;\n              }\n\n              return;\n            })\n          );\n\n          const invitedUsers = invited.filter(\n            (item) => item instanceof User\n          ) as User[];\n          const invitedGroups = invited.filter(\n            (item) => item instanceof Group\n          ) as Group[];\n\n          if (invitedUsers.length > 0) {\n            // Special case for the common action of adding a single user.\n            if (invitedUsers.length === 1) {\n              const user = invitedUsers[0];\n              toast.message(\n                t(\"{{ userName }} was added to the document\", {\n                  userName: user.name,\n                }),\n                {\n                  icon: <Avatar model={user} size={AvatarSize.Toast} />,\n                }\n              );\n            } else {\n              toast.message(\n                t(\"{{ count }} people added to the document\", {\n                  count: invitedUsers.length,\n                })\n              );\n            }\n          }\n          if (invitedGroups.length > 0) {\n            // Special case for the common action of adding a single group.\n            if (invitedGroups.length === 1) {\n              const group = invitedGroups[0];\n              toast.message(\n                t(\"{{ userName }} was added to the document\", {\n                  userName: group.name,\n                }),\n                {\n                  icon: <GroupAvatar group={group} size={AvatarSize.Toast} />,\n                }\n              );\n            } else {\n              toast.message(\n                t(\"{{ count }} groups added to the document\", {\n                  count: invitedGroups.length,\n                })\n              );\n            }\n          }\n\n          setInvitedInSession((prev) => [...prev, ...pendingIds]);\n          setPendingIds([]);\n          hidePicker();\n        },\n      }),\n    [\n      document.id,\n      groupMemberships,\n      groups,\n      hidePicker,\n      userMemberships,\n      pendingIds,\n      permission,\n      t,\n      team.defaultUserRole,\n      users,\n    ]\n  );\n\n  const handleQuery = React.useCallback(\n    (event) => {\n      showPicker();\n      setQuery(event.target.value);\n    },\n    [showPicker, setQuery]\n  );\n\n  const handleAddPendingId = React.useCallback(\n    (id: string) => {\n      setPendingIds((prev) => [...prev, id]);\n    },\n    [setPendingIds]\n  );\n\n  const handleRemovePendingId = React.useCallback(\n    (id: string) => {\n      setPendingIds((prev) => prev.filter((i) => i !== id));\n    },\n    [setPendingIds]\n  );\n\n  const handleKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLInputElement>) => {\n      if (ev.nativeEvent.isComposing) {\n        return;\n      }\n      if (ev.key === \"ArrowDown\" && !ev.shiftKey) {\n        ev.preventDefault();\n\n        if (ev.currentTarget.value) {\n          const length = ev.currentTarget.value.length;\n          const selectionStart = ev.currentTarget.selectionStart || 0;\n          if (selectionStart < length) {\n            ev.currentTarget.selectionStart = length;\n            ev.currentTarget.selectionEnd = length;\n            return;\n          }\n        }\n\n        const firstSuggestion = suggestionsRef.current?.firstElementChild;\n\n        if (firstSuggestion) {\n          (firstSuggestion as HTMLAnchorElement).focus();\n        }\n      }\n    },\n    []\n  );\n\n  const handleEscape = React.useCallback(\n    () => searchInputRef.current?.focus(),\n    []\n  );\n\n  const permissions = React.useMemo(\n    () =>\n      [\n        {\n          label: t(\"View only\"),\n          value: DocumentPermission.Read,\n        },\n        {\n          label: t(\"Can edit\"),\n          value: DocumentPermission.ReadWrite,\n        },\n        {\n          label: t(\"Manage\"),\n          value: DocumentPermission.Admin,\n        },\n      ] as Permission[],\n    [t]\n  );\n\n  if (!hasRendered) {\n    return null;\n  }\n\n  const backButton = (\n    <>\n      {picker && (\n        <NudeButton\n          key=\"back\"\n          as={m.button}\n          {...presence}\n          onClick={(event) => {\n            event.preventDefault();\n            event.stopPropagation();\n            hidePicker();\n          }}\n        >\n          <BackIcon />\n        </NudeButton>\n      )}\n    </>\n  );\n\n  const rightButton = picker ? (\n    pendingIds.length ? (\n      <PermissionAction\n        key=\"invite\"\n        permission={permission}\n        permissions={permissions}\n        action={inviteAction}\n        onChange={(value: DocumentPermission) => setPermission(value)}\n      />\n    ) : null\n  ) : (\n    <CopyLinkButton\n      key=\"copy-link\"\n      url={urlify(documentPath(document))}\n      onCopy={onRequestClose}\n    />\n  );\n\n  return (\n    <Wrapper>\n      {can.manageUsers && (\n        <SearchInput\n          ref={searchInputRef}\n          onChange={handleQuery}\n          onClick={showPicker}\n          onKeyDown={handleKeyDown}\n          query={query}\n          back={backButton}\n          action={rightButton}\n        />\n      )}\n\n      {picker && (\n        <Suggestions\n          ref={suggestionsRef}\n          document={document}\n          query={query}\n          pendingIds={pendingIds}\n          addPendingId={handleAddPendingId}\n          removePendingId={handleRemovePendingId}\n          onEscape={handleEscape}\n        />\n      )}\n\n      <div style={{ display: picker ? \"none\" : \"block\" }}>\n        <AccessControlList\n          document={document}\n          invitedInSession={invitedInSession}\n          share={share}\n          sharedParent={sharedParent}\n          visible={visible}\n          onRequestClose={onRequestClose}\n        />\n      </div>\n    </Wrapper>\n  );\n}\n\nexport default observer(SharePopover);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"~/components/Flex\";\n\nconst Label = ({ icon, value }: { icon: React.ReactNode; value: string }) => (\n  <Flex align=\"center\" gap={4}>\n    <IconWrapper>{icon}</IconWrapper>\n    {value}\n  </Flex>\n);\n\nconst IconWrapper = styled.span`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 24px;\n  width: 24px;\n  overflow: hidden;\n  flex-shrink: 0;\n`;\n\nexport default Label;\n","import { observer } from \"mobx-react\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { toast } from \"sonner\";\nimport { AvatarSize } from \"~/components/Avatar\";\nimport CollectionIcon from \"~/components/Icons/CollectionIcon\";\nimport InputSelect, { Option } from \"~/components/InputSelect\";\nimport TeamLogo from \"~/components/TeamLogo\";\nimport useCurrentTeam from \"~/hooks/useCurrentTeam\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport useRequest from \"~/hooks/useRequest\";\nimport useStores from \"~/hooks/useStores\";\nimport Label from \"./Label\";\n\ntype Props = {\n  /** Collection ID to select by default. */\n  defaultCollectionId?: string | null;\n  /** Callback to be called when a collection is selected. */\n  onSelect: (collectionId: string | null) => void;\n};\n\nconst SelectLocation = ({ defaultCollectionId, onSelect }: Props) => {\n  const { t } = useTranslation();\n  const team = useCurrentTeam();\n  const { collections, policies } = useStores();\n  const can = usePolicy(team);\n\n  const { loading, error } = useRequest(\n    React.useCallback(async () => {\n      if (!collections.isLoaded) {\n        await collections.fetchAll({\n          limit: 100,\n        });\n      }\n    }, [collections])\n  );\n\n  const workspaceOption: Option | null = can.createTemplate\n    ? {\n        label: (\n          <Label\n            icon={<TeamLogo model={team} size={AvatarSize.Toast} />}\n            value={t(\"Workspace\")}\n          />\n        ),\n        value: \"workspace\",\n      }\n    : null;\n\n  const collectionOptions: Option[] = React.useMemo(\n    () =>\n      collections.orderedData.reduce<Option[]>((memo, collection) => {\n        const canCollection = policies.abilities(collection.id);\n\n        if (canCollection.createDocument) {\n          memo.push({\n            label: (\n              <Label\n                icon={<CollectionIcon collection={collection} />}\n                value={collection.name}\n              />\n            ),\n            value: collection.id,\n          });\n        }\n\n        return memo;\n      }, []),\n    [collections.orderedData, policies]\n  );\n\n  const options: Option[] = workspaceOption\n    ? collectionOptions.length\n      ? [\n          workspaceOption,\n          ...collectionOptions.map((opt, idx) => {\n            if (idx !== 0) {\n              return opt;\n            }\n            opt.divider = true;\n            return opt;\n          }),\n        ]\n      : [workspaceOption]\n    : collectionOptions;\n\n  const handleSelection = React.useCallback(\n    (value: string | null) => {\n      onSelect(value === \"workspace\" ? null : value);\n    },\n    [onSelect]\n  );\n\n  if (error) {\n    toast.error(t(\"Collections could not be loaded, please reload the app\"));\n  }\n\n  if (loading || !options.length) {\n    return null;\n  }\n\n  return (\n    <InputSelect\n      value={defaultCollectionId ?? \"workspace\"}\n      options={options}\n      onChange={handleSelection}\n      ariaLabel={t(\"Location\")}\n      label={t(\"Location\")}\n    />\n  );\n};\n\nexport default observer(SelectLocation);\n","import invariant from \"invariant\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"sonner\";\nimport ConfirmationDialog from \"~/components/ConfirmationDialog\";\nimport Flex from \"~/components/Flex\";\nimport Switch from \"~/components/Switch\";\nimport useStores from \"~/hooks/useStores\";\nimport { documentPath } from \"~/utils/routeHelpers\";\nimport SelectLocation from \"./SelectLocation\";\n\ntype Props = {\n  documentId: string;\n};\n\nfunction DocumentTemplatizeDialog({ documentId }: Props) {\n  const history = useHistory();\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const document = documents.get(documentId);\n  invariant(document, \"Document must exist\");\n\n  const [publish, setPublish] = React.useState(true);\n  const [collectionId, setCollectionId] = React.useState(\n    document.collectionId ?? null\n  );\n\n  const handlePublishChange = React.useCallback(\n    (ev: React.ChangeEvent<HTMLInputElement>) => {\n      setPublish(ev.target.checked);\n    },\n    []\n  );\n\n  const handleSubmit = React.useCallback(async () => {\n    const template = await document?.templatize({\n      collectionId,\n      publish,\n    });\n    if (template) {\n      history.push(documentPath(template));\n      toast.success(t(\"Template created, go ahead and customize it\"));\n    }\n  }, [t, document, history, collectionId, publish]);\n\n  return (\n    <ConfirmationDialog\n      onSubmit={handleSubmit}\n      submitText={t(\"Create template\")}\n      savingText={`${t(\"Creating\")}…`}\n    >\n      <Flex column gap={12}>\n        <div>\n          <Trans\n            defaults=\"Creating a template from <em>{{titleWithDefault}}</em> is a non-destructive action – we'll make a copy of the document and turn it into a template that can be used as a starting point for new documents.\"\n            values={{\n              titleWithDefault: document.titleWithDefault,\n            }}\n            components={{\n              em: <strong />,\n            }}\n          />\n        </div>\n        <SelectLocation\n          defaultCollectionId={collectionId}\n          onSelect={setCollectionId}\n        />\n        <Switch\n          name=\"publish\"\n          label={t(\"Published\")}\n          note={t(\"Enable other members to use the template immediately\")}\n          checked={publish}\n          onChange={handlePublishChange}\n        />\n      </Flex>\n    </ConfirmationDialog>\n  );\n}\n\nexport default observer(DocumentTemplatizeDialog);\n","import copy from \"copy-to-clipboard\";\nimport invariant from \"invariant\";\nimport {\n  DownloadIcon,\n  DuplicateIcon,\n  StarredIcon,\n  PrintIcon,\n  UnstarredIcon,\n  DocumentIcon,\n  NewDocumentIcon,\n  ShapesIcon,\n  ImportIcon,\n  PinIcon,\n  SearchIcon,\n  UnsubscribeIcon,\n  SubscribeIcon,\n  MoveIcon,\n  TrashIcon,\n  CrossIcon,\n  ArchiveIcon,\n  ShuffleIcon,\n  HistoryIcon,\n  GraphIcon,\n  UnpublishIcon,\n  PublishIcon,\n  CommentIcon,\n  CopyIcon,\n  EyeIcon,\n  PadlockIcon,\n  GlobeIcon,\n  LogoutIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { toast } from \"sonner\";\nimport Icon from \"@shared/components/Icon\";\nimport {\n  ExportContentType,\n  TeamPreference,\n  NavigationNode,\n} from \"@shared/types\";\nimport { getEventFiles } from \"@shared/utils/files\";\nimport UserMembership from \"~/models/UserMembership\";\nimport DocumentDelete from \"~/scenes/DocumentDelete\";\nimport DocumentMove from \"~/scenes/DocumentMove\";\nimport DocumentPermanentDelete from \"~/scenes/DocumentPermanentDelete\";\nimport DocumentPublish from \"~/scenes/DocumentPublish\";\nimport DeleteDocumentsInTrash from \"~/scenes/Trash/components/DeleteDocumentsInTrash\";\nimport ConfirmationDialog from \"~/components/ConfirmationDialog\";\nimport DocumentCopy from \"~/components/DocumentCopy\";\nimport MarkdownIcon from \"~/components/Icons/MarkdownIcon\";\nimport SharePopover from \"~/components/Sharing/Document\";\nimport { getHeaderExpandedKey } from \"~/components/Sidebar/components/Header\";\nimport DocumentTemplatizeDialog from \"~/components/TemplatizeDialog\";\nimport { createAction } from \"~/actions\";\nimport {\n  ActiveDocumentSection,\n  DocumentSection,\n  TrashSection,\n} from \"~/actions/sections\";\nimport env from \"~/env\";\nimport { setPersistedState } from \"~/hooks/usePersistedState\";\nimport history from \"~/utils/history\";\nimport {\n  documentInsightsPath,\n  documentHistoryPath,\n  homePath,\n  newDocumentPath,\n  newNestedDocumentPath,\n  searchPath,\n  documentPath,\n  urlify,\n  trashPath,\n} from \"~/utils/routeHelpers\";\n\nexport const openDocument = createAction({\n  name: ({ t }) => t(\"Open document\"),\n  analyticsName: \"Open document\",\n  section: DocumentSection,\n  shortcut: [\"o\", \"d\"],\n  keywords: \"go to\",\n  icon: <DocumentIcon />,\n  children: ({ stores }) => {\n    const nodes = stores.collections.navigationNodes.reduce(\n      (acc, node) => [...acc, ...node.children],\n      [] as NavigationNode[]\n    );\n\n    return nodes.map((item) => ({\n      // Note: using url which includes the slug rather than id here to bust\n      // cache if the document is renamed\n      id: item.url,\n      name: item.title,\n      icon: item.icon ? (\n        <Icon value={item.icon} color={item.color ?? undefined} />\n      ) : (\n        <DocumentIcon />\n      ),\n      section: DocumentSection,\n      perform: () => history.push(item.url),\n    }));\n  },\n});\n\nexport const createDocument = createAction({\n  name: ({ t }) => t(\"New document\"),\n  analyticsName: \"New document\",\n  section: DocumentSection,\n  icon: <NewDocumentIcon />,\n  keywords: \"create\",\n  visible: ({ currentTeamId, activeCollectionId, stores }) => {\n    if (\n      activeCollectionId &&\n      !stores.policies.abilities(activeCollectionId).createDocument\n    ) {\n      return false;\n    }\n\n    return (\n      !!currentTeamId && stores.policies.abilities(currentTeamId).createDocument\n    );\n  },\n  perform: ({ activeCollectionId, sidebarContext }) =>\n    history.push(newDocumentPath(activeCollectionId), {\n      sidebarContext,\n    }),\n});\n\nexport const createDraftDocument = createAction({\n  name: ({ t }) => t(\"New draft\"),\n  analyticsName: \"New document\",\n  section: DocumentSection,\n  icon: <NewDocumentIcon />,\n  keywords: \"create document\",\n  visible: ({ currentTeamId, stores }) =>\n    !!currentTeamId && stores.policies.abilities(currentTeamId).createDocument,\n  perform: ({ sidebarContext }) =>\n    history.push(newDocumentPath(), {\n      sidebarContext,\n    }),\n});\n\nexport const createDocumentFromTemplate = createAction({\n  name: ({ t }) => t(\"New from template\"),\n  analyticsName: \"New document\",\n  section: DocumentSection,\n  icon: <NewDocumentIcon />,\n  keywords: \"create\",\n  visible: ({\n    currentTeamId,\n    activeCollectionId,\n    activeDocumentId,\n    stores,\n  }) => {\n    const document = activeDocumentId\n      ? stores.documents.get(activeDocumentId)\n      : undefined;\n\n    if (\n      !currentTeamId ||\n      !document?.isTemplate ||\n      !!document?.isDraft ||\n      !!document?.isDeleted\n    ) {\n      return false;\n    }\n\n    if (activeCollectionId) {\n      return stores.policies.abilities(activeCollectionId).createDocument;\n    }\n    return stores.policies.abilities(currentTeamId).createDocument;\n  },\n  perform: ({ activeCollectionId, activeDocumentId, sidebarContext }) =>\n    history.push(\n      newDocumentPath(activeCollectionId, { templateId: activeDocumentId }),\n      {\n        sidebarContext,\n      }\n    ),\n});\n\nexport const createNestedDocument = createAction({\n  name: ({ t }) => t(\"New nested document\"),\n  analyticsName: \"New document\",\n  section: ActiveDocumentSection,\n  icon: <NewDocumentIcon />,\n  keywords: \"create\",\n  visible: ({ currentTeamId, activeDocumentId, stores }) =>\n    !!currentTeamId &&\n    !!activeDocumentId &&\n    stores.policies.abilities(currentTeamId).createDocument &&\n    stores.policies.abilities(activeDocumentId).createChildDocument,\n  perform: ({ activeDocumentId, sidebarContext }) =>\n    history.push(newNestedDocumentPath(activeDocumentId), {\n      sidebarContext,\n    }),\n});\n\nexport const starDocument = createAction({\n  name: ({ t }) => t(\"Star\"),\n  analyticsName: \"Star document\",\n  section: ActiveDocumentSection,\n  icon: <StarredIcon />,\n  keywords: \"favorite bookmark\",\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !document?.isStarred && stores.policies.abilities(activeDocumentId).star\n    );\n  },\n  perform: async ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    await document?.star();\n    setPersistedState(getHeaderExpandedKey(\"starred\"), true);\n  },\n});\n\nexport const unstarDocument = createAction({\n  name: ({ t }) => t(\"Unstar\"),\n  analyticsName: \"Unstar document\",\n  section: ActiveDocumentSection,\n  icon: <UnstarredIcon />,\n  keywords: \"unfavorite unbookmark\",\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !!document?.isStarred &&\n      stores.policies.abilities(activeDocumentId).unstar\n    );\n  },\n  perform: async ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    await document?.unstar();\n  },\n});\n\nexport const publishDocument = createAction({\n  name: ({ t }) => t(\"Publish\"),\n  analyticsName: \"Publish document\",\n  section: ActiveDocumentSection,\n  icon: <PublishIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !!document?.isDraft && stores.policies.abilities(activeDocumentId).publish\n    );\n  },\n  perform: async ({ activeDocumentId, stores, t }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    if (document?.publishedAt) {\n      return;\n    }\n\n    if (document?.collectionId || document?.template) {\n      await document.save(undefined, {\n        publish: true,\n      });\n      toast.success(\n        t(\"Published {{ documentName }}\", {\n          documentName: document.noun,\n        })\n      );\n    } else if (document) {\n      stores.dialogs.openModal({\n        title: t(\"Publish document\"),\n        content: <DocumentPublish document={document} />,\n      });\n    }\n  },\n});\n\nexport const unpublishDocument = createAction({\n  name: ({ t }) => t(\"Unpublish\"),\n  analyticsName: \"Unpublish document\",\n  section: ActiveDocumentSection,\n  icon: <UnpublishIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    return stores.policies.abilities(activeDocumentId).unpublish;\n  },\n  perform: async ({ activeDocumentId, stores, t }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    if (!document) {\n      return;\n    }\n\n    await document.unpublish();\n\n    toast.success(\n      t(\"Unpublished {{ documentName }}\", {\n        documentName: document.noun,\n      })\n    );\n  },\n});\n\nexport const subscribeDocument = createAction({\n  name: ({ t }) => t(\"Subscribe\"),\n  analyticsName: \"Subscribe to document\",\n  section: ActiveDocumentSection,\n  icon: <SubscribeIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n\n    return (\n      !document?.collection?.isSubscribed &&\n      !document?.isSubscribed &&\n      stores.policies.abilities(activeDocumentId).subscribe\n    );\n  },\n  perform: async ({ activeDocumentId, stores, t }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    await document?.subscribe();\n    toast.success(t(\"Subscribed to document notifications\"));\n  },\n});\n\nexport const unsubscribeDocument = createAction({\n  name: ({ t }) => t(\"Unsubscribe\"),\n  analyticsName: \"Unsubscribe from document\",\n  section: ActiveDocumentSection,\n  icon: <UnsubscribeIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n\n    return (\n      !!document?.collection?.isSubscribed ||\n      (!!document?.isSubscribed &&\n        stores.policies.abilities(activeDocumentId).unsubscribe)\n    );\n  },\n  perform: async ({ activeDocumentId, stores, currentUserId, t }) => {\n    if (!activeDocumentId || !currentUserId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n\n    await document?.unsubscribe();\n\n    toast.success(t(\"Unsubscribed from document notifications\"));\n  },\n});\n\nexport const shareDocument = createAction({\n  name: ({ t }) => `${t(\"Permissions\")}…`,\n  analyticsName: \"Share document\",\n  section: ActiveDocumentSection,\n  icon: <PadlockIcon />,\n  visible: ({ stores, activeDocumentId }) => {\n    const can = stores.policies.abilities(activeDocumentId!);\n    return can.manageUsers || can.share;\n  },\n  perform: async ({ activeDocumentId, stores, currentUserId, t }) => {\n    if (!activeDocumentId || !currentUserId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    if (!document) {\n      return;\n    }\n\n    stores.dialogs.openModal({\n      style: { marginBottom: -12 },\n      title: t(\"Share this document\"),\n      content: (\n        <SharePopover\n          document={document}\n          onRequestClose={stores.dialogs.closeAllModals}\n          visible\n        />\n      ),\n    });\n  },\n});\n\nexport const downloadDocumentAsHTML = createAction({\n  name: ({ t }) => t(\"HTML\"),\n  analyticsName: \"Download document as HTML\",\n  section: ActiveDocumentSection,\n  keywords: \"html export\",\n  icon: <DownloadIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId && stores.policies.abilities(activeDocumentId).download,\n  perform: async ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    await document?.download(ExportContentType.Html);\n  },\n});\n\nexport const downloadDocumentAsPDF = createAction({\n  name: ({ t }) => t(\"PDF\"),\n  analyticsName: \"Download document as PDF\",\n  section: ActiveDocumentSection,\n  keywords: \"export\",\n  icon: <DownloadIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId &&\n    stores.policies.abilities(activeDocumentId).download &&\n    env.PDF_EXPORT_ENABLED,\n  perform: ({ activeDocumentId, t, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const id = toast.loading(`${t(\"Exporting\")}…`);\n    const document = stores.documents.get(activeDocumentId);\n    return document\n      ?.download(ExportContentType.Pdf)\n      .finally(() => id && toast.dismiss(id));\n  },\n});\n\nexport const downloadDocumentAsMarkdown = createAction({\n  name: ({ t }) => t(\"Markdown\"),\n  analyticsName: \"Download document as Markdown\",\n  section: ActiveDocumentSection,\n  keywords: \"md markdown export\",\n  icon: <DownloadIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId && stores.policies.abilities(activeDocumentId).download,\n  perform: async ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    await document?.download(ExportContentType.Markdown);\n  },\n});\n\nexport const downloadDocument = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Download\") : t(\"Download document\"),\n  analyticsName: \"Download document\",\n  section: ActiveDocumentSection,\n  icon: <DownloadIcon />,\n  keywords: \"export\",\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId && stores.policies.abilities(activeDocumentId).download,\n  children: [\n    downloadDocumentAsHTML,\n    downloadDocumentAsPDF,\n    downloadDocumentAsMarkdown,\n  ],\n});\n\nexport const copyDocumentAsMarkdown = createAction({\n  name: ({ t }) => t(\"Copy as Markdown\"),\n  section: ActiveDocumentSection,\n  keywords: \"clipboard\",\n  icon: <MarkdownIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId && stores.policies.abilities(activeDocumentId).download,\n  perform: ({ stores, activeDocumentId, t }) => {\n    const document = activeDocumentId\n      ? stores.documents.get(activeDocumentId)\n      : undefined;\n    if (document) {\n      copy(document.toMarkdown());\n      toast.success(t(\"Markdown copied to clipboard\"));\n    }\n  },\n});\n\nexport const copyDocumentShareLink = createAction({\n  name: ({ t }) => t(\"Copy public link\"),\n  section: ActiveDocumentSection,\n  keywords: \"clipboard share\",\n  icon: <GlobeIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId &&\n    !!stores.shares.getByDocumentId(activeDocumentId)?.published,\n  perform: ({ stores, activeDocumentId, t }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    const share = stores.shares.getByDocumentId(activeDocumentId);\n    if (share) {\n      copy(share.url);\n      toast.success(t(\"Link copied to clipboard\"));\n    }\n  },\n});\n\nexport const copyDocumentLink = createAction({\n  name: ({ t }) => t(\"Copy link\"),\n  section: ActiveDocumentSection,\n  keywords: \"clipboard\",\n  icon: <CopyIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId }) => !!activeDocumentId,\n  perform: ({ stores, activeDocumentId, t }) => {\n    const document = activeDocumentId\n      ? stores.documents.get(activeDocumentId)\n      : undefined;\n    if (document) {\n      copy(urlify(documentPath(document)));\n      toast.success(t(\"Link copied to clipboard\"));\n    }\n  },\n});\n\nexport const copyDocument = createAction({\n  name: ({ t }) => t(\"Copy\"),\n  analyticsName: \"Copy document\",\n  section: ActiveDocumentSection,\n  icon: <CopyIcon />,\n  keywords: \"clipboard\",\n  children: [copyDocumentLink, copyDocumentShareLink, copyDocumentAsMarkdown],\n});\n\nexport const duplicateDocument = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Duplicate\") : t(\"Duplicate document\"),\n  analyticsName: \"Duplicate document\",\n  section: ActiveDocumentSection,\n  icon: <DuplicateIcon />,\n  keywords: \"copy\",\n  visible: ({ activeDocumentId, stores }) =>\n    !!activeDocumentId && stores.policies.abilities(activeDocumentId).duplicate,\n  perform: async ({ activeDocumentId, t, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    invariant(document, \"Document must exist\");\n\n    stores.dialogs.openModal({\n      title: t(\"Copy document\"),\n      content: (\n        <DocumentCopy\n          document={document}\n          onSubmit={(response) => {\n            stores.dialogs.closeAllModals();\n            history.push(documentPath(response[0]));\n          }}\n        />\n      ),\n    });\n  },\n});\n\n/**\n * Pin a document to a collection. Pinned documents will be displayed at the top\n * of the collection for all collection members to see.\n */\nexport const pinDocumentToCollection = createAction({\n  name: ({ activeDocumentId = \"\", t, stores }) => {\n    const selectedDocument = stores.documents.get(activeDocumentId);\n    const collectionName = selectedDocument\n      ? stores.documents.getCollectionForDocument(selectedDocument)?.name\n      : t(\"collection\");\n\n    return t(\"Pin to {{collectionName}}\", {\n      collectionName,\n    });\n  },\n  analyticsName: \"Pin document to collection\",\n  section: ActiveDocumentSection,\n  icon: <PinIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeCollectionId, activeDocumentId, stores }) => {\n    if (!activeDocumentId || !activeCollectionId) {\n      return false;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    return (\n      !!stores.policies.abilities(activeDocumentId).pin && !document?.pinned\n    );\n  },\n  perform: async ({ activeDocumentId, activeCollectionId, t, stores }) => {\n    if (!activeDocumentId || !activeCollectionId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n    await document?.pin(document.collectionId);\n\n    const collection = stores.collections.get(activeCollectionId);\n\n    if (!collection || !location.pathname.startsWith(collection?.url)) {\n      toast.success(t(\"Pinned to collection\"));\n    }\n  },\n});\n\n/**\n * Pin a document to team home. Pinned documents will be displayed at the top\n * of the home screen for all team members to see.\n */\nexport const pinDocumentToHome = createAction({\n  name: ({ t }) => t(\"Pin to home\"),\n  analyticsName: \"Pin document to home\",\n  section: ActiveDocumentSection,\n  icon: <PinIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, currentTeamId, stores }) => {\n    if (!currentTeamId || !activeDocumentId) {\n      return false;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n\n    return (\n      !!stores.policies.abilities(activeDocumentId).pinToHome &&\n      !document?.pinnedToHome\n    );\n  },\n  perform: async ({ activeDocumentId, location, t, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    const document = stores.documents.get(activeDocumentId);\n\n    await document?.pin();\n\n    if (location.pathname !== homePath()) {\n      toast.success(t(\"Pinned to home\"));\n    }\n  },\n});\n\nexport const pinDocument = createAction({\n  name: ({ t }) => t(\"Pin\"),\n  analyticsName: \"Pin document\",\n  section: ActiveDocumentSection,\n  icon: <PinIcon />,\n  children: [pinDocumentToCollection, pinDocumentToHome],\n});\n\nexport const searchInDocument = createAction({\n  name: ({ t }) => t(\"Search in document\"),\n  analyticsName: \"Search document\",\n  section: ActiveDocumentSection,\n  shortcut: [`Meta+/`],\n  icon: <SearchIcon />,\n  visible: ({ stores, activeDocumentId }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return !!document?.isActive;\n  },\n  perform: ({ activeDocumentId }) => {\n    history.push(searchPath({ documentId: activeDocumentId }));\n  },\n});\n\nexport const printDocument = createAction({\n  name: ({ t, isContextMenu }) =>\n    isContextMenu ? t(\"Print\") : t(\"Print document\"),\n  analyticsName: \"Print document\",\n  section: ActiveDocumentSection,\n  icon: <PrintIcon />,\n  visible: ({ activeDocumentId }) => !!(activeDocumentId && window.print),\n  perform: () => {\n    queueMicrotask(window.print);\n  },\n});\n\nexport const importDocument = createAction({\n  name: ({ t }) => t(\"Import document\"),\n  analyticsName: \"Import document\",\n  section: DocumentSection,\n  icon: <ImportIcon />,\n  keywords: \"upload\",\n  visible: ({ activeCollectionId, activeDocumentId, stores }) => {\n    if (activeDocumentId) {\n      return !!stores.policies.abilities(activeDocumentId).createChildDocument;\n    }\n\n    if (activeCollectionId) {\n      return !!stores.policies.abilities(activeCollectionId).update;\n    }\n\n    return false;\n  },\n  perform: ({ activeCollectionId, activeDocumentId, stores }) => {\n    const { documents } = stores;\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = documents.importFileTypes.join(\", \");\n\n    input.onchange = async (ev) => {\n      const files = getEventFiles(ev);\n\n      const file = files[0];\n\n      try {\n        const document = await documents.import(\n          file,\n          activeDocumentId,\n          activeCollectionId,\n          {\n            publish: true,\n          }\n        );\n        history.push(document.url);\n      } catch (err) {\n        toast.error(err.message);\n      }\n    };\n\n    input.click();\n  },\n});\n\nexport const createTemplateFromDocument = createAction({\n  name: ({ t }) => t(\"Templatize\"),\n  analyticsName: \"Templatize document\",\n  section: ActiveDocumentSection,\n  icon: <ShapesIcon />,\n  keywords: \"new create template\",\n  visible: ({ activeCollectionId, activeDocumentId, stores }) => {\n    const document = activeDocumentId\n      ? stores.documents.get(activeDocumentId)\n      : undefined;\n    if (document?.isTemplate || !document?.isActive) {\n      return false;\n    }\n    return !!(\n      !!activeCollectionId &&\n      stores.policies.abilities(activeCollectionId).updateDocument\n    );\n  },\n  perform: ({ activeDocumentId, stores, t, event }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    event?.preventDefault();\n    event?.stopPropagation();\n    stores.dialogs.openModal({\n      title: t(\"Create template\"),\n      content: <DocumentTemplatizeDialog documentId={activeDocumentId} />,\n    });\n  },\n});\n\nexport const openRandomDocument = createAction({\n  id: \"random\",\n  name: ({ t }) => t(`Open random document`),\n  analyticsName: \"Open random document\",\n  section: DocumentSection,\n  icon: <ShuffleIcon />,\n  perform: ({ stores, activeDocumentId }) => {\n    const nodes = stores.collections.navigationNodes\n      .reduce((acc, node) => [...acc, ...node.children], [] as NavigationNode[])\n      .filter((node) => node.id !== activeDocumentId);\n\n    const random = nodes[Math.round(Math.random() * nodes.length)];\n\n    if (random) {\n      history.push(random.url);\n    }\n  },\n});\n\nexport const searchDocumentsForQuery = (query: string) =>\n  createAction({\n    id: \"search\",\n    name: ({ t }) =>\n      t(`Search documents for \"{{searchQuery}}\"`, { searchQuery: query }),\n    analyticsName: \"Search documents\",\n    section: DocumentSection,\n    icon: <SearchIcon />,\n    perform: () => history.push(searchPath({ query })),\n    visible: ({ location }) => location.pathname !== searchPath(),\n  });\n\nexport const moveTemplateToWorkspace = createAction({\n  name: ({ t }) => t(\"Move to workspace\"),\n  analyticsName: \"Move template to workspace\",\n  section: DocumentSection,\n  icon: <MoveIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    if (!document || !document.template || document.isWorkspaceTemplate) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeDocumentId).move;\n  },\n  perform: async ({ activeDocumentId, stores }) => {\n    if (activeDocumentId) {\n      const document = stores.documents.get(activeDocumentId);\n      if (!document) {\n        return;\n      }\n\n      await document.move({\n        collectionId: null,\n      });\n    }\n  },\n});\n\nexport const moveDocumentToCollection = createAction({\n  name: ({ activeDocumentId, stores, t }) => {\n    if (!activeDocumentId) {\n      return t(\"Move\");\n    }\n    const document = stores.documents.get(activeDocumentId);\n    return document?.template && document?.collectionId\n      ? t(\"Move to collection\")\n      : t(\"Move\");\n  },\n  analyticsName: \"Move document\",\n  section: ActiveDocumentSection,\n  icon: <MoveIcon />,\n  iconInContextMenu: false,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeDocumentId).move;\n  },\n  perform: ({ activeDocumentId, stores, t }) => {\n    if (activeDocumentId) {\n      const document = stores.documents.get(activeDocumentId);\n      if (!document) {\n        return;\n      }\n\n      stores.dialogs.openModal({\n        title: t(\"Move {{ documentType }}\", {\n          documentType: document.noun,\n        }),\n        content: <DocumentMove document={document} />,\n      });\n    }\n  },\n});\n\nexport const moveDocument = createAction({\n  name: ({ t }) => t(\"Move\"),\n  analyticsName: \"Move document\",\n  section: ActiveDocumentSection,\n  icon: <MoveIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    // Don't show the button if this is a non-workspace template.\n    if (!document || (document.template && !document.isWorkspaceTemplate)) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeDocumentId).move;\n  },\n  perform: moveDocumentToCollection.perform,\n});\n\nexport const moveTemplate = createAction({\n  name: ({ t }) => t(\"Move\"),\n  analyticsName: \"Move document\",\n  section: ActiveDocumentSection,\n  icon: <MoveIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    // Don't show the menu if this is not a template (or) a workspace template.\n    if (!document || !document.template || document.isWorkspaceTemplate) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeDocumentId).move;\n  },\n  children: [moveTemplateToWorkspace, moveDocumentToCollection],\n});\n\nexport const archiveDocument = createAction({\n  name: ({ t }) => `${t(\"Archive\")}…`,\n  analyticsName: \"Archive document\",\n  section: ActiveDocumentSection,\n  icon: <ArchiveIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeDocumentId).archive;\n  },\n  perform: async ({ activeDocumentId, stores, t }) => {\n    const { dialogs, documents } = stores;\n\n    if (activeDocumentId) {\n      const document = documents.get(activeDocumentId);\n      if (!document) {\n        return;\n      }\n\n      dialogs.openModal({\n        title: t(\"Are you sure you want to archive this document?\"),\n        content: (\n          <ConfirmationDialog\n            onSubmit={async () => {\n              await document.archive();\n              toast.success(t(\"Document archived\"));\n            }}\n            savingText={`${t(\"Archiving\")}…`}\n          >\n            {t(\n              \"Archiving this document will remove it from the collection and search results.\"\n            )}\n          </ConfirmationDialog>\n        ),\n      });\n    }\n  },\n});\n\nexport const deleteDocument = createAction({\n  name: ({ t }) => `${t(\"Delete\")}…`,\n  analyticsName: \"Delete document\",\n  section: ActiveDocumentSection,\n  icon: <TrashIcon />,\n  dangerous: true,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeDocumentId).delete;\n  },\n  perform: ({ activeDocumentId, stores, t }) => {\n    if (activeDocumentId) {\n      const document = stores.documents.get(activeDocumentId);\n      if (!document) {\n        return;\n      }\n\n      stores.dialogs.openModal({\n        title: t(\"Delete {{ documentName }}\", {\n          documentName: document.noun,\n        }),\n        content: (\n          <DocumentDelete\n            document={document}\n            onSubmit={stores.dialogs.closeAllModals}\n          />\n        ),\n      });\n    }\n  },\n});\n\nexport const permanentlyDeleteDocument = createAction({\n  name: ({ t }) => t(\"Permanently delete\"),\n  analyticsName: \"Permanently delete document\",\n  section: ActiveDocumentSection,\n  icon: <CrossIcon />,\n  dangerous: true,\n  visible: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return false;\n    }\n    return !!stores.policies.abilities(activeDocumentId).permanentDelete;\n  },\n  perform: ({ activeDocumentId, stores, t }) => {\n    if (activeDocumentId) {\n      const document = stores.documents.get(activeDocumentId);\n      if (!document) {\n        return;\n      }\n\n      stores.dialogs.openModal({\n        title: t(\"Permanently delete {{ documentName }}\", {\n          documentName: document.noun,\n        }),\n        content: (\n          <DocumentPermanentDelete\n            document={document}\n            onSubmit={stores.dialogs.closeAllModals}\n          />\n        ),\n      });\n    }\n  },\n});\n\nexport const permanentlyDeleteDocumentsInTrash = createAction({\n  name: ({ t }) => t(\"Empty trash\"),\n  analyticsName: \"Empty trash\",\n  section: TrashSection,\n  icon: <TrashIcon />,\n  dangerous: true,\n  visible: ({ stores }) =>\n    stores.documents.deleted.length > 0 && !!stores.auth.user?.isAdmin,\n  perform: ({ stores, t, location }) => {\n    stores.dialogs.openModal({\n      title: t(\"Permanently delete documents in trash\"),\n      content: (\n        <DeleteDocumentsInTrash\n          onSubmit={stores.dialogs.closeAllModals}\n          shouldRedirect={location.pathname === trashPath()}\n        />\n      ),\n    });\n  },\n});\n\nexport const openDocumentComments = createAction({\n  name: ({ t }) => t(\"Comments\"),\n  analyticsName: \"Open comments\",\n  section: ActiveDocumentSection,\n  icon: <CommentIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    const can = stores.policies.abilities(activeDocumentId ?? \"\");\n    return (\n      !!activeDocumentId &&\n      can.comment &&\n      !!stores.auth.team?.getPreference(TeamPreference.Commenting)\n    );\n  },\n  perform: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    stores.ui.toggleComments();\n  },\n});\n\nexport const openDocumentHistory = createAction({\n  name: ({ t }) => t(\"History\"),\n  analyticsName: \"Open document history\",\n  section: ActiveDocumentSection,\n  icon: <HistoryIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    const can = stores.policies.abilities(activeDocumentId ?? \"\");\n    return !!activeDocumentId && can.listRevisions;\n  },\n  perform: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    if (!document) {\n      return;\n    }\n    history.push(documentHistoryPath(document));\n  },\n});\n\nexport const openDocumentInsights = createAction({\n  name: ({ t }) => t(\"Insights\"),\n  analyticsName: \"Open document insights\",\n  section: ActiveDocumentSection,\n  icon: <GraphIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    const can = stores.policies.abilities(activeDocumentId ?? \"\");\n    const document = activeDocumentId\n      ? stores.documents.get(activeDocumentId)\n      : undefined;\n\n    return (\n      !!activeDocumentId &&\n      can.listViews &&\n      !document?.isTemplate &&\n      !document?.isDeleted\n    );\n  },\n  perform: ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    if (!document) {\n      return;\n    }\n    history.push(documentInsightsPath(document));\n  },\n});\n\nexport const toggleViewerInsights = createAction({\n  name: ({ t, stores, activeDocumentId }) => {\n    const document = activeDocumentId\n      ? stores.documents.get(activeDocumentId)\n      : undefined;\n    return document?.insightsEnabled\n      ? t(\"Disable viewer insights\")\n      : t(\"Enable viewer insights\");\n  },\n  analyticsName: \"Toggle viewer insights\",\n  section: ActiveDocumentSection,\n  icon: <EyeIcon />,\n  visible: ({ activeDocumentId, stores }) => {\n    const can = stores.policies.abilities(activeDocumentId ?? \"\");\n    return can.updateInsights;\n  },\n  perform: async ({ activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n    const document = stores.documents.get(activeDocumentId);\n    if (!document) {\n      return;\n    }\n\n    await document.save({\n      insightsEnabled: !document.insightsEnabled,\n    });\n  },\n});\n\nexport const leaveDocument = createAction({\n  name: ({ t }) => t(\"Leave document\"),\n  analyticsName: \"Leave document\",\n  section: ActiveDocumentSection,\n  icon: <LogoutIcon />,\n  visible: ({ currentUserId, activeDocumentId, stores }) => {\n    const membership = stores.userMemberships.orderedData.find(\n      (m) => m.documentId === activeDocumentId && m.userId === currentUserId\n    );\n\n    return !!membership;\n  },\n  perform: async ({ t, location, currentUserId, activeDocumentId, stores }) => {\n    if (!activeDocumentId) {\n      return;\n    }\n\n    const document = stores.documents.get(activeDocumentId);\n\n    try {\n      if (document && location.pathname.startsWith(document.path)) {\n        history.push(homePath());\n      }\n\n      await stores.userMemberships.delete({\n        documentId: activeDocumentId,\n        userId: currentUserId,\n      } as UserMembership);\n\n      toast.success(t(\"You have left the shared document\"));\n    } catch (err) {\n      toast.error(t(\"Could not leave document\"));\n    }\n  },\n});\n\nexport const rootDocumentActions = [\n  openDocument,\n  archiveDocument,\n  createDocument,\n  createDraftDocument,\n  createNestedDocument,\n  createTemplateFromDocument,\n  deleteDocument,\n  importDocument,\n  downloadDocument,\n  copyDocumentLink,\n  copyDocumentShareLink,\n  copyDocumentAsMarkdown,\n  starDocument,\n  unstarDocument,\n  publishDocument,\n  unpublishDocument,\n  subscribeDocument,\n  unsubscribeDocument,\n  searchInDocument,\n  duplicateDocument,\n  leaveDocument,\n  moveTemplateToWorkspace,\n  moveDocumentToCollection,\n  openRandomDocument,\n  permanentlyDeleteDocument,\n  permanentlyDeleteDocumentsInTrash,\n  printDocument,\n  pinDocumentToCollection,\n  pinDocumentToHome,\n  openDocumentComments,\n  openDocumentHistory,\n  openDocumentInsights,\n  shareDocument,\n];\n","import * as React from \"react\";\nimport { MenuStateReturn } from \"reakit\";\nimport Model from \"~/models/base/Model\";\n\nexport type MenuContext<T extends Model> = {\n  /** Model for which the menu is to be designed. */\n  model: T;\n  /** Menu state */\n  menuState: MenuStateReturn;\n};\n\nexport const MenuContext = React.createContext<MenuContext<Model>>(\n  {} as MenuContext<Model>\n);\n\nexport const useMenuContext = <T extends Model>() =>\n  React.useContext<MenuContext<T>>(\n    MenuContext as unknown as React.Context<MenuContext<T>>\n  );\n","import capitalize from \"lodash/capitalize\";\nimport isEmpty from \"lodash/isEmpty\";\nimport noop from \"lodash/noop\";\nimport { observer } from \"mobx-react\";\nimport { EditIcon, InputIcon, RestoreIcon, SearchIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { useMenuState, MenuButton, MenuButtonHTMLProps } from \"reakit/Menu\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport { toast } from \"sonner\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport { s } from \"@shared/styles\";\nimport { SubscriptionType, UserPreference } from \"@shared/types\";\nimport { getEventFiles } from \"@shared/utils/files\";\nimport Document from \"~/models/Document\";\nimport ContextMenu from \"~/components/ContextMenu\";\nimport OverflowMenuButton from \"~/components/ContextMenu/OverflowMenuButton\";\nimport Separator from \"~/components/ContextMenu/Separator\";\nimport Template from \"~/components/ContextMenu/Template\";\nimport CollectionIcon from \"~/components/Icons/CollectionIcon\";\nimport Switch from \"~/components/Switch\";\nimport { actionToMenuItem } from \"~/actions\";\nimport {\n  pinDocument,\n  createTemplateFromDocument,\n  subscribeDocument,\n  unsubscribeDocument,\n  moveDocument,\n  deleteDocument,\n  permanentlyDeleteDocument,\n  downloadDocument,\n  importDocument,\n  starDocument,\n  unstarDocument,\n  duplicateDocument,\n  archiveDocument,\n  openDocumentHistory,\n  openDocumentInsights,\n  publishDocument,\n  unpublishDocument,\n  printDocument,\n  openDocumentComments,\n  createDocumentFromTemplate,\n  createNestedDocument,\n  shareDocument,\n  copyDocument,\n  searchInDocument,\n  leaveDocument,\n  moveTemplate,\n} from \"~/actions/definitions/documents\";\nimport useActionContext from \"~/hooks/useActionContext\";\nimport useBoolean from \"~/hooks/useBoolean\";\nimport useCurrentUser from \"~/hooks/useCurrentUser\";\nimport useMobile from \"~/hooks/useMobile\";\nimport usePolicy from \"~/hooks/usePolicy\";\nimport useRequest from \"~/hooks/useRequest\";\nimport useStores from \"~/hooks/useStores\";\nimport { MenuItem, MenuItemButton } from \"~/types\";\nimport { documentEditPath } from \"~/utils/routeHelpers\";\nimport { MenuContext, useMenuContext } from \"./MenuContext\";\n\ntype Props = {\n  /** Document for which the menu is to be shown */\n  document: Document;\n  isRevision?: boolean;\n  /** Pass true if the document is currently being displayed */\n  showDisplayOptions?: boolean;\n  /** Whether to display menu as a modal */\n  modal?: boolean;\n  /** Whether to include the option of toggling embeds as menu item */\n  showToggleEmbeds?: boolean;\n  showPin?: boolean;\n  /** Label for menu button */\n  label?: (props: MenuButtonHTMLProps) => React.ReactNode;\n  /** Invoked when the \"Find and replace\" menu item is clicked */\n  onFindAndReplace?: () => void;\n  /** Invoked when the \"Rename\" menu item is clicked */\n  onRename?: () => void;\n  /** Invoked when menu is opened */\n  onOpen?: () => void;\n  /** Invoked when menu is closed */\n  onClose?: () => void;\n};\n\ntype MenuTriggerProps = {\n  label?: (props: MenuButtonHTMLProps) => React.ReactNode;\n  onTrigger: () => void;\n};\n\nconst MenuTrigger: React.FC<MenuTriggerProps> = ({ label, onTrigger }) => {\n  const { t } = useTranslation();\n\n  const { subscriptions, pins } = useStores();\n  const { model: document, menuState } = useMenuContext<Document>();\n\n  const {\n    loading: auxDataLoading,\n    loaded: auxDataLoaded,\n    request: auxDataRequest,\n  } = useRequest(() =>\n    Promise.all([\n      subscriptions.fetchOne({\n        documentId: document.id,\n        event: SubscriptionType.Document,\n      }),\n      document.collectionId\n        ? subscriptions.fetchOne({\n            collectionId: document.collectionId,\n            event: SubscriptionType.Document,\n          })\n        : noop,\n      pins.fetchOne({\n        documentId: document.id,\n        collectionId: document.collectionId ?? null,\n      }),\n    ])\n  );\n\n  const handlePointerEnter = React.useCallback(() => {\n    if (!auxDataLoading && !auxDataLoaded) {\n      void auxDataRequest();\n      void document.loadRelations();\n    }\n  }, [auxDataLoading, auxDataLoaded, auxDataRequest, document]);\n\n  return label ? (\n    <MenuButton\n      {...menuState}\n      onPointerEnter={handlePointerEnter}\n      onClick={onTrigger}\n    >\n      {label}\n    </MenuButton>\n  ) : (\n    <OverflowMenuButton\n      aria-label={t(\"Show document menu\")}\n      onPointerEnter={handlePointerEnter}\n      onClick={onTrigger}\n      {...menuState}\n    />\n  );\n};\n\ntype MenuContentProps = {\n  onOpen?: () => void;\n  onClose?: () => void;\n  onFindAndReplace?: () => void;\n  onRename?: () => void;\n  showDisplayOptions?: boolean;\n  showToggleEmbeds?: boolean;\n};\n\nconst MenuContent: React.FC<MenuContentProps> = observer(function MenuContent_({\n  onOpen,\n  onClose,\n  onFindAndReplace,\n  onRename,\n  showDisplayOptions,\n  showToggleEmbeds,\n}) {\n  const user = useCurrentUser();\n  const { model: document, menuState } = useMenuContext<Document>();\n  const can = usePolicy(document);\n  const { t } = useTranslation();\n  const { policies, collections } = useStores();\n\n  const collection = document.collectionId\n    ? collections.get(document.collectionId)\n    : undefined;\n\n  const context = useActionContext({\n    isContextMenu: true,\n    activeDocumentId: document.id,\n    activeCollectionId: document.collectionId ?? undefined,\n  });\n\n  const isMobile = useMobile();\n\n  const handleRestore = React.useCallback(\n    async (\n      ev: React.SyntheticEvent,\n      options?: {\n        collectionId: string;\n      }\n    ) => {\n      await document.restore(options);\n      toast.success(\n        t(\"{{ documentName }} restored\", {\n          documentName: capitalize(document.noun),\n        })\n      );\n    },\n    [t, document]\n  );\n\n  const restoreItems = React.useMemo(\n    () => [\n      ...collections.orderedData.reduce<MenuItem[]>((filtered, collection) => {\n        const can = policies.abilities(collection.id);\n\n        if (can.createDocument) {\n          filtered.push({\n            type: \"button\",\n            onClick: (ev) =>\n              handleRestore(ev, {\n                collectionId: collection.id,\n              }),\n            icon: <CollectionIcon collection={collection} />,\n            title: collection.name,\n          });\n        }\n\n        return filtered;\n      }, []),\n    ],\n    [collections.orderedData, handleRestore, policies]\n  );\n\n  return !isEmpty(can) ? (\n    <ContextMenu\n      {...menuState}\n      aria-label={t(\"Document options\")}\n      onOpen={onOpen}\n      onClose={onClose}\n    >\n      <Template\n        {...menuState}\n        items={[\n          {\n            type: \"button\",\n            title: t(\"Restore\"),\n            visible:\n              !!(document.isWorkspaceTemplate || collection?.isActive) &&\n              !!(can.restore || can.unarchive),\n            onClick: (ev) => handleRestore(ev),\n            icon: <RestoreIcon />,\n          },\n          {\n            type: \"submenu\",\n            title: t(\"Restore\"),\n            visible:\n              !(document.isWorkspaceTemplate || collection?.isActive) &&\n              !!(can.restore || can.unarchive) &&\n              restoreItems.length !== 0,\n            style: {\n              left: -170,\n              position: \"relative\",\n              top: -40,\n            },\n            icon: <RestoreIcon />,\n            hover: true,\n            items: [\n              {\n                type: \"heading\",\n                title: t(\"Choose a collection\"),\n              },\n              ...restoreItems,\n            ],\n          },\n          actionToMenuItem(starDocument, context),\n          actionToMenuItem(unstarDocument, context),\n          {\n            ...actionToMenuItem(subscribeDocument, context),\n            disabled: collection?.isSubscribed,\n            tooltip: collection?.isSubscribed\n              ? t(\"Subscription inherited from collection\")\n              : undefined,\n          } as MenuItemButton,\n          {\n            ...actionToMenuItem(unsubscribeDocument, context),\n            disabled: collection?.isSubscribed,\n            tooltip: collection?.isSubscribed\n              ? t(\"Subscription inherited from collection\")\n              : undefined,\n          } as MenuItemButton,\n          {\n            type: \"button\",\n            title: `${t(\"Find and replace\")}…`,\n            visible: !!onFindAndReplace && isMobile,\n            onClick: () => onFindAndReplace?.(),\n            icon: <SearchIcon />,\n          },\n          {\n            type: \"separator\",\n          },\n          {\n            type: \"route\",\n            title: t(\"Edit\"),\n            to: documentEditPath(document),\n            visible:\n              !!can.update && user.separateEditMode && !document.template,\n            icon: <EditIcon />,\n          },\n          {\n            type: \"button\",\n            title: `${t(\"Rename\")}…`,\n            visible: !!can.update && !user.separateEditMode && !!onRename,\n            onClick: () => onRename?.(),\n            icon: <InputIcon />,\n          },\n          actionToMenuItem(shareDocument, context),\n          actionToMenuItem(createNestedDocument, context),\n          actionToMenuItem(importDocument, context),\n          actionToMenuItem(createTemplateFromDocument, context),\n          actionToMenuItem(duplicateDocument, context),\n          actionToMenuItem(publishDocument, context),\n          actionToMenuItem(unpublishDocument, context),\n          actionToMenuItem(archiveDocument, context),\n          actionToMenuItem(moveDocument, context),\n          actionToMenuItem(moveTemplate, context),\n          actionToMenuItem(pinDocument, context),\n          actionToMenuItem(createDocumentFromTemplate, context),\n          {\n            type: \"separator\",\n          },\n          actionToMenuItem(openDocumentComments, context),\n          actionToMenuItem(openDocumentHistory, context),\n          actionToMenuItem(openDocumentInsights, context),\n          actionToMenuItem(downloadDocument, context),\n          actionToMenuItem(copyDocument, context),\n          actionToMenuItem(printDocument, context),\n          actionToMenuItem(searchInDocument, context),\n          {\n            type: \"separator\",\n          },\n          actionToMenuItem(deleteDocument, context),\n          actionToMenuItem(permanentlyDeleteDocument, context),\n          actionToMenuItem(leaveDocument, context),\n        ]}\n      />\n      {(showDisplayOptions || showToggleEmbeds) && can.update && (\n        <>\n          <Separator />\n          <DisplayOptions>\n            {showToggleEmbeds && (\n              <Style>\n                <ToggleMenuItem\n                  width={26}\n                  height={14}\n                  label={t(\"Enable embeds\")}\n                  labelPosition=\"left\"\n                  checked={!document.embedsDisabled}\n                  onChange={\n                    document.embedsDisabled\n                      ? document.enableEmbeds\n                      : document.disableEmbeds\n                  }\n                />\n              </Style>\n            )}\n            {showDisplayOptions && !isMobile && (\n              <Style>\n                <ToggleMenuItem\n                  width={26}\n                  height={14}\n                  label={t(\"Full width\")}\n                  labelPosition=\"left\"\n                  checked={document.fullWidth}\n                  onChange={(ev) => {\n                    const fullWidth = ev.currentTarget.checked;\n                    user.setPreference(\n                      UserPreference.FullWidthDocuments,\n                      fullWidth\n                    );\n                    void user.save();\n                    document.fullWidth = fullWidth;\n                    void document.save();\n                  }}\n                />\n              </Style>\n            )}\n          </DisplayOptions>\n        </>\n      )}\n    </ContextMenu>\n  ) : null;\n});\n\nfunction DocumentMenu({\n  document,\n  modal = true,\n  showToggleEmbeds,\n  showDisplayOptions,\n  label,\n  onRename,\n  onOpen,\n  onClose,\n}: Props) {\n  const { collections, documents } = useStores();\n  const menuState = useMenuState({\n    modal,\n    unstable_preventOverflow: true,\n    unstable_fixed: true,\n    unstable_flip: true,\n  });\n  const history = useHistory();\n\n  const { t } = useTranslation();\n  const [isMenuVisible, showMenu] = useBoolean(false);\n  const file = React.useRef<HTMLInputElement>(null);\n\n  const collection = document.collectionId\n    ? collections.get(document.collectionId)\n    : undefined;\n\n  const stopPropagation = React.useCallback((ev: React.SyntheticEvent) => {\n    ev.stopPropagation();\n  }, []);\n\n  const handleFilePicked = React.useCallback(\n    async (ev: React.ChangeEvent<HTMLInputElement>) => {\n      const files = getEventFiles(ev);\n\n      // Because this is the onChange handler it's possible for the change to be\n      // from previously selecting a file to not selecting a file – aka empty\n      if (!files.length) {\n        return;\n      }\n\n      if (!collection) {\n        return;\n      }\n\n      try {\n        const file = files[0];\n        const importedDocument = await documents.import(\n          file,\n          document.id,\n          collection.id,\n          {\n            publish: true,\n          }\n        );\n        history.push(importedDocument.url);\n      } catch (err) {\n        toast.error(err.message);\n        throw err;\n      } finally {\n        ev.target.value = \"\";\n      }\n    },\n    [history, collection, documents, document.id]\n  );\n\n  return (\n    <>\n      <VisuallyHidden>\n        <label>\n          {t(\"Import document\")}\n          <input\n            type=\"file\"\n            ref={file}\n            onChange={handleFilePicked}\n            onClick={stopPropagation}\n            accept={documents.importFileTypes.join(\", \")}\n            tabIndex={-1}\n          />\n        </label>\n      </VisuallyHidden>\n      <MenuContext.Provider value={{ model: document, menuState }}>\n        <MenuTrigger label={label} onTrigger={showMenu} />\n        {isMenuVisible ? (\n          <MenuContent\n            onOpen={onOpen}\n            onClose={onClose}\n            onRename={onRename}\n            showDisplayOptions={showDisplayOptions}\n            showToggleEmbeds={showToggleEmbeds}\n          />\n        ) : null}\n      </MenuContext.Provider>\n    </>\n  );\n}\n\nconst ToggleMenuItem = styled(Switch)`\n  * {\n    font-weight: normal;\n    color: ${s(\"textSecondary\")};\n  }\n`;\n\nconst DisplayOptions = styled.div`\n  padding: 8px 0 0;\n`;\n\nconst Style = styled.div`\n  padding: 12px;\n\n  ${breakpoint(\"tablet\")`\n    padding: 4px 12px;\n    font-size: 14px;\n  `};\n`;\n\nexport default observer(DocumentMenu);\n","import { useLocation } from \"react-router-dom\";\nimport { SidebarContextType } from \"../components/Sidebar/components/SidebarContext\";\n\n/**\n * Hook to retrieve the sidebar context from the current location state.\n */\nexport function useLocationSidebarContext() {\n  const location = useLocation<{\n    sidebarContext?: SidebarContextType;\n  }>();\n  return location.state?.sidebarContext;\n}\n","import styled from \"styled-components\";\nimport Flex from \"~/components/Flex\";\n\nconst Section = styled(Flex)`\n  position: relative;\n  flex-direction: column;\n  margin: 0 8px 12px;\n  min-width: ${(props) => props.theme.sidebarMinWidth}px;\n  flex-shrink: 0;\n\n  &:first-child {\n    margin-top: 12px;\n  }\n\n  &:empty {\n    display: none;\n  }\n`;\n\nexport default Section;\n","import { action, computed, observable } from \"mobx\";\nimport React, { PropsWithChildren } from \"react\";\nimport { Heading } from \"@shared/utils/ProsemirrorHelper\";\nimport Document from \"~/models/Document\";\nimport { Editor } from \"~/editor\";\n\nclass DocumentContext {\n  /** The current document */\n  document?: Document;\n\n  /** The editor instance for this document */\n  editor?: Editor;\n\n  @observable\n  isEditorInitialized: boolean = false;\n\n  @observable\n  headings: Heading[] = [];\n\n  @computed\n  get hasHeadings() {\n    return this.headings.length > 0;\n  }\n\n  @action\n  setDocument = (document: Document) => {\n    this.document = document;\n    this.updateState();\n  };\n\n  @action\n  setEditor = (editor: Editor) => {\n    this.editor = editor;\n    this.updateState();\n  };\n\n  @action\n  setEditorInitialized = (initialized: boolean) => {\n    this.isEditorInitialized = initialized;\n  };\n\n  @action\n  updateState = () => {\n    this.updateHeadings();\n    this.updateTasks();\n  };\n\n  private updateHeadings() {\n    const currHeadings = this.editor?.getHeadings() ?? [];\n    const hasChanged =\n      currHeadings.map((h) => h.level + h.title).join(\"\") !==\n      this.headings.map((h) => h.level + h.title).join(\"\");\n\n    if (hasChanged) {\n      this.headings = currHeadings;\n    }\n  }\n\n  private updateTasks() {\n    const tasks = this.editor?.getTasks() ?? [];\n    const total = tasks.length ?? 0;\n    const completed = tasks.filter((t) => t.completed).length ?? 0;\n    this.document?.updateTasks(total, completed);\n  }\n}\n\nconst Context = React.createContext<DocumentContext | null>(null);\n\nexport const useDocumentContext = () => {\n  const ctx = React.useContext(Context);\n  if (!ctx) {\n    throw new Error(\n      \"useDocumentContext must be used within DocumentContextProvider\"\n    );\n  }\n  return ctx;\n};\n\nexport const DocumentContextProvider = ({\n  children,\n}: PropsWithChildren<unknown>) => {\n  const context = React.useMemo(() => new DocumentContext(), []);\n  return <Context.Provider value={context}>{children}</Context.Provider>;\n};\n"],"file":"assets/DocumentContext.hhTeDqBR.js"}