{"version":3,"file":"InputSearchPage.UJk7oQhb.js","sources":["../../../app/components/InputSearchPage.tsx"],"sourcesContent":["import { observer } from \"mobx-react\";\nimport { SearchIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport styled, { useTheme } from \"styled-components\";\nimport { isModKey } from \"@shared/utils/keyboard\";\nimport useBoolean from \"~/hooks/useBoolean\";\nimport useKeyDown from \"~/hooks/useKeyDown\";\nimport { searchPath } from \"~/utils/routeHelpers\";\nimport Input, { Outline } from \"./Input\";\n\ntype Props = {\n  /** A string representing where the search started, for tracking. */\n  source: string;\n  /** Placeholder text for the input. */\n  placeholder?: string;\n  /** Label for the input. */\n  label?: string;\n  /** Whether the label should be hidden. */\n  labelHidden?: boolean;\n  /** An optional ID of a collection to search within. */\n  collectionId?: string;\n  /** The current value of the input. */\n  value?: string;\n  /** Event handler for when the input value changes. */\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => unknown;\n  /** Event handler for when a key is pressed. */\n  onKeyDown?: (event: React.KeyboardEvent<HTMLInputElement>) => unknown;\n};\n\nfunction InputSearchPage({\n  onKeyDown,\n  value,\n  onChange,\n  placeholder,\n  label,\n  collectionId,\n  source,\n}: Props) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const theme = useTheme();\n  const history = useHistory();\n  const { t } = useTranslation();\n  const [isFocused, setFocused, setUnfocused] = useBoolean(false);\n\n  useKeyDown(\"f\", (ev: KeyboardEvent) => {\n    if (isModKey(ev) && document.activeElement !== inputRef.current) {\n      ev.preventDefault();\n      inputRef.current?.focus();\n    }\n  });\n\n  const handleKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLInputElement>) => {\n      if (ev.nativeEvent.isComposing) {\n        return;\n      }\n\n      if (ev.key === \"Enter\") {\n        ev.preventDefault();\n        history.push(\n          searchPath({\n            query: ev.currentTarget.value,\n            collectionId,\n            ref: source,\n          })\n        );\n      }\n      if (ev.key === \"Escape\") {\n        ev.preventDefault();\n        inputRef.current?.blur();\n      }\n\n      if (onKeyDown) {\n        onKeyDown(ev);\n      }\n    },\n    [history, collectionId, source, onKeyDown]\n  );\n\n  return (\n    <InputMaxWidth\n      ref={inputRef}\n      type=\"search\"\n      placeholder={placeholder || `${t(\"Search\")}â€¦`}\n      value={value}\n      onChange={onChange}\n      onKeyDown={handleKeyDown}\n      icon={\n        <SearchIcon\n          color={isFocused ? theme.inputBorderFocused : theme.inputBorder}\n        />\n      }\n      label={label}\n      onFocus={setFocused}\n      onBlur={setUnfocused}\n      margin={0}\n      labelHidden\n    />\n  );\n}\n\nconst InputMaxWidth = styled(Input)`\n  max-width: 30vw;\n\n  ${Outline} {\n    border-radius: 16px;\n  }\n`;\n\nexport default observer(InputSearchPage);\n"],"names":["InputMaxWidth","styled","Input","withConfig","componentId","Outline","observer","InputSearchPage","onKeyDown","value","onChange","placeholder","label","collectionId","source","inputRef","React","theme","useTheme","history","useHistory","t","useTranslation","isFocused","setFocused","setUnfocused","useBoolean","useKeyDown","ev","isModKey","document","activeElement","current","preventDefault","focus","handleKeyDown","nativeEvent","isComposing","key","push","searchPath","query","currentTarget","ref","blur","type","icon","jsx","SearchIcon","color","inputBorderFocused","inputBorder","onFocus","onBlur","margin","labelHidden"],"mappings":"sMAuGA,MAAMA,EAAgBC,EAAOC,GAAMC,WAAA,CAAAC,YAAA,gBAAbH,CAAa,CAAA,kBAAA,yBAG/BI,GAKWC,EAAAA,GAhFf,SAASC,iBAAgBC,UACvBA,EAAAA,MACAC,EAAAA,SACAC,EAAAA,YACAC,EAAAA,MACAC,EAAAA,aACAC,EAAAA,OACAC,IAEMC,MAAAA,EAAWC,SAA+B,MAC1CC,EAAQC,IACRC,EAAUC,KACVC,EAAEA,GAAMC,KACPC,EAAWC,EAAYC,GAAgBC,GAAW,GAE9CC,EAAA,KAAMC,IACXC,EAASD,IAAOE,SAASC,gBAAkBhB,EAASiB,UACtDJ,EAAGK,iBACHlB,EAASiB,SAASE,QACpB,IAGF,MAAMC,EAAgBnB,eACnBY,IACKA,EAAGQ,YAAYC,cAIJ,UAAXT,EAAGU,MACLV,EAAGK,iBACHd,EAAQoB,KACNC,EAAW,CACTC,MAAOb,EAAGc,cAAcjC,MACxBI,eACA8B,IAAK7B,MAII,WAAXc,EAAGU,MACLV,EAAGK,iBACHlB,EAASiB,SAASY,QAGhBpC,GACFA,EAAUoB,GACZ,GAEF,CAACT,EAASN,EAAcC,EAAQN,IAGlC,SACGR,EAAA,CACC2C,IAAK5B,EACL8B,KAAK,SACLlC,YAAaA,GAAe,GAAGU,EAAE,aACjCZ,QACAC,WACAF,UAAW2B,EACXW,KACEC,EAACC,cACCC,MAAO1B,EAAYN,EAAMiC,mBAAqBjC,EAAMkC,cAGxDvC,QACAwC,QAAS5B,EACT6B,OAAQ5B,EACR6B,OAAQ,EACRC,aAAW,GAGjB"}