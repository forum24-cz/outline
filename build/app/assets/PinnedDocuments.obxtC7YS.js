import{r as e,b as t,c3 as n,n as r,h as o,C as i,a0 as a,a1 as s,F as l,A as c,ai as u,L as d,o as g,a as f,u as h,X as p,bm as v,bj as b,c4 as m,j as y,d as w,c5 as x,z as D,T as C,a8 as R,N as S}from"./index.mlCxaiYE.js";import{g as E}from"./authenticated.03alztlO.js";import{T as M}from"./Time.rp9cc_zo.js";import{u as I}from"./useTextStats.yvDOkpRe.js";import{C as A}from"./Switch.3DOmHSIs.js";import{m as T,e as O,A as N}from"./DocumentContext.hhTeDqBR.js";const L="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function isWindow(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function isNode(e){return"nodeType"in e}function getWindow(e){var t,n;return e?isWindow(e)?e:isNode(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function isDocument(e){const{Document:t}=getWindow(e);return e instanceof t}function isHTMLElement(e){return!isWindow(e)&&e instanceof getWindow(e).HTMLElement}function isSVGElement(e){return e instanceof getWindow(e).SVGElement}function getOwnerDocument(e){return e?isWindow(e)?e.document:isNode(e)?isDocument(e)?e:isHTMLElement(e)||isSVGElement(e)?e.ownerDocument:document:document:document}const k=L?e.useLayoutEffect:e.useEffect;function useEvent(t){const n=e.useRef(t);return k((()=>{n.current=t})),e.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}function useLatestValue(t,n){void 0===n&&(n=[t]);const r=e.useRef(t);return k((()=>{r.current!==t&&(r.current=t)}),n),r}function useLazyMemo(t,n){const r=e.useRef();return e.useMemo((()=>{const e=t(r.current);return r.current=e,e}),[...n])}function useNodeRef(t){const n=useEvent(t),r=e.useRef(null),o=e.useCallback((e=>{e!==r.current&&(null==n||n(e,r.current)),r.current=e}),[]);return[r,o]}function usePrevious(t){const n=e.useRef();return e.useEffect((()=>{n.current=t}),[t]),n.current}let P={};function useUniqueId(t,n){return e.useMemo((()=>{if(n)return n;const e=null==P[t]?0:P[t]+1;return P[t]=e,t+"-"+e}),[t,n])}function createAdjustmentFn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[o,i]of r){const n=t[o];null!=n&&(t[o]=n+e*i)}return t}),{...t})}}const z=createAdjustmentFn(1),W=createAdjustmentFn(-1);function isKeyboardEvent(e){if(!e)return!1;const{KeyboardEvent:t}=getWindow(e.target);return t&&e instanceof t}function getEventCoordinates(e){if(function isTouchEvent(e){if(!e)return!1;const{TouchEvent:t}=getWindow(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function hasViewportRelativeCoordinates(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const B=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[B.Translate.toString(e),B.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),F="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(e){return e.matches(F)?e:e.querySelector(F)}const j={display:"none"};function HiddenText(e){let{id:n,value:r}=e;return t.createElement("div",{id:n,style:j},r)}function LiveRegion(e){let{id:n,announcement:r,ariaLiveType:o="assertive"}=e;return t.createElement("div",{id:n,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},r)}const V=e.createContext(null);const U={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},H={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Accessibility(r){let{announcements:o=H,container:i,hiddenTextDescribedById:a,screenReaderInstructions:s=U}=r;const{announce:l,announcement:c}=function useAnnouncement(){const[t,n]=e.useState("");return{announce:e.useCallback((e=>{null!=e&&n(e)}),[]),announcement:t}}(),u=useUniqueId("DndLiveRegion"),[d,g]=e.useState(!1);if(e.useEffect((()=>{g(!0)}),[]),function useDndMonitor(t){const n=e.useContext(V);e.useEffect((()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(t)}),[t,n])}(e.useMemo((()=>({onDragStart(e){let{active:t}=e;l(o.onDragStart({active:t}))},onDragMove(e){let{active:t,over:n}=e;o.onDragMove&&l(o.onDragMove({active:t,over:n}))},onDragOver(e){let{active:t,over:n}=e;l(o.onDragOver({active:t,over:n}))},onDragEnd(e){let{active:t,over:n}=e;l(o.onDragEnd({active:t,over:n}))},onDragCancel(e){let{active:t,over:n}=e;l(o.onDragCancel({active:t,over:n}))}})),[l,o])),!d)return null;const f=t.createElement(t.Fragment,null,t.createElement(HiddenText,{id:a,value:s.draggable}),t.createElement(LiveRegion,{id:u,announcement:c}));return i?n.createPortal(f,i):f}var K,X;function noop(){}function useSensor(t,n){return e.useMemo((()=>({sensor:t,options:null!=n?n:{}})),[t,n])}(X=K||(K={})).DragStart="dragStart",X.DragMove="dragMove",X.DragEnd="dragEnd",X.DragCancel="dragCancel",X.DragOver="dragOver",X.RegisterDroppable="registerDroppable",X.SetDroppableDisabled="setDroppableDisabled",X.UnregisterDroppable="unregisterDroppable";const Y=Object.freeze({x:0,y:0});function distanceBetween(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function sortCollisionsAsc(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function sortCollisionsDesc(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function cornersOfRectangle(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function getFirstCollision(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function centerOfRectangle(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const closestCenter=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=centerOfRectangle(t,t.left,t.top),i=[];for(const a of r){const{id:e}=a,t=n.get(e);if(t){const n=distanceBetween(centerOfRectangle(t),o);i.push({id:e,data:{droppableContainer:a,value:n}})}}return i.sort(sortCollisionsAsc)};function getIntersectionRatio(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,s=i-n;if(r<o&&n<i){const n=t.width*t.height,r=e.width*e.height,o=a*s;return Number((o/(n+r-o)).toFixed(4))}return 0}const rectIntersection=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const i of r){const{id:e}=i,r=n.get(e);if(r){const n=getIntersectionRatio(r,t);n>0&&o.push({id:e,data:{droppableContainer:i,value:n}})}}return o.sort(sortCollisionsDesc)};function getRectDelta(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Y}function createRectAdjustmentFn(e){return function adjustClientRect(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const q=createRectAdjustmentFn(1);const G={ignoreTransform:!1};function getClientRect(e,t){void 0===t&&(t=G);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=getWindow(e).getComputedStyle(e);t&&(n=function inverseTransform(e,t,n){const r=function parseTransform(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;const{scaleX:o,scaleY:i,x:a,y:s}=r,l=e.left-a-(1-o)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(n,t,r))}const{top:r,left:o,width:i,height:a,bottom:s,right:l}=n;return{top:r,left:o,width:i,height:a,bottom:s,right:l}}function getTransformAgnosticClientRect(e){return getClientRect(e,{ignoreTransform:!0})}function getScrollableAncestors(e,t){const n=[];return e?function findScrollableAncestors(r){if(null!=t&&n.length>=t)return n;if(!r)return n;if(isDocument(r)&&null!=r.scrollingElement&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!isHTMLElement(r)||isSVGElement(r))return n;if(n.includes(r))return n;const o=getWindow(e).getComputedStyle(r);return r!==e&&function isScrollable(e,t){void 0===t&&(t=getWindow(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(r,o)&&n.push(r),function isFixed(e,t){return void 0===t&&(t=getWindow(e).getComputedStyle(e)),"fixed"===t.position}(r,o)?n:findScrollableAncestors(r.parentNode)}(e):n}function getFirstScrollableAncestor(e){const[t]=getScrollableAncestors(e,1);return null!=t?t:null}function getScrollableElement(e){return L&&e?isWindow(e)?e:isNode(e)?isDocument(e)||e===getOwnerDocument(e).scrollingElement?window:isHTMLElement(e)?e:null:null:null}function getScrollXCoordinate(e){return isWindow(e)?e.scrollX:e.scrollLeft}function getScrollYCoordinate(e){return isWindow(e)?e.scrollY:e.scrollTop}function getScrollCoordinates(e){return{x:getScrollXCoordinate(e),y:getScrollYCoordinate(e)}}var J,$;function isDocumentScrollingElement(e){return!(!L||!e)&&e===document.scrollingElement}function getScrollPosition(e){const t={x:0,y:0},n=isDocumentScrollingElement(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}($=J||(J={}))[$.Forward=1]="Forward",$[$.Backward=-1]="Backward";const _={x:.2,y:.2};function getScrollDirectionAndSpeed(e,t,n,r,o){let{top:i,left:a,right:s,bottom:l}=n;void 0===r&&(r=10),void 0===o&&(o=_);const{isTop:c,isBottom:u,isLeft:d,isRight:g}=getScrollPosition(e),f={x:0,y:0},h={x:0,y:0},p=t.height*o.y,v=t.width*o.x;return!c&&i<=t.top+p?(f.y=J.Backward,h.y=r*Math.abs((t.top+p-i)/p)):!u&&l>=t.bottom-p&&(f.y=J.Forward,h.y=r*Math.abs((t.bottom-p-l)/p)),!g&&s>=t.right-v?(f.x=J.Forward,h.x=r*Math.abs((t.right-v-s)/v)):!d&&a<=t.left+v&&(f.x=J.Backward,h.x=r*Math.abs((t.left+v-a)/v)),{direction:f,speed:h}}function getScrollElementRect(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function getScrollOffsets(e){return e.reduce(((e,t)=>z(e,getScrollCoordinates(t))),Y)}const Z=[["x",["left","right"],function getScrollXOffset(e){return e.reduce(((e,t)=>e+getScrollXCoordinate(t)),0)}],["y",["top","bottom"],function getScrollYOffset(e){return e.reduce(((e,t)=>e+getScrollYCoordinate(t)),0)}]];class Rect{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=getScrollableAncestors(t),r=getScrollOffsets(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,i,a]of Z)for(const e of i)Object.defineProperty(this,e,{get:()=>{const t=a(n),i=r[o]-t;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function hasExceededDistance(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Q,ee,te,ne;function preventDefault(e){e.preventDefault()}function stopPropagation(e){e.stopPropagation()}(ee=Q||(Q={})).Click="click",ee.DragStart="dragstart",ee.Keydown="keydown",ee.ContextMenu="contextmenu",ee.Resize="resize",ee.SelectionChange="selectionchange",ee.VisibilityChange="visibilitychange",(ne=te||(te={})).Space="Space",ne.Down="ArrowDown",ne.Right="ArrowRight",ne.Left="ArrowLeft",ne.Up="ArrowUp",ne.Esc="Escape",ne.Enter="Enter",ne.Tab="Tab";const re={start:[te.Space,te.Enter],cancel:[te.Esc],end:[te.Space,te.Enter,te.Tab]},defaultKeyboardCoordinateGetter=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case te.Right:return{...n,x:n.x+25};case te.Left:return{...n,x:n.x-25};case te.Down:return{...n,y:n.y+25};case te.Up:return{...n,y:n.y-25}}};class KeyboardSensor{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Listeners(getOwnerDocument(t)),this.windowListeners=new Listeners(getWindow(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(Q.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function scrollIntoViewIfNeeded(e,t){if(void 0===t&&(t=getClientRect),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);getFirstScrollableAncestor(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(Y)}handleKeyDown(e){if(isKeyboardEvent(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=re,coordinateGetter:i=defaultKeyboardCoordinateGetter,scrollBehavior:a="smooth"}=r,{code:s}=e;if(o.end.includes(s))return void this.handleEnd(e);if(o.cancel.includes(s))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:Y;this.referenceCoordinates||(this.referenceCoordinates=c);const u=i(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=W(u,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:i,isRight:s,isLeft:l,isBottom:c,maxScroll:d,minScroll:g}=getScrollPosition(n),f=getScrollElementRect(n),h={x:Math.min(o===te.Right?f.right-f.width/2:f.right,Math.max(o===te.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(o===te.Down?f.bottom-f.height/2:f.bottom,Math.max(o===te.Down?f.top:f.top+f.height/2,u.y))},p=o===te.Right&&!s||o===te.Left&&!l,v=o===te.Down&&!c||o===te.Up&&!i;if(p&&h.x!==u.x){const e=n.scrollLeft+t.x,i=o===te.Right&&e<=d.x||o===te.Left&&e>=g.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:a});r.x=i?n.scrollLeft-e:o===te.Right?n.scrollLeft-d.x:n.scrollLeft-g.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(v&&h.y!==u.y){const e=n.scrollTop+t.y,i=o===te.Down&&e<=d.y||o===te.Up&&e>=g.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:a});r.y=i?n.scrollTop-e:o===te.Down?n.scrollTop-d.y:n.scrollTop-g.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(e,z(W(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function isDistanceConstraint(e){return Boolean(e&&"distance"in e)}function isDelayConstraint(e){return Boolean(e&&"delay"in e)}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=re,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==o||o({event:e.nativeEvent}),!0)}return!1}}];class AbstractPointerSensor{constructor(e,t,n){var r;void 0===n&&(n=function getEventListenerTarget(e){const{EventTarget:t}=getWindow(e);return e instanceof t?e:getOwnerDocument(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:i}=o;this.props=e,this.events=t,this.document=getOwnerDocument(i),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(n),this.windowListeners=new Listeners(getWindow(i)),this.initialCoordinates=null!=(r=getEventCoordinates(o))?r:Y,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.DragStart,preventDefault),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),this.windowListeners.add(Q.ContextMenu,preventDefault),this.documentListeners.add(Q.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(isDistanceConstraint(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Q.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Q.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!r)return;const s=null!=(t=getEventCoordinates(e))?t:Y,l=W(r,s);if(!n&&a){if(isDistanceConstraint(a)){if(null!=a.tolerance&&hasExceededDistance(l,a.tolerance))return this.handleCancel();if(hasExceededDistance(l,a.distance))return this.handleStart()}return isDelayConstraint(a)&&hasExceededDistance(l,a.tolerance)?this.handleCancel():void this.handlePending(a,l)}e.cancelable&&e.preventDefault(),i(s)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===te.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const oe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(e){const{event:t}=e,n=getOwnerDocument(t.target);super(e,oe,n)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const ie={move:{name:"mousemove"},end:{name:"mouseup"}};var ae,se;(se=ae||(ae={}))[se.RightClick=2]="RightClick";(class MouseSensor extends AbstractPointerSensor{constructor(e){super(e,ie,getOwnerDocument(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==ae.RightClick&&(null==r||r({event:n}),!0)}}];const le={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var ce,ue,de,ge;function useAutoScroller(t){let{acceleration:n,activator:r=ce.Pointer,canScroll:o,draggingRect:i,enabled:a,interval:s=5,order:l=de.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:g,threshold:f}=t;const h=function useScrollIntent(e){let{delta:t,disabled:n}=e;const r=usePrevious(t);return useLazyMemo((e=>{if(n||!r||!e)return fe;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[J.Backward]:e.x[J.Backward]||-1===o.x,[J.Forward]:e.x[J.Forward]||1===o.x},y:{[J.Backward]:e.y[J.Backward]||-1===o.y,[J.Forward]:e.y[J.Forward]||1===o.y}}}),[n,t,r])}({delta:g,disabled:!a}),[p,v]=function useInterval(){const t=e.useRef(null);return[e.useCallback(((e,n)=>{t.current=setInterval(e,n)}),[]),e.useCallback((()=>{null!==t.current&&(clearInterval(t.current),t.current=null)}),[])]}(),b=e.useRef({x:0,y:0}),m=e.useRef({x:0,y:0}),y=e.useMemo((()=>{switch(r){case ce.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case ce.DraggableRect:return i}}),[r,i,c]),w=e.useRef(null),x=e.useCallback((()=>{const e=w.current;if(!e)return;const t=b.current.x*m.current.x,n=b.current.y*m.current.y;e.scrollBy(t,n)}),[]),D=e.useMemo((()=>l===de.TreeOrder?[...u].reverse():u),[l,u]);e.useEffect((()=>{if(a&&u.length&&y){for(const e of D){if(!1===(null==o?void 0:o(e)))continue;const t=u.indexOf(e),r=d[t];if(!r)continue;const{direction:i,speed:a}=getScrollDirectionAndSpeed(e,r,y,n,f);for(const e of["x","y"])h[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0)return v(),w.current=e,p(x,s),b.current=a,void(m.current=i)}b.current={x:0,y:0},m.current={x:0,y:0},v()}else v()}),[n,x,o,v,a,s,JSON.stringify(y),JSON.stringify(h),p,u,D,d,JSON.stringify(f)])}(class TouchSensor extends AbstractPointerSensor{constructor(e){super(e,le)}static setup(){return window.addEventListener(le.move.name,noop2,{capture:!1,passive:!1}),function teardown(){window.removeEventListener(le.move.name,noop2)};function noop2(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1)&&(null==r||r({event:n}),!0)}}],(ue=ce||(ce={}))[ue.Pointer=0]="Pointer",ue[ue.DraggableRect=1]="DraggableRect",(ge=de||(de={}))[ge.TreeOrder=0]="TreeOrder",ge[ge.ReversedTreeOrder=1]="ReversedTreeOrder";const fe={x:{[J.Backward]:!1,[J.Forward]:!1},y:{[J.Backward]:!1,[J.Forward]:!1}};var he,pe,ve;(pe=he||(he={}))[pe.Always=0]="Always",pe[pe.BeforeDragging=1]="BeforeDragging",pe[pe.WhileDragging=2]="WhileDragging",(ve||(ve={})).Optimized="optimized";const be=new Map;function useInitialValue(e,t){return useLazyMemo((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function useResizeObserver(t){let{callback:n,disabled:r}=t;const o=useEvent(n),i=e.useMemo((()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(o)}),[r]);return e.useEffect((()=>()=>null==i?void 0:i.disconnect()),[i]),i}function defaultMeasure(e){return new Rect(getClientRect(e),e)}function useRect(t,n,r){void 0===n&&(n=defaultMeasure);const[o,i]=e.useState(null);function measureRect(){i((e=>{if(!t)return null;var o;if(!1===t.isConnected)return null!=(o=null!=e?e:r)?o:null;const i=n(t);return JSON.stringify(e)===JSON.stringify(i)?e:i}))}const a=function useMutationObserver(t){let{callback:n,disabled:r}=t;const o=useEvent(n),i=e.useMemo((()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(o)}),[o,r]);return e.useEffect((()=>()=>null==i?void 0:i.disconnect()),[i]),i}({callback(e){if(t)for(const n of e){const{type:e,target:r}=n;if("childList"===e&&r instanceof HTMLElement&&r.contains(t)){measureRect();break}}}}),s=useResizeObserver({callback:measureRect});return k((()=>{measureRect(),t?(null==s||s.observe(t),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==a||a.disconnect())}),[t]),o}const me=[];function useScrollOffsetsDelta(t,n){void 0===n&&(n=[]);const r=e.useRef(null);return e.useEffect((()=>{r.current=null}),n),e.useEffect((()=>{const e=t!==Y;e&&!r.current&&(r.current=t),!e&&r.current&&(r.current=null)}),[t]),r.current?W(t,r.current):Y}function useWindowRect(t){return e.useMemo((()=>t?function getWindowClientRect(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(t):null),[t])}const ye=[];function useDragOverlayMeasuring(t){let{measure:n}=t;const[r,o]=e.useState(null),i=useResizeObserver({callback:e.useCallback((e=>{for(const{target:t}of e)if(isHTMLElement(t)){o((e=>{const r=n(t);return e?{...e,width:r.width,height:r.height}:r}));break}}),[n])}),a=e.useCallback((e=>{const t=function getMeasurableNode(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return isHTMLElement(t)?t:e}(e);null==i||i.disconnect(),t&&(null==i||i.observe(t)),o(t?n(t):null)}),[n,i]),[s,l]=useNodeRef(a);return e.useMemo((()=>({nodeRef:s,rect:r,setRef:l})),[r,s,l])}const we=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],xe={current:{}},De={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:he.WhileDragging,frequency:ve.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Ce={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:De,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},Re={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},Se=e.createContext(Re),Ee=e.createContext(Ce);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(e,t){switch(t.type){case K.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case K.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case K.DragEnd:case K.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case K.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new DroppableContainersMap(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case K.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new DroppableContainersMap(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case K.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new DroppableContainersMap(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function RestoreFocus(t){let{disabled:n}=t;const{active:r,activatorEvent:o,draggableNodes:i}=e.useContext(Se),a=usePrevious(o),s=usePrevious(null==r?void 0:r.id);return e.useEffect((()=>{if(!n&&!o&&a&&null!=s){if(!isKeyboardEvent(a))return;if(document.activeElement===a.target)return;const e=i.get(s);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=findFirstFocusableNode(e);if(t){t.focus();break}}}))}}),[o,n,i,s,a]),null}const Me=e.createContext({...Y,scaleX:1,scaleY:1});var Ie,Ae;(Ae=Ie||(Ie={}))[Ae.Uninitialized=0]="Uninitialized",Ae[Ae.Initializing=1]="Initializing",Ae[Ae.Initialized=2]="Initialized";const Te=e.memo((function DndContext2(r){var o,i,a,s;let{id:l,accessibility:c,autoScroll:u=!0,children:d,sensors:g=we,collisionDetection:f=rectIntersection,measuring:h,modifiers:p,...v}=r;const b=e.useReducer(reducer,void 0,getInitialState),[m,y]=b,[w,x]=function useDndMonitorProvider(){const[t]=e.useState((()=>new Set)),n=e.useCallback((e=>(t.add(e),()=>t.delete(e))),[t]);return[e.useCallback((e=>{let{type:n,event:r}=e;t.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[t]),n]}(),[D,C]=e.useState(Ie.Uninitialized),R=D===Ie.Initialized,{draggable:{active:S,nodes:E,translate:M},droppable:{containers:I}}=m,A=null!=S?E.get(S):null,T=e.useRef({initial:null,translated:null}),O=e.useMemo((()=>{var e;return null!=S?{id:S,data:null!=(e=null==A?void 0:A.data)?e:xe,rect:T}:null}),[S,A]),N=e.useRef(null),[P,W]=e.useState(null),[B,F]=e.useState(null),j=useLatestValue(v,Object.values(v)),U=useUniqueId("DndDescribedBy",l),H=e.useMemo((()=>I.getEnabled()),[I]),X=function useMeasuringConfiguration(t){return e.useMemo((()=>({draggable:{...De.draggable,...null==t?void 0:t.draggable},droppable:{...De.droppable,...null==t?void 0:t.droppable},dragOverlay:{...De.dragOverlay,...null==t?void 0:t.dragOverlay}})),[null==t?void 0:t.draggable,null==t?void 0:t.droppable,null==t?void 0:t.dragOverlay])}(h),{droppableRects:G,measureDroppableContainers:J,measuringScheduled:$}=function useDroppableMeasuring(t,n){let{dragging:r,dependencies:o,config:i}=n;const[a,s]=e.useState(null),{frequency:l,measure:c,strategy:u}=i,d=e.useRef(t),g=function isDisabled(){switch(u){case he.Always:return!1;case he.BeforeDragging:return r;default:return!r}}(),f=useLatestValue(g),h=e.useCallback((function(e){void 0===e&&(e=[]),f.current||s((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[f]),p=e.useRef(null),v=useLazyMemo((e=>{if(g&&!r)return be;if(!e||e===be||d.current!==t||null!=a){const e=new Map;for(let n of t){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){e.set(n.id,n.rect.current);continue}const t=n.node.current,r=t?new Rect(c(t),t):null;n.rect.current=r,r&&e.set(n.id,r)}return e}return e}),[t,a,r,g,c]);return e.useEffect((()=>{d.current=t}),[t]),e.useEffect((()=>{g||h()}),[r,g]),e.useEffect((()=>{a&&a.length>0&&s(null)}),[JSON.stringify(a)]),e.useEffect((()=>{g||"number"!=typeof l||null!==p.current||(p.current=setTimeout((()=>{h(),p.current=null}),l))}),[l,g,h,...o]),{droppableRects:v,measureDroppableContainers:h,measuringScheduled:null!=a}}(H,{dragging:R,dependencies:[M.x,M.y],config:X.droppable}),_=function useCachedNode(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return useLazyMemo((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(E,S),Z=e.useMemo((()=>B?getEventCoordinates(B):null),[B]),Q=function getAutoScrollerOptions(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"==typeof u?!1===u.enabled:!1===u,n=R&&!e&&!t;if("object"==typeof u)return{...u,enabled:n};return{enabled:n}}(),ee=function useInitialRect(e,t){return useInitialValue(e,t)}(_,X.draggable.measure);!function useLayoutShiftScrollCompensation(t){let{activeNode:n,measure:r,initialRect:o,config:i=!0}=t;const a=e.useRef(!1),{x:s,y:l}="boolean"==typeof i?{x:i,y:i}:i;k((()=>{if(!s&&!l||!n)return void(a.current=!1);if(a.current||!o)return;const e=null==n?void 0:n.node.current;if(!e||!1===e.isConnected)return;const t=getRectDelta(r(e),o);if(s||(t.x=0),l||(t.y=0),a.current=!0,Math.abs(t.x)>0||Math.abs(t.y)>0){const n=getFirstScrollableAncestor(e);n&&n.scrollBy({top:t.y,left:t.x})}}),[n,s,l,o,r])}({activeNode:null!=S?E.get(S):null,config:Q.layoutShiftCompensation,initialRect:ee,measure:X.draggable.measure});const te=useRect(_,X.draggable.measure,ee),ne=useRect(_?_.parentElement:null),re=e.useRef({activatorEvent:null,active:null,activeNode:_,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),oe=I.getNodeFor(null==(o=re.current.over)?void 0:o.id),ie=useDragOverlayMeasuring({measure:X.dragOverlay.measure}),ae=null!=(i=ie.nodeRef.current)?i:_,se=R?null!=(a=ie.rect)?a:te:null,le=Boolean(ie.nodeRef.current&&ie.rect),ce=function useRectDelta(e){return getRectDelta(e,useInitialValue(e))}(le?null:te),ue=useWindowRect(ae?getWindow(ae):null),de=function useScrollableAncestors(t){const n=e.useRef(t),r=useLazyMemo((e=>t?e&&e!==me&&t&&n.current&&t.parentNode===n.current.parentNode?e:getScrollableAncestors(t):me),[t]);return e.useEffect((()=>{n.current=t}),[t]),r}(R?null!=oe?oe:_:null),ge=function useRects(t,n){void 0===n&&(n=getClientRect);const[r]=t,o=useWindowRect(r?getWindow(r):null),[i,a]=e.useState(ye);function measureRects(){a((()=>t.length?t.map((e=>isDocumentScrollingElement(e)?o:new Rect(n(e),e))):ye))}const s=useResizeObserver({callback:measureRects});return k((()=>{null==s||s.disconnect(),measureRects(),t.forEach((e=>null==s?void 0:s.observe(e)))}),[t]),i}(de),fe=function applyModifiers(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}(p,{transform:{x:M.x-ce.x,y:M.y-ce.y,scaleX:1,scaleY:1},activatorEvent:B,active:O,activeNodeRect:te,containerNodeRect:ne,draggingNodeRect:se,over:re.current.over,overlayNodeRect:ie.rect,scrollableAncestors:de,scrollableAncestorRects:ge,windowRect:ue}),pe=Z?z(Z,M):null,ve=function useScrollOffsets(t){const[n,r]=e.useState(null),o=e.useRef(t),i=e.useCallback((e=>{const t=getScrollableElement(e.target);t&&r((e=>e?(e.set(t,getScrollCoordinates(t)),new Map(e)):null))}),[]);return e.useEffect((()=>{const e=o.current;if(t!==e){cleanup(e);const n=t.map((e=>{const t=getScrollableElement(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,getScrollCoordinates(t)]):null})).filter((e=>null!=e));r(n.length?new Map(n):null),o.current=t}return()=>{cleanup(t),cleanup(e)};function cleanup(e){e.forEach((e=>{const t=getScrollableElement(e);null==t||t.removeEventListener("scroll",i)}))}}),[i,t]),e.useMemo((()=>t.length?n?Array.from(n.values()).reduce(((e,t)=>z(e,t)),Y):getScrollOffsets(t):Y),[t,n])}(de),Ce=useScrollOffsetsDelta(ve),Re=useScrollOffsetsDelta(ve,[te]),Ae=z(fe,Ce),Te=se?q(se,fe):null,Oe=O&&Te?f({active:O,collisionRect:Te,droppableRects:G,droppableContainers:H,pointerCoordinates:pe}):null,Ne=getFirstCollision(Oe,"id"),[Le,ke]=e.useState(null),Pe=function adjustScale(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(le?fe:z(fe,Re),null!=(s=null==Le?void 0:Le.rect)?s:null,te),ze=e.useRef(null),We=e.useCallback(((e,t)=>{let{sensor:r,options:o}=t;if(null==N.current)return;const i=E.get(N.current);if(!i)return;const a=e.nativeEvent,s=new r({active:N.current,activeNode:i,event:a,options:o,context:re,onAbort(e){if(!E.get(e))return;const{onDragAbort:t}=j.current,n={id:e};null==t||t(n),w({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!E.get(e))return;const{onDragPending:o}=j.current,i={id:e,constraint:t,initialCoordinates:n,offset:r};null==o||o(i),w({type:"onDragPending",event:i})},onStart(e){const t=N.current;if(null==t)return;const r=E.get(t);if(!r)return;const{onDragStart:o}=j.current,i={activatorEvent:a,active:{id:t,data:r.data,rect:T}};n.unstable_batchedUpdates((()=>{null==o||o(i),C(Ie.Initializing),y({type:K.DragStart,initialCoordinates:e,active:t}),w({type:"onDragStart",event:i}),W(ze.current),F(a)}))},onMove(e){y({type:K.DragMove,coordinates:e})},onEnd:createHandler(K.DragEnd),onCancel:createHandler(K.DragCancel)});function createHandler(e){return async function handler(){const{active:t,collisions:r,over:o,scrollAdjustedTranslate:i}=re.current;let s=null;if(t&&i){const{cancelDrop:n}=j.current;if(s={activatorEvent:a,active:t,collisions:r,delta:i,over:o},e===K.DragEnd&&"function"==typeof n){await Promise.resolve(n(s))&&(e=K.DragCancel)}}N.current=null,n.unstable_batchedUpdates((()=>{y({type:e}),C(Ie.Uninitialized),ke(null),W(null),F(null),ze.current=null;const t=e===K.DragEnd?"onDragEnd":"onDragCancel";if(s){const e=j.current[t];null==e||e(s),w({type:t,event:s})}}))}}ze.current=s}),[E]),Be=function useCombineActivators(t,n){return e.useMemo((()=>t.reduce(((e,t)=>{const{sensor:r}=t;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:n(e.handler,t)})))]}),[])),[t,n])}(g,e.useCallback(((e,t)=>(n,r)=>{const o=n.nativeEvent,i=E.get(r);if(null!==N.current||!i||o.dndKit||o.defaultPrevented)return;const a={active:i};!0===e(n,t.options,a)&&(o.dndKit={capturedBy:t.sensor},N.current=r,We(n,t))}),[E,We]));!function useSensorSetup(t){e.useEffect((()=>{if(!L)return;const e=t.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const t of e)null==t||t()}}),t.map((e=>{let{sensor:t}=e;return t})))}(g),k((()=>{te&&D===Ie.Initializing&&C(Ie.Initialized)}),[te,D]),e.useEffect((()=>{const{onDragMove:e}=j.current,{active:t,activatorEvent:r,collisions:o,over:i}=re.current;if(!t||!r)return;const a={active:t,activatorEvent:r,collisions:o,delta:{x:Ae.x,y:Ae.y},over:i};n.unstable_batchedUpdates((()=>{null==e||e(a),w({type:"onDragMove",event:a})}))}),[Ae.x,Ae.y]),e.useEffect((()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:o,scrollAdjustedTranslate:i}=re.current;if(!e||null==N.current||!t||!i)return;const{onDragOver:a}=j.current,s=o.get(Ne),l=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,c={active:e,activatorEvent:t,collisions:r,delta:{x:i.x,y:i.y},over:l};n.unstable_batchedUpdates((()=>{ke(l),null==a||a(c),w({type:"onDragOver",event:c})}))}),[Ne]),k((()=>{re.current={activatorEvent:B,active:O,activeNode:_,collisionRect:Te,collisions:Oe,droppableRects:G,draggableNodes:E,draggingNode:ae,draggingNodeRect:se,droppableContainers:I,over:Le,scrollableAncestors:de,scrollAdjustedTranslate:Ae},T.current={initial:se,translated:Te}}),[O,_,Oe,Te,E,ae,se,G,I,Le,de,Ae]),useAutoScroller({...Q,delta:M,draggingRect:Te,pointerCoordinates:pe,scrollableAncestors:de,scrollableAncestorRects:ge});const Fe=e.useMemo((()=>({active:O,activeNode:_,activeNodeRect:te,activatorEvent:B,collisions:Oe,containerNodeRect:ne,dragOverlay:ie,draggableNodes:E,droppableContainers:I,droppableRects:G,over:Le,measureDroppableContainers:J,scrollableAncestors:de,scrollableAncestorRects:ge,measuringConfiguration:X,measuringScheduled:$,windowRect:ue})),[O,_,te,B,Oe,ne,ie,E,I,G,Le,J,de,ge,X,$,ue]),je=e.useMemo((()=>({activatorEvent:B,activators:Be,active:O,activeNodeRect:te,ariaDescribedById:{draggable:U},dispatch:y,draggableNodes:E,over:Le,measureDroppableContainers:J})),[B,Be,O,te,y,U,E,Le,J]);return t.createElement(V.Provider,{value:x},t.createElement(Se.Provider,{value:je},t.createElement(Ee.Provider,{value:Fe},t.createElement(Me.Provider,{value:Pe},d)),t.createElement(RestoreFocus,{disabled:!1===(null==c?void 0:c.restoreFocus)})),t.createElement(Accessibility,{...c,hiddenTextDescribedById:U}))})),Oe=e.createContext(null),Ne="button";function useDraggable(t){let{id:n,data:r,disabled:o=!1,attributes:i}=t;const a=useUniqueId("Draggable"),{activators:s,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:g,over:f}=e.useContext(Se),{role:h=Ne,roleDescription:p="draggable",tabIndex:v=0}=null!=i?i:{},b=(null==c?void 0:c.id)===n,m=e.useContext(b?Me:Oe),[y,w]=useNodeRef(),[x,D]=useNodeRef(),C=function useSyntheticListeners(t,n){return e.useMemo((()=>t.reduce(((e,t)=>{let{eventName:r,handler:o}=t;return e[r]=e=>{o(e,n)},e}),{})),[t,n])}(s,n),R=useLatestValue(r);k((()=>(g.set(n,{id:n,key:a,node:y,activatorNode:x,data:R}),()=>{const e=g.get(n);e&&e.key===a&&g.delete(n)})),[g,n]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:e.useMemo((()=>({role:h,tabIndex:v,"aria-disabled":o,"aria-pressed":!(!b||h!==Ne)||void 0,"aria-roledescription":p,"aria-describedby":d.draggable})),[o,h,v,b,p,d.draggable]),isDragging:b,listeners:o?void 0:C,node:y,over:f,setNodeRef:w,setActivatorNodeRef:D,transform:m}}const Le={timeout:25};const restrictToParentElement=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return n&&t?function restrictToBoundingRect(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}(r,n,t):r};function arrayMove(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function getSortedRects(e,t){return e.reduce(((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function isValidIndex(e){return null!==e&&e>=0}const rectSortingStrategy=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=arrayMove(t,r,n),a=t[o],s=i[o];return s&&a?{x:s.left-a.left,y:s.top-a.top,scaleX:s.width/a.width,scaleY:s.height/a.height}:null},ke="Sortable",Pe=t.createContext({activeIndex:-1,containerId:ke,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(n){let{children:r,id:o,items:i,strategy:a=rectSortingStrategy,disabled:s=!1}=n;const{active:l,dragOverlay:c,droppableRects:u,over:d,measureDroppableContainers:g}=function useDndContext(){return e.useContext(Ee)}(),f=useUniqueId(ke,o),h=Boolean(null!==c.rect),p=e.useMemo((()=>i.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[i]),v=null!=l,b=l?p.indexOf(l.id):-1,m=d?p.indexOf(d.id):-1,y=e.useRef(p),w=!function itemsEqual(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,y.current),x=-1!==m&&-1===b||w,D=function normalizeDisabled(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(s);k((()=>{w&&v&&g(p)}),[w,p,v,g]),e.useEffect((()=>{y.current=p}),[p]);const C=e.useMemo((()=>({activeIndex:b,containerId:f,disabled:D,disableTransforms:x,items:p,overIndex:m,useDragOverlay:h,sortedRects:getSortedRects(p,u),strategy:a})),[b,f,D.draggable,D.droppable,x,p,m,u,h,a]);return t.createElement(Pe.Provider,{value:C},r)}const defaultNewIndexGetter=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return arrayMove(n,r,o).indexOf(t)},defaultAnimateLayoutChanges=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:a,previousItems:s,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((s===i||o!==a)&&(!!n||a!==o&&t===l))},ze={duration:200,easing:"ease"},We="transform",Be=B.Transition.toString({property:We,duration:0,easing:"linear"}),Fe={roleDescription:"sortable"};function useSortable(t){let{animateLayoutChanges:n=defaultAnimateLayoutChanges,attributes:r,disabled:o,data:i,getNewIndex:a=defaultNewIndexGetter,id:s,strategy:l,resizeObserverConfig:c,transition:u=ze}=t;const{items:d,containerId:g,activeIndex:f,disabled:h,disableTransforms:p,sortedRects:v,overIndex:b,useDragOverlay:m,strategy:y}=e.useContext(Pe),w=function normalizeLocalDisabled(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(o,h),x=d.indexOf(s),D=e.useMemo((()=>({sortable:{containerId:g,index:x,items:d},...i})),[g,i,x,d]),C=e.useMemo((()=>d.slice(d.indexOf(s))),[d,s]),{rect:R,node:S,isOver:E,setNodeRef:M}=function useDroppable(t){let{data:n,disabled:r=!1,id:o,resizeObserverConfig:i}=t;const a=useUniqueId("Droppable"),{active:s,dispatch:l,over:c,measureDroppableContainers:u}=e.useContext(Se),d=e.useRef({disabled:r}),g=e.useRef(!1),f=e.useRef(null),h=e.useRef(null),{disabled:p,updateMeasurementsFor:v,timeout:b}={...Le,...i},m=useLatestValue(null!=v?v:o),y=useResizeObserver({callback:e.useCallback((()=>{g.current?(null!=h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{u(Array.isArray(m.current)?m.current:[m.current]),h.current=null}),b)):g.current=!0}),[b]),disabled:p||!s}),w=e.useCallback(((e,t)=>{y&&(t&&(y.unobserve(t),g.current=!1),e&&y.observe(e))}),[y]),[x,D]=useNodeRef(w),C=useLatestValue(n);return e.useEffect((()=>{y&&x.current&&(y.disconnect(),g.current=!1,y.observe(x.current))}),[x,y]),e.useEffect((()=>(l({type:K.RegisterDroppable,element:{id:o,key:a,disabled:r,node:x,rect:f,data:C}}),()=>l({type:K.UnregisterDroppable,key:a,id:o}))),[o]),e.useEffect((()=>{r!==d.current.disabled&&(l({type:K.SetDroppableDisabled,id:o,key:a,disabled:r}),d.current.disabled=r)}),[o,a,r,l]),{active:s,rect:f,isOver:(null==c?void 0:c.id)===o,node:x,over:c,setNodeRef:D}}({id:s,data:D,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:I,activatorEvent:A,activeNodeRect:T,attributes:O,setNodeRef:N,listeners:L,isDragging:P,over:z,setActivatorNodeRef:W,transform:F}=useDraggable({id:s,data:D,attributes:{...Fe,...r},disabled:w.draggable}),j=function useCombinedRefs(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useMemo((()=>e=>{n.forEach((t=>t(e)))}),n)}(M,N),V=Boolean(I),U=V&&!p&&isValidIndex(f)&&isValidIndex(b),H=!m&&P,X=H&&U?F:null,Y=U?null!=X?X:(null!=l?l:y)({rects:v,activeNodeRect:T,activeIndex:f,overIndex:b,index:x}):null,q=isValidIndex(f)&&isValidIndex(b)?a({id:s,items:d,activeIndex:f,overIndex:b}):x,G=null==I?void 0:I.id,J=e.useRef({activeId:G,items:d,newIndex:q,containerId:g}),$=d!==J.current.items,_=n({active:I,containerId:g,isDragging:P,isSorting:V,id:s,index:x,items:d,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:u,wasDragging:null!=J.current.activeId}),Z=function useDerivedTransform(t){let{disabled:n,index:r,node:o,rect:i}=t;const[a,s]=e.useState(null),l=e.useRef(r);return k((()=>{if(!n&&r!==l.current&&o.current){const e=i.current;if(e){const t=getClientRect(o.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&s(n)}}r!==l.current&&(l.current=r)}),[n,r,o,i]),e.useEffect((()=>{a&&s(null)}),[a]),a}({disabled:!_,index:x,node:S,rect:R});return e.useEffect((()=>{V&&J.current.newIndex!==q&&(J.current.newIndex=q),g!==J.current.containerId&&(J.current.containerId=g),d!==J.current.items&&(J.current.items=d)}),[V,q,g,d]),e.useEffect((()=>{if(G===J.current.activeId)return;if(G&&!J.current.activeId)return void(J.current.activeId=G);const e=setTimeout((()=>{J.current.activeId=G}),50);return()=>clearTimeout(e)}),[G]),{active:I,activeIndex:f,attributes:O,data:D,rect:R,index:x,newIndex:q,items:d,isOver:E,isSorting:V,isDragging:P,listeners:L,node:S,overIndex:b,over:z,setNodeRef:j,setActivatorNodeRef:W,setDroppableNodeRef:M,setDraggableNodeRef:N,transform:null!=Z?Z:Y,transition:function getTransition(){if(Z||$&&J.current.newIndex===x)return Be;if(H&&!isKeyboardEvent(A)||!u)return;if(V||_)return B.Transition.toString({...u,property:We});return}()}}function hasSortableData(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const je=[te.Down,te.Right,te.Up,te.Left],sortableKeyboardCoordinates=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:i,over:a,scrollableAncestors:s}}=t;if(je.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];i.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const i=o.get(n.id);if(i)switch(e.code){case te.Down:r.top<i.top&&t.push(n);break;case te.Up:r.top>i.top&&t.push(n);break;case te.Left:r.left>i.left&&t.push(n);break;case te.Right:r.left<i.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=cornersOfRectangle(t),i=[];for(const a of r){const{id:e}=a,t=n.get(e);if(t){const n=cornersOfRectangle(t),r=o.reduce(((e,t,r)=>e+distanceBetween(n[r],t)),0),s=Number((r/4).toFixed(4));i.push({id:e,data:{droppableContainer:a,value:s}})}}return i.sort(sortCollisionsAsc)})({active:n,collisionRect:r,droppableRects:o,droppableContainers:t,pointerCoordinates:null});let c=getFirstCollision(l,"id");if(c===(null==a?void 0:a.id)&&l.length>1&&(c=l[1].id),null!=c){const e=i.get(n.id),t=i.get(c),a=t?o.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&a&&e&&t){const n=getScrollableAncestors(l).some(((e,t)=>s[t]!==e)),o=isSameContainer(e,t),i=function isAfter(e,t){if(!hasSortableData(e)||!hasSortableData(t))return!1;if(!isSameContainer(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!o?{x:0,y:0}:{x:i?r.width-a.width:0,y:i?r.height-a.height:0},u={x:a.left,y:a.top};return c.x&&c.y?u:W(u,c)}}}};function isSameContainer(e,t){return!(!hasSortableData(e)||!hasSortableData(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const ReadingTime=({document:t})=>{const{t:n}=f(),r=e.useMemo((()=>t.toMarkdown()),[t]),i=I(r);return w(D,{children:[y(o.EyeIcon,{size:18}),n("{{ minutes }}m read",{minutes:i.total.readingTime})]})},DocumentSquircle=({icon:e,color:t})=>{const n=p(),r=v(e)===b.SVG?t:n.slateLight;return y(x,{color:r,children:y(R,{value:e,color:n.white,forceColor:!0})})},Ve=r(o.ClockIcon).withConfig({componentId:"sc-15yros6-0"})(["flex-shrink:0;"]),Ue=r(T.div).withConfig({componentId:"sc-15yros6-1"})(["width:100%;height:100%;"]),He=r.svg.withConfig({componentId:"sc-15yros6-2"})(["fill:",";stroke:",";background:",";position:absolute;top:-1px;right:-2px;"],i("background"),i("inputBorder"),i("background")),Ke=r(a).withConfig({componentId:"sc-15yros6-3"})(["color:",";&:",",&:active{color:",";}"],i("textTertiary"),s,i("text")),Xe=r(l).withConfig({componentId:"sc-15yros6-4"})(["position:absolute;top:4px;right:",";left:",";opacity:0;color:",";z-index:2;"],(e=>"rtl"===e.dir?"auto":"4px"),(e=>"rtl"===e.dir?"4px":"auto"),i("textTertiary")),Ye=r.div.withConfig({componentId:"sc-15yros6-5"})(["position:relative;user-select:none;touch-action:none;width:170px;height:180px;transition:box-shadow 200ms ease;z-index:",";pointer-events:",";&:"," ","{opacity:1;}"],(e=>e.$isDragging?1:"inherit"),(e=>e.$isDragging?"none":"inherit"),s,Xe),qe=r(l).withConfig({componentId:"sc-15yros6-6"})(["min-width:0;height:100%;"]),Ge=r(c).withConfig({componentId:"sc-15yros6-7"})([""," display:flex;align-items:center;gap:2px;color:",";margin:0 0 0 -2px;"],u(),i("textTertiary")),Je=r(d).withConfig({componentId:"sc-15yros6-8"})(["position:relative;display:block;padding:12px;width:100%;height:100%;border-radius:8px;cursor:var(--pointer);background:",";transition:transform 50ms ease-in-out;border:1px solid ",";border-bottom-width:2px;border-right-width:2px;","{opacity:0;}&:",",&:active,&:focus,&:focus-within{transform:"," rotate(-2deg);box-shadow:",";z-index:1;","{display:none;}","{opacity:1;}}"],i("background"),i("inputBorder"),Xe,s,(e=>e.$isDragging?"scale(1.1)":"scale(1.08)"),(e=>e.$isDragging?"0 0 20px rgba(0,0,0,0.2);":"0 0 10px rgba(0,0,0,0.1)"),He,Xe),$e=r.h3.withConfig({componentId:"sc-15yros6-9"})(["margin-top:0;margin-bottom:0.35em;line-height:22px;max-height:66px;overflow:hidden;color:",";font-family:",";font-weight:500;"],i("text"),i("fontFamily")),_e=g((function DocumentCard(t){const{t:n}=f(),{collections:r}=h(),i=p(),{document:a,pin:s,canUpdatePin:l,isDraggable:c}=t,u=e.useRef(!s?.collectionId).current,d=a.collectionId?r.get(a.collectionId):void 0,{attributes:g,listeners:R,setNodeRef:S,transform:E,transition:I,isDragging:T}=useSortable({id:t.document.id,disabled:!c||!l}),O=v(a.icon)===b.Emoji,N={transform:B.Transform.toString(E),transition:I},L=e.useCallback((async e=>{e.preventDefault(),e.stopPropagation(),await(s?.delete())}),[s]),k=new Date(a.updatedAt)>m(new Date,7);return y(Ye,{ref:S,style:N,$isDragging:T,...g,...R,tabIndex:-1,children:y(Ue,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{type:"spring",bounce:.6}},exit:{opacity:0,scale:.95},children:w(Je,{dir:a.dir,$isDragging:T,to:{pathname:a.url,state:{title:a.titleWithDefault}},children:[w(qe,{justify:"space-between",column:!0,children:[w(He,{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y("path",{d:"M19.5 20.5H6C2.96243 20.5 0.5 18.0376 0.5 15V0.5H0.792893L19.5 19.2071V20.5Z"}),y("path",{d:"M19.5 19.5H6C2.96243 19.5 0.5 17.0376 0.5 14V0.5H0.792893L19.5 19.2071V19.5Z"})]}),a.icon?y(DocumentSquircle,{icon:a.icon,color:a.color??void 0}):y(x,{color:d?.color??(u?i.slateLight:i.slateDark),children:d?.icon&&"letter"!==d?.icon&&"collection"!==d?.icon&&u?y(A,{collection:d,color:"white"}):y(o.DocumentIcon,{color:"white"})}),w("div",{children:[y($e,{dir:a.dir,children:O?a.titleWithDefault.replace(a.icon,""):a.titleWithDefault}),y(Ge,{size:"xsmall",children:k?w(D,{children:[y(Ve,{size:18}),y(M,{dateTime:a.updatedAt,addSuffix:!0,shorten:!0})]}):y(ReadingTime,{document:a})})]})]}),l&&y(Xe,{dir:a.dir,gap:4,children:!T&&s&&y(C,{content:n("Unpin"),children:y(Ke,{onClick:L,"aria-label":n("Unpin"),children:y(o.CloseIcon,{})})})})]})})})}));const Ze=r.div.withConfig({componentId:"sc-cksbwe-0"})(["display:grid;column-gap:8px;row-gap:12px;grid-template-columns:repeat(2,minmax(0,1fr));padding:0;list-style:none;margin:16px 0 32px;&:empty{display:none;}",";",";"],S("mobileLarge")`
    grid-template-columns: repeat(3, minmax(0, 1fr));
  `,S("tablet")`
    grid-template-columns: repeat(4, minmax(0, 1fr));
  `),Qe=g((function PinnedDocuments({limit:t,pins:n,placeholderCount:r,canUpdate:o,...i}){const{documents:a}=h(),[s,l]=e.useState(n.map((e=>e.documentId))),c=e.useRef(!0),u=r&&!s.length&&c.current;e.useEffect((()=>{l(n.map((e=>e.documentId)))}),[n]);const d=function useSensors(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useMemo((()=>[...n].filter((e=>null!=e))),[...n])}(useSensor(PointerSensor,{activationConstraint:{delay:100,tolerance:5}}),useSensor(KeyboardSensor,{coordinateGetter:sortableKeyboardCoordinates})),g=e.useCallback((e=>{const{active:t,over:r}=e;r&&t.id!==r.id&&l((e=>{const o=e.indexOf(t.id),i=e.indexOf(r.id),a=n[i]?.index||null,s=n[i+1]?.index||null,c=n[i-1]?.index||null;return n[o].save({index:0===i?E(null,a):o>i?E(c,a):E(a,s)}).catch((()=>l(e))),arrayMove(e,o,i)}))}),[n]);return y(Te,{sensors:d,modifiers:[restrictToParentElement],collisionDetection:closestCenter,onDragEnd:g,children:y(O,{config:{transition:{duration:.2,ease:"easeInOut"}},children:y(SortableContext,{items:s,strategy:rectSortingStrategy,children:y(Ze,{children:u?Array(r).fill(void 0).map(((e,t)=>y("div",{style:{width:170,height:180}},t))):y(N,{initial:!1,children:s.map((e=>{const t=a.get(e),r=n.find((t=>t.documentId===e));return c.current=!1,t?y(_e,{document:t,canUpdatePin:o,isDraggable:s.length>1,pin:r,...i},e):null}))})})})})})}));export{Qe as P};
