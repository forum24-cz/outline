import{o as e,u as t,a,as as s,at as n,au as i,r,Z as o,d as m,j as c,H as d,A as l,am as u,I as f,B as p}from"./index.mlCxaiYE.js";import{u as h}from"./index.esm.XsAbwjVB.js";import{S as g}from"./SettingRow.96ERny3f.js";import{S as y}from"./Scene.tZk0YIWv.js";import{I}from"./index.Dyu1ax5U.js";const S=e((function Matomo(){const{integrations:e}=t(),{t:S}=a(),b=s(e.orderedData,{type:n.Analytics,service:i.Matomo}),{register:U,reset:M,handleSubmit:w,formState:v}=h({mode:"all",defaultValues:{instanceUrl:b?.settings.instanceUrl,measurementId:b?.settings.measurementId}});r.useEffect((()=>{e.fetchPage({type:n.Analytics})}),[e]),r.useEffect((()=>{M({measurementId:b?.settings.measurementId,instanceUrl:b?.settings.instanceUrl})}),[b,M]);const j=r.useCallback((async t=>{try{t.instanceUrl&&t.measurementId?await e.save({id:b?.id,type:n.Analytics,service:i.Matomo,settings:{measurementId:t.measurementId,instanceUrl:t.instanceUrl.replace(/\/?$/,"/")}}):await(b?.delete()),o.success(S("Settings saved"))}catch(a){o.error(a.message)}}),[e,b,S]);return m(y,{title:"Matomo",icon:c(I,{}),children:[c(d,{children:"Matomo"}),c(l,{as:"p",type:"secondary",children:c(u,{children:"Configure a Matomo installation to send views and analytics from the workspace to your own Matomo instance."})}),m("form",{onSubmit:w(j),children:[c(g,{label:S("Instance URL"),name:"instanceUrl",description:S("The URL of your Matomo instance. If you are using Matomo Cloud it will end in matomo.cloud/"),border:!1,children:c(f,{required:!0,placeholder:"https://instance.matomo.cloud/",...U("instanceUrl")})}),c(g,{label:S("Site ID"),name:"measurementId",description:S("An ID that uniquely identifies the website in your Matomo instance."),border:!1,children:c(f,{required:!0,placeholder:"1",...U("measurementId")})}),c(p,{type:"submit",disabled:v.isSubmitting,children:v.isSubmitting?`${S("Saving")}â€¦`:S("Save")})]})]})}));export{S as default};
