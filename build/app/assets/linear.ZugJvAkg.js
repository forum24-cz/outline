import{a_ as n,a$ as t,b0 as r,b1 as e,b2 as i}from"./mermaid.core.tHGlKmnM.js";import{i as a}from"./init.3mU4lpXP.js";function ascending(n,t){return null==n||null==t?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function descending(n,t){return null==n||null==t?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function bisector(n){let t,r,e;function left(n,e,i=0,a=n.length){if(i<a){if(0!==t(e,e))return a;do{const t=i+a>>>1;r(n[t],e)<0?i=t+1:a=t}while(i<a)}return i}return 2!==n.length?(t=ascending,r=(t,r)=>ascending(n(t),r),e=(t,r)=>n(t)-r):(t=n===ascending||n===descending?n:zero,r=n,e=n),{left:left,center:function center(n,t,r=0,i=n.length){const a=left(n,t,r,i-1);return a>r&&e(n[a-1],t)>-e(n[a],t)?a-1:a},right:function right(n,e,i=0,a=n.length){if(i<a){if(0!==t(e,e))return a;do{const t=i+a>>>1;r(n[t],e)<=0?i=t+1:a=t}while(i<a)}return i}}}function zero(){return 0}const o=bisector(ascending).right;bisector((function number$1(n){return null===n?NaN:+n})).center;const c=o;var u=Math.sqrt(50),s=Math.sqrt(10),l=Math.sqrt(2);function tickIncrement(n,t,r){var e=(t-n)/Math.max(0,r),i=Math.floor(Math.log(e)/Math.LN10),a=e/Math.pow(10,i);return i>=0?(a>=u?10:a>=s?5:a>=l?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=u?10:a>=s?5:a>=l?2:1)}function tickStep(n,t,r){var e=Math.abs(t-n)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),a=e/i;return a>=u?i*=10:a>=s?i*=5:a>=l&&(i*=2),t<n?-i:i}function numberArray(n,t){t||(t=[]);var r,e=n?Math.min(t.length,n.length):0,i=t.slice();return function(a){for(r=0;r<e;++r)i[r]=n[r]*(1-a)+t[r]*a;return i}}function genericArray(n,t){var r,e=t?t.length:0,i=n?Math.min(e,n.length):0,a=new Array(i),o=new Array(e);for(r=0;r<i;++r)a[r]=interpolate(n[r],t[r]);for(;r<e;++r)o[r]=t[r];return function(n){for(r=0;r<i;++r)o[r]=a[r](n);return o}}function date(n,t){var r=new Date;return n=+n,t=+t,function(e){return r.setTime(n*(1-e)+t*e),r}}function object(n,t){var r,e={},i={};for(r in null!==n&&"object"==typeof n||(n={}),null!==t&&"object"==typeof t||(t={}),t)r in n?e[r]=interpolate(n[r],t[r]):i[r]=t[r];return function(n){for(r in e)i[r]=e[r](n);return i}}function interpolate(a,o){var c,u=typeof o;return null==o||"boolean"===u?n(o):("number"===u?t:"string"===u?(c=r(o))?(o=c,e):i:o instanceof r?e:o instanceof Date?date:function isNumberArray(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(o)?numberArray:Array.isArray(o)?genericArray:"function"!=typeof o.valueOf&&"function"!=typeof o.toString||isNaN(o)?object:t)(a,o)}function interpolateRound(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function formatDecimalParts(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,e=n.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+n.slice(r+1)]}function exponent(n){return(n=formatDecimalParts(Math.abs(n)))?n[1]:NaN}var f,h=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(n){if(!(t=h.exec(n)))throw new Error("invalid format: "+n);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+""}function formatRounded(n,t){var r=formatDecimalParts(n,t);if(!r)return n+"";var e=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const m={"%":(n,t)=>(100*n).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:function formatDecimal(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)},e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>formatRounded(100*n,t),r:formatRounded,s:function formatPrefixAuto(n,t){var r=formatDecimalParts(n,t);if(!r)return n+"";var e=r[0],i=r[1],a=i-(f=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=e.length;return a===o?e:a>o?e+new Array(a-o+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+formatDecimalParts(n,Math.max(0,t+a-1))[0]},X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function identity$1(n){return n}var p,d,g,y=Array.prototype.map,M=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(n){var t=void 0===n.grouping||void 0===n.thousands?identity$1:function formatGroup(n,t){return function(r,e){for(var i=r.length,a=[],o=0,c=n[0],u=0;i>0&&c>0&&(u+c+1>e&&(c=Math.max(1,e-u)),a.push(r.substring(i-=c,i+c)),!((u+=c+1)>e));)c=n[o=(o+1)%n.length];return a.reverse().join(t)}}(y.call(n.grouping,Number),n.thousands+""),r=void 0===n.currency?"":n.currency[0]+"",e=void 0===n.currency?"":n.currency[1]+"",i=void 0===n.decimal?".":n.decimal+"",a=void 0===n.numerals?identity$1:function formatNumerals(n){return function(t){return t.replace(/[0-9]/g,(function(t){return n[+t]}))}}(y.call(n.numerals,String)),o=void 0===n.percent?"%":n.percent+"",c=void 0===n.minus?"−":n.minus+"",u=void 0===n.nan?"NaN":n.nan+"";function newFormat(n){var s=(n=formatSpecifier(n)).fill,l=n.align,h=n.sign,p=n.symbol,d=n.zero,g=n.width,y=n.comma,v=n.precision,b=n.trim,w=n.type;"n"===w?(y=!0,w="g"):m[w]||(void 0===v&&(v=12),b=!0,w="g"),(d||"0"===s&&"="===l)&&(d=!0,s="0",l="=");var x="$"===p?r:"#"===p&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",N="$"===p?e:/[%p]/.test(w)?o:"",A=m[w],k=/[defgprs%]/.test(w);function format2(n){var r,e,o,m=x,p=N;if("c"===w)p=A(n)+p,n="";else{var S=(n=+n)<0||1/n<0;if(n=isNaN(n)?u:A(Math.abs(n),v),b&&(n=function formatTrim(n){n:for(var t,r=n.length,e=1,i=-1;e<r;++e)switch(n[e]){case".":i=t=e;break;case"0":0===i&&(i=e),t=e;break;default:if(!+n[e])break n;i>0&&(i=0)}return i>0?n.slice(0,i)+n.slice(t+1):n}(n)),S&&0==+n&&"+"!==h&&(S=!1),m=(S?"("===h?h:c:"-"===h||"("===h?"":h)+m,p=("s"===w?M[8+f/3]:"")+p+(S&&"("===h?")":""),k)for(r=-1,e=n.length;++r<e;)if(48>(o=n.charCodeAt(r))||o>57){p=(46===o?i+n.slice(r+1):n.slice(r))+p,n=n.slice(0,r);break}}y&&!d&&(n=t(n,1/0));var F=m.length+n.length+p.length,z=F<g?new Array(g-F+1).join(s):"";switch(y&&d&&(n=t(z+n,z.length?g-p.length:1/0),z=""),l){case"<":n=m+n+p+z;break;case"=":n=m+z+n+p;break;case"^":n=z.slice(0,F=z.length>>1)+m+n+p+z.slice(F);break;default:n=z+m+n+p}return a(n)}return v=void 0===v?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),format2.toString=function(){return n+""},format2}return{format:newFormat,formatPrefix:function formatPrefix2(n,t){var r=newFormat(((n=formatSpecifier(n)).type="f",n)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3))),i=Math.pow(10,-e),a=M[8+e/3];return function(n){return r(i*n)+a}}}}function number(n){return+n}!function defaultLocale(n){return p=formatLocale(n),d=p.format,g=p.formatPrefix,p}({thousands:",",grouping:[3],currency:["$",""]});var v=[0,1];function identity(n){return n}function normalize(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:function constants(n){return function(){return n}}(isNaN(t)?NaN:.5)}function bimap(n,t,r){var e=n[0],i=n[1],a=t[0],o=t[1];return i<e?(e=normalize(i,e),a=r(o,a)):(e=normalize(e,i),a=r(a,o)),function(n){return a(e(n))}}function polymap(n,t,r){var e=Math.min(n.length,t.length)-1,i=new Array(e),a=new Array(e),o=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<e;)i[o]=normalize(n[o],n[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var r=c(n,t,1,e)-1;return a[r](i[r](t))}}function copy(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function transformer(){var n,r,e,i,a,o,c=v,u=v,s=interpolate,l=identity;function rescale(){var n=Math.min(c.length,u.length);return l!==identity&&(l=function clamper(n,t){var r;return n>t&&(r=n,n=t,t=r),function(r){return Math.max(n,Math.min(t,r))}}(c[0],c[n-1])),i=n>2?polymap:bimap,a=o=null,scale}function scale(t){return null==t||isNaN(t=+t)?e:(a||(a=i(c.map(n),u,s)))(n(l(t)))}return scale.invert=function(e){return l(r((o||(o=i(u,c.map(n),t)))(e)))},scale.domain=function(n){return arguments.length?(c=Array.from(n,number),rescale()):c.slice()},scale.range=function(n){return arguments.length?(u=Array.from(n),rescale()):u.slice()},scale.rangeRound=function(n){return u=Array.from(n),s=interpolateRound,rescale()},scale.clamp=function(n){return arguments.length?(l=!!n||identity,rescale()):l!==identity},scale.interpolate=function(n){return arguments.length?(s=n,rescale()):s},scale.unknown=function(n){return arguments.length?(e=n,scale):e},function(t,e){return n=t,r=e,rescale()}}function continuous(){return transformer()(identity,identity)}function tickFormat(n,t,r,e){var i,a=tickStep(n,t,r);switch((e=formatSpecifier(null==e?",f":e)).type){case"s":var o=Math.max(Math.abs(n),Math.abs(t));return null!=e.precision||isNaN(i=function precisionPrefix(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))-exponent(Math.abs(n)))}(a,o))||(e.precision=i),g(e,o);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(i=function precisionRound(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,exponent(t)-exponent(n))+1}(a,Math.max(Math.abs(n),Math.abs(t))))||(e.precision=i-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(i=function precisionFixed(n){return Math.max(0,-exponent(Math.abs(n)))}(a))||(e.precision=i-2*("%"===e.type))}return d(e)}function linearish(n){var t=n.domain;return n.ticks=function(n){var r=t();return function ticks(n,t,r){var e,i,a,o,c=-1;if(r=+r,(n=+n)==(t=+t)&&r>0)return[n];if((e=t<n)&&(i=n,n=t,t=i),0===(o=tickIncrement(n,t,r))||!isFinite(o))return[];if(o>0){let r=Math.round(n/o),e=Math.round(t/o);for(r*o<n&&++r,e*o>t&&--e,a=new Array(i=e-r+1);++c<i;)a[c]=(r+c)*o}else{o=-o;let r=Math.round(n*o),e=Math.round(t*o);for(r/o<n&&++r,e/o>t&&--e,a=new Array(i=e-r+1);++c<i;)a[c]=(r+c)/o}return e&&a.reverse(),a}(r[0],r[r.length-1],null==n?10:n)},n.tickFormat=function(n,r){var e=t();return tickFormat(e[0],e[e.length-1],null==n?10:n,r)},n.nice=function(r){null==r&&(r=10);var e,i,a=t(),o=0,c=a.length-1,u=a[o],s=a[c],l=10;for(s<u&&(i=u,u=s,s=i,i=o,o=c,c=i);l-- >0;){if((i=tickIncrement(u,s,r))===e)return a[o]=u,a[c]=s,t(a);if(i>0)u=Math.floor(u/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,s=Math.floor(s*i)/i}e=i}return n},n}function linear(){var n=continuous();return n.copy=function(){return copy(n,linear())},a.apply(n,arguments),linearish(n)}export{copy as a,bisector as b,continuous as c,linear as l,tickStep as t};
