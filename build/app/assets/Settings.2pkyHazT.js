import{o as e,u as i,a,as as t,at as s,au as m,r as n,Z as r,d as c,j as o,H as u,A as d,am as l,I as p,B as h}from"./index.mlCxaiYE.js";import{u as f}from"./index.esm.XsAbwjVB.js";import{S as b}from"./SettingRow.96ERny3f.js";import{S}from"./Scene.tZk0YIWv.js";import{I as g}from"./index.ebtQGow5.js";const y=e((function Umami(){const{integrations:e}=i(),{t:y}=a(),x=t(e.orderedData,{type:s.Analytics,service:m.Umami}),{register:U,reset:I,handleSubmit:w,formState:D}=f({mode:"all",defaultValues:{umamiDomain:x?.settings.instanceUrl,umamiScriptName:x?.settings.scriptName,umamiWebsiteId:x?.settings.measurementId}});n.useEffect((()=>{e.fetchPage({type:s.Analytics})}),[e]),n.useEffect((()=>{I({umamiWebsiteId:x?.settings.measurementId,umamiDomain:x?.settings.instanceUrl,umamiScriptName:x?.settings.scriptName})}),[x,I]);const N=n.useCallback((async i=>{try{i.umamiDomain&&i.umamiScriptName&&i.umamiWebsiteId?await e.save({id:x?.id,type:s.Analytics,service:m.Umami,settings:{measurementId:i.umamiWebsiteId,instanceUrl:i.umamiDomain.replace(/\/?$/,"/"),scriptName:i.umamiScriptName}}):await(x?.delete()),r.success(y("Settings saved"))}catch(a){r.error(a.message)}}),[e,x,y]);return c(S,{title:"Umami",icon:o(g,{}),children:[o(u,{children:"Umami"}),o(d,{as:"p",type:"secondary",children:o(l,{children:"Configure a Umami installation to send views and analytics from the workspace to your own Umami instance."})}),c("form",{onSubmit:w(N),children:[o(b,{label:y("Instance URL"),name:"umamiDomain",description:y("The URL of your Umami instance. If you are using Umami Cloud it will begin with {{ url }}",{url:"https://cloud.umami.is/"}),border:!1,children:o(p,{required:!0,placeholder:"https://cloud.umami.is/",...U("umamiDomain")})}),o(b,{label:y("Script name"),name:"umamiScriptName",description:y("The name of the script file that Umami uses to track analytics."),border:!1,children:o(p,{required:!0,placeholder:"script.js",...U("umamiScriptName")})}),o(b,{label:y("Site ID"),name:"umamiWebsiteId",description:y("An ID that uniquely identifies the website in your Umami instance."),border:!1,children:o(p,{required:!0,placeholder:"xxx-xxx-xxx-xxx",...U("umamiWebsiteId")})}),o(h,{type:"submit",disabled:D.isSubmitting,children:D.isSubmitting?`${y("Saving")}â€¦`:y("Save")})]})]})}));export{y as default};
