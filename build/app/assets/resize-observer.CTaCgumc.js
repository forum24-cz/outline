var e,t,r=[],n="ResizeObserver loop completed with undelivered notifications.";(t=e||(e={})).BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var i,freeze=function(e){return Object.freeze(e)},o=function(){return function ResizeObserverSize2(e,t){this.inlineSize=e,this.blockSize=t,freeze(this)}}(),s=function(){function DOMRectReadOnly2(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze(this)}return DOMRectReadOnly2.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},DOMRectReadOnly2.fromRect=function(e){return new DOMRectReadOnly2(e.x,e.y,e.width,e.height)},DOMRectReadOnly2}(),isSVG=function(e){return e instanceof SVGElement&&"getBBox"in e},isHidden=function(e){if(isSVG(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},isElement=function(e){var t;if(e instanceof Element)return!0;var r=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},a="undefined"!=typeof window?window:{},c=new WeakMap,u=/auto|scroll/,h=/^tb|vertical/,v=/msie|trident/i.test(a.navigator&&a.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=!1),new o((r?t:e)||0,(r?e:t)||0)},d=freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new s(0,0,0,0)}),calculateBoxSizes=function(e,t){if(void 0===t&&(t=!1),c.has(e)&&!t)return c.get(e);if(isHidden(e))return c.set(e,d),d;var r=getComputedStyle(e),n=isSVG(e)&&e.ownerSVGElement&&e.getBBox(),i=!v&&"border-box"===r.boxSizing,o=h.test(r.writingMode||""),a=!n&&u.test(r.overflowY||""),l=!n&&u.test(r.overflowX||""),f=n?0:parseDimension(r.paddingTop),p=n?0:parseDimension(r.paddingRight),b=n?0:parseDimension(r.paddingBottom),g=n?0:parseDimension(r.paddingLeft),O=n?0:parseDimension(r.borderTopWidth),z=n?0:parseDimension(r.borderRightWidth),R=n?0:parseDimension(r.borderBottomWidth),w=g+p,E=f+b,x=(n?0:parseDimension(r.borderLeftWidth))+z,T=O+R,y=l?e.offsetHeight-T-e.clientHeight:0,S=a?e.offsetWidth-x-e.clientWidth:0,m=i?w+x:0,B=i?E+T:0,C=n?n.width:parseDimension(r.width)-m-S,k=n?n.height:parseDimension(r.height)-B-y,D=C+w+S+x,M=k+E+y+T,N=freeze({devicePixelContentBoxSize:size(Math.round(C*devicePixelRatio),Math.round(k*devicePixelRatio),o),borderBoxSize:size(D,M,o),contentBoxSize:size(C,k,o),contentRect:new s(g,f,C,k)});return c.set(e,N),N},calculateBoxSize=function(t,r,n){var i=calculateBoxSizes(t,n),o=i.borderBoxSize,s=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(r){case e.DEVICE_PIXEL_CONTENT_BOX:return a;case e.BORDER_BOX:return o;default:return s}},l=function(){return function ResizeObserverEntry2(e){var t=calculateBoxSizes(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=freeze([t.borderBoxSize]),this.contentBoxSize=freeze([t.contentBoxSize]),this.devicePixelContentBoxSize=freeze([t.devicePixelContentBoxSize])}}(),calculateDepthForNode=function(e){if(isHidden(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},broadcastActiveObservations=function(){var e=1/0,t=[];r.forEach((function processObserver(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach((function processTarget(t){var r=new l(t.target),i=calculateDepthForNode(t.target);n.push(r),t.lastReportedSize=calculateBoxSize(t.target,t.observedBox),i<e&&(e=i)})),t.push((function resizeObserverCallback(){r.callback.call(r.observer,n,r.observer)})),r.activeTargets.splice(0,r.activeTargets.length)}}));for(var n=0,i=t;n<i.length;n++){(0,i[n])()}return e},gatherActiveObservationsAtDepth=function(e){r.forEach((function processObserver(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function processTarget(r){r.isActive()&&(calculateDepthForNode(r.target)>e?t.activeTargets.push(r):t.skippedTargets.push(r))}))}))},process=function(){var e,t=0;for(gatherActiveObservationsAtDepth(t);r.some((function(e){return e.activeTargets.length>0}));)t=broadcastActiveObservations(),gatherActiveObservationsAtDepth(t);return r.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:n}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=n),window.dispatchEvent(e)),t>0},f=[],queueMicroTask=function(e){if(!i){var t=0,r=document.createTextNode("");new MutationObserver((function(){return f.splice(0).forEach((function(e){return e()}))})).observe(r,{characterData:!0}),i=function(){r.textContent="".concat(t?t--:t++)}}f.push(e),i()},p=0,b={attributes:!0,characterData:!0,childList:!0,subtree:!0},g=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(e){return void 0===e&&(e=0),Date.now()+e},O=!1,z=new(function(){function Scheduler2(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return Scheduler2.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!O){O=!0;var r,n=time(e);r=function(){var r=!1;try{r=process()}finally{if(O=!1,e=n-time(),!p)return;r?t.run(1e3):e>0?t.run(e):t.start()}},queueMicroTask((function ResizeObserver2(){requestAnimationFrame(r)}))}},Scheduler2.prototype.schedule=function(){this.stop(),this.run()},Scheduler2.prototype.observe=function(){var e=this,cb=function(){return e.observer&&e.observer.observe(document.body,b)};document.body?cb():a.addEventListener("DOMContentLoaded",cb)},Scheduler2.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),g.forEach((function(t){return a.addEventListener(t,e.listener,!0)})))},Scheduler2.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),g.forEach((function(t){return a.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},Scheduler2}()),updateCount=function(e){!p&&e>0&&z.start(),!(p+=e)&&z.stop()},R=function(){function ResizeObservation2(t,r){this.target=t,this.observedBox=r||e.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return ResizeObservation2.prototype.isActive=function(){var e,t=calculateBoxSize(this.target,this.observedBox,!0);return e=this.target,isSVG(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},ResizeObservation2}(),w=function(){return function ResizeObserverDetail2(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}}(),E=new WeakMap,getObservationIndex=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},x=function(){function ResizeObserverController2(){}return ResizeObserverController2.connect=function(e,t){var r=new w(e,t);E.set(e,r)},ResizeObserverController2.observe=function(e,t,n){var i=E.get(e),o=0===i.observationTargets.length;getObservationIndex(i.observationTargets,t)<0&&(o&&r.push(i),i.observationTargets.push(new R(t,n&&n.box)),updateCount(1),z.schedule())},ResizeObserverController2.unobserve=function(e,t){var n=E.get(e),i=getObservationIndex(n.observationTargets,t),o=1===n.observationTargets.length;i>=0&&(o&&r.splice(r.indexOf(n),1),n.observationTargets.splice(i,1),updateCount(-1))},ResizeObserverController2.disconnect=function(e){var t=this,r=E.get(e);r.observationTargets.slice().forEach((function(r){return t.unobserve(e,r.target)})),r.activeTargets.splice(0,r.activeTargets.length)},ResizeObserverController2}(),T=function(){function ResizeObserver2(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");x.connect(this,e)}return ResizeObserver2.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");x.observe(this,e,t)},ResizeObserver2.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");x.unobserve(this,e)},ResizeObserver2.prototype.disconnect=function(){x.disconnect(this)},ResizeObserver2.toString=function(){return"function ResizeObserver () { [polyfill code] }"},ResizeObserver2}();export{T as ResizeObserver,l as ResizeObserverEntry,o as ResizeObserverSize};
