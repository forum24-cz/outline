import{n as e,j as t,a as o,d as r,z as n,h as s,a$ as a,b0 as i,o as l,X as c,u as d,b1 as m,r as p,Z as f,aq as u}from"./index.mlCxaiYE.js";import{A as h}from"./Actions.u9jjnQ1W.js";import{C as g,L as y}from"./Item.dGEOVRdT.js";import{T as x}from"./Time.rp9cc_zo.js";import{u as w}from"./useCurrentUser.zlImhYTS.js";import{C as k}from"./InputSelectPermission.lb2lIKIy.js";import{b as C,O as I,T as b}from"./DocumentContext.hhTeDqBR.js";import{u as D}from"./usePolicy.wYF8wJNp.js";function Spinner({color:e,...o}){return t(S,{width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...o,children:t(v,{$color:e,fill:"none",strokeWidth:"2",strokeLinecap:"round",cx:"8",cy:"8",r:"6"})})}const S=e.svg.withConfig({componentId:"sc-vqgnqi-0"})(["@keyframes rotator{0%{transform:rotate(0deg);}100%{transform:rotate(270deg);}}animation:rotator 1.4s linear infinite;margin:4px;"]),v=e.circle.withConfig({componentId:"sc-vqgnqi-1"})(["@keyframes dash{0%{stroke-dashoffset:47;}50%{stroke-dashoffset:11;transform:rotate(135deg);}100%{stroke-dashoffset:47;transform:rotate(450deg);}}stroke:",";stroke-dasharray:46;stroke-dashoffset:0;transform-origin:center;animation:dash 1.4s ease-in-out infinite;"],(e=>e.$color||e.theme.textSecondary));function FileOperationMenu({fileOperation:e,onDelete:l}){const{t:c}=o(),d=D(e),m=C({modal:!0});return r(n,{children:[t(I,{"aria-label":c("Show menu"),...m}),t(k,{...m,"aria-label":c("Export options"),children:t(b,{...m,items:[{type:"link",title:c("Download"),icon:t(s.DownloadIcon,{}),visible:e.type===a.Export&&e.state===i.Complete,href:e.downloadUrl},{type:"separator"},{type:"button",title:c("Delete"),visible:d.delete,icon:t(s.TrashIcon,{}),dangerous:!0,onClick:l}]})})]})}const T=l((({fileOperation:e})=>{const{t:l}=o(),k=w(),C=c(),{dialogs:I,fileOperations:b}=d(),D={[i.Creating]:l("Processing"),[i.Uploading]:l("Processing"),[i.Expired]:l("Expired"),[i.Complete]:l("Completed"),[i.Error]:l("Failed")},S={[i.Creating]:t(Spinner,{}),[i.Uploading]:t(Spinner,{}),[i.Expired]:t(s.ArchiveIcon,{color:C.textTertiary}),[i.Complete]:t(s.DoneIcon,{color:C.accent}),[i.Error]:t(s.WarningIcon,{color:C.danger})},v={[m.JSON]:"JSON",[m.Notion]:"Notion",[m.MarkdownZip]:"Markdown",[m.HTMLZip]:"HTML",[m.PDF]:"PDF"}[e.format],T=e.type===a.Import||e.collectionId?e.name:l("All collections"),j=p.useCallback((async()=>{try{await b.delete(e),e.type===a.Import?f.success(l("Import deleted")):f.success(l("Export deleted"))}catch(t){f.error(t.message)}}),[e,b,l]),E=p.useCallback((async()=>{I.openModal({title:l("Are you sure you want to delete this import?"),content:t(g,{onSubmit:j,savingText:`${l("Deleting")}…`,danger:!0,children:l("Deleting this import will also delete all collections and documents that were created from it. This cannot be undone.")})})}),[I,l,j]),O=e.type===a.Export&&e.state===i.Complete||e.type===a.Import,M=u?"":`. ${l("Check server logs for more details.")}`;return t(y,{title:T,image:S[e.state],subtitle:r(n,{children:[D[e.state]," • ",e.error&&r(n,{children:[e.error,M," • "]}),l("{{userName}} requested",{userName:k.id===e.user.id?l("You"):e.user.name})," ",t(x,{dateTime:e.createdAt,addSuffix:!0,shorten:!0}),v?r(n,{children:[" • ",v]}):"",e.size?r(n,{children:[" • ",e.sizeInMB]}):""]}),actions:O&&t(h,{children:t(FileOperationMenu,{fileOperation:e,onDelete:e.type===a.Import?E:j})})})}));export{T as F,Spinner as S};
